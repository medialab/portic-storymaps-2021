{"version":3,"sources":["contents/en/test-scrolly.mdx","contents/en/part-1.mdx","contents/en/part-2-intro.mdx","contents/fr/partie-2-1.mdx","contents/en/part-2-1.mdx","contents/fr/partie-2-2.mdx","contents/en/part-2-2.mdx","contents/fr/partie-2-3.mdx","contents/en/part-2-3.mdx","contents/fr/partie-3.mdx","contents/en/part-3.mdx","contents/fr/a-propos.mdx","contents/en/about.mdx","components/Loader.jsx","components/DeclineComponent/ProductsDistributionChart.jsx","components/DeclineComponent/LongitudinalTradeChart.jsx","components/DeclineComponent/index.jsx","contents/fr/partie-1.mdx","components/CircularAlluvialComponent/index.js","components/CircularAlluvialComponent/CircularAlluvialComponent.js","components/CircularAlluvialComponent/utils.js","contents/fr/partie-2-intro.mdx","components/Caller/index.js","components/Caller/Caller.js","contents/fr/test-scrolly.mdx","helpers/contexts.js","../ /^/.//.*$/ groupOptions: {} namespace object","components/SvgComponent/SvgComponent.js","components/SvgComponent/index.js","components/VegaComponent/index.js","components/VegaComponent/VegaComponent.js","components/SigmaComponent/reducers.js","helpers/misc.js","components/SigmaComponent/GraphControls.js","components/SigmaComponent/GraphContainer.js","components/SigmaComponent/index.js","components/GeoComponent/index.js","components/GeoComponent/GeoComponent.js","components/TriangleComponent/index.js","components/TriangleComponent/TriangleComponent.js","pages/Home/ports-region-1789.svg","pages/Home/content.mdx","pages/Home/Home.js","pages/Home/index.js","visualizations/Test.js","visualizations/index.js","pages/Atlas/Atlas.js","pages/Atlas/index.js","components/HeaderNav/index.js","components/HeaderNav/HeaderNav.js","components/Loader/Loader.js","pages/PlainPage/index.js","pages/PlainPage/PlainPage.js","components/VisualizationController/index.js","components/VisualizationController/VisualizationController.js","pages/ScrollyPage/index.js","pages/ScrollyPage/ScrollyPage.js","summary.js","App.js","reportWebVitals.js","index.js"],"names":["readingTime","layoutProps","MDXContent","components","props","mdxType","isMDXComponent","tableOfContents","frontMatter","parentName","id","level","title","children","Loader","message","ProductsDistributionChart","data","field","partTreshold","height","barWidth","labelFirst","color","totalValue","sum","map","d","partAcc","dataTillTreshold","sortBy","filter","aggregatedMiscProducts","length","push","maxValue","style","display","flexDirection","justifyItems","i","paddingBottom","boxSizing","value","alignItems","width","backgroundColor","className","float","fontSize","max","margin","product","LongitudinalTradeChart","productsData","absoluteField","shareField","herfindhalField","absoluteLabel","shareLabel","xBand","d3","domain","range","year","padding","herfindhalScale","svgNode","useRef","useEffect","svgPath","current","attr","selectAll","remove","yearTicks","y","concat","append","call","g","tickValues","tickSizeOuter","yAbsolute","nice","select","clone","text","yShare","join","bandwidth","line","defined","x","datum","her1750","her1789","ref","position","textAlign","right","left","PRODUCT_TRADE_PART_TRESHOLD","DeclineComponent","useState","longitudinalData","setLongitudinalData","setProductsData","loadingLR","setLoadingLR","error","setError","axios","get","process","then","response","csvParse","catch","err","toString","region","Fragment","MDXTag","name","CircularAlluvialComponent","filename","sumBy","steps","setData","loading","setLoading","URL","csvString","vizData","spec","step","filters","stepData","reduce","key","groups","groupBy","Object","entries","flows","flow","valueAbs","actualValue","valuePart","nodes","sort","a","b","index","displaceAbs","displacePart","newNodes","node","localDisplaceAbs","localDisplacePart","newNode","newFlow","relativeDisplaceAbs","relativeDisplacePart","nextKey","nextGroups","f","links","stepIndex","displace1Abs","displace1Rel","newLinks","link","newLink","startAbs","startRel","valueRel","prepareAlluvialData","console","log","BAR_WIDTH","stepXScale","scaleLinear","transform","nodesYScale","fill","nodeIndex","nodeHeight","flowIndex","opacity","n","linkIndex","labels","fr","en","Caller","visualizationId","genId","useContext","VisualizationControlContext","activeVisualization","onBlockClick","onRegisterVisualization","onUnregisterVisualization","setTimeout","payload","onClick","e","cx","keys","JSON","stringify","testParam","coucou","React","createContext","DatasetsContext","webpackAsyncContext","req","Promise","resolve","__webpack_require__","o","Error","code","module","exports","SvgComponent","path","alt","src","VegaComponent","newData","VegaLite","DEFAULT_NODE_COLOR","DEFAULT_NODE_SIZE_RANGE","DEFAULT_COLOR_SPACE","cmin","cmax","lmin","lmax","SINGLE_COLOR_PALETTE","usePrevious","generatePalette","count","iwanthue","colorSpace","seed","clustering","GraphControls","rescale","zoomIn","zoomOut","CELL_HEIGHT_SCALE","CELL_WIDTH_SCALE","renderer","getCamera","animatedReset","animatedZoom","animatedUnzoom","GraphContainer","graph","nodeColorVariable","nodeColor","nodeSizeVariable","nodeSize","labelDensity","nodeLabel","onCameraUpdate","cameraPosition","updateTimestamp","sizes","useMemo","res","forEachNode","_node","attributes","size","sizeExtent","extent","extents","min","values","uniq","colors","palette","forEach","option","edgesMap","m","Map","_source","_target","sourceAttributes","targetAttributes","edge","_edgeAttributes","set","sourceNode","targetNode","previousNodeColor","previousNodeSize","previousNodeLabel","previousLabelDensity","nodeReducer","nodeSizeFactor","nodeSizeScale","renderedNode","isNaN","undefined","v","createNodeReducer","edgeReducer","dontColorEdges","el1","el2","renderedEdge","biggerNode","Color","lighten","rgb","string","createEdgeReducer","container","setRenderer","animate","needToRefresh","settings","labelGrid","cell","displayedLabels","Set","refresh","setContainer","useCallback","kill","newRenderer","Renderer","camera","getState","on","state","bind","inputCameraPosition","angle","ratio","setGraph","setCameraPosition","find","prop","gexfString","gexf","parse","Graph","updateNode","_err","cam","GeoComponent","dataFilename","backgroundFilename","label","markerSize","markerColor","showLabels","centerOnRegion","backgroundData","setBackgroundData","colorsMap","setColorsMap","loadingData","setLoadingData","loadingBackground","setLoadingBackground","dataURL","markerData","coordsMap","mark","latitude","longitude","grouped","colorValues","thatColorsMap","sizeScale","backgroundURL","bgData","projection","geoEqualEarth","scale","center","fitSize","translate","viewBox","border","features","geoPath","stroke","strokeWidth","cy","r","fontWeight","TriangleComponent","port","test","Home","lang","match","params","Helmet","Test","datasets","datasetName","VisualizationContainer","relevantDatasets","viz","visualizationsList","datasetsIds","split","trim","cur","VisualizationFocus","visualization","visualizationsMap","visualizations","Atlas","history","useHistory","shownVisualization","visualizationIndex","pathname","HeaderNav","routes","onLangChange","location","useLocation","paramsLang","includes","to","titles","inputRoute","route","percentsLoaded","PlainPage","Content","contentsURL","fallback","VisualizationController","visProps","omit","ScrollyPage","ContentSync","setActiveVisualization","useReducer","newState","setVisualizations","scrollY","useScrollYPosition","found","DISPLACE_Y","window","innerHeight","visualizationEntries","getBoundingClientRect","Provider","finalParams","newVis","thatId","summary","contents","contentsProcessed","TestScrollyFr","testScrollyEn","Component","Part1Fr","Part1En","Part2IntroFr","Part2IntroEn","Part21Fr","Part21En","Part22Fr","Part22En","Part23Fr","Part23En","Part3Fr","Part3En","AboutFr","AboutEn","LANGUAGES","App","setDatasets","loadingFraction","setLoadingFraction","datasetsNames","datasetIndex","reject","url","onDownloadProgress","progressEvent","status","loaded","total","globalFraction","inputData","loadedData","pop","tsvParse","newDatasets","renderRoute","ThatComponent","ln","otherLang","pathOtherLang","routeItem","lazy","exact","component","Wrapper","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7499ebe3.chunk.js","sourcesContent":["\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.005,\"time\":300,\"words\":1}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`henlow`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.015,\"time\":900,\"words\":3}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`Part 1 intro`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.015,\"time\":900,\"words\":3}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`Part 2 TODO`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"9 min read\",\"minutes\":8.19,\"time\":491400,\"words\":1638}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h2 {...{\n      \"id\": \"21---la-rochelle-et-le-commerce-triangulaire\"\n    }}>{`2.1 - La Rochelle et le commerce triangulaire`}</h2>\n    <h3 {...{\n      \"id\": \"ecriture-du-texte\"\n    }}>{`Ecriture du texte`}</h3>\n    <p>{`L’écriture tressée avec les visualisations secondaires de l’axe 2.1 se passe ici.`}</p>\n    <p>{`Au XVIIIe siècle, les colonies antillaises augmentent très considérablement leur production de sucre, café, indigo et produits tinctoriaux, pour répondre à une demande européenne fortement orientée à la hausse. La croissance de la production passe par un nombre de plus en plus élevé d’unités de production, appelées plantations, qui font un recours massif à une main-d’œuvre d’esclaves. Si une partie significative de ceux-ci sont nés aux Amériques, les Européens les déportent aussi par centaines de milliers depuis l’Afrique dans le cadre de la traite négrière. Ce commerce transatlantique d’êtres humains, achetés sur les côtes d’Afrique par les négriers européens, a commencé au XVIe siècle, mais il atteint son apogée au XVIIIe siècle, lorsque 6 millions d’Africains sont apportés aux Amériques. La moitié d’entre eux est vendue aux Antilles. On estime à 1.25 millions `}{`[`}{`Silvia: à vérifier`}{`]`}{` le nombre d’Africains introduits dans les colonies françaises au XVIIIe siècle. La principale destination est la colonie de Saint-Domingue (aujourd’hui Haïti) qui compte, à la veille de la grande révolte d’esclaves de 1791, un demi-million d’esclaves, dont plus de la moitié sont nés en Afrique.`}</p>\n    <p>{`L’activité négrière est aux mains de l’initiative privée d’armateurs qui espèrent réaliser un profit lors de la revente des esclaves. Si Nantes est le principal port négrier en France, La Rochelle a joué un rôle significatif, tout particulièrement dans les années 1730–1740 : entre 1713 et 1744, La Rochelle arme 15% des expéditions négrières, sa part tombe à 11% après la perte du Canada, en sorte que si La Rochelle est le deuxième port négrier le plus important en France avant 1763, il passe au 4e rang par la suite.  Ce déclin s’inscrit dans la perspective plus large du déclin relatif de La Rochelle au sein de l’espace Atlantique français. Port de premier plan au XVIIe siècle, il connaît un déclin relatif dans la première moitié du XVIIIe siècle, qui devient absolu avec la perte du Canada. Dès lors et après une période de flottement, le port de la Rochelle se tourne résolument vers la traite négrière pour conserver une place secondaire, mais importante jusqu’à la Révolution.`}</p>\n    <p>{`Aussi,les armateurs rochelais passent de 4.3 armements négriers par an pour la période 1713–1744 à 12.5 armements par an dans la décennie 1783–1793. Pendant cette dernière, la traite est véritablement de l’activité principale, voire presque exclusive, des armateurs rochalais: sur un total de 200 départs depuis La Rochelle de navires rochelais, un peu plus de la moitié des tonnages se dirigent vers l’Afrique (42%  du total) ou vers les colonies antillaises ou les Mascareignes, le reste se répartissant entre Terre-Neuve et Saint-Pierre-et-Miquelon (9.2%) La part des armements vers l’étranger est insignifiante (0.2%), et celle hors des ports limitrophes (Aunis, Poitou, Saintonge ne dépasse pas le 5%. Les trois quarts de la trentaine de navires rochelais dépassant le 50 tx `}{`[`}{`50–827 tonneaux`}{`]`}{` sortie du port de La Rochelle en 1789 se consacrent au commerce transatlantique et négrier.`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt24\"\n      }}>{`[`}{`x`}{`]`}</a><a parentName=\"p\" {...{\n        \"href\": \"#cmnt25\"\n      }}>{`[`}{`y`}{`]`}</a></p>\n    <p>{`Les données de la Balance du commerce confirment la centralité du commerce colonial et négrier : en 1789, les exports vers les colonies représentent environ 85% du total (en valeur) des exports du bureau de La Rochelle, les 15% restants pour l’étranger et les ports francs.`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image7.png\",\n        \"alt\": null\n      }}></img><a parentName=\"p\" {...{\n        \"href\": \"#cmnt26\"\n      }}>{`[`}{`z`}{`]`}</a></p>\n    <p>{`Alors que dans la plupart des ports négriers français, la part des armements négriers est nettement inférieure à celle des armements en droiture vers les Antilles, cela n’est pas le cas à La Rochelle, où les trois quarts des expéditions de 1787 destinées à approvisionner les Antilles en hommes ou en produits sont des négriers. Comme à Honfleur, il y a donc clairement, en matière de trafics transatlantiques,  une spécialisation négrière de l’armement rochelais. Par ailleurs, et contrairement aux autres ports français  (Marseille, Bordeaux, Nantes, Rouen/Le Havre) qui font le commerce avec les Amériques, La Rochelle a une préférence quasi-exclusive pour Saint-Domingue où plusieurs grandes familles de la ville (Belin, Garesché, Poupet Rasteau) sont très bien implantées.`}</p>\n    <p>{`En 1789, les 12 négriers partis de La Rochelle sont tous rochelais. Rochefort arme pour sa part 3 autres négriers.`}</p>\n    <p>{`Au total, donc une XXXaine de navires reviennent à La Rochelle depuis les colonies, soit en droiture, soit de retour d’une expédition négrière (Tarrade compléter).`}</p>\n    <p>{`Les négociants rochelais semblent s’être taillés une position forte dans le marché du café.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=https://drive.google.com/drive/folders/1vv6zi6QJVN203lZPTkRjLrgupEvzNW21&sa=D&source=editors&ust=1622018549204000&usg=AOvVaw0uzivLoaZSrxQCfkOafTzb\"\n      }}>{`https://drive.google.com/drive/folders/1vv6zi6QJVN203lZPTkRjLrgupEvzNW21`}</a></p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image21.png\",\n        \"alt\": null\n      }}></img></p>\n    <p>{`idées pour suite`}</p>\n    <ul>\n      <li parentName=\"ul\">{`discuter investissement/ investisseurs et impact pour la région`}</li>\n      <li parentName=\"ul\">{`discours Chambre de commerce`}<a parentName=\"li\" {...{\n          \"href\": \"#cmnt27\"\n        }}>{`[`}{`aa`}{`]`}</a><a parentName=\"li\" {...{\n          \"href\": \"#cmnt28\"\n        }}>{`[`}{`ab`}{`]`}</a><a parentName=\"li\" {...{\n          \"href\": \"#cmnt29\"\n        }}>{`[`}{`ac`}{`]`}</a><a parentName=\"li\" {...{\n          \"href\": \"#cmnt30\"\n        }}>{`[`}{`ad`}{`]`}</a></li>\n    </ul>\n    <p>{`L’intérêt du négoce rochelais pour les questions liées au commerce colonial et négrier apparaît aussi par l’indexation faite au marges des registres de la Chambre de commerce de La Rochelle. Dans la seule année 1789, le commerce d’Afrique est discuté à une trentaine de reprises, les colonies reviennent à une 50 des reprises, le commerce de l’Inde à 9; à titre de comparaison, le commerce avec l’étranger est abordé 11 fois, et la pêche (avec notamment la question de la concurrence et de l’admission de la pêche états-unienne, 17 fois. Parmi les produits indexés au marge des registres de délibérations,  les comestibles sont mentionnés 16 fois, l’eau-de-vie et le vin 6, les sucres et les raffineries 8, le charbon de terre 3. On mesure clairement, en dépit d’un critère peu dégrossi, que le regard des membres de la Chambre de commerce est clairement rivé sur les colonies et à la traite. (AdCharenteMaritime, 41 ETP 8: sujet = terme marqué en marge des délibérations) `}{`[`}{`NB: il faudra affiner en regardant le contenu….)`}</p>\n    <p>{`Si la question de la traite est absente des cahiers de doléances de la région `}{`[`}{`préciser leur nombre et fournir un % approximatif de leur complétude par rapport à tous ceux rédigés?`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt31\"\n      }}>{`[`}{`ae`}{`]`}</a>{`]`}{`, la défense des intérêts coloniaux apparaît, significativement, uniquement dans le cahier de doléances du Tiers-état de la ville de La Rochelle, dont les représentants envoyés à Versailles “demanderont la révocation de l’arrêt rendu au conseil du roi, le 30 août 1784, concernant le commerce étranger dans les colonies, et le rétablissement des dispositions des lettres patentes de 1717 et 1727, auxquelles on est redevable des progrès qu’ont faits la navigation françoise et la culture des isles françoises de l’Amérique”; par ailleurs, ils  “demanderont la suppression de l’entrepôt et des droits actuels de consommation sur les sucres, cafés et l’indigo venant des colonies, et qu’il soit substitué, à l’entrée de la totalité de ces denrées dans tous les ports du roïaume, un droit uniforme `}{`[`}{`…`}{`]`}{` : que le terrage des sucres étant défavorable à la navigation, s’il n’est pas possible de l’interdire entièrement dans nos colonies, comme il l’est dans les colonies anglaises, il soit au moins défendu de …`}{`[`}{`vérifier jonction des 2 extraits.`}{`]`}{` l’étendre davantage par de nouveaux établissemens, et que, les sucres bruts devant être, ainsi que le coton, considérés comme matière première, il soit mis un droit à la sortie du roïaume des sucres bruts, assez sensible pour que la plus grande quantité de cette matière soit conservée en France et serve à relever et à soutenir les raffineries et à procurer du travail, puisque c’est dans ces vues que le gouvernement d’Angleterre interdit rigoureusement la sortie en nature des sucres bruts importés de ses colonies…”. Enfin “Les députés demanderont la révocation de l’arrêt du 14 avril 1785 , qui a créé une nouvelle compagnie des Indes `}{`[`}{`46 note d’origine, à regarder si on garde les citations`}{`]`}{`, et de celui pour l’admission des étrangers dans les isles de France et de Bourbon.”`}</p>\n    <p>{`Il faut observer que la participation rocheloise à la navigation au-delà du cap de Bonne-Espérance est modeste: l’état des exportations de 1789, n’indique que 38060 livres tournois exportés vers l’Inde, et rien vers les Mascareignes (ANOM, COl F 2B 14, tableau 28`}{`]`}{`. Ces données sont toutefois incompatibles avec l’envoi du Henri IV à l’île de France et à l’île Bourbon, le 9 mai 1789 `}{`[`}{`vérifié chez Toussaint, p. 291: il y arrive en février 1790 et ce n’est pas un négrier`}{`]`}{`. En 1787, ce sont trois armements vers les Mascareignes qui partent de La Rochelle: une certaine diversification des armements coloniaux apparaît donc, ici comme à Bordeaux, dans les années 1780, lorsque les profits du commerce antillais incitent à chercher des investissements plus rentables.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`vérifier si cahiers de doléances en parlent.`}</li>\n    </ul>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image11.png\",\n        \"alt\": null\n      }}></img></p>\n    <h3 {...{\n      \"id\": \"orientations-sur-la-visualisation-principale-spécifique-à-la-sous-partie\"\n    }}>{`Orientations sur la visualisation principale spécifique à la sous-partie`}</h3>\n    <p>{`L’enjeu n’est pas de se focaliser sur la forme exacte, mais sur les objectifs de cette (ces)  visualisation(s), qui nous guideront lors de la production les 27 et 28 mai.`}</p>\n    <p>{`Si vous êtes une personne référente / un contributeur important de cet axe, merci d’indiquer si vous avez pu lire / amender les tableaux objectifs / données dans leurs colonnes “Validation” respectives`}</p>\n    <p>{`Objectifs de la visualisation`}</p>\n    <p>{`Validation`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`montrer la prise d’importance de la traite et du commerce colonial après la perte du Canada selon deux perspectives :`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`coupes 1750/1789`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`tendance sur la période 1750–1789`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`montrer la distinction mais aussi l’interdépendance entre commerce colonial et traite négrière stricto sensu (?)`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`montrer la spécialisation de La Rochelle et de Rochefort dans ce commerce dans les années 1780/période précédente`}</p>\n      </li>\n    </ul>\n    <p>{`Jeux d’échelle : on compare au niveau de la Direction des Fermes et au niveau national`}</p>\n    <p>{`garder regard dans la direction des Fermes de La Rochelle :`}</p>\n    <p>{`(pour la traite négrière : on n’a un seul port dans la région qui a cette activité, pourtant ce n’est qu’un port de second rang au niveau national): on peut le montrer au niveau de la valeur des échanges et au niveau de la navigation`}</p>\n    <p>{`Données utilisables pour la(les) visualisation(s) ?`}</p>\n    <p>{`Données à consolider ?`}</p>\n    <p>{`Données manquantes ?`}</p>\n    <p>{`Validation`}</p>\n    <p>{`Classification Toflit18 “réexportations” (avec “colonies françaises” pour les réexports sans origine spécifiée)`}</p>\n    <p>{`comparaison nationale (si données Navigo on ne peut prendre que 1787) NB: pour la traite on a slavevoyges;`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  {\n    id: \"21---la-rochelle-et-le-commerce-triangulaire\",\n    level: 2,\n    title: \"2.1 - La Rochelle et le commerce triangulaire\",\n    children: [\n        {\n              id: \"ecriture-du-texte\",\n              level: 3,\n              title: \"Ecriture du texte\",\n              children: [\n                      \n                    ]\n            },\n      {\n              id: \"orientations-sur-la-visualisation-principale-spécifique-à-la-sous-partie\",\n              level: 3,\n              title: \"Orientations sur la visualisation principale spécifique à la sous-partie\",\n              children: [\n                      \n                    ]\n            }\n      ]\n  }\n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.015,\"time\":900,\"words\":3}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`Part 2.1 intro`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"2 min read\",\"minutes\":1.425,\"time\":85500,\"words\":285}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h2 {...{\n      \"id\": \"22---le-commerce-de-leau-de-vie\"\n    }}>{`2.2 - le commerce de l’eau-de-vie`}</h2>\n    <h3 {...{\n      \"id\": \"ecriture-du-texte\"\n    }}>{`Ecriture du texte`}</h3>\n    <p>{`L’écriture tressée avec les visualisations secondaires de l’axe 2.2 se passe ici.`}</p>\n    <p>{`total exportations eau-de-vie depuis la France et destinations pour mesurer part direction de la Rochelle (en précisant le bureau des Fermes concernés)`}</p>\n    <p>{`Les congés de navigation ne sont malheureusement pas de beaucoup de secours pour identifier les flux d’eau-de-vie. En effet, le greffier du port de Tonnay-Charente ne prend pas le soin d’annoter les cargaisons (il le fait 12 fois sur un total de 601 départs): nous avons donc un aperçu global de la navigation, sans pouvoir distinguer la nature des produits.`}</p>\n    <p>{`Vérifier avec toflit si données navigation 1789 sont conjoncturelles :  la crise céréalière qui empêche de distiller les céréales en Angleterre joue-t-elle la-dedans ? -> voir valeur export eau-de-vie de la direction de La Rochelle dans le temps), `}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt32\"\n      }}>{`[`}{`af`}{`]`}</a></p>\n    <h3 {...{\n      \"id\": \"orientations-sur-la-visualisation-principale-spécifique-à-la-sous-partie\"\n    }}>{`Orientations sur la visualisation principale spécifique à la sous-partie`}</h3>\n    <p>{`L’enjeu n’est pas de se focaliser sur la forme exacte, mais sur les objectifs de cette (ces)  visualisation(s), qui nous guideront lors de la production les 27 et 28 mai.`}</p>\n    <p>{`Si vous êtes une personne référente / un contributeur important de cet axe, merci d’indiquer si vous avez pu lire / amender les tableaux objectifs / données dans leurs colonnes “Validation” respectives`}</p>\n    <p>{`Objectifs de la visualisation`}</p>\n    <p>{`Validation`}</p>\n    <ul>\n      <li parentName=\"ul\">{`montrer l’absence de concurrence sur le commerce de ce produit`}<a parentName=\"li\" {...{\n          \"href\": \"#cmnt33\"\n        }}>{`[`}{`ag`}{`]`}</a><a parentName=\"li\" {...{\n          \"href\": \"#cmnt34\"\n        }}>{`[`}{`ah`}{`]`}</a></li>\n      <li parentName=\"ul\">{`montrer le “circuit britannique” (des commerçants britanniques qui reviennent dans des ports britanniques)`}</li>\n      <li parentName=\"ul\">{`(question) pertinent de montrer un gain d’importance en longitudinal ?`}<a parentName=\"li\" {...{\n          \"href\": \"#cmnt35\"\n        }}>{`[`}{`ai`}{`]`}</a><a parentName=\"li\" {...{\n          \"href\": \"#cmnt36\"\n        }}>{`[`}{`aj`}{`]`}</a></li>\n    </ul>\n    <p>{`Données utilisables pour la(les) visualisation(s) ?`}</p>\n    <p>{`Données à consolider ?`}</p>\n    <p>{`Données manquantes ?`}</p>\n    <p>{`Validation`}</p>\n    <p>{`Toflit sûr`}</p>\n    <p>{`Navigo : eau de vie n’apparaît que très rarement dans les cargaisons`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  {\n    id: \"22---le-commerce-de-leau-de-vie\",\n    level: 2,\n    title: \"2.2 - le commerce de l’eau-de-vie\",\n    children: [\n        {\n              id: \"ecriture-du-texte\",\n              level: 3,\n              title: \"Ecriture du texte\",\n              children: [\n                      \n                    ]\n            },\n      {\n              id: \"orientations-sur-la-visualisation-principale-spécifique-à-la-sous-partie\",\n              level: 3,\n              title: \"Orientations sur la visualisation principale spécifique à la sous-partie\",\n              children: [\n                      \n                    ]\n            }\n      ]\n  }\n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.015,\"time\":900,\"words\":3}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`Part 2.2 TODO`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"3 min read\",\"minutes\":2.615,\"time\":156900,\"words\":523}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h2 {...{\n      \"id\": \"23---marennes-et-le-commerce-du-sel\"\n    }}>{`2.3 - Marennes et le commerce du sel`}</h2>\n    <h3 {...{\n      \"id\": \"ecriture-du-texte\"\n    }}>{`Ecriture du texte`}</h3>\n    <p>{`L’écriture tressée avec les visualisations secondaires de l’axe 2.3 se passe ici.`}</p>\n    <p>{`…`}</p>\n    <p>{`Denrée pondéreuse de faible valeur, `}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt37\"\n      }}>{`[`}{`ak`}{`]`}</a>{`le sel voyage dès que cela est possible par voie maritime.`}</p>\n    <p>{`Les côtes de la région étudiée sont, avec celles du sud de la Bretagne, de très grands producteurs de sel. Les marchés sont aussi bien nationaux - avec une demande soutenue notamment dans les ports de la Manche qui arment à la grande pêche - que vers les pays de l’Europe du Nord, qui s’approvisionnent également au Portugal (Setubal).`}</p>\n    <p>{`Les données sur la navigation ne précisent pas les quantités exportées, mais dans la mesure où les navires qui le transportent sortent souvent chargés entièrement de sel, on peut de manière approximative additionner le total des tonnages des navires chargés de sel pour avoir un ordre de grandeur des trafics. Parmi les ports exportateurs, la primauté revient incontestablement à Marennes: en 1787: le tonnage additionné de navires sortis de ports français avec du sel y est de plus du double qu’à Ars-en-Ré. Même en prenant en compte la surévaluation des tonnages de navires par l’amirauté de Marennes que nous avons constatée en comparant le tonnage d’un même navire relevé en plusieurs ports, Marennes demeure le principal fournisseur de sel en France. La carte indique le tonnage total des navires sortis chargés du sel dans les ports de la France atlantique et leurs destinations.`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image19.png\",\n        \"alt\": null\n      }}></img></p>\n    <p>{`L’exportation de sel est en outre une activité quasi exclusive : sur 1174 départs en 1787, 990 ont chargé du sel. En 1789, ce sont 1301 sur 1481. `}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt38\"\n      }}>{`[`}{`al`}{`]`}</a><a parentName=\"p\" {...{\n        \"href\": \"#cmnt39\"\n      }}>{`[`}{`am`}{`]`}</a></p>\n    <p>{`Les destinations des navires chargés de sel partis de Marennes montrent que le marché national est nettement plus important que les marchés étrangers additionnés.`}</p>\n    <p>{`Pistes possibles:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`dvp texte sur marchés extérieurs avec valeur et quantités (Toflit) et faire calcul valeur/tx`}</li>\n      <li parentName=\"ul\">{`regarder si Chambre de commerce`}<a parentName=\"li\" {...{\n          \"href\": \"#cmnt40\"\n        }}>{`[`}{`an`}{`]`}</a>{` et cahiers de doléances parlent du commerce du sel`}<a parentName=\"li\" {...{\n          \"href\": \"#cmnt41\"\n        }}>{`[`}{`ao`}{`]`}</a><a parentName=\"li\" {...{\n          \"href\": \"#cmnt42\"\n        }}>{`[`}{`ap`}{`]`}</a></li>\n      <li parentName=\"ul\">{`Piste: vérifier qui, parmi les ports exportateurs du sel, ont de liens forts avec l’étranger et mettre cela en relation, éventuellement, aux tirants d’eau - tonnage moyen des navires exportateurs par destination et par port de départ. En clair: est-ce que Marennes exporte plus vers l’étranger que vers le marché national comparé aux autres ports qui vendent du sel? ici on a besoin de l’expertise de Thierry`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"orientations-sur-la-visualisation-principale-spécifique-à-la-sous-partie\"\n    }}>{`Orientations sur la visualisation principale spécifique à la sous-partie`}</h3>\n    <p>{`L’enjeu n’est pas de se focaliser sur la forme exacte, mais sur les objectifs de cette (ces)  visualisation(s), qui nous guideront lors de la production les 27 et 28 mai.`}</p>\n    <p>{`Si vous êtes une personne référente / un contributeur important de cet axe, merci d’indiquer si vous avez pu lire / amender les tableaux objectifs / données dans leurs colonnes “Validation” respectives`}</p>\n    <p>{`Objectifs de la visualisation`}</p>\n    <p>{`Validation`}</p>\n    <ul>\n      <li parentName=\"ul\">{`montrer l’absence de concurrence sur ce produit (au niveau national et régional)`}</li>\n      <li parentName=\"ul\">{`montrer l’existence de circuits : triplets départ/destination/pavillon de navires`}</li>\n      <li parentName=\"ul\">{`(question) pertinent de montrer un gain d’importance en longitudinal ?`}<a parentName=\"li\" {...{\n          \"href\": \"#cmnt43\"\n        }}>{`[`}{`aq`}{`]`}</a><a parentName=\"li\" {...{\n          \"href\": \"#cmnt44\"\n        }}>{`[`}{`ar`}{`]`}</a></li>\n    </ul>\n    <p>{`Données utilisables pour la(les) visualisation(s) ?`}</p>\n    <p>{`Données à consolider ?`}</p>\n    <p>{`Données manquantes ?`}</p>\n    <p>{`Validation`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  {\n    id: \"23---marennes-et-le-commerce-du-sel\",\n    level: 2,\n    title: \"2.3 - Marennes et le commerce du sel\",\n    children: [\n        {\n              id: \"ecriture-du-texte\",\n              level: 3,\n              title: \"Ecriture du texte\",\n              children: [\n                      \n                    ]\n            },\n      {\n              id: \"orientations-sur-la-visualisation-principale-spécifique-à-la-sous-partie\",\n              level: 3,\n              title: \"Orientations sur la visualisation principale spécifique à la sous-partie\",\n              children: [\n                      \n                    ]\n            }\n      ]\n  }\n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.015,\"time\":900,\"words\":3}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`Part 2.3 TODO`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"17 min read\",\"minutes\":16.27,\"time\":976200,\"words\":3254}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h1 {...{\n      \"id\": \"partie-3---la-rochelle-port-dominant-mais-pas-structurant\"\n    }}>{`Partie 3 - La Rochelle, port dominant mais pas structurant`}</h1>\n    <h3 {...{\n      \"id\": \"ecriture-du-texte\"\n    }}>{`Ecriture du texte`}</h3>\n    <p>{`L’écriture tressée avec les visualisations secondaires de l’axe 3 se passe ici.`}</p>\n    <p>{`Jusqu’à la perte des colonies nord-américaines, le port de La Rochelle a cultivé une certaine spécificité géographique. Quoiqu’il pratiquait, comme la presque totalité des ports atlantiques,  le commerce antillais et négrier, une part importante et qui a progressivement  augmenté jusqu’à représenter plus de la moitié de ses armements pour les colonies dans les années 1750 était constitué par le commerce nord-américain - Canada, Louisiane et pêcheries de Terre-Neuve. Cette spécificité géographique a également influé sur sa spécialisation par produits. Le commerce des fourrures est ainsi une spécialité rochelaise jusqu’au début des années 1760. Les fourrures étaient importées non seulement du Canada, mais aussi de la Louisiane, porte de sortie des peaux de l’Ohio. Ces fourrures qui étaient pour partie  ré-exportées en France et en Europe (principalement en Allemagne et en Suisse). Une part importante, les peaux de castors en particulier, n’étaient pas ré-exportées, mais alimentaient l’industrie de chamoiserie niortaise et d’autres localités françaises. En retour, les Rochelais approvisionnaient les Canadiens et la Louisiane en vivres, matières premières et en produits manufacturés. L’Amérique du Nord était donc un débouché important et facile pour les céréales de la région, les étoffes locales de basse qualité et, dans une moindre mesure, le sel nécessaire aux pêcheries de Terre-Neuve. Ainsi, ce commerce quoique modeste avant les années 1740 fournissait des volumes importants d’emploi dans les trois secteurs de l’économie à la région.`}</p>\n    <p>{`Avant 1748, le commerce des Antilles en droiture et la traite négrière continuaient néanmoins à dominer le commerce de la Direction de la Rochelle en valeur, étant donné le dynamisme limité de la demande émanant de l’Amérique du Nord. Mais, dès la fin de la guerre de Succession d’Autriche, s’ouvre une période de croissance exceptionnelle pour le commerce avec l’Amérique du Nord. Sur la période 1748–1758, La Rochelle reçoit annuellement plus de 1 million 300 mille livres de peaux d’Amérique du Nord, soit presque autant que de sucre des Antilles (1 million 450 mille livres). Le nombre d’armements à destination du Canada est multiplié par deux alors que ceux pour la Louisiane augmente de moitié. Par rapport aux années précédant la guerre, le trafic lié au commerce triangulaire baisse en moyenne d’un quart pour les Antilles et de plus de moitié pour la traite, destinations pour lesquelles les envois rochelais sont directement en concurrence avec des ports comme Bordeaux, Nantes, Rouen et même Dunkerque et Marseille. A l’inverse, les rochelais ont un quasi monopole de fait pour la Louisiane qui n’intéresse guère les ports plus importants et seul Bordeaux les concurrence pour l’approvisionnement du Canada. Par ailleurs, ces deux destinations offraient des possibilités complémentaires. D’un côté, le commerce à destination du Canada pouvait se transformer en commerce triangulaire inversé - La Rochelle-Canada-Antilles - lorsque les capitaines rochelais trouvaient au Canada de quoi ravitailler les îles à sucre en morue salée et, plus rarement, en céréales. La Louisiane permettait également de réaliser des opérations de contrebande avec les colons espagnols, offrant la possibilité de riches retours sous forme de piastres (Augeron : 2004; Mathieu : 1986).`}</p>\n    <p>{`Ce commerce de niche, limité en volume, mais créateur d’emplois locaux et, au milieu du siècle, facteur d’un dynamisme certain va s’écrouler avec la perte des colonies françaises nord-américaines la fin de la Guerre de Sept ans. Cette perte va déstructurer durablement le commerce rochelais qui va perdre ses marchés privilégiés et sa position dominante au sein du réseau portuaire régional. En 1789, le commerce du port de la Rochelle est quasi-exclusivement colonial - près de 90% de ses exportations en valeur sont destinés à la Traite africaine et aux Antilles.`}</p>\n    <p>{`Cette évolution la conséquence de plusieurs contraintes qui se renforcent: la baisse de la capitalisation des négociants rochelais, conséquence directe de la vague de faillites qui secouent le milieu à la fin de la Guerre de Sept Ans; la fermeture des marchés nord-américains subventionnés qui auraient permis un rebond rapide; la forte concurrence des autres ports sur la destination antillaise. Il ne restait donc que la traite négrière. Pour l’animer, les négociants rochelais se procurent les marchandises nécessaires à ce commerce dans toute la France et l’Europe et ne se fournissent que très peu dans l’arrière-pays rochelais. Le port apparaît donc comme une pièce rapportée, alors que la faiblesse des négociants locaux leur interdit désormais de .`}</p>\n    <p>{`Valeur des exports du bureau de La Rochelle à destination des colonies:`}</p>\n    <p>{`1 865 652 livres tournois`}</p>\n    <p>{`Valeur des exports du bureau de La Rochelle à destination du reste du monde (y compris local): 240 500`}</p>\n    <p>{`Les exportations du bureau de La Rochelle pour les colonies et les traite représente 88,58% du total des exportations`}</p>\n    <p>{`Pour montrer que La Rochelle ne structure pas région, faire voir faible impact sur région:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`ce qui rentre des colonies en ressort (visu reexport/pas reexport)`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`étudier et visualiser origines des produits exportés pour traite et commerce colonial`}</p>\n        <p parentName=\"li\">{`Graphique extrait de slavevoyages: nb expéditions négrières parties de La Rochelle + Rochefort: La Rochelle ne retrouve pas les niveaux des années 1740`}<a parentName=\"p\" {...{\n            \"href\": \"#cmnt45\"\n          }}>{`[`}{`as`}{`]`}</a><a parentName=\"p\" {...{\n            \"href\": \"#cmnt46\"\n          }}>{`[`}{`at`}{`]`}</a><a parentName=\"p\" {...{\n            \"href\": \"#cmnt47\"\n          }}>{`[`}{`au`}{`]`}</a>{`…`}</p>\n      </li>\n    </ul>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image13.png\",\n        \"alt\": null\n      }}></img><a parentName=\"p\" {...{\n        \"href\": \"#cmnt48\"\n      }}>{`[`}{`av`}{`]`}</a><a parentName=\"p\" {...{\n        \"href\": \"#cmnt49\"\n      }}>{`[`}{`aw`}{`]`}</a></p>\n    <p>{`et pour comparaison, voici Bordeaux`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image12.png\",\n        \"alt\": null\n      }}></img></p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image3.png\",\n        \"alt\": null\n      }}></img></p>\n    <p>{`Tonnage au départ des ports des différentes provinces en 1787, agrégé suivant que la destination est au sein de la même province (local à droite) ou en dehors (externe à gauche)`}</p>\n    <h3 {...{\n      \"id\": \"orientations-sur-la-visualisation-principale\"\n    }}>{`Orientations sur la visualisation principale`}</h3>\n    <p>{`L’enjeu n’est pas de se focaliser sur la forme exacte, mais sur les objectifs de cette visualisation, qui nous guideront lors de la production les 27 et 28 mai.`}</p>\n    <p>{`Si vous êtes une personne référente / un contributeur important de cet axe, merci d’indiquer si vous avez pu lire / amender les tableaux objectifs / données dans leurs colonnes “Validation” respectives`}</p>\n    <p>{`Objectifs de la visualisation`}</p>\n    <p>{`Validation`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`(port structurant = central vis-à-vis des ports de sa région) comparer la structure de la DFLR avec celle d’autres Directions pour démontrer sa structuration multipolaire (analyse de réseau - `}<a parentName=\"p\" {...{\n            \"href\": \"#cmnt50\"\n          }}>{`[`}{`ax`}{`]`}</a><a parentName=\"p\" {...{\n            \"href\": \"#cmnt51\"\n          }}>{`[`}{`ay`}{`]`}</a><a parentName=\"p\" {...{\n            \"href\": \"#cmnt52\"\n          }}>{`[`}{`az`}{`]`}</a><a parentName=\"p\" {...{\n            \"href\": \"#cmnt53\"\n          }}>{`[`}{`ba`}{`]`}</a><a parentName=\"p\" {...{\n            \"href\": \"#cmnt54\"\n          }}>{`[`}{`bb`}{`]`}</a>{`si on compare des amirautés entre elles il faut choisir les amirautés pertinentes : Normandie ? (région dans laquelle on a beaucoup de ports contrairement à la Bretagne)`}<a parentName=\"p\" {...{\n            \"href\": \"#cmnt55\"\n          }}>{`[`}{`bc`}{`]`}</a><a parentName=\"p\" {...{\n            \"href\": \"#cmnt56\"\n          }}>{`[`}{`bd`}{`]`}</a><a parentName=\"p\" {...{\n            \"href\": \"#cmnt57\"\n          }}>{`[`}{`be`}{`]`}</a><a parentName=\"p\" {...{\n            \"href\": \"#cmnt58\"\n          }}>{`[`}{`bf`}{`]`}</a><a parentName=\"p\" {...{\n            \"href\": \"#cmnt59\"\n          }}>{`[`}{`bg`}{`]`}</a>{`)`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`(port structurant = animateur de l’économie de la région notamment terrestre) montrer que La Rochelle dominant avec la valeur de son commerce mais ne structure pas l’économie de la région vu l’origine non locale des produits (attention à bien relativiser en fonction de la part de ces activités de traite) / montrer que la Traite négrière de la Rochelle n’utilise pas les produits de l’arrière-pays (?)`}</p>\n      </li>\n    </ul>\n    <p>{`Données utilisables pour la visualisation ?`}</p>\n    <p>{`Données à consolider ?`}</p>\n    <p>{`Données manquantes ?`}</p>\n    <p>{`Validation`}</p>\n    <p>{`Utiliser 87 pour les autres ports que La Rochelle.`}</p>\n    <p>{`Utiliser les amirautés pour comparer les réseaux.`}</p>\n    <p>{`origines des produits dans l’ANOM (pour produits qui partent aux Antilles)`}</p>\n    <p>{`\\\\=> mais en fonction du type de produit on peut induire une origine (au moins montrer que ce n’est pas une production locale) : travail déjà fait lors étude reexports datasprint`}</p>\n    <hr></hr>\n    <p>{`Guillaume D.: Remarque : J’ai fait pour 1789. Plus calmement :`}</p>\n    <p>{`!`}{`[`}{`]`}{`(cid:`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:4B3595B0-62E8-43D9-A20A-482ECAB697D4@mac.com\"\n      }}>{`4B3595B0–62E8–43D9-A20A-482ECAB697D4@mac.com`}</a>{` \"PastedImage.png\")`}</p>\n    <p>{`« Monde » c’est hors colonies (probablement les réexports coloniales)`}</p>\n    <p>{`Donc hors ré-exports, je pense que les chiffres de Loïc sont bons.`}</p>\n    <p>{`use \"/Users/guillaumedaudin/Documents/Recherche/Commerce International Français XVIIIe.xls/Balance du commerce/Retranscriptions`}{`_`}{`Commerce`}{`_`}{`France/Données Stata/bdd courante.dta\", clear`}</p>\n    <p>{`keep if year==1789`}</p>\n    <p>{`keep if  customs`}{`_`}{`office==\"La Rochelle\"`}</p>\n    <p>{`tab partner`}{`_`}{`simplification if partner`}{`_`}{`grouping==\"Monde »`}</p>\n    <p>{`collapse (sum) value, by (partner`}{`_`}{`grouping)`}</p>\n    <p>{`egen total = total(value)`}</p>\n    <p>{`gen pcrt = value/total`}</p>\n    <p>{`br`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image20.png\",\n        \"alt\": null\n      }}></img></p>\n    <hr></hr>\n    <h1 {...{\n      \"id\": \"atlasvisualisations-complémentaires\"\n    }}>{`Atlas/visualisations complémentaires`}</h1>\n    <p>{`Nous mettons ici des idées de visualisations tirées du sprint ne rentrant pas dans les mises en récit des parties.`}</p>\n    <p>{`code: `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=https://github.com/medialab/portic-datasprint-2021/blob/main/productions/equipe_1/etude_transversale/1789_echanges_toflit_transversal.ipynb&sa=D&source=editors&ust=1622018549243000&usg=AOvVaw2FHxUI1sisliZqmEixFsPP\"\n      }}>{`https://github.com/medialab/portic-datasprint-2021/blob/main/productions/equipe`}{`_`}{`1/etude`}{`_`}{`transversale/1789`}{`_`}{`echanges`}{`_`}{`toflit`}{`_`}{`transversal.ipynb`}</a></p>\n    <p>{`images:`}</p>\n    <p>{`dénominateur colonne `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=https://github.com/medialab/portic-datasprint-2021/raw/main/productions/equipe_1/etude_transversale/assets/1789_echanges_toflit_transversal-0.png&sa=D&source=editors&ust=1622018549244000&usg=AOvVaw37kfMi3Ka_BlgnLQc88LgK\"\n      }}>{`https://github.com/medialab/portic-datasprint-2021/raw/main/productions/equipe`}{`_`}{`1/etude`}{`_`}{`transversale/assets/1789`}{`_`}{`echanges`}{`_`}{`toflit`}{`_`}{`transversal-0.png`}</a></p>\n    <p>{`dénominateur ligne`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=https://github.com/medialab/portic-datasprint-2021/raw/main/productions/equipe_1/etude_transversale/assets/1789_echanges_toflit_transversal-1.png&sa=D&source=editors&ust=1622018549245000&usg=AOvVaw0fSRXvC0m1MJVxl4z_rdEB\"\n      }}>{`https://github.com/medialab/portic-datasprint-2021/raw/main/productions/equipe`}{`_`}{`1/etude`}{`_`}{`transversale/assets/1789`}{`_`}{`echanges`}{`_`}{`toflit`}{`_`}{`transversal-1.png`}</a></p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image9.png\",\n        \"alt\": null\n      }}></img></p>\n    <p>{`Cette visu est à nettoyer: d’une part, il faut expliciter ce que la ligne et la colonne “France” signifient (et voir s’il ne convient pas de les enlever; d’autre part il faut expliciter le “???” dans la première colonne; enfin, il faut expliquer pédagogiquement comment lire cette figure.`}</p>\n    <hr></hr>\n    <p>{`Aux importations, en revanche, le lien principal qui démarque la région étudiée des autres est celui avec les colonies.`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt60\"\n      }}>{`[`}{`bh`}{`]`}</a></p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image4.png\",\n        \"alt\": null\n      }}></img></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=https://drive.google.com/file/d/1Kl74rSkLlZWD-4alhbpl43ODHP8_A0Q2/view?usp%3Dsharing&sa=D&source=editors&ust=1622018549248000&usg=AOvVaw0GQLx6psxyAAK4H_nrlYyQ\"\n      }}>{`https://drive.google.com/file/d/1Kl74rSkLlZWD-4alhbpl43ODHP8`}{`_`}{`A0Q2/view?usp=sharing`}</a></p>\n    <hr></hr>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image18.png\",\n        \"alt\": null\n      }}></img></p>\n    <p>{`Lien vers l’image: `}<a parentName=\"p\" {...{\n        \"href\": \"https://drive.google.com/drive/folders/174lIWV3MSVtzXPGUFFUr0e8VSv3ekZ3D\"\n      }}>{`https://drive.google.com/drive/folders/174lIWV3MSVtzXPGUFFUr0e8VSv3ekZ3D`}</a></p>\n    <p>{`Code: `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=https://github.com/medialab/portic-datasprint-2021/blob/main/productions/equipe_1/origines/origines.ipynb&sa=D&source=editors&ust=1622018549249000&usg=AOvVaw3f4n_FffqLx76zs2rxMB-6\"\n      }}>{`https://github.com/medialab/portic-datasprint-2021/blob/main/productions/equipe`}{`_`}{`1/origines/origines.ipynb`}</a></p>\n    <hr></hr>\n    <p>{`Si pour une majeure partie des produits d’origine APAS sont exportés par la direction de La Rochelle des exceptions existent. La première (en valeur) direction exportatrice des produits APAS après La Rochelle est Bordeaux.`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image10.png\",\n        \"alt\": null\n      }}></img></p>\n    <p>{`lien vers l’image: `}<a parentName=\"p\" {...{\n        \"href\": \"https://drive.google.com/drive/folders/174lIWV3MSVtzXPGUFFUr0e8VSv3ekZ3D\"\n      }}>{`https://drive.google.com/drive/folders/174lIWV3MSVtzXPGUFFUr0e8VSv3ekZ3D`}</a></p>\n    <p>{`La direction des fermes de Bordeaux exporte en 1789, 12% des valeurs des produits d’origine APAS. Autrement dit, la direction de La Rochelle garde la main sur 80% des valeurs d’exportation des produits de son arrière-pays. Le papier, produit en Angoumois, est exporté par Bordeaux vers des marchés coloniaux et européen: l’explication est probablement liée au fait que le papier voyage par voie de terre, et que le port exportateur le plus proche est Bordeaux.`}</p>\n    <p>{`A propos des exports de Papier en 1789 (ça donne à voir les connections de Bordeaux et Marseille):`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image14.png\",\n        \"alt\": null\n      }}></img></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=http://toflit18.medialab.sciences-po.fr/%23/exploration/network?classification%3Dpartner_grouping%26sourceType%3DBest%2520Guess%2520customs%2520region%2520product%2520x%2520partner%26productClassification%3Dproduct_revolutionempire%26product%3D%255B%2522Papier%257Eproduct_revolutionempire%2522%255D%26kind%3Dexport%26dateMin%3D1789%26dateMax%3D1789%26nodeSize%3Dflows%26edgeSize%3Dflows%26labelThreshold%3D5%26labelSizeRatio%3D2&sa=D&source=editors&ust=1622018549250000&usg=AOvVaw1M0YLhqtWT8qjU7EO5hK-W\"\n      }}>{`http://toflit18.medialab.sciences-po.fr/#/exploration/network?classification=partner`}{`_`}{`grouping&sourceType=Best%20Guess%20customs%20region%20product%20x%20partner&productClassification=product`}{`_`}{`revolutionempire&product=%5B%22Papier%7Eproduct`}{`_`}{`revolutionempire%22%5D&kind=export&dateMin=1789&dateMax=1789&nodeSize=flows&edgeSize=flows&labelThreshold=5&labelSizeRatio=2`}</a></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref1\"\n      }}>{`[`}{`a`}{`]`}</a>{`exemple : \" @`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:robin.demourat@sciencespo.fr\"\n      }}>{`robin.demourat@sciencespo.fr`}</a>{` @`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:cecile.asselin@sciencespo.fr\"\n      }}>{`cecile.asselin@sciencespo.fr`}</a>{` il nous faudrait ici une visualisation de la part du sel dans les ports de l’Aunis pour pouvoir approfondir le paragraphe\"`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref2\"\n      }}>{`[`}{`b`}{`]`}</a>{`est-ce que quand on parle de “commerce extérieur” on a viré les ports francs ? et est-ce que nous y incluons ou pas les colonies ? à préciser lors de la première occurrence et à s’y tenir tout au long de l’analyse (et des vizus !!!)`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref3\"\n      }}>{`[`}{`c`}{`]`}</a>{`Au numérateur (je pense) : données de la chambre de commerce (avec colonies et sans les ports francs) avant 1781 ; puis données F12 1666+ANOM (avec colonies et ports francs).`}</p>\n    <p>{`Dénominateur : Romano et compléments.`}</p>\n    <p>{`Donc pas de soucis avant 1781 : N et D se correspondent. Pour 1789, le dénominateur ne comprends pas les ports francs, je crois. Donc on exagère le commerce de la direction. Il faudrait peut-être l’enlever. @`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:marzagalli@wanadoo.f\"\n      }}>{`marzagalli@wanadoo.f`}</a></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref4\"\n      }}>{`[`}{`d`}{`]`}</a>{`Ajouter 1721–1722 ? Les chiffres dépendent de ce que l’on trouve.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref5\"\n      }}>{`[`}{`e`}{`]`}</a>{`À corriger pour correspondre à la viz une fois que celle-ci sera stabilisée.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref6\"\n      }}>{`[`}{`f`}{`]`}</a>{`use \"/Users/guillaumedaudin/Documents/Recherche/Commerce International Français XVIIIe.xls/Balance du commerce/Retranscriptions`}{`_`}{`Commerce`}{`_`}{`France/Données Stata/bdd courante.dta\", clear`}</p>\n    <p>{`codebook product`}{`_`}{`simplification if year==1750 & best`}{`_`}{`guess`}{`_`}{`national`}{`_`}{`region ==1 & partner`}{`_`}{`grouping !=\"France\"`}</p>\n    <p>{`codebook product`}{`_`}{`simplification if year==1750 & best`}{`_`}{`guess`}{`_`}{`national`}{`_`}{`region ==1 & customs`}{`_`}{`region==\"La Rochelle\" & partner`}{`_`}{`grouping !=\"France\"`}</p>\n    <p>{`-`}{`—`}</p>\n    <p>{`use \"/Users/guillaumedaudin/Documents/Recherche/Commerce International Français XVIIIe.xls/Balance du commerce/Retranscriptions`}{`_`}{`Commerce`}{`_`}{`France/Données Stata/bdd courante.dta\", clear`}</p>\n    <p>{`codebook product`}{`_`}{`simplification if year==1789 & best`}{`_`}{`guess`}{`_`}{`national`}{`_`}{`region ==1 & partner`}{`_`}{`grouping!=\"France\"`}</p>\n    <p>{`codebook product`}{`_`}{`simplification if year==1789 & best`}{`_`}{`guess`}{`_`}{`national`}{`_`}{`region ==1 & customs`}{`_`}{`region==\"La Rochelle\" & partner`}{`_`}{`grouping !=\"France\"`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref7\"\n      }}>{`[`}{`g`}{`]`}</a>{`use \"/Users/guillaumedaudin/Documents/Recherche/Commerce International Français XVIIIe.xls/Balance du commerce/Retranscriptions`}{`_`}{`Commerce`}{`_`}{`France/Données Stata/bdd courante.dta\", clear`}</p>\n    <p>{`codebook product`}{`_`}{`revolutionempire if year==1750 & best`}{`_`}{`guess`}{`_`}{`national`}{`_`}{`region ==1 & customs`}{`_`}{`region==\"La Rochelle\" & partner`}{`_`}{`grouping !=\"France\"`}</p>\n    <p>{`codebook product`}{`_`}{`revolutionempire if year==1789 & best`}{`_`}{`guess`}{`_`}{`national`}{`_`}{`region ==1 & customs`}{`_`}{`region==\"La Rochelle\" & partner`}{`_`}{`grouping !=\"France\"`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref8\"\n      }}>{`[`}{`h`}{`]`}</a>{`je dois faire quoi ???`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref9\"\n      }}>{`[`}{`i`}{`]`}</a>{`C’est pas moi qui t’ai notée là.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref10\"\n      }}>{`[`}{`j`}{`]`}</a>{`ssc install hhi5`}</p>\n    <p>{`use \"/Users/guillaumedaudin/Documents/Recherche/Commerce International Français XVIIIe.xls/Balance du commerce/Retranscriptions`}{`_`}{`Commerce`}{`_`}{`France/Données Stata/bdd courante.dta\", clear`}</p>\n    <p>{`keep if (year==1750 | year==1789) & best`}{`_`}{`guess`}{`_`}{`national`}{`_`}{`region ==1 & export`}{`_`}{`import==\"Exports\" & customs`}{`_`}{`region==\"La Rochelle\"`}</p>\n    <p>{`collapse (sum) value, by(product`}{`_`}{`revolutionempire year)`}</p>\n    <p>{`hhi5 value,by(year)`}</p>\n    <p>{`gsort year - value`}</p>\n    <p>{`br`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref11\"\n      }}>{`[`}{`k`}{`]`}</a>{`versions refaites sans ports francs, versions classées par La Rochelle en cours de réalisation`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref12\"\n      }}>{`[`}{`l`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:christine.plumejeaud-perreau@univ-lr.fr\"\n      }}>{`christine.plumejeaud-perreau@univ-lr.fr`}</a>{` `}</p>\n    <p>{`Christine peux-tu récupérer tes calculs et préciser?`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref13\"\n      }}>{`[`}{`m`}{`]`}</a>{`Titre: préciser l’année et le fait qu’il s’agit des départs depuis les trois amirautés étudiées`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref14\"\n      }}>{`[`}{`n`}{`]`}</a>{`NB : durant la réunion nous avons discuté le fait que cette question de la provenance de la flotte trouverait sa place plutôt dans les parties suivantes`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref15\"\n      }}>{`[`}{`o`}{`]`}</a>{`ok on peut la placer ailleurs. Mais il me semblait qu’on avait envisagé de faire un point en 1789 pour voir les autres éléments du déclin? je dors déjà les données, puis on verra!`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref16\"\n      }}>{`[`}{`p`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:robin.demourat@sciencespo.fr\"\n      }}>{`robin.demourat@sciencespo.fr`}</a>{` `}</p>\n    <p>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:cplumejeaud@gmail.com\"\n      }}>{`cplumejeaud@gmail.com`}</a>{` `}</p>\n    <p>{`pas très compliqué à faire, on peut le faire tranquillement en juin`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref17\"\n      }}>{`[`}{`q`}{`]`}</a>{`J’ai choisi le vert pomme pour marquer mes interventions!`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref18\"\n      }}>{`[`}{`r`}{`]`}</a>{`à faire cécile+robin -> tester les volumes des tranches 1750 et 1789 avec et sans la traite - proposer à la discussion par écrit sur ce document`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref19\"\n      }}>{`[`}{`s`}{`]`}</a>{`attribué @`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:cecile.asselin@sciencespo.fr\"\n      }}>{`cecile.asselin@sciencespo.fr`}</a></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref20\"\n      }}>{`[`}{`t`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:gdaudin@mac.com\"\n      }}>{`gdaudin@mac.com`}</a></p>\n    <p>{`j’aurai juste besoin de précisions sur la manière d’exclure les flux commerciaux relevant de la traite chez Toflit :`}</p>\n    <p>{`-`}{` puis-je les identifier grâce au produit commercé ?`}</p>\n    <p>{`-`}{` au partenaire ?`}</p>\n    <p>{`-`}{` une combinaison d’attributs ?`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref21\"\n      }}>{`[`}{`u`}{`]`}</a>{`aussi en regardant votre commentaire au dessus sur les données à utiliser (numérateur et dénominateur) pour le calcul de la part de La Rochelle dans le commerce national, je pense que nous essaierons de garder ces mêmes données pour rester cohérents`}</p>\n    <p>{`(pour l’instant nous utilisons  les mêmes données de 1718 à 1789 : best`}{`_`}{`guess`}{`_`}{`region`}{`_`}{`prodxpart=’1' pour les flux de La Rochelle au numérateur, et best`}{`_`}{`guess`}{`_`}{`national`}{`_`}{`partner=’1' pour les flux nationaux  au dénominateur ; nous pouvons ajuster une fois que votre méthode de calcul est stabilisée)`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref22\"\n      }}>{`[`}{`v`}{`]`}</a>{`(c’est moi qui ai écrit les 2 commentaires ci-dessus)`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref23\"\n      }}>{`[`}{`w`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:robin.demourat@sciencespo.fr\"\n      }}>{`robin.demourat@sciencespo.fr`}</a>{` @`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:cecile.asselin@sciencespo.fr\"\n      }}>{`cecile.asselin@sciencespo.fr`}</a>{` @`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:cplumejeaud@gmail.com\"\n      }}>{`cplumejeaud@gmail.com`}</a>{` `}</p>\n    <p>{`je me suis avancée au pif, on peut vérifier aussi en juin, mais ça serait sympa de vérifier les destinations des navires chargés de sel en 1789 partis de notre région. Car au vu de ma carte, le principal port exportateur (tout produit confondu, c’est Ars-en-Ré`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref24\"\n      }}>{`[`}{`x`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:robin.demourat@sciencespo.fr\"\n      }}>{`robin.demourat@sciencespo.fr`}</a>{` `}</p>\n    <p>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:cecile.asselin@sciencespo.fr\"\n      }}>{`cecile.asselin@sciencespo.fr`}</a>{` `}</p>\n    <p>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:cplumejeaud@gmail.com\"\n      }}>{`cplumejeaud@gmail.com`}</a>{` `}</p>\n    <p>{`pour ma part, je verrai bien une carte avec les données Navigo de 1787, qui montre de quels ports français `}{`[`}{`pointcall OUT ou IN-OUT`}{`]`}{` sortent les navires de La Rochelle `}{`[`}{`homeport`}{`]`}{` et leur destination suivante avec une mise en valeur d’une manière ou d’une autre du tonnage (par ex: possibilité de cliquer pour voir le Nombre OU le tonnage total cumulé`}</p>\n    <p>{`Je peux aussi la faire faire par mon cartographe, ça sera alors une carte statique. A voir`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref25\"\n      }}>{`[`}{`y`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:cecile.asselin@sciencespo.fr\"\n      }}>{`cecile.asselin@sciencespo.fr`}</a>{`  attribué`}</p>\n    <p>{`(merci Silvia je vais me pencher sur cette carte : j’imagine faire une carte de flux des bateaux qui ont pour homeport 'La Rochelle’, avec des flux plus ou moins gros selon le tonnage cumulé, ou le nombre de trajets réalisé)`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref26\"\n      }}>{`[`}{`z`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:gdaudin@mac.com\"\n      }}>{`gdaudin@mac.com`}</a>{` `}</p>\n    <p>{`j’ai copié collé ici l’extraction de ton mail du 18/05 si tu veux compléter pour les reexportations etc.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref27\"\n      }}>{`[`}{`aa`}{`]`}</a>{`voir indexation fine réalisée par une personne vacataire de silvia : `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.google.com/spreadsheets/d/1juAb0So6QzbvRCuTQf-HLGpwzWNZKbWegZdQoMrbAyQ/edit#gid=101747354\"\n      }}>{`https://docs.google.com/spreadsheets/d/1juAb0So6QzbvRCuTQf-HLGpwzWNZKbWegZdQoMrbAyQ/edit#gid=101747354`}</a></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref28\"\n      }}>{`[`}{`ab`}{`]`}</a>{`on pourrait faire une comparaison de la part des thématiques à partir de quelques mots clés (ex. \"commerce d’afrique\") avec d’autres ensembles (ex. \"eau-de-vie\") ?`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref29\"\n      }}>{`[`}{`ac`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:Silvia.MARZAGALLI@univ-cotedazur.fr\"\n      }}>{`Silvia.MARZAGALLI@univ-cotedazur.fr`}</a>{` ojd j’ai fait une petite enquête quantitative à partir de l’onglet “indexation fine” sur les déilbérations ici : `}<a parentName=\"p\" {...{\n        \"href\": \"https://medialab.github.io/portic-datasprint-2021/productions%5C_post%5C_sprint/traite-chambre-commerce/traite-chambre-commerce.html\"\n      }}>{`https://medialab.github.io/portic-datasprint-2021/productions\\\\_post\\\\_sprint/traite-chambre-commerce/traite-chambre-commerce.html`}</a></p>\n    <p>{`J’ai notamment tenté de regrouper les annotations en plusieurs ensembles qui pourrait être pertinents pour cela. Si l’histogramme mis en fin de page te semble potentiellement dire quelque chose (j’avoue que je ne sais pas trop …) n’hésites pas à le mettre dans ce document`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref30\"\n      }}>{`[`}{`ad`}{`]`}</a>{`Merci Robin, j’ai affiné un peu, et je vais peut-être regarder le contenu des délibération pour Afrique et colonies e pense que le mieux est que je me colle le contenu…`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref31\"\n      }}>{`[`}{`ae`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:robin.demourat@sciencespo.fr\"\n      }}>{`robin.demourat@sciencespo.fr`}</a>{` `}</p>\n    <p>{`préciser leur nombre et fournir un % approximatif de leur complétude par rapport à tous ceux rédigés si on peut?`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref32\"\n      }}>{`[`}{`af`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:loic.charles02@univ-paris8.fr\"\n      }}>{`loic.charles02@univ-paris8.fr`}</a>{` `}</p>\n    <p>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:gdaudin@mac.com\"\n      }}>{`gdaudin@mac.com`}</a>{` `}</p>\n    <p>{`quand vous aurez une minute, à vérifier svp`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref33\"\n      }}>{`[`}{`ag`}{`]`}</a>{`question : au niveau local (charente dans la région) ou au niveau national (PASA par rapport au reste de la France) ?`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref34\"\n      }}>{`[`}{`ah`}{`]`}</a>{`réponse lors de la réunion : les 2`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref35\"\n      }}>{`[`}{`ai`}{`]`}</a>{`en cours de test pour voir si pertinent`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref36\"\n      }}>{`[`}{`aj`}{`]`}</a>{`le test semble montrer que pas pertinent`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref37\"\n      }}>{`[`}{`ak`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:loic.charles02@univ-paris8.fr\"\n      }}>{`loic.charles02@univ-paris8.fr`}</a>{` `}</p>\n    <p>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:gdaudin@mac.com\"\n      }}>{`gdaudin@mac.com`}</a>{` `}</p>\n    <p>{`est-ce que vous pouvez ajouter le prix du sel en 1789, voir s’il est à peu près stable partout en France, et avez-vous vous avez la conversion en prix/tonne métrique ?`}</p>\n    <p>{`j’aurai idéalement besoin aussi la quantité et la valeur totales de sel exporté en 1789, les marchés -> tout ce qui peut contribuer à montrer la primauté / la spécificité de Marennes est bienvenu.`}</p>\n    <p>{`Aussi, je voudrais me lancer dans une comparaison au pif des quantités exportés à l’étranger, avec les tonnages envoyés ailleurs en France. Peut-être en croisant aussi les données avec les expéditions vers les ports francs (les armements pour Dunkerque et Bayonne ne sont pas insignifiants)`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref38\"\n      }}>{`[`}{`al`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:thierry.sauzeau@univ-poitiers.fr\"\n      }}>{`thierry.sauzeau@univ-poitiers.fr`}</a>{` `}</p>\n    <p>{`Thierry, que en penses tu de demander une carte des destinations de navires chargés du sel (tonnage total?) sortis de Marennes pour explorer la question des marchés et des acteurs ?`}</p>\n    <p>{`avec possibilité de choisir pavillon français / pavillon étranger ?`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref39\"\n      }}>{`[`}{`am`}{`]`}</a><a parentName=\"p\" {...{\n        \"href\": \"https://kepler.gl/demo/map?mapUrl=https://dl.dropboxusercontent.com/s/h2b1oghl3ypibvo/keplergl%5C_c3293eb.json\"\n      }}>{`https://kepler.gl/demo/map?mapUrl=https://dl.dropboxusercontent.com/s/h2b1oghl3ypibvo/keplergl\\\\_c3293eb.json`}</a></p>\n    <p>{`voici la carte sur laquelle je travaille actuellement (en survolant les points vous devriez voir la légende correspondante apparaitre), si vous avez des suggestions d’amélioration pour que cela réponde mieux à ce dont vous avez besoin n’hésitez pas`}</p>\n    <p>{`je travaille également sur un histogramme des destinations du sel sorti de Marennes`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref40\"\n      }}>{`[`}{`an`}{`]`}</a>{`mini-enquête : présent dans les descripteurs généraux du fonds (14 documents), mais pas dans l’indexation fine des délibérations de la Chambre`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref41\"\n      }}>{`[`}{`ao`}{`]`}</a>{`effectivement ils en parlent (on a 96 matchs pour la recherche du sel dans les cahiers de doléance, dont 20 à Marennes, selon l’analyse faite par Guillaume Plique lors du sprint : `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.google.com/spreadsheets/d/167cLdJ8K01X0HW-rowu9qQX%5C_FnS-04cj4k28oBb46Ms/edit?usp=sharing\"\n      }}>{`https://docs.google.com/spreadsheets/d/167cLdJ8K01X0HW-rowu9qQX\\\\_FnS-04cj4k28oBb46Ms/edit?usp=sharing`}</a>{`)`}</p>\n    <p>{`la méthodologie d’obtention de ce doc est retracée dans le notebook suivant : `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/medialab/portic-datasprint-2021/blob/main/productions/equipe%5C_2/cahiers/Lexicometrie.ipynb\"\n      }}>{`https://github.com/medialab/portic-datasprint-2021/blob/main/productions/equipe\\\\_2/cahiers/Lexicometrie.ipynb`}</a></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref42\"\n      }}>{`[`}{`ap`}{`]`}</a>{`Merci ! ça reste à explorer, mais comme le sel est très fortement taxé, ça risque surtout d’être des plaintes sur la perception de la taxe.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref43\"\n      }}>{`[`}{`aq`}{`]`}</a>{`en cours de test pour voir si pertinent`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref44\"\n      }}>{`[`}{`ar`}{`]`}</a>{`le test semble montrer que pas pertinent`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref45\"\n      }}>{`[`}{`as`}{`]`}</a>{`Il serait bien d’avoir une courbe sur le même graphique qui indique la proportion de voyages négriers/total (ou peut-être pour certaines années seulement) pour La Rochelle comme pour Bordeaux.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref46\"\n      }}>{`[`}{`at`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:robin.demourat@sciencespo.fr\"\n      }}>{`robin.demourat@sciencespo.fr`}</a>{` attribué`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref47\"\n      }}>{`[`}{`au`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:loic.charles02@univ-paris8.fr\"\n      }}>{`loic.charles02@univ-paris8.fr`}</a>{` j’ai fait une mini-enquête pour tester la question ici : `}<a parentName=\"p\" {...{\n        \"href\": \"https://medialab.github.io/portic-datasprint-2021/productions%5C_post%5C_sprint/slavevoyages/slavevoyages.html\"\n      }}>{`https://medialab.github.io/portic-datasprint-2021/productions\\\\_post\\\\_sprint/slavevoyages/slavevoyages.html`}</a></p>\n    <p>{`Bonne nouvelle (pour la remarque de @`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:Silvia.MARZAGALLI@univ-cotedazur.fr\"\n      }}>{`Silvia.MARZAGALLI@univ-cotedazur.fr`}</a>{` ci-dessous) : la complétude des données slavevoyages au niveau des années de départ semble bonne, il me semble donc a priori pertinent de reproduire ces courbes dans le site.`}</p>\n    <p>{`Mauvaise nouvelle : le croisement avec les pointcalls navigo ne me semble pas très concluant, notamment parce que nous n’avons que 87 et 89 (à moins que ma méthodologie ne soit pas correcte : voir le lien ci-dessus où j’explique la méthodo que j’ai appliquée). à votre disposition pour préciser/amender si besoin.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref48\"\n      }}>{`[`}{`av`}{`]`}</a>{`note technique après mini-enquête : slavevoyages est en CC ANC donc nous pourrions reproduire ce graphique, les données sont téléchargeables, il sera donc possible d’intégrer/reproduire ce type de graphique`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref49\"\n      }}>{`[`}{`aw`}{`]`}</a>{`oui attention toutefois, à savoir: leur base a comme année centrale l’année de la déportation à travers l’Atlantique, qui ne coïncide pas nécessairement avec l’année de départ du navire. Il y a aussi la variable date de départ, mais vérifier qu’elle soit systématiquement renseignée sinon on perd de navires en chemin`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref50\"\n      }}>{`[`}{`ax`}{`]`}</a>{`test en cours pour voir si une simple analyse visuelle nous dit quelque chose (au-delà de la visualisation en circle packing des tonnages qui ne donne une idée que de la domination) - tester visualisations noeuds/liens et histogramme de distribution de la centralité`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref51\"\n      }}>{`[`}{`ay`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:Silvia.MARZAGALLI@univ-cotedazur.fr\"\n      }}>{`Silvia.MARZAGALLI@univ-cotedazur.fr`}</a>{` est-ce que tu pourras nous indiquer les amirautés (ou provinces ?) les plus pertinentes pour effectuer cette comparaison ? (cf notre discussion du 18)`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref52\"\n      }}>{`[`}{`az`}{`]`}</a>{`je propose la Normandie: une bonne vingtaine de ports, un tonnage à la sortie comparable. On n’a pas toutes les données pour les départs (Caen, Bayeux, Caen perdus) mais ça me semble le mieux.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref53\"\n      }}>{`[`}{`ba`}{`]`}</a>{`Très bien merci c’est noté !`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref54\"\n      }}>{`[`}{`bb`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:robin.demourat@sciencespo.fr\"\n      }}>{`robin.demourat@sciencespo.fr`}</a></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref55\"\n      }}>{`[`}{`bc`}{`]`}</a>{`test en cours pour voir si une simple analyse visuelle nous dit quelque chose (au-delà de la visualisation en circle packing des tonnages qui ne donne une idée que de la domination) - tester visualisations noeuds/liens et histogramme de distribution de la centralité`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref56\"\n      }}>{`[`}{`bd`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:Silvia.MARZAGALLI@univ-cotedazur.fr\"\n      }}>{`Silvia.MARZAGALLI@univ-cotedazur.fr`}</a>{` est-ce que tu pourras nous indiquer les amirautés (ou provinces ?) les plus pertinentes pour effectuer cette comparaison ? (cf notre discussion du 18)`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref57\"\n      }}>{`[`}{`be`}{`]`}</a>{`je propose la Normandie: une bonne vingtaine de ports, un tonnage à la sortie comparable. On n’a pas toutes les données pour les départs (Caen, Bayeux, Caen perdus) mais ça me semble le mieux.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref58\"\n      }}>{`[`}{`bf`}{`]`}</a>{`Très bien merci c’est noté !`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref59\"\n      }}>{`[`}{`bg`}{`]`}</a>{`@`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:robin.demourat@sciencespo.fr\"\n      }}>{`robin.demourat@sciencespo.fr`}</a></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt_ref60\"\n      }}>{`[`}{`bh`}{`]`}</a>{`compte tenu que les données des importations sont encore incomplètes, cette figure sera à reprendre plus tard`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  {\n    id: \"ecriture-du-texte\",\n    level: 3,\n    title: \"Ecriture du texte\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"orientations-sur-la-visualisation-principale\",\n    level: 3,\n    title: \"Orientations sur la visualisation principale\",\n    children: [\n        \n      ]\n  }\n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.015,\"time\":900,\"words\":3}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`Part 3 TODO`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.02,\"time\":1200,\"words\":4}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`À propos - TODO`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.01,\"time\":600,\"words\":2}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`About TODO`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nconst Loader = ({message}) => <div>chargement de {message}...</div>\n\nexport default Loader;","import { max, sortBy, sum } from \"lodash\";\n\nconst MIN_LABEL_SIZE = 0.5;\nconst MAX_LABEL_SIZE = 2.5;\n\n// TODO:\n// - click on products highlight same product on all years ?\n// - click on products make label bigger for small ones ?\n\nexport const ProductsDistributionChart = ({\n  data,\n  field,\n  partTreshold,\n  height,\n  barWidth,\n  labelFirst,\n  color,\n}) => {\n  const totalValue = sum(data.map((d) => +d[field]));\n  let partAcc = 0;\n  // Sort by trade value and keep only the top products which totalizes partTreshold of share\n  const dataTillTreshold = sortBy(data, (d) => -d[field]).filter((d) => {\n    partAcc += +d[field];\n    return partAcc <= partTreshold * totalValue;\n  });\n  // group the long tail of low value (under the part Treshold) products as one aggregated misc\n  const aggregatedMiscProducts = {\n    [field]: totalValue - sum(dataTillTreshold.map((d) => +d[field])),\n    product: `${data.length - dataTillTreshold.length} autre produits`,\n  };\n  dataTillTreshold.push(aggregatedMiscProducts);\n  const maxValue = +dataTillTreshold[0][field];\n\n  const scaleValue = (value) => {\n    const v = (value / totalValue) * height;\n    return v;\n  };\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyItems: \"start\",\n      }}\n    >\n      {dataTillTreshold &&\n        dataTillTreshold.map((d, i) => (\n          <div\n            key={d.product}\n            style={{\n              paddingBottom: \"2px\",\n              boxSizing: \"border-box\",\n              height: `${scaleValue(d[field])}px`,\n              display: \"flex\",\n              alignItems: \"center\",\n              flexDirection: labelFirst ? \"row-reverse\" : \"row\",\n            }}\n          >\n            <div\n              style={{\n                height: \"100%\",\n                width: `${barWidth}px`,\n                backgroundColor: color,\n              }}\n            ></div>\n            <span\n              className=\"label\"\n              style={{\n                float: \"right\",\n                fontSize: `${max([\n                  MAX_LABEL_SIZE * (d[field] / maxValue),\n                  MIN_LABEL_SIZE,\n                ])}rem`,\n                margin: \"0 1rem\",\n              }}\n            >\n              {d.product}\n            </span>\n          </div>\n        ))}\n    </div>\n  );\n};\n","import * as d3 from \"d3\";\nimport { range } from \"lodash\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { ProductsDistributionChart } from \"./ProductsDistributionChart\";\n\n// TODO: refacto fields props to ease exports/Imports switch\n\nconst PRODUCT_TRADE_PART_TRESHOLD = 0.9;\n\nconst LongitudinalTradeChart = ({\n  data,\n  // possible extension\n  productsData,\n  // fields: if null, viz will not show the corresponding data\n  absoluteField,\n  shareField,\n  herfindhalField,\n  // for axes\n  absoluteLabel,\n  shareLabel,\n  // TODO: update on resize in parent ?\n  width,\n  height,\n}) => {\n  const margin = { top: 20, right: 50, bottom: 30, left: 50 };\n  const xBand = d3\n    .scaleBand()\n    .domain(range(...d3.extent(data.map((d) => +d.year))))\n    .range([margin.left, width - margin.right])\n    .padding(0.1);\n  const herfindhalScale = d3\n    .scaleLinear()\n    .domain(d3.extent(data, (d) => +d[herfindhalField]))\n    .range([0, 0.8]);\n  const svgNode = useRef();\n  useEffect(() => {\n    const svgPath = d3\n      .select(svgNode.current)\n      .attr(\"viewBox\", [0, 0, width, height])\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke-linejoin\", \"round\")\n      .attr(\"stroke-linecap\", \"round\");\n    // clean SVG\n    svgPath.selectAll(\"*\").remove();\n\n    // X AXIS\n\n    const yearDomain = xBand.domain().map((y) => +y);\n    const yearTicks = yearDomain\n      .filter((y) => y % 5 === 0 && y !== 1790)\n      .concat([1789]);\n    const xAxis = (g) =>\n      g\n        .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n        .call(d3.axisBottom(xBand).tickValues(yearTicks).tickSizeOuter(0));\n\n    svgPath.append(\"g\").call(xAxis);\n\n    if (data.length > 0) {\n      // LINE PATH FOR ABSOLUTE\n      // Y AXIS\n      const yAbsolute = d3\n        .scaleLinear()\n        .domain([0, d3.max(data, (d) => +d[absoluteField])])\n        .nice()\n        .range([height - margin.bottom, margin.top]);\n      const absoluteYAxis = (g) =>\n        g\n          .attr(\"transform\", `translate(${width - margin.right},0)`)\n          .call(d3.axisRight(yAbsolute))\n          .call((g) => g.select(\".domain\").remove())\n          .call((g) =>\n            g\n              .select(\".tick:last-of-type text\")\n              .clone()\n              .attr(\"x\", 3)\n              .attr(\"text-anchor\", \"start\")\n              .attr(\"font-weight\", \"bold\")\n              .text(absoluteLabel)\n          );\n      svgPath.append(\"g\").call(absoluteYAxis);\n      // RECT for share series\n      // Y AXIS\n      const yShare = d3\n        .scaleLinear()\n        .domain([0, d3.max(data, (d) => +d[shareField])])\n        .nice()\n        .range([height - margin.bottom, margin.top]);\n      const shareYAxis = (g) =>\n        g\n          .attr(\"transform\", `translate(${margin.left},0)`)\n          .call(d3.axisLeft(yShare))\n          .call((g) => g.select(\".domain\").remove())\n          .call((g) =>\n            g\n              .select(\".tick:last-of-type text\")\n              .clone()\n              .attr(\"x\", 3)\n              .attr(\"text-anchor\", \"start\")\n              .attr(\"font-weight\", \"bold\")\n              .text(shareLabel)\n          );\n      svgPath.append(\"g\").call(shareYAxis);\n      // BARS\n\n      svgPath\n        .append(\"g\")\n        .selectAll(\"rect\")\n        .data(data)\n        .join(\"rect\")\n        .attr(\"fill\", (d) =>\n          herfindhalField && d[herfindhalField]\n            ? d3.rgb(200, 50, 0, herfindhalScale(+d[herfindhalField]))\n            : \"lightgrey\"\n        )\n        .attr(\"x\", (d) => xBand(+d.year))\n        .attr(\"y\", (d) => yShare(d[shareField]))\n        .attr(\"height\", (d) => yShare(0) - yShare(d[shareField]))\n        .attr(\"width\", xBand.bandwidth());\n      // LINE\n      const line = d3\n        .line()\n        .defined((d) => d[absoluteField] !== \"\")\n        .x((d) => xBand(+d.year) + xBand.bandwidth() / 2)\n        .y((d) => yAbsolute(+d[absoluteField]));\n\n      svgPath\n        .append(\"path\")\n        .datum(data)\n        .attr(\"stroke\", \"steelblue\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"d\", line);\n    }\n  }, [data, svgNode]);\n\n  //TODO: make that a prop or a config\n  const productVizHeight = 600;\n\n  // pass herfindhal for products chart color\n  const her1750 = (data.filter((d) => d.year === \"1750\")[0] || {})[\n    herfindhalField\n  ];\n  const her1789 = (data.filter((d) => d.year === \"1789\")[0] || {})[\n    herfindhalField\n  ];\n\n  return (\n    <>\n      <svg ref={svgNode} width={width} height={height}></svg>\n      {/* TODO: make year display generic peeking what's in the data ? */}\n      {productsData && (\n        <div\n          style={{\n            position: \"relative\",\n            height: productVizHeight,\n            width: `${width}px`,\n            textAlign: \"center\",\n          }}\n        >\n          <div\n            style={{\n              position: \"absolute\",\n              right: width - xBand(1750) - xBand.bandwidth(),\n            }}\n          >\n            <ProductsDistributionChart\n              data={productsData.filter((d) => d.year === \"1750\")}\n              field=\"Exports\"\n              partTreshold={PRODUCT_TRADE_PART_TRESHOLD}\n              height={productVizHeight}\n              barWidth={xBand.bandwidth()}\n              color={\n                her1750\n                  ? d3.rgb(200, 50, 0, herfindhalScale(+her1750))\n                  : \"lightgrey\"\n              }\n              labelFirst={true}\n            />\n          </div>\n\n          <div style={{ position: \"absolute\", left: xBand(1789) }}>\n            <ProductsDistributionChart\n              data={productsData.filter((d) => d.year === \"1789\")}\n              field=\"Exports\"\n              partTreshold={PRODUCT_TRADE_PART_TRESHOLD}\n              height={productVizHeight}\n              barWidth={xBand.bandwidth()}\n              color={\n                her1789\n                  ? d3.rgb(200, 50, 0, herfindhalScale(+her1789))\n                  : \"lightgrey\"\n              }\n            />\n          </div>\n          <h4>\n            Noms des produits totalisant {PRODUCT_TRADE_PART_TRESHOLD * 100}% du\n            commerce{\" \"}\n          </h4>\n        </div>\n      )}\n    </>\n  );\n};\nexport default LongitudinalTradeChart;\n","import axios from \"axios\";\nimport { csvParse } from \"d3-dsv\";\nimport { useEffect, useState } from \"react\";\nimport Loader from \"../Loader\";\nimport LongitudinalTradeChart from \"./LongitudinalTradeChart\";\n\n// TODO: make width a props and/or update on resize like here: https://gitlab.com/ouestware/cujas-hoppe/-/blob/devel/client/src/components/with-size.tsx\nconst DeclineComponent = (props) => {\n  const [longitudinalData, setLongitudinalData] = useState([]);\n  const [productsData, setProductsData] = useState([]);\n  const [loadingLR, setLoadingLR] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    setLoadingLR(true);\n    axios\n      .get(`${process.env.PUBLIC_URL}/data/decline_longitudinal_data.csv`)\n      .then((response) => {\n        const data = csvParse(response.data);\n        setLongitudinalData(data);\n        setLoadingLR(false);\n      })\n      .catch((err) => {\n        setLoadingLR(false);\n        setError(err.toString());\n      });\n    axios\n      .get(`${process.env.PUBLIC_URL}/data/decline_LR_products.csv`)\n      .then((response) => {\n        const data = csvParse(response.data);\n        setProductsData(data);\n        setLoadingLR(false);\n      })\n      .catch((err) => {\n        setLoadingLR(false);\n        setError(err.toString());\n      });\n  }, []);\n\n  return (\n    <>\n      {error ? (\n        <div>{error}</div>\n      ) : (\n        <div>\n          <div>\n            {loadingLR && (\n              <Loader message=\"Chargement des données de La Rochelle\" />\n            )}\n          </div>\n          <div>France</div>\n          <LongitudinalTradeChart\n            width=\"1800\"\n            height=\"200\"\n            data={longitudinalData.filter((d) => d.region === \"France\")}\n            absoluteField=\"Exports\"\n          />\n\n          <div>Bordeaux</div>\n          <LongitudinalTradeChart\n            width=\"1800\"\n            height=\"200\"\n            data={longitudinalData.filter((d) => d.region === \"Bordeaux\")}\n            absoluteField=\"Exports\"\n            shareField=\"Exports_share\"\n            herfindhalField=\"product_revolutionempire_exports_herfindahl\"\n          />\n\n          <div>La Rochelle</div>\n          <LongitudinalTradeChart\n            width=\"1800\"\n            height=\"200\"\n            data={longitudinalData.filter((d) => d.region === \"La Rochelle\")}\n            productsData={productsData}\n            absoluteField=\"Exports\"\n            shareField=\"Exports_share\"\n            herfindhalField=\"product_revolutionempire_exports_herfindahl\"\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default DeclineComponent;\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"6 min read\",\"minutes\":5.825,\"time\":349500,\"words\":1165}\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DeclineComponent from \"../../components/DeclineComponent\";\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"axe-1---le-déclin-de-la-région-de-la-rochelle-suite-à-la-perte-du-canada\"\n    }}>{`Axe 1 - Le déclin de la région de La Rochelle suite à la perte du Canada`}</h1>\n    <DeclineComponent mdxType=\"DeclineComponent\" />\n    <h3 {...{\n      \"id\": \"ecriture-du-texte\"\n    }}>{`Ecriture du texte`}</h3>\n    <p>{`L’écriture tressée avec les visualisations secondaires de l’axe 1 se passe ici.`}</p>\n    <p>{`Au dix-huitième siècle, la France a pleinement profité du développement des relations économiques entre l’Afrique, l’Amérique et l’Europe. L’ “Atlantique Français” reposant sur la traite des Africains et leur exploitation dans les Îles françaises (Antilles et Mascareignes) a connu son apogée juste avant la révolte de Saint-Domingue en 1791 et le début de la guerre maritime avec l’Angleterre en 1793. L’ancienne région Poitou-Charente, correspondant approximativement aux généralités de Poitou, Aunis, Saintonge et Angoumois (PASA), avait une tradition maritime ancienne et était bien située pour bénéficier de cet épisode de prospérité.`}</p>\n    <p>{`L’examen du commerce avec les pays étrangers et les colonies de la direction des Fermes de La Rochelle, qui était leur façade maritime, montre toutefois un dynamisme limité. Il y a bien eu croissance du commerce. Mais cette croissance a été plus lente que celle du reste du Royaume. Cela s’explique en grande partie par les relations privilégiées de la direction de la Rochelle avec le Canada. D’une part, celui-ci se développe beaucoup moins vite que les Antilles, et la région souffre de ce manque de dynamisme durant la première moitié du siècle. D’autre part, le Canada est cédé aux Anglais lors du traité de Paris qui clôt la guerre de Sept Ans en 1763. Québec avait déjà été pris en 1759. Cette perte est sévère pour la région dont le commerce entame alors un recul relatif très net. La direction de La Rochelle effectue 4,8% du commerce extérieur`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt2\"\n      }}>{`[`}{`b`}{`]`}</a><a parentName=\"p\" {...{\n        \"href\": \"#cmnt3\"\n      }}>{`[`}{`c`}{`]`}</a>{` français en 1750`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt4\"\n      }}>{`[`}{`d`}{`]`}</a>{`. En 1789 elle n’en représente plus que 2,7%.`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt5\"\n      }}>{`[`}{`e`}{`]`}</a></p>\n    <p>{`Ce résultat contraste avec les résultats qu’obtiennent les généralités de Bordeaux et de Nantes, Bordeaux, notamment, est beaucoup plus dynamique que La Rochelle et son commerce dépasse celui de Nantes dans les années 1740.`}</p>\n    <p>{`Le recul de La Rochelle n’est pas que quantitatif. En 1750, la direction de La Rochelle commerce 21% des types de biens échangés par la France (645 sur 3055`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt6\"\n      }}>{`[`}{`f`}{`]`}</a>{`) au niveau product_simplification) de la France. En 1789, elle n’en commerce plus que 7% (248/3565). Cela s’observe à la fois pour les exportations et pour les importations. Parmi les 150 secteurs de la classification «Révolution et Empire” de Toflit18, La Rochelle en commerce 121 en 1750, mais seulement 88 en 1789`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt7\"\n      }}>{`[`}{`g`}{`]`}</a>{`. NB (Silvia)`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt8\"\n      }}>{`[`}{`h`}{`]`}</a><a parentName=\"p\" {...{\n        \"href\": \"#cmnt9\"\n      }}>{`[`}{`i`}{`]`}</a></p>\n    <p>{`Les exportations sont donc beaucoup plus diverses en 1750 qu’en 1789. L’indice de concentration (Herfindhal`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt10\"\n      }}>{`[`}{`j`}{`]`}</a>{`) est de 0,1 en 1750 et 0,24 en 1789. Deux biens pour lesquels il n’y a pas beaucoup de concurrence nationale (le sel et les eaux-de-vie) et deux réexportations coloniales (le café et le sucre) dominent en 1789 les exportations, avec le blé. En 1750, la mercerie et les étoffes de laine font partie des cinq principales exportations (avec l’indigo, les eaux-de-vie et le sucre : le sel est en 14e position). La Rochelle s’est spécialisé dans les produits agricoles et les réexportations au dépens des biens manufacturés. Ce jug`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image1.png\",\n        \"alt\": null\n      }}></img></p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image6.png\",\n        \"alt\": null\n      }}></img></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"#cmnt11\"\n      }}>{`[`}{`k`}{`]`}</a></p>\n    <p>{`Les données de la navigation pour 1789 ne nous permettent pas d’aller beaucoup plus loin, car les congés du port de La Rochelle ne mentionnent pas en détail la cargaison exportée. Ils nous indiquent, toutefois, les destinations de navires. On constate déjà qu’en 1789 le tonnage nécessaire aux exportations vers l’étranger du port de La Rochelle - d’où les réexportations coloniales s’effectuent - n’est pas le plus important dans la région (même si le tonnage indiqué à Marennes semble surestimé à 40%`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt12\"\n      }}>{`[`}{`l`}{`]`}</a>{`). Comme nous le verrons dans la partie 3 `}{`[`}{`lien`}{`]`}{`, La Rochelle n’a pas un rôle central dans les relations que les ports de cette région ont avec l’étranger. Pour l’instant, la carte permet de constater que les exportations de l’Aunis se dirigent pour l’essentiel vers l’Europe du Nord. Si l’on exclut la Grande-Bretagne et les Etats-Unis - qui absorbent des quantités insignifiantes de produits coloniaux français, les réexportations de produits coloniaux rochelais se répartissent pour l’essentiel entre les marchés traditionnels: Provinces-Unies, villes hanséatiques, Baltique. Comparé à Bordeaux, qui entretient des relations particulièrement intenses avec Hambourg, il se peut que dans le cas rochelais l’émigration huguenote rende compte du lien bien plus fort avec la Hollande.`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image2.png\",\n        \"alt\": null\n      }}></img></p>\n    <p>{`Destinations des navires vers l’étranger (Afrique exclue) au départ du port de La Rochelle, 1789`}</p>\n    <p>{`pays`}</p>\n    <p>{`tx total`}</p>\n    <p>{`Pays bas autrichiens`}</p>\n    <p>{`512`}</p>\n    <p>{`Provinces-Unies`}</p>\n    <p>{`550`}</p>\n    <p>{`Brême`}</p>\n    <p>{`520`}</p>\n    <p>{`Hambourg`}</p>\n    <p>{`530`}</p>\n    <p>{`Norvège`}</p>\n    <p>{`150`}</p>\n    <p>{`Prusse (partie en Baltique)`}</p>\n    <p>{`370`}</p>\n    <p>{`Baltique (inderterminé)`}</p>\n    <p>{`200`}</p>\n    <p>{`Grande-Bretagne`}</p>\n    <p>{`1048`}</p>\n    <p>{`Etats-Unis d’Amérique`}</p>\n    <p>{`160`}</p>\n    <p>{`étranger inconnu`}</p>\n    <p>{`104`}</p>\n    <h3 {...{\n      \"id\": \"\"\n    }}><img parentName=\"h3\" {...{\n        \"src\": \"images/image16.png\",\n        \"alt\": null\n      }}></img></h3>\n    <p>{`Enfin, la perte de vitesse de la région vers la fin de l’Ancien Régime semble attestée aussi pour ce qui concerne sa capacité à assurer ses propres trafics. Si on prend en compte la part de navigation sous pavillon français assurée par des navires de la région étudiée, elle est en effet inférieure à celle de la plupart des autres provinces françaises: en 1787, les ports de l’Aunis-Saintonge-Poitou assurent 51.6% du tonnage qu’ils expédient, contre 84.3% pour la Bretagne ou 58,7% pour la Guyenne. En affinant, on peut voir si la région étudiée assure plus ou moins que d’autres ses trafics extérieurs.`}</p>\n    <p>{`La navigation avec l’étranger est assurée, à 90%, par de pavillons étrangers ou extérieur à la région étudiée. Il s’agit, pour l’essentiel, des pavillons britannique et des pays de l’Europe du Nord.`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image15.png\",\n        \"alt\": null\n      }}></img></p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image17.png\",\n        \"alt\": null\n      }}></img><a parentName=\"p\" {...{\n        \"href\": \"#cmnt13\"\n      }}>{`[`}{`m`}{`]`}</a></p>\n    <p>{`Si on regarde les départs depuis la région étudiée vers de ports français, calculer la part de la navigation assurée par homeport locaux en 1787 dans ports de la direction de la Rochelle vers intérieur direction / reste France / international / hors Europe et comparer avec idem pour Bordeaux et pour Nantes par ex. (en tonnage)`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt14\"\n      }}>{`[`}{`n`}{`]`}</a><a parentName=\"p\" {...{\n        \"href\": \"#cmnt15\"\n      }}>{`[`}{`o`}{`]`}</a><a parentName=\"p\" {...{\n        \"href\": \"#cmnt16\"\n      }}>{`[`}{`p`}{`]`}</a></p>\n    <h3 {...{\n      \"id\": \"orientations-sur-la-visualisation-principale\"\n    }}>{`Orientations sur la visualisation principale`}</h3>\n    <p>{`L’enjeu n’est pas de se focaliser sur la forme exacte, mais sur les objectifs de cette visualisation, qui nous guideront lors de la production les 27 et 28 mai.`}</p>\n    <p>{`Si vous êtes une personne référente / un contributeur important de cet axe, merci d’indiquer si vous avez pu lire / amender les tableaux objectifs / données dans leurs colonnes “Validation” respectives`}</p>\n    <p>{`Objectifs de la visualisation`}</p>\n    <p>{`Validation`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`montrer le déclin à partir de deux modalités :`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`les volumes d’échange`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`la diversité des produits`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`montrer le déclin selon deux logiques d’analyse :`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`une perspective diachronique montrant la tendance sur la période 1750–1789 (avec régression linéaire notamment)`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`une perspective comparative à travers deux instantanés détaillés en 1750 et 1789 les effets de la perte du Canada comme partenaire commercial (notamment en comparant la part des partenaires)`}</p>\n      </li>\n    </ul>\n    <p>{`(loïc) Il est préférable de montrer le déclin de la direction de La Rochelle par rapport à l’ensemble de la France en choisissant`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt17\"\n      }}>{`[`}{`q`}{`]`}</a>{` des années références (1750–1789), séparer export-import et faire une comparaison en excluant la traite.`}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt18\"\n      }}>{`[`}{`r`}{`]`}</a><a parentName=\"p\" {...{\n        \"href\": \"#cmnt19\"\n      }}>{`[`}{`s`}{`]`}</a><a parentName=\"p\" {...{\n        \"href\": \"#cmnt20\"\n      }}>{`[`}{`t`}{`]`}</a><a parentName=\"p\" {...{\n        \"href\": \"#cmnt21\"\n      }}>{`[`}{`u`}{`]`}</a><a parentName=\"p\" {...{\n        \"href\": \"#cmnt22\"\n      }}>{`[`}{`v`}{`]`}</a></p>\n    <p>{`discussion/à tester pendant le visusprint : utiliser une moyenne mobile en complément de la régression linéaire.`}</p>\n    <p>{`Données utilisables pour la visualisation ?`}</p>\n    <p>{`Données à consolider ?`}</p>\n    <p>{`Données manquantes ?`}</p>\n    <p>{`Validation`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  {\n    id: \"ecriture-du-texte\",\n    level: 3,\n    title: \"Ecriture du texte\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"\",\n    level: 3,\n    title: <React.Fragment><MDXTag name=\"img\" components={components} props={{\"src\":\"images/image16.png\",\"alt\":null}}></MDXTag></React.Fragment>,\n    children: [\n        \n      ]\n  },\n{\n    id: \"orientations-sur-la-visualisation-principale\",\n    level: 3,\n    title: \"Orientations sur la visualisation principale\",\n    children: [\n        \n      ]\n  }\n]\n\nexport const frontMatter = {}\n\n","import CircularAlluvialComponent from './CircularAlluvialComponent';\n\nexport default CircularAlluvialComponent;","import {useState, useEffect} from 'react';\nimport {csvParse} from 'd3-dsv';\nimport {scaleLinear} from 'd3-scale';\nimport get from 'axios';\n\nimport {prepareAlluvialData} from './utils';\n\nconst CircularAlluvialComponent = ({\n  data: filename,\n  sumBy,\n  steps,\n  width=1200,\n  height=800\n}) => {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const URL = `${process.env.PUBLIC_URL}/data/${filename}`;\n\n  useEffect(() => {\n    // aller chercher les données (get : lancement de la promesse se lance de suite : synchrone, then et catch plus tard)\n    get(URL)\n    .then(({data: csvString}) => {\n      // les convertir en js (avec d3-dsv)\n      const newData = csvParse(csvString);\n      const vizData = prepareAlluvialData(newData, {sumBy, steps});\n      console.log(vizData);\n      setData(vizData);\n      setLoading(false);\n    })\n    .catch((err) => {\n      console.log(err);\n      setLoading(false);\n    })\n  }, [URL, steps, sumBy])\n\n  if (loading) {\n    return (\n      <div>Chargement des données ({URL}) ...</div>\n    )\n  } else if (!data) {\n    return (\n    <div>Erreur ...</div>\n    )\n  }\n\n  const BAR_WIDTH = width / 100;\n  const stepXScale = scaleLinear().range([0, width]).domain([0, data.length - 1])\n  return (\n      <svg width={width} height={height}>\n        <g transform={'scale(0.8)translate(10,10)'}>\n          {\n            data.map((step, stepIndex) => {\n              const nodesYScale = scaleLinear().domain([0, 1]).range([0, height]);\n              return (\n                <g \n                  className=\"step-container\" \n                  key={stepIndex}\n                  transform={`translate(${stepXScale(stepIndex)}, 0)`}\n                >\n                  <rect\n                    x={0}\n                    y={0}\n                    width={BAR_WIDTH}\n                    height={height}\n                    fill=\"lightgrey\"\n                    className=\"step-bar-background\"\n                  />\n                  {\n                    step.nodes.map((node, nodeIndex) => {\n                      const nodeHeight = nodesYScale(node.valuePart);\n                      const y = nodesYScale(node.displacePart);\n                      return (\n                        <g \n                          className=\"step-node-container\" \n                          key={node.id}\n                          transform={`translate(0, ${y})`}\n                        >\n                          <rect\n                            x={0}\n                            y={0}\n                            width={BAR_WIDTH}\n                            height={nodeHeight - 2}\n                            fill={nodeIndex%2 === 0 ? 'blue' : 'yellow'}\n                          />\n                          <text\n                            y={nodeHeight / 2}\n                            x={BAR_WIDTH * 2}\n                          >\n                            {node.id}\n                          </text>\n                          {\n                            node.flows.map((flow, flowIndex) => {\n                              return (\n                                <rect\n                                  key={flowIndex}\n                                  x={0}\n                                  y={nodesYScale(flow.relativeDisplacePart)}\n                                  width={BAR_WIDTH}\n                                  height={nodesYScale(flow.valuePart) - 1}\n                                  fill={'grey'}\n                                  opacity={0.3}\n                                />\n                              )\n                            })\n                          }\n                        </g>\n                      )\n                    })\n                  }\n                  {\n                    step.nodes\n                    .filter(n => n.links)\n                    .map((node, nodeIndex) => {\n                      return (\n                        <g className=\"links-group\" key={nodeIndex}>\n                          {\n                            node.links.map((link, linkIndex) => {\n                              return (\n                                <g className=\"link-index\" key={linkIndex}>\n                                  <rect\n                                    x={BAR_WIDTH}\n                                    y={nodesYScale(link.startRel)}\n                                    width={(linkIndex + 1) * 10}\n                                    height={nodesYScale(link.valuePart) - 1}\n                                    fill=\"lightgrey\"\n                                    opacity={0.3}\n                                  />\n                                </g>\n                              )\n                            })\n                          }\n                        </g>\n                      )\n                    })\n                  }\n                </g>\n              )\n            })\n          }\n        </g>\n      </svg>\n  )\n}\n\nexport default CircularAlluvialComponent;","import groupBy from 'lodash/groupBy';\n\nexport const prepareAlluvialData = (data, spec) => {\n  const {sumBy, steps: stepsSpec} = spec;\n  // compute nodes for each step\n  let steps = stepsSpec.map(step => {\n    const {filters} = step;\n    let stepData = data;\n    if (filters && filters.length) {\n      // filter relevant flows\n      stepData = filters.reduce((current, {key, value}) => {\n        return current.filter(datum => {\n          return datum[key] === value;\n        })\n      }, stepData);\n    }\n    // count values for spec modalities\n    let groups = groupBy(stepData, d => d[step.field]);\n    groups = Object.entries(groups).map(([id, initialFlows]) => {\n      const flows = initialFlows.map(flow => {\n        let valueAbs;\n        // if a sumBy is define with sum with its value\n        if (sumBy) {\n          let actualValue = flow[sumBy];\n          actualValue = actualValue === '' ? 0 : actualValue;\n          valueAbs = +actualValue\n        } else valueAbs = 1;\n        return {\n          ...flow,\n          valueAbs\n        }\n      })\n      const valueAbs = flows.reduce((sum, flow) => {\n        return sum + flow.valueAbs\n      }, 0);\n      return {\n        id,\n        valueAbs,\n        flows\n      }\n    });\n    // compute relative part of each modality\n    const totalValue = groups.reduce((sum, g) => sum + g.valueAbs, 0);\n    groups = groups.map(g => ({\n      ...g,\n      valuePart: g.valueAbs / totalValue,\n      flows: g.flows.map(flow => ({\n        ...flow,\n        valuePart: flow.valueAbs / totalValue\n      }))\n    }));\n    return {\n      ...step,\n      totalValue,\n      nodes: groups.sort((a, b) => {\n        if (a.id > b.id) {\n          return 1;\n        }\n        return -1;\n      })\n    }\n  })\n\n  // compute displacements for each step\n  steps = steps.map((step, index) => {\n    let displaceAbs = 0;\n    let displacePart = 0;\n    const newNodes = step.nodes.map(node => {\n      // computing flow-level displacement\n      let localDisplaceAbs = displaceAbs;\n      let localDisplacePart = displacePart;\n      const newNode = {\n        ...node,\n        displaceAbs,\n        displacePart,\n        flows: node.flows.map(flow => {\n          const newFlow = {\n            ...flow,\n            displaceAbs: localDisplaceAbs,\n            displacePart: localDisplacePart,\n            relativeDisplaceAbs: localDisplaceAbs - displaceAbs,\n            relativeDisplacePart: localDisplacePart - displacePart\n          }\n          localDisplaceAbs += flow.valueAbs;\n          localDisplacePart += flow.valuePart;\n          return newFlow;\n        })\n      };\n      displaceAbs += node.valueAbs;\n      displacePart += node.valuePart;\n      return newNode;\n    })\n    return {\n      ...step,\n      nodes: newNodes\n    }\n  })\n\n  // compute links\n  steps = steps.map((step, index) => {\n    if (index < steps.length - 1) {\n      const nextStep = steps[index + 1];\n      const nextKey = nextStep.field;\n      const {nodes} = step;\n      const newNodes = nodes.map(node => {\n        const {flows} = node;\n        // build groups of flows for next step\n        let nextGroups = groupBy(flows, f => f[nextKey]);\n        nextGroups = Object.entries(nextGroups).map(([id, initialFlows]) => {\n          const flows = initialFlows.map(flow => {\n            let valueAbs;\n            // if a sumBy is define with sum with its value\n            if (sumBy) {\n              let actualValue = flow[sumBy];\n              actualValue = actualValue === '' ? 0 : actualValue;\n              valueAbs = +actualValue\n            } else valueAbs = 1;\n            return {\n              ...flow,\n              valueAbs\n            }\n          });\n          const valueAbs = flows.reduce((sum, flow) => {\n            return sum + flow.valueAbs\n          }, 0);\n          return {\n            id,\n            valueAbs,\n            flows\n          }\n        });\n        // compute relative part of each modality\n        // const totalValue = nextGroups.reduce((sum, g) => sum + g.valueAbs, 0);\n        nextGroups = nextGroups.map(g => ({\n          ...g,\n          // valuePart: g.valueAbs / totalValue,\n          valuePart: g.valueAbs / step.totalValue,\n          flows: g.flows.map(f => ({\n            ...f, \n            // valuePart: f.valueAbs / totalValue,\n            valuePart: f.valueAbs / step.totalValue,\n          }))\n        }));\n        return {\n          ...node,\n          links: nextGroups\n        }\n      })\n      return {\n        ...step,\n        nodes: newNodes\n      }\n    }\n    return step;\n  })\n  // @todo compute links displacement for start and end of each\n  steps = steps.map((step, stepIndex) => {\n    if (stepIndex < steps.length - 1) {\n      const nextStep = steps[stepIndex + 1];\n      \n      const newNodes = step.nodes.map(node => {\n        let displace1Abs = node.displaceAbs;\n        let displace1Rel = node.displacePart;\n        const newLinks = node.links.map(link => {\n          const newLink = {\n            ...link,\n            startAbs: displace1Abs,\n            startRel: displace1Rel,\n            // @todo compute flow-level displacement\n          }\n          displace1Abs += link.valueAbs;\n          displace1Rel += link.valueRel;\n          return newLink;\n        })\n        return {\n          ...node,\n          links: newLinks\n        }\n      })\n      return {\n        ...step,\n        nodes: newNodes\n      }\n    }\n    return step;\n  })\n\n  return steps;\n}","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"4 min read\",\"minutes\":3.67,\"time\":220200,\"words\":734}\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport CircularAlluvial from '../../components/CircularAlluvialComponent';\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"partie-2---une-forte-spécialisation-portuaire-le-cas-de-la-traite-négrière-du-commerce-du-sel-et-de-leau-de-vie\"\n    }}>{`Partie 2 - Une forte spécialisation portuaire: le cas de la traite négrière, du commerce du sel et de l’eau-de-vie`}</h1>\n    <CircularAlluvial data=\"part_2_toflit_viz_data.csv\" sumBy=\"value\" steps={[{\n      field: \"customs_office\",\n      labels: {\n        fr: 'bureau des fermes',\n        en: 'customs office'\n      },\n      filters: [{\n        key: 'flow_type',\n        value: 'export'\n      }]\n    }, {\n      field: \"product\",\n      labels: {\n        fr: 'type de produit',\n        en: 'product type'\n      },\n      filters: [{\n        key: 'flow_type',\n        value: 'export'\n      }]\n    }, {\n      field: \"partner\",\n      labels: {\n        fr: 'partenaire du commerce extérieur',\n        en: 'external trade partner'\n      },\n      filters: [{\n        key: 'flow_type',\n        value: 'export'\n      }]\n    }, {\n      field: \"partner\",\n      labels: {\n        fr: 'partenaire du commerce extérieur',\n        en: 'external trade partner'\n      },\n      filters: [{\n        key: 'flow_type',\n        value: 'import'\n      }]\n    }, {\n      field: \"product\",\n      labels: {\n        fr: 'type de produit',\n        en: 'product type'\n      },\n      filters: [{\n        key: 'flow_type',\n        value: 'import'\n      }]\n    }, {\n      field: \"customs_office\",\n      labels: {\n        fr: 'bureau des fermes',\n        en: 'customs office'\n      },\n      filters: [{\n        key: 'flow_type',\n        value: 'import'\n      }]\n    }]} mdxType=\"CircularAlluvial\" />\n    <h3 {...{\n      \"id\": \"orientations-sur-la-visualisation-principale-commune-aux-trois-sous-parties\"\n    }}>{`Orientations sur la visualisation principale commune aux trois sous-parties`}</h3>\n    <p>{`L’enjeu n’est pas de se focaliser sur la forme exacte, mais sur les objectifs de cette (ces)  visualisation(s), qui nous guideront lors de la production les 27 et 28 mai.`}</p>\n    <p>{`Si vous êtes une personne référente / un contributeur important de cet axe, merci d’indiquer si vous avez pu lire / amender les tableaux objectifs / données dans leurs colonnes “Validation” respectives`}</p>\n    <p>{`Objectifs de la(les) visualisation(s) - partie constante entre les 3 sous-parties`}</p>\n    <p>{`Validation`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`visualisation commune aux 3 sous axes : but de montrer la séparation de ces 3 activités qui se répartissent sur des ports différents / correspondent à des flux commerciaux et marchés de natures différentes, plus précisément :`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`différencier des “classes” de commerce via le croisement entre l’importance tonnage concerné / valeur (visible pour le sel notamment avec gros tonnages, visible pour la traite avec valeurs importantes, plus difficile pour l’eau de vie dont la cargaison est très rarement mentionnée avec Navigo)  (ex. “faible tonnage grosse valeur”, “gros tonnage faible valeur”, etc.)`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`démontrer que la diversité de nature des activités commerciales s’articule avec une distribution géographique entre des ports identifiés`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`BONUS : permettre de suivre l’évolution dans le temps de ces 3 activités dans le temps (a minima cela semble intéressant de pouvoir comparer certaines années dans le cas des activités coloniales)`}</p>\n      </li>\n    </ul>\n    <p>{`carte ? diagramme alluvial situé ?`}</p>\n    <p>{`diagramme alluvial pourquoi pas si simplifié et adapté sur les 3 produits (potentiellement jouer sur les couleurs)`}</p>\n    <p>{`le temporel serait seulement au niveau de la direction (pour les données par Bureau on n’a que 89)`}</p>\n    <p>{`Données utilisables pour la(les) visualisation(s) ?`}</p>\n    <p>{`Données à consolider ?`}</p>\n    <p>{`Données manquantes ?`}</p>\n    <p>{`Validation`}</p>\n    <p>{`essayer de faire quelque chose des flux Toflit qui sont rattachés à la Direction de La Rochelle mais à aucun bureau particulier ?`}</p>\n    <p>{`avec Toflit commerce local ne peut être vu qu’avec les ports francs`}</p>\n    <p>{`avec Navigo l’eau de vie est très rarement mentionnée dans les cargaisons (car n’est pas la cargaison principale)`}</p>\n    <h2 {...{\n      \"id\": \"introduction-partie-2\"\n    }}>{`Introduction partie 2`}</h2>\n    <p>{`La région étudiée se caractérise par une densité importante de ports. La carte représente le tonnage expédié en 1787, à partir des congés délivrés aux navires. Les 8 ports dépassant les 10000 tonneaux entretiennent tous, sauf Marans, un commerce avec l’étranger.`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image5.png\",\n        \"alt\": null\n      }}></img></p>\n    <p>{`De par ses relations exclusives avec les colonies et surtout son investissement dans la traite négrière, La Rochelle mérite une étude à part. Pour ce qui des relations avec l’étranger (hors colonies), on constate des circuits relativement distincts: le sel exporté par Noirmoutier, Ars-en-Ré et Marennes `}<a parentName=\"p\" {...{\n        \"href\": \"#cmnt23\"\n      }}>{`[`}{`w`}{`]`}</a>{`-`}{` qui exportent pour l’essentiel du sel, ont comme principales débouchées extérieures la Baltique et les pays scandinaves. Nous développerons ici en détail le cas de Marennes, principal port exportateur français de sel.`}</p>\n    <p>{`Pour les eaux-de-vie, dont la mention est rare dans les sources de la navigation, il faut se tourner vers la Balance du commerce, pour affiner ensuite les données par l’analyse de la navigation (choix de ports à justifier)`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"images/image8.png\",\n        \"alt\": null\n      }}></img>{` `}</p>\n    <p>{`L’importance des tonnages impliqués n’est pas directement corrélée à la valeur des marchandises transportées. En effet, les données de la Ferme donnent les valeurs suivantes:`}</p>\n    <p>{`Bureaux de Ferme de la direction de La Rochelle, exportations en 1789`}</p>\n    <p>{`Bureau de Ferme`}</p>\n    <p>{`Valeur des exportations en livres tournois`}</p>\n    <p>{`Aligre`}</p>\n    <p>{`1 302 594,57`}</p>\n    <p>{`Charente`}</p>\n    <p>{`6 194 522,97`}</p>\n    <p>{`La Rochelle`}</p>\n    <p>{`7 698 983,18`}</p>\n    <p>{`Les Sables d’Olonne`}</p>\n    <p>{`110 527,00`}</p>\n    <p>{`Marennes`}</p>\n    <p>{`1 921 839,39`}</p>\n    <p>{`Rochefort`}</p>\n    <p>{`274 173,22`}</p>\n    <p>{`Saint-Martin-de-Ré`}</p>\n    <p>{`1 209 320,67`}</p>\n    <p>{`(vide)`}</p>\n    <p>{`1 662 254,00`}</p>\n    <p>{`Total général`}</p>\n    <p>{`20 374 214,99`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  {\n    id: \"orientations-sur-la-visualisation-principale-commune-aux-trois-sous-parties\",\n    level: 3,\n    title: \"Orientations sur la visualisation principale commune aux trois sous-parties\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"introduction-partie-2\",\n    level: 2,\n    title: \"Introduction partie 2\",\n    children: [\n        \n      ]\n  }\n]\n\nexport const frontMatter = {}\n\n","import Caller from './Caller';\n\nexport default Caller;","\nimport {useContext, useEffect, useRef, useState} from 'react';\nimport cx from 'classnames';\nimport {v4 as genId} from 'uuid';\n\nimport {VisualizationControlContext} from '../../helpers/contexts';\n\nconst Caller = ({id: visualizationId, ...props}) => {\n  const ref = useRef(null);\n  const [id] = useState(genId());\n  const {\n    activeVisualization,\n    onBlockClick,\n    onRegisterVisualization,\n    onUnregisterVisualization,\n  } = useContext(VisualizationControlContext);\n\n  useEffect(() => {\n    // on wrappe dans un setTimeout pour avoir une ref non-nulle vers le composant\n    setTimeout(() => {\n      let payload = {...props};\n      payload = {\n        ...payload,\n        ref,\n        visualizationId,\n        id\n      }\n      onRegisterVisualization(payload)\n    })\n    return onUnregisterVisualization(id);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id])\n\n  const onClick = e => {\n    if (typeof onBlockClick === 'function') {\n      onBlockClick(id, ref);\n    }\n  }\n  return (\n    <div\n      ref={ref}\n      onClick={onClick} \n      className={cx(\"Caller\", {'is-active': activeVisualization && id === activeVisualization.id})}\n    >\n      {\n        visualizationId ?\n        <>caller pour la visualisation <code>{visualizationId}</code> </>\n        :\n        <>caller sans id (agit comme un clearfix)</>\n      }{\n        Object.keys(props).length ? \n          <span>avec les paramètres {JSON.stringify(props)}</span>\n        : null\n      }\n    </div>\n  );\n}\n\nexport default Caller;","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"24 min read\",\"minutes\":23.895,\"time\":1433700,\"words\":4779}\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport Caller from '../../components/Caller'\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <p>{`Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec sit amet lectus eget sapien tempus accumsan. Curabitur ultricies quis enim eu sodales. Praesent a arcu in mauris vehicula tempor non ut lacus. Suspendisse ultricies metus tellus, nec placerat purus bibendum sit amet. In efficitur risus erat, vitae mollis orci pulvinar in. Proin aliquam tellus tortor, sed finibus erat bibendum a. Donec at nisi eget nibh condimentum sollicitudin. Suspendisse sit amet velit sit amet ex interdum varius aliquam nec ex. Nulla dignissim cursus augue vitae commodo. Maecenas in magna justo.`}</p>\n    <p>{`Integer sollicitudin sodales lectus sed tempus. Sed vitae semper orci. Praesent tempor iaculis dui, in varius turpis aliquam nec. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Vestibulum porta sem vitae dictum gravida. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam id elit fermentum, dictum tortor ac, interdum justo. Suspendisse potenti. Etiam urna diam, eleifend ut malesuada eget, volutpat quis leo. Nulla eget nulla porta, consequat ex eget, porttitor felis. Curabitur porta vehicula turpis et lacinia. Vivamus commodo laoreet risus, eu suscipit libero rutrum vitae. Morbi porta, magna ac gravida eleifend, risus arcu vestibulum mauris, id interdum ante risus nec tellus. Donec vitae lacinia risus. Sed condimentum accumsan enim, sit amet consequat arcu volutpat ut.`}</p>\n    <p>{`Ut nec fringilla odio, eget porta nibh. Pellentesque nec ultricies ipsum. Phasellus eu tempus sapien. Praesent sit amet urna dolor. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Pellentesque sollicitudin est ut pretium vestibulum. Aenean ut arcu non ligula blandit bibendum porta ut mi. Quisque elementum mattis nibh eget vulputate. Maecenas facilisis vehicula nibh vitae tincidunt.`}</p>\n    <p>{`Praesent id vulputate lorem. Curabitur laoreet venenatis libero at varius. Quisque semper feugiat lorem nec consectetur. Nam risus lorem, gravida sed lacinia eu, placerat et orci. Quisque vitae dictum justo, vitae dapibus libero. Nulla tempor, erat nec aliquam sollicitudin, mi erat efficitur elit, eu pretium enim ligula ut nunc. Mauris tempus erat in magna mollis iaculis. Praesent at maximus enim, a rutrum ipsum. Nunc quis hendrerit ex. Ut laoreet volutpat lobortis. Aenean malesuada semper enim ut imperdiet. Quisque sagittis eros vehicula, iaculis elit ac, viverra sem. Sed ac pretium urna. Suspendisse lorem magna, rutrum a diam nec, elementum tempus nulla.`}</p>\n    <p>{`Integer feugiat, ligula at eleifend tincidunt, ipsum elit vulputate tortor, sed interdum sem orci non ante. Nulla ac aliquam ipsum. Vivamus euismod tortor dui, pulvinar mattis velit pretium quis. Vivamus ullamcorper nisi vel lectus dictum, sed porttitor neque porttitor. Vivamus commodo massa id nibh ultrices euismod ac sit amet velit. In id arcu aliquet, condimentum elit eu, euismod justo. Quisque vestibulum nibh id vestibulum dapibus. Phasellus congue vel nibh eu aliquet. In lectus magna, imperdiet in massa ut, ornare egestas leo. Proin turpis sem, facilisis ac pretium et, dapibus vitae arcu.`}</p>\n    <p>{`Integer tristique maximus nunc. Sed iaculis euismod quam, vitae congue est vestibulum nec. Curabitur semper dolor libero, eget euismod est luctus id. Integer eleifend purus at convallis pretium. Mauris molestie enim vel ullamcorper cursus. Phasellus nec ornare massa, quis gravida augue. Sed semper nulla ac tellus eleifend elementum. Mauris metus tellus, posuere eu tortor in, mollis eleifend arcu. Phasellus quis elementum risus, ac facilisis dui. Aliquam dapibus ipsum mattis ligula luctus, id venenatis nunc viverra. Quisque sit amet interdum est. Praesent at leo sit amet erat pulvinar tincidunt. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae;`}</p>\n    <p>{`Duis eget mauris dui. Donec lacinia, risus in efficitur accumsan, ipsum neque consectetur nulla, pretium pharetra mauris mauris nec magna. Sed risus nisi, lobortis at lectus non, sollicitudin sodales ligula. Pellentesque a elit purus. Sed et tristique ligula, iaculis elementum nisl. Nulla facilisi. Maecenas erat ligula, finibus id felis sit amet, bibendum efficitur magna. Praesent bibendum, mauris id cursus auctor, nibh enim tristique ante, ac iaculis ex urna non massa. Donec ultrices non nisl et euismod. Quisque eget urna dolor. Nulla rhoncus tincidunt consequat. Aenean sit amet risus tempus, pellentesque dui sed, vestibulum nulla. Sed libero tellus, posuere porttitor mi quis, porta facilisis enim.`}</p>\n    <Caller id=\"test\" mdxType=\"Caller\" />\n    <p>{`Sed eget est id elit mattis luctus. Morbi fermentum, turpis vitae gravida luctus, mi diam tempor ex, sed imperdiet nisi ligula ut ipsum. Proin tempus, nulla a pretium volutpat, ipsum velit pulvinar magna, cursus euismod mi augue quis augue. Cras ultricies vel tortor nec iaculis. Pellentesque placerat, orci vel consectetur varius, orci est ultrices sapien, in ullamcorper massa augue id dolor. Sed vel tellus a nisl sollicitudin rhoncus ac sagittis odio. Duis molestie tempus turpis. Praesent consequat sed ligula et ullamcorper. Aliquam erat volutpat. Pellentesque quis urna quis sem fringilla tempus. Proin nec turpis eget turpis rhoncus lacinia ut et magna. Suspendisse vehicula id elit vitae luctus. Maecenas non posuere lacus. In fermentum molestie posuere. Sed tempor, ipsum vitae euismod aliquam, elit enim semper velit, iaculis ullamcorper nisi ligula vitae metus.`}</p>\n    <p>{`Quisque rutrum mattis mauris in molestie. Nullam tincidunt mauris vitae mattis bibendum. Nulla a nunc tortor. Duis non varius purus. Aenean lobortis feugiat dapibus. Proin posuere ullamcorper risus vel dictum. Nullam semper est a elit luctus eleifend. Aliquam hendrerit feugiat turpis eu imperdiet. Vestibulum et dictum enim. Aliquam eget venenatis nisi, sit amet mollis ex.`}</p>\n    <p>{`Sed leo metus, consectetur non turpis a, semper consequat nunc. Proin nunc eros, tempus id purus in, fringilla tristique dui. Mauris non mattis tellus, et finibus orci. Suspendisse in metus id nisl egestas vulputate. Nulla euismod pellentesque tempor. Duis maximus lectus sed arcu tempus, in efficitur erat sagittis. Aenean auctor dolor odio, vitae condimentum enim pretium nec. Sed sit amet mattis turpis. Cras aliquet sem quis consectetur vehicula. Nam tincidunt dapibus felis, sit amet vehicula lorem bibendum quis. Vivamus a erat ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. `}</p>\n    <Caller id=\"test\" testParam={{\n      coucou: 'coucou'\n    }} mdxType=\"Caller\" />\n    <p>{`Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec sit amet lectus eget sapien tempus accumsan. Curabitur ultricies quis enim eu sodales. Praesent a arcu in mauris vehicula tempor non ut lacus. Suspendisse ultricies metus tellus, nec placerat purus bibendum sit amet. In efficitur risus erat, vitae mollis orci pulvinar in. Proin aliquam tellus tortor, sed finibus erat bibendum a. Donec at nisi eget nibh condimentum sollicitudin. Suspendisse sit amet velit sit amet ex interdum varius aliquam nec ex. Nulla dignissim cursus augue vitae commodo. Maecenas in magna justo.`}</p>\n    <p>{`Integer sollicitudin sodales lectus sed tempus. Sed vitae semper orci. Praesent tempor iaculis dui, in varius turpis aliquam nec. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Vestibulum porta sem vitae dictum gravida. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam id elit fermentum, dictum tortor ac, interdum justo. Suspendisse potenti. Etiam urna diam, eleifend ut malesuada eget, volutpat quis leo. Nulla eget nulla porta, consequat ex eget, porttitor felis. Curabitur porta vehicula turpis et lacinia. Vivamus commodo laoreet risus, eu suscipit libero rutrum vitae. Morbi porta, magna ac gravida eleifend, risus arcu vestibulum mauris, id interdum ante risus nec tellus. Donec vitae lacinia risus. Sed condimentum accumsan enim, sit amet consequat arcu volutpat ut.`}</p>\n    <p>{`Ut nec fringilla odio, eget porta nibh. Pellentesque nec ultricies ipsum. Phasellus eu tempus sapien. Praesent sit amet urna dolor. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Pellentesque sollicitudin est ut pretium vestibulum. Aenean ut arcu non ligula blandit bibendum porta ut mi. Quisque elementum mattis nibh eget vulputate. Maecenas facilisis vehicula nibh vitae tincidunt.`}</p>\n    <Caller mdxType=\"Caller\" />\n    <p>{`Praesent id vulputate lorem. Curabitur laoreet venenatis libero at varius. Quisque semper feugiat lorem nec consectetur. Nam risus lorem, gravida sed lacinia eu, placerat et orci. Quisque vitae dictum justo, vitae dapibus libero. Nulla tempor, erat nec aliquam sollicitudin, mi erat efficitur elit, eu pretium enim ligula ut nunc. Mauris tempus erat in magna mollis iaculis. Praesent at maximus enim, a rutrum ipsum. Nunc quis hendrerit ex. Ut laoreet volutpat lobortis. Aenean malesuada semper enim ut imperdiet. Quisque sagittis eros vehicula, iaculis elit ac, viverra sem. Sed ac pretium urna. Suspendisse lorem magna, rutrum a diam nec, elementum tempus nulla.`}</p>\n    <p>{`Integer feugiat, ligula at eleifend tincidunt, ipsum elit vulputate tortor, sed interdum sem orci non ante. Nulla ac aliquam ipsum. Vivamus euismod tortor dui, pulvinar mattis velit pretium quis. Vivamus ullamcorper nisi vel lectus dictum, sed porttitor neque porttitor. Vivamus commodo massa id nibh ultrices euismod ac sit amet velit. In id arcu aliquet, condimentum elit eu, euismod justo. Quisque vestibulum nibh id vestibulum dapibus. Phasellus congue vel nibh eu aliquet. In lectus magna, imperdiet in massa ut, ornare egestas leo. Proin turpis sem, facilisis ac pretium et, dapibus vitae arcu.`}</p>\n    <p>{`Integer tristique maximus nunc. Sed iaculis euismod quam, vitae congue est vestibulum nec. Curabitur semper dolor libero, eget euismod est luctus id. Integer eleifend purus at convallis pretium. Mauris molestie enim vel ullamcorper cursus. Phasellus nec ornare massa, quis gravida augue. Sed semper nulla ac tellus eleifend elementum. Mauris metus tellus, posuere eu tortor in, mollis eleifend arcu. Phasellus quis elementum risus, ac facilisis dui. Aliquam dapibus ipsum mattis ligula luctus, id venenatis nunc viverra. Quisque sit amet interdum est. Praesent at leo sit amet erat pulvinar tincidunt. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae;`}</p>\n    <p>{`Duis eget mauris dui. Donec lacinia, risus in efficitur accumsan, ipsum neque consectetur nulla, pretium pharetra mauris mauris nec magna. Sed risus nisi, lobortis at lectus non, sollicitudin sodales ligula. Pellentesque a elit purus. Sed et tristique ligula, iaculis elementum nisl. Nulla facilisi. Maecenas erat ligula, finibus id felis sit amet, bibendum efficitur magna. Praesent bibendum, mauris id cursus auctor, nibh enim tristique ante, ac iaculis ex urna non massa. Donec ultrices non nisl et euismod. Quisque eget urna dolor. Nulla rhoncus tincidunt consequat. Aenean sit amet risus tempus, pellentesque dui sed, vestibulum nulla. Sed libero tellus, posuere porttitor mi quis, porta facilisis enim.`}</p>\n    <p>{`Sed eget est id elit mattis luctus. Morbi fermentum, turpis vitae gravida luctus, mi diam tempor ex, sed imperdiet nisi ligula ut ipsum. Proin tempus, nulla a pretium volutpat, ipsum velit pulvinar magna, cursus euismod mi augue quis augue. Cras ultricies vel tortor nec iaculis. Pellentesque placerat, orci vel consectetur varius, orci est ultrices sapien, in ullamcorper massa augue id dolor. Sed vel tellus a nisl sollicitudin rhoncus ac sagittis odio. Duis molestie tempus turpis. Praesent consequat sed ligula et ullamcorper. Aliquam erat volutpat. Pellentesque quis urna quis sem fringilla tempus. Proin nec turpis eget turpis rhoncus lacinia ut et magna. Suspendisse vehicula id elit vitae luctus. Maecenas non posuere lacus. In fermentum molestie posuere. Sed tempor, ipsum vitae euismod aliquam, elit enim semper velit, iaculis ullamcorper nisi ligula vitae metus.`}</p>\n    <p>{`Quisque rutrum mattis mauris in molestie. Nullam tincidunt mauris vitae mattis bibendum. Nulla a nunc tortor. Duis non varius purus. Aenean lobortis feugiat dapibus. Proin posuere ullamcorper risus vel dictum. Nullam semper est a elit luctus eleifend. Aliquam hendrerit feugiat turpis eu imperdiet. Vestibulum et dictum enim. Aliquam eget venenatis nisi, sit amet mollis ex.`}</p>\n    <p>{`Sed leo metus, consectetur non turpis a, semper consequat nunc. Proin nunc eros, tempus id purus in, fringilla tristique dui. Mauris non mattis tellus, et finibus orci. Suspendisse in metus id nisl egestas vulputate. Nulla euismod pellentesque tempor. Duis maximus lectus sed arcu tempus, in efficitur erat sagittis. Aenean auctor dolor odio, vitae condimentum enim pretium nec. Sed sit amet mattis turpis. Cras aliquet sem quis consectetur vehicula. Nam tincidunt dapibus felis, sit amet vehicula lorem bibendum quis. Vivamus a erat ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. `}</p>\n    <p>{`Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec sit amet lectus eget sapien tempus accumsan. Curabitur ultricies quis enim eu sodales. Praesent a arcu in mauris vehicula tempor non ut lacus. Suspendisse ultricies metus tellus, nec placerat purus bibendum sit amet. In efficitur risus erat, vitae mollis orci pulvinar in. Proin aliquam tellus tortor, sed finibus erat bibendum a. Donec at nisi eget nibh condimentum sollicitudin. Suspendisse sit amet velit sit amet ex interdum varius aliquam nec ex. Nulla dignissim cursus augue vitae commodo. Maecenas in magna justo.`}</p>\n    <p>{`Integer sollicitudin sodales lectus sed tempus. Sed vitae semper orci. Praesent tempor iaculis dui, in varius turpis aliquam nec. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Vestibulum porta sem vitae dictum gravida. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam id elit fermentum, dictum tortor ac, interdum justo. Suspendisse potenti. Etiam urna diam, eleifend ut malesuada eget, volutpat quis leo. Nulla eget nulla porta, consequat ex eget, porttitor felis. Curabitur porta vehicula turpis et lacinia. Vivamus commodo laoreet risus, eu suscipit libero rutrum vitae. Morbi porta, magna ac gravida eleifend, risus arcu vestibulum mauris, id interdum ante risus nec tellus. Donec vitae lacinia risus. Sed condimentum accumsan enim, sit amet consequat arcu volutpat ut.`}</p>\n    <p>{`Ut nec fringilla odio, eget porta nibh. Pellentesque nec ultricies ipsum. Phasellus eu tempus sapien. Praesent sit amet urna dolor. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Pellentesque sollicitudin est ut pretium vestibulum. Aenean ut arcu non ligula blandit bibendum porta ut mi. Quisque elementum mattis nibh eget vulputate. Maecenas facilisis vehicula nibh vitae tincidunt.`}</p>\n    <p>{`Praesent id vulputate lorem. Curabitur laoreet venenatis libero at varius. Quisque semper feugiat lorem nec consectetur. Nam risus lorem, gravida sed lacinia eu, placerat et orci. Quisque vitae dictum justo, vitae dapibus libero. Nulla tempor, erat nec aliquam sollicitudin, mi erat efficitur elit, eu pretium enim ligula ut nunc. Mauris tempus erat in magna mollis iaculis. Praesent at maximus enim, a rutrum ipsum. Nunc quis hendrerit ex. Ut laoreet volutpat lobortis. Aenean malesuada semper enim ut imperdiet. Quisque sagittis eros vehicula, iaculis elit ac, viverra sem. Sed ac pretium urna. Suspendisse lorem magna, rutrum a diam nec, elementum tempus nulla.`}</p>\n    <p>{`Integer feugiat, ligula at eleifend tincidunt, ipsum elit vulputate tortor, sed interdum sem orci non ante. Nulla ac aliquam ipsum. Vivamus euismod tortor dui, pulvinar mattis velit pretium quis. Vivamus ullamcorper nisi vel lectus dictum, sed porttitor neque porttitor. Vivamus commodo massa id nibh ultrices euismod ac sit amet velit. In id arcu aliquet, condimentum elit eu, euismod justo. Quisque vestibulum nibh id vestibulum dapibus. Phasellus congue vel nibh eu aliquet. In lectus magna, imperdiet in massa ut, ornare egestas leo. Proin turpis sem, facilisis ac pretium et, dapibus vitae arcu.`}</p>\n    <p>{`Integer tristique maximus nunc. Sed iaculis euismod quam, vitae congue est vestibulum nec. Curabitur semper dolor libero, eget euismod est luctus id. Integer eleifend purus at convallis pretium. Mauris molestie enim vel ullamcorper cursus. Phasellus nec ornare massa, quis gravida augue. Sed semper nulla ac tellus eleifend elementum. Mauris metus tellus, posuere eu tortor in, mollis eleifend arcu. Phasellus quis elementum risus, ac facilisis dui. Aliquam dapibus ipsum mattis ligula luctus, id venenatis nunc viverra. Quisque sit amet interdum est. Praesent at leo sit amet erat pulvinar tincidunt. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae;`}</p>\n    <p>{`Duis eget mauris dui. Donec lacinia, risus in efficitur accumsan, ipsum neque consectetur nulla, pretium pharetra mauris mauris nec magna. Sed risus nisi, lobortis at lectus non, sollicitudin sodales ligula. Pellentesque a elit purus. Sed et tristique ligula, iaculis elementum nisl. Nulla facilisi. Maecenas erat ligula, finibus id felis sit amet, bibendum efficitur magna. Praesent bibendum, mauris id cursus auctor, nibh enim tristique ante, ac iaculis ex urna non massa. Donec ultrices non nisl et euismod. Quisque eget urna dolor. Nulla rhoncus tincidunt consequat. Aenean sit amet risus tempus, pellentesque dui sed, vestibulum nulla. Sed libero tellus, posuere porttitor mi quis, porta facilisis enim.`}</p>\n    <p>{`Sed eget est id elit mattis luctus. Morbi fermentum, turpis vitae gravida luctus, mi diam tempor ex, sed imperdiet nisi ligula ut ipsum. Proin tempus, nulla a pretium volutpat, ipsum velit pulvinar magna, cursus euismod mi augue quis augue. Cras ultricies vel tortor nec iaculis. Pellentesque placerat, orci vel consectetur varius, orci est ultrices sapien, in ullamcorper massa augue id dolor. Sed vel tellus a nisl sollicitudin rhoncus ac sagittis odio. Duis molestie tempus turpis. Praesent consequat sed ligula et ullamcorper. Aliquam erat volutpat. Pellentesque quis urna quis sem fringilla tempus. Proin nec turpis eget turpis rhoncus lacinia ut et magna. Suspendisse vehicula id elit vitae luctus. Maecenas non posuere lacus. In fermentum molestie posuere. Sed tempor, ipsum vitae euismod aliquam, elit enim semper velit, iaculis ullamcorper nisi ligula vitae metus.`}</p>\n    <p>{`Quisque rutrum mattis mauris in molestie. Nullam tincidunt mauris vitae mattis bibendum. Nulla a nunc tortor. Duis non varius purus. Aenean lobortis feugiat dapibus. Proin posuere ullamcorper risus vel dictum. Nullam semper est a elit luctus eleifend. Aliquam hendrerit feugiat turpis eu imperdiet. Vestibulum et dictum enim. Aliquam eget venenatis nisi, sit amet mollis ex.`}</p>\n    <p>{`Sed leo metus, consectetur non turpis a, semper consequat nunc. Proin nunc eros, tempus id purus in, fringilla tristique dui. Mauris non mattis tellus, et finibus orci. Suspendisse in metus id nisl egestas vulputate. Nulla euismod pellentesque tempor. Duis maximus lectus sed arcu tempus, in efficitur erat sagittis. Aenean auctor dolor odio, vitae condimentum enim pretium nec. Sed sit amet mattis turpis. Cras aliquet sem quis consectetur vehicula. Nam tincidunt dapibus felis, sit amet vehicula lorem bibendum quis. Vivamus a erat ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. `}</p>\n    <p>{`Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec sit amet lectus eget sapien tempus accumsan. Curabitur ultricies quis enim eu sodales. Praesent a arcu in mauris vehicula tempor non ut lacus. Suspendisse ultricies metus tellus, nec placerat purus bibendum sit amet. In efficitur risus erat, vitae mollis orci pulvinar in. Proin aliquam tellus tortor, sed finibus erat bibendum a. Donec at nisi eget nibh condimentum sollicitudin. Suspendisse sit amet velit sit amet ex interdum varius aliquam nec ex. Nulla dignissim cursus augue vitae commodo. Maecenas in magna justo.`}</p>\n    <p>{`Integer sollicitudin sodales lectus sed tempus. Sed vitae semper orci. Praesent tempor iaculis dui, in varius turpis aliquam nec. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Vestibulum porta sem vitae dictum gravida. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam id elit fermentum, dictum tortor ac, interdum justo. Suspendisse potenti. Etiam urna diam, eleifend ut malesuada eget, volutpat quis leo. Nulla eget nulla porta, consequat ex eget, porttitor felis. Curabitur porta vehicula turpis et lacinia. Vivamus commodo laoreet risus, eu suscipit libero rutrum vitae. Morbi porta, magna ac gravida eleifend, risus arcu vestibulum mauris, id interdum ante risus nec tellus. Donec vitae lacinia risus. Sed condimentum accumsan enim, sit amet consequat arcu volutpat ut.`}</p>\n    <p>{`Ut nec fringilla odio, eget porta nibh. Pellentesque nec ultricies ipsum. Phasellus eu tempus sapien. Praesent sit amet urna dolor. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Pellentesque sollicitudin est ut pretium vestibulum. Aenean ut arcu non ligula blandit bibendum porta ut mi. Quisque elementum mattis nibh eget vulputate. Maecenas facilisis vehicula nibh vitae tincidunt.`}</p>\n    <p>{`Praesent id vulputate lorem. Curabitur laoreet venenatis libero at varius. Quisque semper feugiat lorem nec consectetur. Nam risus lorem, gravida sed lacinia eu, placerat et orci. Quisque vitae dictum justo, vitae dapibus libero. Nulla tempor, erat nec aliquam sollicitudin, mi erat efficitur elit, eu pretium enim ligula ut nunc. Mauris tempus erat in magna mollis iaculis. Praesent at maximus enim, a rutrum ipsum. Nunc quis hendrerit ex. Ut laoreet volutpat lobortis. Aenean malesuada semper enim ut imperdiet. Quisque sagittis eros vehicula, iaculis elit ac, viverra sem. Sed ac pretium urna. Suspendisse lorem magna, rutrum a diam nec, elementum tempus nulla.`}</p>\n    <p>{`Integer feugiat, ligula at eleifend tincidunt, ipsum elit vulputate tortor, sed interdum sem orci non ante. Nulla ac aliquam ipsum. Vivamus euismod tortor dui, pulvinar mattis velit pretium quis. Vivamus ullamcorper nisi vel lectus dictum, sed porttitor neque porttitor. Vivamus commodo massa id nibh ultrices euismod ac sit amet velit. In id arcu aliquet, condimentum elit eu, euismod justo. Quisque vestibulum nibh id vestibulum dapibus. Phasellus congue vel nibh eu aliquet. In lectus magna, imperdiet in massa ut, ornare egestas leo. Proin turpis sem, facilisis ac pretium et, dapibus vitae arcu.`}</p>\n    <p>{`Integer tristique maximus nunc. Sed iaculis euismod quam, vitae congue est vestibulum nec. Curabitur semper dolor libero, eget euismod est luctus id. Integer eleifend purus at convallis pretium. Mauris molestie enim vel ullamcorper cursus. Phasellus nec ornare massa, quis gravida augue. Sed semper nulla ac tellus eleifend elementum. Mauris metus tellus, posuere eu tortor in, mollis eleifend arcu. Phasellus quis elementum risus, ac facilisis dui. Aliquam dapibus ipsum mattis ligula luctus, id venenatis nunc viverra. Quisque sit amet interdum est. Praesent at leo sit amet erat pulvinar tincidunt. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae;`}</p>\n    <p>{`Duis eget mauris dui. Donec lacinia, risus in efficitur accumsan, ipsum neque consectetur nulla, pretium pharetra mauris mauris nec magna. Sed risus nisi, lobortis at lectus non, sollicitudin sodales ligula. Pellentesque a elit purus. Sed et tristique ligula, iaculis elementum nisl. Nulla facilisi. Maecenas erat ligula, finibus id felis sit amet, bibendum efficitur magna. Praesent bibendum, mauris id cursus auctor, nibh enim tristique ante, ac iaculis ex urna non massa. Donec ultrices non nisl et euismod. Quisque eget urna dolor. Nulla rhoncus tincidunt consequat. Aenean sit amet risus tempus, pellentesque dui sed, vestibulum nulla. Sed libero tellus, posuere porttitor mi quis, porta facilisis enim.`}</p>\n    <p>{`Sed eget est id elit mattis luctus. Morbi fermentum, turpis vitae gravida luctus, mi diam tempor ex, sed imperdiet nisi ligula ut ipsum. Proin tempus, nulla a pretium volutpat, ipsum velit pulvinar magna, cursus euismod mi augue quis augue. Cras ultricies vel tortor nec iaculis. Pellentesque placerat, orci vel consectetur varius, orci est ultrices sapien, in ullamcorper massa augue id dolor. Sed vel tellus a nisl sollicitudin rhoncus ac sagittis odio. Duis molestie tempus turpis. Praesent consequat sed ligula et ullamcorper. Aliquam erat volutpat. Pellentesque quis urna quis sem fringilla tempus. Proin nec turpis eget turpis rhoncus lacinia ut et magna. Suspendisse vehicula id elit vitae luctus. Maecenas non posuere lacus. In fermentum molestie posuere. Sed tempor, ipsum vitae euismod aliquam, elit enim semper velit, iaculis ullamcorper nisi ligula vitae metus.`}</p>\n    <p>{`Quisque rutrum mattis mauris in molestie. Nullam tincidunt mauris vitae mattis bibendum. Nulla a nunc tortor. Duis non varius purus. Aenean lobortis feugiat dapibus. Proin posuere ullamcorper risus vel dictum. Nullam semper est a elit luctus eleifend. Aliquam hendrerit feugiat turpis eu imperdiet. Vestibulum et dictum enim. Aliquam eget venenatis nisi, sit amet mollis ex.`}</p>\n    <p>{`Sed leo metus, consectetur non turpis a, semper consequat nunc. Proin nunc eros, tempus id purus in, fringilla tristique dui. Mauris non mattis tellus, et finibus orci. Suspendisse in metus id nisl egestas vulputate. Nulla euismod pellentesque tempor. Duis maximus lectus sed arcu tempus, in efficitur erat sagittis. Aenean auctor dolor odio, vitae condimentum enim pretium nec. Sed sit amet mattis turpis. Cras aliquet sem quis consectetur vehicula. Nam tincidunt dapibus felis, sit amet vehicula lorem bibendum quis. Vivamus a erat ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. `}</p>\n    <p>{`Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec sit amet lectus eget sapien tempus accumsan. Curabitur ultricies quis enim eu sodales. Praesent a arcu in mauris vehicula tempor non ut lacus. Suspendisse ultricies metus tellus, nec placerat purus bibendum sit amet. In efficitur risus erat, vitae mollis orci pulvinar in. Proin aliquam tellus tortor, sed finibus erat bibendum a. Donec at nisi eget nibh condimentum sollicitudin. Suspendisse sit amet velit sit amet ex interdum varius aliquam nec ex. Nulla dignissim cursus augue vitae commodo. Maecenas in magna justo.`}</p>\n    <p>{`Integer sollicitudin sodales lectus sed tempus. Sed vitae semper orci. Praesent tempor iaculis dui, in varius turpis aliquam nec. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Vestibulum porta sem vitae dictum gravida. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam id elit fermentum, dictum tortor ac, interdum justo. Suspendisse potenti. Etiam urna diam, eleifend ut malesuada eget, volutpat quis leo. Nulla eget nulla porta, consequat ex eget, porttitor felis. Curabitur porta vehicula turpis et lacinia. Vivamus commodo laoreet risus, eu suscipit libero rutrum vitae. Morbi porta, magna ac gravida eleifend, risus arcu vestibulum mauris, id interdum ante risus nec tellus. Donec vitae lacinia risus. Sed condimentum accumsan enim, sit amet consequat arcu volutpat ut.`}</p>\n    <p>{`Ut nec fringilla odio, eget porta nibh. Pellentesque nec ultricies ipsum. Phasellus eu tempus sapien. Praesent sit amet urna dolor. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Pellentesque sollicitudin est ut pretium vestibulum. Aenean ut arcu non ligula blandit bibendum porta ut mi. Quisque elementum mattis nibh eget vulputate. Maecenas facilisis vehicula nibh vitae tincidunt.`}</p>\n    <p>{`Praesent id vulputate lorem. Curabitur laoreet venenatis libero at varius. Quisque semper feugiat lorem nec consectetur. Nam risus lorem, gravida sed lacinia eu, placerat et orci. Quisque vitae dictum justo, vitae dapibus libero. Nulla tempor, erat nec aliquam sollicitudin, mi erat efficitur elit, eu pretium enim ligula ut nunc. Mauris tempus erat in magna mollis iaculis. Praesent at maximus enim, a rutrum ipsum. Nunc quis hendrerit ex. Ut laoreet volutpat lobortis. Aenean malesuada semper enim ut imperdiet. Quisque sagittis eros vehicula, iaculis elit ac, viverra sem. Sed ac pretium urna. Suspendisse lorem magna, rutrum a diam nec, elementum tempus nulla.`}</p>\n    <p>{`Integer feugiat, ligula at eleifend tincidunt, ipsum elit vulputate tortor, sed interdum sem orci non ante. Nulla ac aliquam ipsum. Vivamus euismod tortor dui, pulvinar mattis velit pretium quis. Vivamus ullamcorper nisi vel lectus dictum, sed porttitor neque porttitor. Vivamus commodo massa id nibh ultrices euismod ac sit amet velit. In id arcu aliquet, condimentum elit eu, euismod justo. Quisque vestibulum nibh id vestibulum dapibus. Phasellus congue vel nibh eu aliquet. In lectus magna, imperdiet in massa ut, ornare egestas leo. Proin turpis sem, facilisis ac pretium et, dapibus vitae arcu.`}</p>\n    <p>{`Integer tristique maximus nunc. Sed iaculis euismod quam, vitae congue est vestibulum nec. Curabitur semper dolor libero, eget euismod est luctus id. Integer eleifend purus at convallis pretium. Mauris molestie enim vel ullamcorper cursus. Phasellus nec ornare massa, quis gravida augue. Sed semper nulla ac tellus eleifend elementum. Mauris metus tellus, posuere eu tortor in, mollis eleifend arcu. Phasellus quis elementum risus, ac facilisis dui. Aliquam dapibus ipsum mattis ligula luctus, id venenatis nunc viverra. Quisque sit amet interdum est. Praesent at leo sit amet erat pulvinar tincidunt. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae;`}</p>\n    <p>{`Duis eget mauris dui. Donec lacinia, risus in efficitur accumsan, ipsum neque consectetur nulla, pretium pharetra mauris mauris nec magna. Sed risus nisi, lobortis at lectus non, sollicitudin sodales ligula. Pellentesque a elit purus. Sed et tristique ligula, iaculis elementum nisl. Nulla facilisi. Maecenas erat ligula, finibus id felis sit amet, bibendum efficitur magna. Praesent bibendum, mauris id cursus auctor, nibh enim tristique ante, ac iaculis ex urna non massa. Donec ultrices non nisl et euismod. Quisque eget urna dolor. Nulla rhoncus tincidunt consequat. Aenean sit amet risus tempus, pellentesque dui sed, vestibulum nulla. Sed libero tellus, posuere porttitor mi quis, porta facilisis enim.`}</p>\n    <p>{`Sed eget est id elit mattis luctus. Morbi fermentum, turpis vitae gravida luctus, mi diam tempor ex, sed imperdiet nisi ligula ut ipsum. Proin tempus, nulla a pretium volutpat, ipsum velit pulvinar magna, cursus euismod mi augue quis augue. Cras ultricies vel tortor nec iaculis. Pellentesque placerat, orci vel consectetur varius, orci est ultrices sapien, in ullamcorper massa augue id dolor. Sed vel tellus a nisl sollicitudin rhoncus ac sagittis odio. Duis molestie tempus turpis. Praesent consequat sed ligula et ullamcorper. Aliquam erat volutpat. Pellentesque quis urna quis sem fringilla tempus. Proin nec turpis eget turpis rhoncus lacinia ut et magna. Suspendisse vehicula id elit vitae luctus. Maecenas non posuere lacus. In fermentum molestie posuere. Sed tempor, ipsum vitae euismod aliquam, elit enim semper velit, iaculis ullamcorper nisi ligula vitae metus.`}</p>\n    <p>{`Quisque rutrum mattis mauris in molestie. Nullam tincidunt mauris vitae mattis bibendum. Nulla a nunc tortor. Duis non varius purus. Aenean lobortis feugiat dapibus. Proin posuere ullamcorper risus vel dictum. Nullam semper est a elit luctus eleifend. Aliquam hendrerit feugiat turpis eu imperdiet. Vestibulum et dictum enim. Aliquam eget venenatis nisi, sit amet mollis ex.`}</p>\n    <p>{`Sed leo metus, consectetur non turpis a, semper consequat nunc. Proin nunc eros, tempus id purus in, fringilla tristique dui. Mauris non mattis tellus, et finibus orci. Suspendisse in metus id nisl egestas vulputate. Nulla euismod pellentesque tempor. Duis maximus lectus sed arcu tempus, in efficitur erat sagittis. Aenean auctor dolor odio, vitae condimentum enim pretium nec. Sed sit amet mattis turpis. Cras aliquet sem quis consectetur vehicula. Nam tincidunt dapibus felis, sit amet vehicula lorem bibendum quis. Vivamus a erat ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. `}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react';\n\nexport const VisualizationControlContext = React.createContext({\n\n})\n\nexport const DatasetsContext = React.createContext({\n\n})\n","var map = {\n\t\"./en/about.mdx\": 212,\n\t\"./en/part-1.mdx\": 201,\n\t\"./en/part-2-1.mdx\": 204,\n\t\"./en/part-2-2.mdx\": 206,\n\t\"./en/part-2-3.mdx\": 208,\n\t\"./en/part-2-intro.mdx\": 202,\n\t\"./en/part-3.mdx\": 210,\n\t\"./en/test-scrolly.mdx\": 200,\n\t\"./fr/a-propos.mdx\": 211,\n\t\"./fr/partie-1.mdx\": 213,\n\t\"./fr/partie-2-1.mdx\": 203,\n\t\"./fr/partie-2-2.mdx\": 205,\n\t\"./fr/partie-2-3.mdx\": 207,\n\t\"./fr/partie-2-intro.mdx\": 214,\n\t\"./fr/partie-3.mdx\": 209,\n\t\"./fr/test-scrolly.mdx\": 215\n};\n\nfunction webpackAsyncContext(req) {\n\treturn Promise.resolve().then(function() {\n\t\tif(!__webpack_require__.o(map, req)) {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t}\n\n\t\tvar id = map[req];\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 639;\nmodule.exports = webpackAsyncContext;","\n\nfunction SvgComponent ({path}) {\n    return <img alt={path} src={`${process.env.PUBLIC_URL}${path}`} />\n} \n\nexport default SvgComponent;","import SvgComponent from './SvgComponent';\n\nexport default SvgComponent;","import VegaComponent from './VegaComponent';\n\nexport default VegaComponent;","import React, {useState, useEffect} from 'react';\nimport {VegaLite} from 'react-vega';\nimport {csvParse} from 'd3-dsv';\nimport get from 'axios';\n\nconst VegaComponent = ({\n  data: filename,\n  spec\n}) => {\n    // useState renvoie un state et un seter qui permet de le modifier\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const URL = `${process.env.PUBLIC_URL}/data/${filename}`;\n\n  useEffect(() => {\n    // aller chercher les données (get : lancement de la promesse se lance de suite : synchrone, then et catch plus tard)\n    get(URL)\n    .then(({data: csvString}) => {\n      // les convertir en js (avec d3-dsv)\n      const newData = csvParse(csvString);\n      // vega prend qqch comme ça : [{prop1: 'val', pro2: 'val2'}]\n      setData(newData);\n      setLoading(false);\n    })\n    .catch((err) => {\n      setLoading(false);\n    })\n  }, [URL])\n  \n  if (!spec) {\n    return <div>Vous devez spécifier une spec pour le composant vega.</div>\n  }\n\n  if (loading) {\n    return (\n      <div>Chargement des données ({URL}) ...</div>\n    )\n  } else if (!data) {\n    return (\n    <div>Erreur ...</div>\n    )\n  }\n  return (\n      <div>\n        <VegaLite\n          spec={{\n            ...spec,\n            \"$schema\": \"https://vega.github.io/schema/vega-lite/v5.json\",\n            \"data\": {\n              \"values\": data\n            }\n          }}\n        />\n      </div>\n  )\n}\n\nexport default VegaComponent;\n","import Color from 'color';\nimport {scaleLinear} from 'd3-scale';\n// import {evalIfNodeMatches} from '../../helpers/misc';\n\n\n// Defaults\nconst DEFAULT_NODE_COLOR = '#999';\nconst DEFAULT_NODE_SIZE_RANGE = [2, 15];\n\nexport function createNodeReducer({\n  nodeColor,\n  nodeSize,\n  nodeLabel,\n  nodeSizeFactor = 1,\n  extents,\n  // filters = [],\n  // filtersModeAnd\n}) {\n  \n  let nodeSizeScale = null;\n\n  // Creating scales\n  if (!nodeSize) {\n    nodeSizeScale = scaleLinear()\n      .domain([extents.nodeSize.min, extents.nodeSize.max])\n      .range(DEFAULT_NODE_SIZE_RANGE);\n  } else {\n    nodeSizeScale = scaleLinear()\n      .domain([nodeSize.min, nodeSize.max])\n      .range(DEFAULT_NODE_SIZE_RANGE);\n  }\n  \n  // Creating actual reducer\n  const nodeReducer = function (key, attr) {\n    const renderedNode = {\n      ...attr,\n      x: isNaN(attr.x) || attr.x === undefined ? 0 : attr.x,\n      y: isNaN(attr.y) || attr.y === undefined ? 0 : attr.y\n    };\n\n\n\n    // Color\n    if (!nodeColor) {\n      renderedNode.color = attr.color || DEFAULT_NODE_COLOR;\n    } else {\n      renderedNode.color =\n        nodeColor.palette[attr[nodeColor.name]] || DEFAULT_NODE_COLOR;\n    }\n    // Size\n    if (!nodeSize) {\n      let v = attr.size || 1;\n      renderedNode.size = nodeSizeScale(v);\n    } else {\n      let v = attr[nodeSize.name];\n      v = typeof v === 'number' ? v : 1;\n      renderedNode.size = nodeSizeScale(v);\n    }\n\n    renderedNode.size *= nodeSizeFactor;\n\n    return renderedNode;\n  };\n\n\n  return nodeReducer;\n}\n\n\nexport function createEdgeReducer({\n  nodeColor,\n  nodeSize,\n  nodeLabel,\n  nodeSizeFactor = 1,\n  extents,\n  dontColorEdges,\n  edgesMap\n}) {\n\n  \n  // Creating actual reducer\n  const edgeReducer = function (key, attr, el1, el2) {\n    const {\n      sourceNode, \n      targetNode\n    } = edgesMap.get(key);\n    const renderedEdge = {};\n    // color with biggest node\n    const sourceNodeSize = nodeSize ? sourceNode[nodeSize.name] : sourceNode.size;\n    const targetNodeSize = nodeSize ? targetNode[nodeSize.name] : targetNode.size;\n    const biggerNode = sourceNodeSize > targetNodeSize ? sourceNode : targetNode;\n\n    // Color\n    if (biggerNode) {\n      if (!nodeColor) {\n        renderedEdge.color = biggerNode.color || DEFAULT_NODE_COLOR;\n      } else {\n        renderedEdge.color =\n          nodeColor.palette[biggerNode[nodeColor.name]] || DEFAULT_NODE_COLOR;\n      }\n      renderedEdge.color = Color(renderedEdge.color).lighten(0.4).rgb().string();\n    }\n    return renderedEdge;\n  };\n\n  return edgeReducer;\n}","import { csvParse } from 'd3-dsv';\nimport get from 'axios';\nimport iwanthue from 'iwanthue';\nimport {useRef, useEffect} from 'react';\n// import Graph from 'graphology-types';\n\nconst DEFAULT_COLOR_SPACE = {\n  cmin: 25.59,\n  cmax: 55.59,\n  lmin: 60.94,\n  lmax: 90.94\n};\n\nconst SINGLE_COLOR_PALETTE = ['#999'];\n\nexport function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport function generatePalette(name, count) {\n  if (count === 1 || !count) return SINGLE_COLOR_PALETTE;\n  else if (count === 2) {\n    return ['#D77186', '#61A2DA']\n  }\n\n  return iwanthue(count, {\n    colorSpace: DEFAULT_COLOR_SPACE,\n    seed: name,\n    clustering: 'force-vector'\n  });\n}\n\n\nconst _filterData = (data, { startYear, endYear, year, params, ...rest }) => {\n  console.group('filters');\n  console.time('filters time');\n  console.log('input', data);\n  /* dans data on a un dict de type : \n  [   {year: \"1789\", customs_region: \"La Rochelle\", partner_simplification: \"Iles\", export_import: ”Import\", product_revolutionempire: \"...\", ...},\n      {year: \"1782\", customs_region: \"Bordeaux\", ...},\n      {...},\n      columns: [\"year\", \"customs_region\", ...]\n\n  ]\n  */\n  let filteredData = data.filter(row => {\n    let rowYear = row.year ? +row.year.split(\".\")[0] : undefined;\n    if (startYear && endYear) {\n      return rowYear >= +startYear && rowYear <= +endYear;\n      // @todo : quand on aura rajouté startYear et endYear pour\n      // la récupération de portic il s'agira de déduire ce year des données\n    } else if (year && rowYear) {\n      return year === +rowYear;\n    } else return true;\n  })\n  // console.log('1', filteredData);\n\n  filteredData = filteredData.filter(row => {\n    // pour chaque filtre (sauf filtre timespan et filtrage des colomnes) :\n    let isValid = true;\n    // key --> 'year', filter_value --> 1789\n    // kwargs obtenu sous forme de dict : --> { year: 1789, customs_region: 'La Rochelle' }\n\n    // kwargs semble être indiçable mais pas sur qu'on doive pas le mettre dans un format spécial pas comme python\n    // sinon suggestion : function.apply(obj, [args])\n\n    // ligne originale : je ne sais pas pourquoi on ne veut prendre en compte les filtres que pour les colonnes qui ne sont pas à garder dans le résultats (colonne données dans l'argument 'params' sous forme de liste)\n    // for (let key,filter_value in [param for param in kwargs.items() if param[0] not in ['params']]): \n    // console.log('rest', rest);\n    Object.entries(rest)\n      .some(([key, inputFilterValue]) => {\n        const rowValue = row[key];\n        let filterValue = inputFilterValue;\n        // console.log('filter value 1', filterValue);\n        // si la valeur est une liste : on caste en string ses membres\n        if (Array.isArray(filterValue)) {\n          filterValue = filterValue.map(x => x + ''); // caster en string\n        }\n        // sinon c'est un tableau à une valeur qu'on caste en string\n        else {\n          filterValue = [filterValue + ''];\n        }\n        // console.log('filter value final', filterValue);\n        // à partir de là, filter_value est une liste de strings\n\n        // si la ligne a un attribut qui fait partie des valeurs acceptées par le filtre => on examine les autres filtres \n        if (filterValue.length > 0 && !(rowValue.includes(filterValue))) {\n          isValid = false;\n          return true;\n        }\n        return false;\n      })\n\n    return isValid;\n  })\n\n  // console.log('2', filteredData);\n\n\n  const transformedData = filteredData.map(row => {\n    let rowFormated = {};\n\n    // on ne garde que les colonnes qui nous intéressent dans le résultat => \n    // console.log(\"params : \", params);\n    // console.log(\"typeof(params) !== 'undefined' : \", (typeof params !== 'undefined'));\n    // console.log(\"row : \", row);\n    // on ne passe jamais ni dans le if ni dans le else, je ne sais pas pourquoi \n    // if (typeof params !== 'undefined') {\n\n    // if (params &&\n    // ci-dessous : tester si objet vide\n    if (!!params && Object.keys(params).length) {\n      // console.log(\"we are selecting only those columns : \", params);\n      for (let [column, value] of Object.entries(row)) {\n        if (params.includes(column)) {\n          rowFormated[column] = value;\n        }\n      }\n    }\n    // de base c'était else { ... } et on passait jamais dedans apparemment du coup là c'est bizarre\n    // else if (typeof params !== 'undefined') {\n    else {\n      // rowFormated = {...row}; // différencier rowFormated et row (nouvelle ref en unpackant et copiant key / params de row) => en JS differencier input d'output\n      // console.log(\"rowFormated = \", row);\n    }\n    // console.log(\"après le if / else\");\n    return rowFormated;\n  })\n  // console.log('3', transformedData);\n  console.timeEnd('filters time');\n  console.groupEnd('filters');\n  return transformedData;\n}\n\n\nexport const getToflitFlowsByCsv = ({\n  startYear = null,\n  endYear = null,\n  year = null,\n  params = null,\n  ...rest // https://www.peterbe.com/plog/javascript-destructuring-like-python-kwargs-with-defaults ; \n  // \"standard\" JavaScript array : https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters\n}) => {\n  // méthode de gestion avec callback\n  // let result;\n  // trucAsynchrone\n  // .then(data => {\n  //     callback(null, data);\n  // })\n  // .catch(error => {\n  //     callback(error);\n  // })\n\n  // méthode de gestion avec promesse\n  // return new Promise((resolve, reject) => {\n  //     trucAsynchrone\n  //     .then(data => {\n  //         // faire des trucs avec data\n  //         resolve(data);\n  //     })\n  //     .catch(error => {\n  //         // faire des choses avec l'erreur\n  //         reject(error);\n  //     })\n  // })\n\n  // méthode async/await\n  // const result = await trucAsynchrone();\n  // return result;\n\n  /*\n  Synopsis : récupère les flux toflit18\n  --- \n  Paramètres :\n  * startYear : <int> # année de début\n  * endYear : <int> # année de fin\n  * params : <arr> # propriétés à renvoyer\n  * [tous les noms de colonne des flux] : <arr/string> valeurs à filtrer dans les flux (peut être une ou plusieurs valeurs)\n  */\n\n  return new Promise((resolve, reject) => {\n\n    // let results = []; // ça sert à quelque chose ?? pour moi c'est pas utilisé, sinon je ne devrais pas avoir l'erreur \"t.map is not a function\" \n    // => voir https://www.pluralsight.com/guides/typeerror-handling-in-react.js-for-map-function\n\n    let finalStartYear = startYear; // on ne modif pas params en JS\n    let finalEndYear = endYear;\n\n\n\n    // 1. Test de la validité des paramètres\n    if (startYear !== null && endYear === null) {\n      return reject(\"You must put an end year\");\n    } // pas sure pour les accolades\n    else if (endYear !== null && startYear === null) {\n      return reject(\"You must put a start year\");\n    }\n\n    if ((startYear !== null || endYear !== null) && year !== null) {\n      finalStartYear = null;\n      finalEndYear = null;\n    }\n\n    /* en l'état ça ne fonctionne pas */\n    const URL = `${process.env.PUBLIC_URL || 'localhost:3001'}/data/toflit18_flows_sprint.csv`;\n    // console.log(\"URL '${process.env.PUBLIC_URL}/data/toflit18_flows_sprint.csv' : \", URL)\n    get(URL) // get de axios\n      .then(({ data: csvString }) => {\n        // conversion en js (avec d3-dsv)\n        const newData = csvParse(csvString);\n        // faire des choses avec les résultats (filtres, ...)\n        const finalData = _filterData(newData, { startYear: finalStartYear, endYear: finalEndYear, year, params, ...rest });\n        // console.log(\"finalData : \", finalData);\n        resolve(finalData);\n      })\n      .catch((err) => {\n        reject(err);\n      })\n\n  })\n\n}\n\nexport const getToflitFlowsByApi = ({\n  startYear = null,\n  endYear = null,\n  year = null,\n  params = null,\n  ...rest\n}) => {\n\n  return new Promise((resolve, reject) => {\n\n    let finalStartYear = startYear; // on ne modif pas params en JS\n    let finalEndYear = endYear;\n\n    // 1. Test de la validité des paramètres\n    if (startYear !== null && endYear === null) {\n      return reject(\"You must put an end year\");\n    } // pas sure pour les accolades\n    else if (endYear !== null && startYear === null) {\n      return reject(\"You must put a start year\");\n    }\n\n    if ((startYear !== null || endYear !== null) && year !== null) {\n      finalStartYear = null;\n      finalEndYear = null;\n    }\n\n    const URL = `http://data.portic.fr/api/flows/?date=${year}`;\n    console.log({ URL })\n    // équivalent à : const URL = 'http://data.portic.fr/api/flows/?date=' + year;\n    get(URL) // get de axios\n      // mixed content issue => comme l'API ne fournit pas d'accès HTTPS je me sentais un peu bloquée\n      .then(({ data: str }) => {\n        // conversion en js (avec d3-dsv)\n        // const newData = csvParse(csvString);\n        try {\n          const newData = JSON.parse(str);\n          // contraire : JSON.stringify()\n          // faire des choses avec les résultats (filtres, ...)\n          const finalData = _filterData(newData, { startYear: finalStartYear, endYear: finalEndYear, year, params, ...rest })\n          resolve(finalData);\n        } catch (e) {\n          reject(e);\n        }\n\n      })\n      .catch((err) => {\n        reject(err);\n      })\n\n  })\n\n}\n\n\n\n\n\nexport const getPorticPointcallsByApi = ({\n  filename,\n  spec\n}) => {\n\n}\n\n","import React from 'react';\nimport cx from 'classnames';\n\n\nexport default function GraphControls({\n  rescale, \n  zoomIn, \n  zoomOut, \n}) {\n  return (\n    <ul className={cx(\"VisControls GraphControls\")}>\n      <li className=\"vis-controls-item camera\">\n      \n      <button onClick={zoomOut}>\n        -\n      </button>\n      <button onClick={zoomIn}>\n        +\n      </button>\n      <button onClick={rescale}>\n        Recentrer\n      </button>\n      </li>\n    </ul>\n  );\n}","import React, {useCallback, useRef, useState, useEffect, useMemo} from 'react';\nimport gexf from 'graphology-gexf';\nimport Graph from 'graphology';\nimport {WebGLRenderer as Renderer} from 'sigma';\nimport {scaleLinear} from 'd3-scale';\nimport {min, max, extent} from 'd3-array';\nimport {uniq} from 'lodash';\nimport get from 'axios';\n\nimport {createNodeReducer, createEdgeReducer} from './reducers';\nimport {generatePalette, usePrevious} from '../../helpers/misc';\n\nimport GraphControls from './GraphControls';\n\nimport './GraphContainer.css';\n\n// Defaults\nconst CELL_HEIGHT_RANGE = [200, 10];\nconst CELL_WIDTH_RANGE = [300, 30];\nconst CELL_HEIGHT_SCALE = scaleLinear().domain([0, 1]).range(CELL_HEIGHT_RANGE);\nconst CELL_WIDTH_SCALE = scaleLinear().domain([0, 1]).range(CELL_WIDTH_RANGE);\n\n// Camera controls\nfunction rescale(renderer) {\n  const camera = renderer.getCamera();\n  camera.animatedReset(renderer);\n}\n\nfunction zoomIn(renderer) {\n  const camera = renderer.getCamera();\n  camera.animatedZoom(renderer);\n}\n\nfunction zoomOut(renderer) {\n  const camera = renderer.getCamera();\n  camera.animatedUnzoom(renderer);\n}\n\nfunction GraphContainer({\n  graph,\n  nodeColor: nodeColorVariable,\n  nodeSize: nodeSizeVariable,\n  labelDensity,\n  nodeLabel,\n  onCameraUpdate,\n  cameraPosition,\n  updateTimestamp,\n}) {\n  let sizes = useMemo(() => {\n    const res = [];\n    graph.forEachNode((_node, attributes) => {\n      res.push(+(nodeSizeVariable ? attributes[nodeSizeVariable] : attributes.size));\n    })\n    return res;\n  }, [nodeSizeVariable, graph]);\n  \n  const sizeExtent = extent(sizes);\n  const extents = {\n    nodeSize: {\n      min: sizeExtent[0],\n      max: sizeExtent[1]\n    }\n  }\n\n  const nodeSize = useMemo(() => {\n    if (nodeSizeVariable) {\n\n      return {\n        min: min(sizeExtent),\n        max: max(sizeExtent),\n        name: nodeSizeVariable\n      }\n    } else return undefined;\n  }, [nodeSizeVariable, graph])\n\n  const nodeColor = useMemo(() => {\n    if (nodeColorVariable) {\n      let values = [];\n      graph.forEachNode((_node, attr) => {\n        values.push(attr[nodeColorVariable])\n      })\n      values = uniq(values);\n      const colors = generatePalette(nodeColorVariable, values.length);\n      let palette = {};\n      let i = 0;\n      values.forEach(option => {\n        palette[option] = colors[i];\n        i++;\n      });\n      return {\n        palette,\n        name: nodeColorVariable\n      }\n    } else return undefined;\n  }, [nodeColorVariable, graph])\n\n  const edgesMap = useMemo(() => {\n    const m = new Map()\n    graph.forEach(\n      (_source, _target, sourceAttributes, targetAttributes, edge, _edgeAttributes) => {\n      m.set(edge, {sourceNode: sourceAttributes, targetNode: targetAttributes})\n    });\n    return m;\n  }, [graph])\n\n  const previousNodeColor = usePrevious(nodeColor);\n  const previousNodeSize = usePrevious(nodeSize);\n  const previousNodeLabel = usePrevious(nodeLabel);\n  const previousLabelDensity = usePrevious(labelDensity);\n  // const previousSearchString = usePrevious(searchString);\n  // const previousDontColorEdges = usePrevious(dontColorEdges);\n  // const previousFilters = usePrevious(filters);\n\n  const nodeReducer = createNodeReducer({\n    nodeColor,\n    nodeSize,\n    nodeLabel,\n    extents,\n  });\n  \n  const edgeReducer = createEdgeReducer({\n    nodeColor,\n    nodeSize,\n    nodeLabel,\n    extents,\n    edgesMap\n  });\n  \n\n  const container = useRef(null);\n  const [renderer, setRenderer] = useState(null);\n\n  useEffect(() => {\n    if (cameraPosition && renderer) {\n        const camera = renderer.getCamera();\n        // console.log('animate camera', camera);\n        camera.animate(cameraPosition);     \n    }  \n  }, [updateTimestamp]) /* eslint react-hooks/exhaustive-deps : 0 */\n\n  // Should we refresh?\n  if (renderer) {\n    let needToRefresh = false;\n    \n\n    if (\n      previousNodeColor !== nodeColor ||\n      previousNodeSize !== nodeSize ||\n      // previousDontColorEdges !== dontColorEdges ||\n      previousNodeLabel !== nodeLabel\n      // previousSearchString !== searchString ||\n      // previousFilters !== filters\n    ) {\n      // console.log('Refreshing sigma');\n\n      // TODO: use upcoming #.setNodeReducer\n      renderer.settings.nodeReducer = nodeReducer;\n      renderer.settings.edgeReducer = edgeReducer;\n      needToRefresh = true;\n    }\n\n    if (previousLabelDensity !== labelDensity) {\n      renderer.settings.labelGrid.cell = {\n        width: CELL_WIDTH_SCALE(labelDensity),\n        height: CELL_HEIGHT_SCALE(labelDensity)\n      };\n\n      // TODO: we can improve sigma to handle this\n      renderer.displayedLabels = new Set();\n      needToRefresh = true;\n    }\n\n    if (needToRefresh) {\n      renderer.refresh();\n    }\n  }\n\n  const setContainer = useCallback(\n    node => {\n      if (renderer && renderer.graph !== graph) {\n        renderer.kill();\n        setRenderer(null);\n      }\n\n      if (node && graph) {\n        const newRenderer = new Renderer(graph, node, {nodeReducer, edgeReducer});\n        setRenderer(newRenderer);\n        const camera = newRenderer.getCamera();\n        onCameraUpdate(camera.getState())\n        camera.on('updated', state => {\n          onCameraUpdate(state);\n        })\n      }\n\n      container.current = node;\n    },\n    [graph]\n  );\n\n  return (\n    <div className=\"VisContainer GraphContainer\" >\n\n      <div ref={setContainer} style={{width: '100%', height: '50vh'}}></div>\n      {renderer && (\n        <GraphControls\n          rescale={rescale.bind(null, renderer)}\n          zoomIn={zoomIn.bind(null, renderer)}\n          zoomOut={zoomOut.bind(null, renderer)}\n        />\n      )}\n    </div>\n  );\n}\n\n\nexport default function SigmaComponent({\n  data: filename,\n  nodeColor,\n  nodeLabel,\n  nodeSize,\n  labelDensity = 0.5,\n  cameraPosition: inputCameraPosition = { x: 0.5, y: 0.5, angle: 0, ratio: 1 }\n}) {\n    // useState renvoie un state et un seter qui permet de le modifier\n    const [graph, setGraph] = useState(null);\n    const [cameraPosition, setCameraPosition] = useState(inputCameraPosition);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n      if (['x', 'y', 'angle', 'ratio'].find(prop => inputCameraPosition[prop] !== cameraPosition[prop])) {\n        setCameraPosition(inputCameraPosition);\n      }\n    }, [inputCameraPosition])\n\n    const onCameraUpdate = cam => {\n      setCameraPosition(cam);\n    }\n  \n    const URL = `${process.env.PUBLIC_URL}/data/${filename}`;\n  \n    useEffect(() => {\n      // aller chercher les données (get : lancement de la promesse se lance de suite : synchrone, then et catch plus tard)\n      get(URL)\n      .then(({data: gexfString}) => {\n        const graph = gexf.parse(Graph, gexfString);\n        graph.forEachNode((node) => {\n          graph.updateNode(node, attr => {\n            return {\n              ...attr,\n              x: attr.x ? attr.x : 0,\n              y: attr.y ? attr.y : 0\n            }\n          })\n        })\n        setGraph(graph);\n        setLoading(false);\n      })\n      .catch((_err) => {\n        setLoading(false);\n      })\n    }, [URL])\n  \n    if (loading) {\n      return (\n        <div>Chargement des données ({URL}) ...</div>\n      )\n    } else if (!graph) {\n      return (\n      <div>Erreur ...</div>\n      )\n    }\n    return (\n        <div className=\"SigmaComponent\">\n          <GraphContainer\n            {\n              ...{\n                graph,\n                cameraPosition,\n                nodeColor,\n                nodeSize,\n                labelDensity,\n                nodeLabel,\n                onCameraUpdate\n              }\n            }\n          />\n        </div>\n    )\n}","import GraphContainer from './GraphContainer';\n\nexport default GraphContainer;","import GeoComponent from './GeoComponent';\n\nexport default GeoComponent;","import React, { useState, useEffect, useMemo } from 'react';\nimport { csvParse } from 'd3-dsv';\nimport get from 'axios';\nimport { geoEqualEarth, geoPath } from \"d3-geo\";\nimport { uniq } from 'lodash';\nimport { scaleLinear } from 'd3-scale';\nimport { extent } from 'd3-array';\n\nimport { generatePalette } from '../../helpers/misc';\n\n\nconst GeoComponent = ({\n  dataFilename,\n  backgroundFilename,\n  width = 1800,\n  height = 1500,\n  label,\n  markerSize,\n  markerColor,\n  showLabels,\n  centerOnRegion\n}) => {\n  // raw marker data\n  const [data, setData] = useState(null);\n  // map background data\n  const [backgroundData, setBackgroundData] = useState(null);\n  const [colorsMap, setColorsMap] = useState(null);\n\n  const [loadingData, setLoadingData] = useState(true);\n  const [loadingBackground, setLoadingBackground] = useState(true);\n\n\n  /**\n   * Marker data loading\n   */\n  useEffect(() => {\n    if (dataFilename) {\n      const dataURL = `${process.env.PUBLIC_URL}/data/${dataFilename}`;\n      get(dataURL)\n        .then(({ data: csvString }) => {\n          const newData = csvParse(csvString);\n\n          setData(newData);\n          setLoadingData(false);\n        })\n        .catch((err) => {\n          setLoadingData(false);\n        })\n    }\n\n  }, [dataFilename])\n\n  /**\n   * Data aggregation for viz (note : could be personalized if we visualize other things than points)\n   */\n  const markerData = useMemo(() => {\n    if (data) {\n      // regroup data by coordinates\n      const coordsMap = {};\n      data.forEach(datum => {\n        const mark = datum.latitude + ',' + datum.longitude;\n        if (!coordsMap[mark]) {\n          coordsMap[mark] = {\n            label: showLabels && label ? datum[label] : undefined,\n            latitude: datum.latitude,\n            longitude: datum.longitude,\n            color: datum[markerColor],\n            size: isNaN(+datum[markerSize]) ? 0 : +datum[markerSize]\n          }\n        } else {\n          coordsMap[mark].size += (isNaN(+datum[markerSize]) ? 0 : +datum[markerSize])\n        }\n      })\n      let grouped = Object.entries(coordsMap).map(([_mark, datum]) => datum);\n      const colorValues = uniq(grouped.map(g => g.color));\n      const palette = generatePalette('map', colorValues.length);\n      const thatColorsMap = colorValues.reduce((res, key, index) => ({\n        ...res,\n        [key]: palette[index]\n      }), {});\n      setColorsMap(thatColorsMap);\n\n      const sizeExtent = extent(grouped.map(g => g.size));\n      const sizeScale = scaleLinear().domain(sizeExtent).range([1, width / 100])\n      grouped = grouped.map(datum => ({\n        ...datum,\n        color: thatColorsMap[datum.color],\n        size: sizeScale(datum.size)\n      }))\n      return grouped;\n    }\n  }, [data, markerColor, markerSize, width])\n\n  /**\n   * Map background data loading\n   */\n  useEffect(() => {\n    if (backgroundFilename) {\n      const backgroundURL = `${process.env.PUBLIC_URL}/data/${backgroundFilename}`;\n      get(backgroundURL)\n        .then(({ data: bgData }) => {\n          setBackgroundData(bgData);\n          setLoadingBackground(false);\n        })\n        .catch((err) => {\n          setLoadingBackground(false);\n        })\n    }\n\n  }, [backgroundFilename])\n\n  /**\n   * d3 projection making\n   */\n  const projection = useMemo(() => {\n    if (backgroundData) {\n      if (centerOnRegion) {\n        return geoEqualEarth()\n        .scale(50000)\n        .center([-1.7475027, 46.573642])\n      }\n      // if bg data is available fit on whole geometry\n      return geoEqualEarth()\n      .fitSize([width, height], backgroundData)\n    }\n    return geoEqualEarth()\n      .scale(200)\n      .translate([width / 2, height / 2])\n  }, [backgroundData, width, height])\n\n\n\n  if (loadingBackground || loadingData) {\n    return (\n      <div>Chargement des données ...</div>\n    )\n  } else if (!backgroundData || !data) {\n    return (\n      <div>Erreur ...</div>\n    )\n  }\n\n  return (\n    <div>\n      <svg width={width} height={height} viewBox={`0 0 ${width} ${height}`} style={{ border: '1px solid lightgrey' }}>\n        <g className=\"background\">\n          {\n            backgroundData.features.map((d, i) => {\n              return (\n                <path\n                  key={`path-${i}`}\n                  d={geoPath().projection(projection)(d)}\n                  className=\"geopart\"\n                  fill={`rgba(38,50,56,${1 / backgroundData.features.length * i})`}\n                  stroke=\"#FFFFFF\"\n                  strokeWidth={0.5}\n                />\n              )\n            })\n          }\n        </g>\n        <g className=\"markers\">\n          {\n            markerData\n              .filter(({ latitude, longitude }) => latitude && longitude && !isNaN(latitude) && !isNaN(longitude))\n              .map((datum, index) => {\n                const { latitude, longitude, size, color, label } = datum;\n                const [x, y] = projection([+longitude, +latitude]);\n                return (\n                  <g transform={`translate(${x},${y})`}>\n                    <circle\n                      key={index}\n                      cx={0}\n                      cy={0}\n                      r={size}\n                      fill={color}\n                      className=\"marker\"\n                    />\n                    {\n                      label ? \n                      <text\n                        x={size + 5}\n                        y= {size/2}\n                      >\n                        {label}\n                      </text>\n                      : null\n                    }\n                  </g>\n                );\n              })\n          }\n        </g>\n        {\n          colorsMap ?\n          <g className=\"legend\" transform={`translate(${width * .85}, ${height - (Object.keys(colorsMap).length + 1) * 20})`}>\n            <g>\n              <text style={{fontWeight: 800}}>\n                {markerColor}\n              </text>\n            </g>\n            {\n              Object.entries(colorsMap)\n              .map(([label, color], index) => {\n                return (\n                  <g transform={`translate(0, ${(index + 1) * 20})`}>\n                    <rect\n                      x={0}\n                      y={-8}\n                      width={10}\n                      height={10}\n                      fill={color}\n                    />\n                    <text x={15} y={0}>\n                      {label || 'Indéterminé'}\n                    </text>\n                  </g>\n                )\n              })\n            }\n          </g>\n          : null\n        }\n      </svg>\n    </div>\n  )\n}\n\nexport default GeoComponent;\n","import TriangleComponent from './TriangleComponent';\n\nexport default TriangleComponent;","import React, { useState, useEffect, useMemo } from 'react';\nimport { csvParse } from 'd3-dsv';\nimport get from 'axios';\nimport { geoEqualEarth, geoPath } from \"d3-geo\";\nimport { uniq } from 'lodash';\nimport { scaleLinear } from 'd3-scale';\nimport { extent } from 'd3-array';\n\nimport { generatePalette } from '../../helpers/misc';\n\nconst TriangleComponent = ({\n  dataFilename,\n  width = 1200,\n  height = 600\n}) => {\n\n  // raw marker data\n  const [data, setData] = useState(null);\n\n  const [loadingData, setLoadingData] = useState(true);\n\n\n\n  /**\n   * Marker data loading\n   */\n  useEffect(() => {\n    if (dataFilename) {\n      const dataURL = `${process.env.PUBLIC_URL}/data/${dataFilename}`;\n      get(dataURL)\n        .then(({ data: csvString }) => {\n          const newData = csvParse(csvString);\n\n          setData(newData);\n          setLoadingData(false);\n        })\n        .catch((err) => {\n          setLoadingData(false);\n        })\n    }\n\n  }, [dataFilename])\n\n  if (loadingData) {\n    return (\n      <div>Chargement des données ...</div>\n    )\n  } else if (!data) {\n    return (\n      <div>Erreur ...</div>\n    )\n  }\n\n  return (\n    <div>\n\n      <svg width={width} height={height} viewBox={`0 0 ${width} ${height}`} style={{ border: '1px solid lightgrey' }}>\n          {\n            data.map((port, index) => {\n              return (\n                <g \n                  transform={`translate(${(index) * (width/data.length)}, ${height * .33 + (index%3)*(height/5)})`}\n                >\n                    <rect\n                        x = {0}\n                        y = {0}\n                    />\n\n                    \n                        \n                {/* <path\n                  key={`path-${i}`}\n                  d={geoPath().projection(projection)(d)}\n                  className=\"geopart\"\n                  fill={`rgba(38,50,56,${1 / backgroundData.features.length * i})`}\n                  stroke=\"#FFFFFF\"\n                  strokeWidth={0.5}\n                /> */}\n                <text> {port.port} </text>\n                    \n                </g>\n              )\n            })\n\n          }\n        \n      </svg>\n\n    </div>\n  )\n\n}\n\nexport default TriangleComponent;","export default __webpack_public_path__ + \"static/media/ports-region-1789.3778ed29.svg\";","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport SvgComponent from '../../components/SvgComponent';\nimport VegaComponent from '../../components/VegaComponent';\nimport SigmaComponent from '../../components/SigmaComponent';\nimport GeoComponent from '../../components/GeoComponent';\nimport TriangleComponent from '../../components/TriangleComponent';\nimport test from './ports-region-1789.svg'\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1>{`Test triangle`}</h1>\n    <TriangleComponent dataFilename=\"part_3-tonnages_per_ports.csv\" mdxType=\"TriangleComponent\" />\n    <h1>{`Commerce multi-échelle dans la région de La Rochelle`}</h1>\n    <p>{`Ce site a vocation à monter progressivement les \"storymaps\" issues du datasprint PORTIC 2021.`}</p>\n    <p>{`Voici un tour d'horizon des modules react préparés pour faciliter le développement :`}</p>\n    <h2>{`Image SVG (avec webpack)`}</h2>\n    <p>{`On intègre une image  SVG depuis le local (elle sera donc packée par webpack) :`}</p>\n    <img src={test} />\n    <h2>{`Image SVG (sans webpack)`}</h2>\n    <p>{`On intègre ici directement une image à partir de son URL en ligne (depuis le dossier `}<inlineCode parentName=\"p\">{`public`}</inlineCode>{`)`}</p>\n    <SvgComponent path=\"/svg/ports-region-1789.svg\" mdxType=\"SvgComponent\" />\n    <h2>{`Visualisation vega`}</h2>\n    <p>{`Les visualisations vega ont besoin d'un fichier csv stocké dans le dossier `}<inlineCode parentName=\"p\">{`public/data`}</inlineCode>{` et d'une spec vega.`}</p>\n    <VegaComponent data=\"sorties_navires_vers_colonies.csv\" spec={{\n      \"mark\": \"rect\",\n      \"encoding\": {\n        \"x\": {\n          \"field\": \"port_depart\",\n          \"type\": \"nominal\"\n        },\n        \"y\": {\n          \"field\": \"port_destination\",\n          \"type\": \"nominal\"\n        },\n        \"color\": {\n          \"type\": \"quantitative\",\n          \"field\": \"tonnage\",\n          \"aggregate\": \"sum\"\n        }\n      }\n    }} mdxType=\"VegaComponent\" />\n    <h2>{`Réseau avec sigma`}</h2>\n    <p>{`Les visualisations sigma ont besoin d'un fichier gexf stocké dans le dossier `}<inlineCode parentName=\"p\">{`public/data`}</inlineCode>{`.`}</p>\n    <p>{`Paramètres :`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`nodeColor`}</inlineCode>{` : attribut pour couleur`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`nodeSize`}</inlineCode>{` : attribut pour taille`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`labelDensity`}</inlineCode>{` : densité des labels (float dans `}{`[0, 1]`}{`)`}</li>\n    </ul>\n    <SigmaComponent data=\"toflit_aggregate_1789_only_out.gexf\" nodeColor={`admiralty`} nodeSize={`inside_degree`} labelDensity={0.5} mdxType=\"SigmaComponent\" />\n    <h2>{`Carto en react+d3+SVG`}</h2>\n    <p>{`Ci-dessous un proto/boilerplate pour rendre du svg + données avec la galaxie d3 + du rendu direct en SVG via react.`}</p>\n    <p>{`Cartographie des destination des bateaux aillant un port d'attache dans la région, par tonnage cumulé (couleur = amirauté) :`}</p>\n    <GeoComponent backgroundFilename=\"cartoweb_france_1789_geojson.geojson\" dataFilename=\"navigo-out-of-ships-from-region.csv\" markerColor=\"pointcall_admiralty\" markerSize=\"tonnage\" label=\"pointcall\" showLabels centerOnRegion mdxType=\"GeoComponent\" />\n    <GeoComponent backgroundFilename=\"cartoweb_france_1789_geojson.geojson\" dataFilename=\"navigo-out-of-ships-from-region.csv\" markerColor=\"pointcall_admiralty\" markerSize=\"tonnage\" mdxType=\"GeoComponent\" />\n    <GeoComponent backgroundFilename=\"cartoweb_france_1789_geojson.geojson\" dataFilename=\"navigo-out-of-ships-from-region.csv\" markerColor=\"pointcall_admiralty\" markerSize=\"tonnage\" label=\"pointcall\" showLabels mdxType=\"GeoComponent\" />\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","\nimport React from 'react';\nimport {Helmet} from 'react-helmet';\n/* eslint-disable import/no-webpack-loader-syntax */\nimport Content from '!babel-loader!@mdx-js/loader!./content.mdx';\n\nfunction Home({match: {\n  params: {lang}\n}}) {\n  return (\n    <div>\n      <Helmet>\n        <title>{lang === 'fr' ? 'Commerce multi-échelle dans la région de La Rochelle' : 'Multi-scale trade in La Rochelle region'}</title>\n      </Helmet>\n      <Content />\n    </div>\n  )\n}\n\n// <img src={'../../../public/svg/Ports de la région Poitou, Aunis, Saintonge en 1789.svg'} />\nexport default Home;","import Home from './Home';\nexport default Home;\n\n// import Carte from './Ports de la région Poitou, Aunis, Saintonge en 1789.svg'\n// export Carte;","\n\nconst Test = ({\n  datasets = {}\n}) => {\n  return(\n    <div className=\"Test\">\n      <div>Coucou, ceci est le composant de la visualisation avec l'id <code>test</code></div>\n      {\n        Object.keys(datasets).length ? \n        <div>\n          <h3>Datasets de la visualisation :</h3>\n          {\n            Object.entries(datasets)\n            .map(([datasetName, values]) => {\n              return (\n              <div key={datasetName}>\n                <h3>{datasetName}</h3>\n                <pre>\n                  <code>\n                    {\n                      JSON.stringify(values, null, 2)\n                    }\n                  </code>\n                </pre>\n              </div>\n              )\n            })\n          }\n        </div>\n        : null\n      }\n    </div>\n    )\n}\n\nexport default Test;","import {useContext, useMemo} from 'react';\n\nimport Test from './Test';\n\nimport {DatasetsContext} from '../helpers/contexts';\n\nimport visualizationsList from '../visualizationsList';\n\nconst VisualizationContainer = ({id, ...props}) => {\n  const datasets = useContext(DatasetsContext);\n  const relevantDatasets = useMemo(() => {\n    const viz = visualizationsList.find(v => v.id === id);\n    if (viz) {\n      const datasetsIds = viz.datasets && viz.datasets.split(',').map(d => d.trim());\n      if (datasetsIds.length && datasets) {\n        return datasetsIds.reduce((cur, id) => ({\n          ...cur,\n          [id]: datasets[id]\n        }), {})\n      }\n    }\n  }, [id, datasets]);\n  switch(id) {\n    case 'test':\n    default:\n      return <Test {...props} datasets={relevantDatasets || {}} />\n  }\n}\n\nexport default VisualizationContainer;","import React from 'react';\nimport {useHistory} from 'react-router-dom';\nimport cx from 'classnames';\n\nimport VisualizationContainer from '../../visualizations/index.js';\n// charger le json de la liste des visualisations de l'atlas\nimport visualizations from '../../visualizationsList';\n\nconst VisualizationFocus = ({visualization, lang}) => {\n  return (\n    <div className=\"VisualizationFocus\">\n      <h2>Visualisation en lightbox : {visualization[`titre_${lang}`]}</h2>\n      <VisualizationContainer id={visualization.id} />\n    </div>\n  )\n}\n\nconst visualizationsMap = visualizations.reduce((res, visualization) => ({\n  ...res,\n  [visualization.id]: visualization\n}), {})\n\nfunction Atlas({\n  match: {\n    params: {\n      visualizationId,\n      lang\n    }\n  }\n}) {\n  const history = useHistory();\n  const shownVisualization = visualizationId && visualizationsMap[visualizationId];\n  return (\n  <div>\n    <h1>Atlas</h1>\n    <ul>\n      {\n        visualizations.map((visualization, visualizationIndex) => {\n          const handleClick = () => {\n            history.push({\n              pathname: `/${lang}/atlas/${visualization.id}`\n            })\n          }\n          return (\n            <li \n              className={cx({'is-active': shownVisualization && shownVisualization.id === visualization.id})} \n              onClick={handleClick} \n              key={visualizationIndex}\n            >\n              {visualization[`titre_${lang}`]}\n            </li>\n          )\n        })\n      }\n    </ul>\n    {\n      shownVisualization ?\n        <VisualizationFocus visualization={shownVisualization} lang={lang} />\n      : null\n    }\n  </div>\n  );\n}\n\nexport default Atlas;","import Atlas from './Atlas';\n\nexport default Atlas;","import HeaderNav from './HeaderNav';\n\nexport default HeaderNav;","import React from 'react';\nimport {useLocation} from 'react-router-dom';\nimport {NavLink as Link} from 'react-router-dom'; \n\nconst HeaderNav = ({\n  routes,\n  onLangChange,\n}) => {\n  const location = useLocation();\n  const paramsLang = location && location.match && location.match.params && location.match.params.lang;\n  let lang = 'fr';\n  if (paramsLang) {\n    lang = paramsLang;\n  } else if (location.pathname.includes('/en/')) {\n    lang = 'en';\n  }\n  return (\n    <nav>\n      <ul>\n          <li className=\"navitem-container\">\n                  <Link to={'/'}>\n                    {lang === 'fr' ? 'Accueil': 'Home'}\n                  </Link>\n          </li>\n          {\n            routes.map(({titles, routes: inputRoute}, index) => {\n              const route = `/${lang}/page/${inputRoute[lang]}`\n              return (\n                <li key={index} className=\"navitem-container\">\n                  <Link to={route}>\n                    {titles[lang]}\n                  </Link>\n                </li>\n              )\n              })\n          }\n          <li className=\"navitem-container\">\n            <Link to={`/${lang}/atlas`}>\n              Atlas\n            </Link>\n          </li>\n          <li className=\"lang-toggle\">\n            <button \n              className={lang === 'fr' ? 'is-active': ''}\n              onClick={() => onLangChange('fr')}\n            >fr</button>\n            <button\n              className={lang === 'en' ? 'is-active': ''}\n              onClick={() => onLangChange('en')}\n            >en</button>\n          </li>\n        </ul>\n    </nav>\n  )\n}\n\nexport default HeaderNav;","const Loader = ({ percentsLoaded = 0 }) => {\n  return (\n    <div className=\"loader-container\">\n      <div className=\"loader\">\n        <div className=\"loading-bar\" style={{ width: percentsLoaded + '%' }} />\n      </div>\n    </div>\n  )\n}\n\nexport default Loader;","import PlainPage from './PlainPage';\n\nexport default PlainPage;","import {Suspense} from 'react';\nimport {Helmet} from \"react-helmet\";\n\nconst PlainPage = ({\n  Content,\n  contentsURL,\n  title,\n}) => {\n  return (\n    <div className=\"PlainPage\">\n      <Helmet>\n        <title>{title}</title>\n      </Helmet>\n      <Suspense fallback={<div>Chargement</div>}>\n        <Content />\n      </Suspense>\n  </div>\n  )\n}\n\nexport default PlainPage;","import VisualizationController from './VisualizationController';\n\nexport default VisualizationController;","import omit from 'lodash/omit';\n\nimport VisualizationContainer from '../../visualizations/index.js';\n\nconst VisualizationController = ({\n  activeVisualization\n}) => {\n  const visProps = activeVisualization && omit(activeVisualization, ['id', 'ref', 'visualizationId'])\n  return (\n    <div className=\"VisualizationController\">\n      <h2>Visualization controller</h2>\n      {\n        activeVisualization ?\n        <>\n          <ul>\n            <li>Id de la visualisation active : <code>{activeVisualization.visualizationId}</code></li>\n            <li>Paramètres spécifiques au caller : <code>{JSON.stringify(visProps)}</code></li>\n          </ul>\n          <VisualizationContainer id={activeVisualization.visualizationId} {...visProps} />\n        </>\n        : <div>Pas de visualisation à afficher</div>\n      }\n    </div>\n  );\n}\n\nexport default VisualizationController;","import ScrollyPage from './ScrollyPage';\n\nexport default ScrollyPage;","import {useState, useReducer, useEffect} from 'react';\nimport {Helmet} from \"react-helmet\";\nimport {useScrollYPosition } from 'react-use-scroll-position';\n\nimport VisualizationController from '../../components/VisualizationController';\nimport {VisualizationControlContext} from '../../helpers/contexts';\n\n\nconst CENTER_FRACTION = .6;\n\nconst ScrollyPage = ({\n  // Content,\n  ContentSync,\n  title,\n  lang,\n}) => {\n\n  const [activeVisualization, setActiveVisualization] = useState(undefined);\n  const [visualizations, setVisualizations] = useReducer(\n    (state, newState) => ({ ...state, ...newState }),\n    {}\n  )\n  const scrollY = useScrollYPosition();\n\n\n  /**\n   * Scrollytelling management\n   */\n  useEffect(() => {\n    // const bodyPos = document.body.getBoundingClientRect();\n      const DISPLACE_Y = window.innerHeight * CENTER_FRACTION;\n      const y = scrollY + DISPLACE_Y;\n      const visualizationEntries = Object.entries(visualizations);\n      let found;\n      // on parcourt la liste à l'envers pour récupérer\n      // la visualisation la plus haute de la page qui est\n      // au-dessus du milieu de l'écran\n      for (let index = visualizationEntries.length - 1; index >= 0; index--) {\n        const [_id, visualization] = visualizationEntries[index];\n        const { ref } = visualization;\n        if (ref.current) {\n          const { y: initialVisY } = ref.current.getBoundingClientRect();\n          const visY = initialVisY + window.scrollY;\n          if (y > visY) {\n            found = true;\n            if (visualization.visualizationId) {\n              setActiveVisualization(visualization);\n            } else {\n              setActiveVisualization(undefined);\n            }\n            break;\n          }\n        }\n      }\n      if (!found && activeVisualization) {\n        setActiveVisualization(undefined);\n      }\n  }, [scrollY])\n\n  const onRegisterVisualization = (params) => {\n    const finalParams = {\n      ...params,\n      // data\n    }\n    setVisualizations({ ...visualizations, [params.id]: finalParams });\n  }\n  const onUnregisterVisualization = id => {\n    const newVis = Object.entries(visualizations).reduce((res, [thatId, payload]) => {\n      if (thatId === id) {\n        return res;\n      }\n      return {\n        ...res,\n        [thatId]: payload\n      }\n    }, {})\n    setVisualizations(newVis)\n  }\n  const onBlockClick = (id, ref) => {\n    console.log('on block click', {id, ref})\n  }\n  return (\n    <VisualizationControlContext.Provider\n      value={{\n        activeVisualization,\n        onBlockClick,\n        onRegisterVisualization,\n        onUnregisterVisualization,\n      }}\n    >\n      <Helmet>\n        <title>{title}</title>\n      </Helmet>\n      <div className=\"ScrollyPage\">\n          <section>\n            <ContentSync />\n          </section>\n          <aside>\n            <VisualizationController activeVisualization={activeVisualization} />\n          </aside>\n      </div>\n    </VisualizationControlContext.Provider>\n  )\n}\n\nexport default ScrollyPage;","/* eslint import/no-webpack-loader-syntax : 0 */\nimport ScrollyPage from './pages/ScrollyPage';\n\nimport TestScrollyFr from '!babel-loader!mdx-loader!./contents/fr/test-scrolly.mdx';\nimport testScrollyEn from '!babel-loader!mdx-loader!./contents/en/test-scrolly.mdx';\n\nimport Part1Fr from '!babel-loader!mdx-loader!./contents/fr/partie-1.mdx';\nimport Part1En from '!babel-loader!mdx-loader!./contents/en/part-1.mdx';\n\nimport Part2IntroFr from '!babel-loader!mdx-loader!./contents/fr/partie-2-intro.mdx';\nimport Part2IntroEn from '!babel-loader!mdx-loader!./contents/en/part-2-intro.mdx';\n\nimport Part21Fr from '!babel-loader!mdx-loader!./contents/fr/partie-2-1.mdx';\nimport Part21En from '!babel-loader!mdx-loader!./contents/en/part-2-1.mdx';\n\nimport Part22Fr from '!babel-loader!mdx-loader!./contents/fr/partie-2-2.mdx';\nimport Part22En from '!babel-loader!mdx-loader!./contents/en/part-2-2.mdx';\n\nimport Part23Fr from '!babel-loader!mdx-loader!./contents/fr/partie-2-3.mdx';\nimport Part23En from '!babel-loader!mdx-loader!./contents/en/part-2-3.mdx';\n\nimport Part3Fr from '!babel-loader!mdx-loader!./contents/fr/partie-3.mdx';\nimport Part3En from '!babel-loader!mdx-loader!./contents/en/part-3.mdx';\n\nimport AboutFr from '!babel-loader!mdx-loader!./contents/fr/a-propos.mdx';\nimport AboutEn from '!babel-loader!mdx-loader!./contents/en/about.mdx';\n\n\nconst summary = [\n  {\n    routes: {\n      fr: 'scrolly',\n      en: 'scrolly'\n    },\n    titles: {\n      fr: 'Tests scrollytelling',\n      en: 'Scrollytelling test'\n    },\n    contents: {\n      fr: 'fr/test-scrolly.mdx',\n      en: 'en/test-scrolly.mdx'\n    },\n    contentsProcessed: {\n      fr: TestScrollyFr,\n      en: testScrollyEn,\n    },\n    Component: ScrollyPage\n  },\n  {\n    routes: {\n      fr: 'partie-1',\n      en: 'part-1'\n    },\n    titles: {\n      fr: 'Partie 1 - Le déclin de la région de La Rochelle suite à la perte du Canada',\n      en: 'Partie 1 - The decline of La Rochelle region after Canada\\'s loss'\n    },\n    contents: {\n      fr: 'fr/partie-1.mdx',\n      en: 'en/part-1.mdx'\n    },\n    contentsProcessed: {\n      fr: Part1Fr,\n      en: Part1En,\n    },\n  },\n  {\n    routes: {\n      fr: 'partie-2',\n      en: 'part-2'\n    },\n    titles: {\n      fr: 'Partie 2 - Une forte spécialisation portuaire: le cas de la traite négrière, du commerce du sel et de l\\'eau-de-vie',\n      en: 'Partie 2 - A strong portual specialization'\n    },\n    contents: {\n      fr: 'fr/partie-2-intro.mdx',\n      en: 'en/part-2-intro.mdx'\n    },\n    contentsProcessed: {\n      fr: Part2IntroFr,\n      en: Part2IntroEn,\n    },\n  },\n  {\n    routes: {\n      fr: 'partie-2-1',\n      en: 'part-2-1'\n    },\n    titles: {\n      fr: 'Partie 2.1 - La Rochelle et le commerce triangulaire',\n      en: 'Partie 2.1 - La Rochelle and triangular trade'\n    },\n    contents: {\n      fr: 'fr/partie-2-1.mdx',\n      en: 'en/part-2-1.mdx'\n    },\n    contentsProcessed: {\n      fr: Part21Fr,\n      en: Part21En,\n    },\n  },\n  {\n    routes: {\n      fr: 'partie-2-2',\n      en: 'part-2-2'\n    },\n    titles: {\n      fr: 'Partie 2.2 - Le commerce de l’eau-de-vie',\n      en: 'Partie 2.2 - Eau-de-vie trade'\n    },\n    contents: {\n      fr: 'fr/partie-2-2.mdx',\n      en: 'en/part-2-2.mdx'\n    },\n    contentsProcessed: {\n      fr: Part22Fr,\n      en: Part22En,\n    },\n  },\n  {\n    routes: {\n      fr: 'partie-2-3',\n      en: 'part-2-3'\n    },\n    titles: {\n      fr: 'Partie 2.3 - Marennes et le commerce du sel',\n      en: 'Partie 2.3 - Marennes and salt trade'\n    },\n    contents: {\n      fr: 'fr/partie-2-3.mdx',\n      en: 'en/part-2-3.mdx'\n    },\n    contentsProcessed: {\n      fr: Part23Fr,\n      en: Part23En,\n    },\n  },\n  {\n    routes: {\n      fr: 'partie-3',\n      en: 'part-3'\n    },\n    titles: {\n      fr: 'Partie 3 - La Rochelle, port dominant mais pas structurant',\n      en: 'Part 3 - La Rochelle port, dominating but not structuring'\n    },\n    contents: {\n      fr: 'fr/partie-3.mdx',\n      en: 'en/part-3.mdx'\n    },\n    contentsProcessed: {\n      fr: Part3Fr,\n      en: Part3En,\n    },\n  },\n  {\n    routes: {\n      fr: 'a-propos',\n      en: 'about'\n    },\n    titles: {\n      fr: 'À propos',\n      en: 'About'\n    },\n    contents: {\n      fr: 'fr/a-propos.mdx',\n      en: 'en/about.mdx'\n    },\n    contentsProcessed: {\n      fr: AboutFr,\n      en: AboutEn,\n    },\n  },\n]\n\n\nexport default summary;","\n/* import external libraries */\nimport React, { useState, useEffect } from \"react\";\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n  useHistory,\n  useLocation,\n} from \"react-router-dom\";\n\nimport uniq from 'lodash/uniq';\nimport {csvParse, tsvParse} from 'd3-dsv';\n\n\nimport axios from 'axios';\nimport visualizationsList from './visualizationsList';\n\n/* import pages */\nimport Home from './pages/Home';\nimport Atlas from \"./pages/Atlas\";\n\n/* import components */\nimport HeaderNav from './components/HeaderNav';\nimport Loader from './components/Loader/Loader';\n\nimport PlainPage from './pages/PlainPage';\n\nimport {DatasetsContext} from './helpers/contexts';\n\n/* import other assets */\nimport './App.scss';\n\nimport routes from './summary'\n\nconst LANGUAGES = ['fr', 'en'];\n\nfunction App() {\n\n  const history = useHistory();\n  const location = useLocation();\n  const [datasets, setDatasets] = useState({})\n  const [loadingFraction, setLoadingFraction] = useState(0);\n\n  /**\n   * loading all datasets\n   */\n   useEffect(() => {\n    // loading all datasets from the atlas\n    // @todo do this on a page-to-page basis if datasets happens to be to big/numerous\n    const datasetsNames = uniq(visualizationsList.filter(d => d.datasets).reduce((res, d) => [...res, ...d.datasets.split(',').map(d => d.trim())], []));\n    datasetsNames.reduce((cur, datasetName, datasetIndex) => {\n      return cur.then((res) => new Promise((resolve, reject) => {\n\n        const url = datasetName ? `${process.env.PUBLIC_URL}/data/${datasetName}` : undefined;\n        if (url) {\n          axios.get(url, {\n            onDownloadProgress: progressEvent => {\n              const status = progressEvent.loaded / progressEvent.total;\n              const globalFraction = datasetIndex / datasetsNames.length;\n              setLoadingFraction(globalFraction + status / routes.length);\n            }\n          })\n            .then(({ data: inputData }) => {\n              setTimeout(() => {\n                let loadedData = inputData;\n                if (url.split('.').pop() === 'csv') {\n                  loadedData = csvParse(inputData);\n                } else if (url.split('.').pop() === 'tsv') {\n                  loadedData = tsvParse(inputData);\n                }\n                resolve({...res, [datasetName]: loadedData})\n              })\n            })\n            .catch(reject)\n        } else return resolve(res);\n\n      }))\n    }, Promise.resolve({}))\n    .then(newDatasets => {\n      setLoadingFraction(1);\n      setDatasets(newDatasets)\n    })\n    .catch(console.log)\n  }, [])\n\n  const onLangChange = (ln) => {\n    const otherLang = ln === 'fr' ? 'en' : 'fr';\n\n    const { pathname } = location;\n    if (pathname.includes('atlas')) {\n      const visualizationId = pathname.split('/atlas/').pop();\n      history.push(`/${ln}/atlas/${visualizationId || ''}`);\n    } else {\n      const pathOtherLang = history.location.pathname.split('/').pop();\n      const routeItem = routes.find(route => {\n        return route.routes[otherLang] === pathOtherLang;\n      });\n      if (routeItem) {\n        history.push(`/${ln}/page/${routeItem.routes[ln]}`);\n      } else {\n        history.push(`/${ln}/`);\n      }\n    }\n  }\n  const renderRoute = ({\n    Content,\n    ContentSync,\n    ThatComponent = PlainPage,\n    title,\n  }) => (\n    <>\n      <ThatComponent\n        {\n        ...{\n          Content,\n          ContentSync,\n          title\n        }\n        }\n      />\n    </>\n\n  );\n  return (\n    <DatasetsContext.Provider value={datasets}>\n      <div id=\"wrapper\">\n        <header>\n          <HeaderNav {...{ onLangChange, routes }} />\n        </header>\n        <main>\n          <Switch>\n            {\n              LANGUAGES.map(lang => {\n                return routes.map(({\n                  titles,\n                  routes: inputRoute,\n                  contents,\n                  Component: ThatComponent,\n                  contentsProcessed\n                }, index) => {\n                  const route = `/${lang}/page/${inputRoute[lang]}`\n                  const title = titles[lang];\n                  const Content = React.lazy(() => import(`!babel-loader!mdx-loader!./contents/${contents[lang]}`));\n                  const ContentSync = contentsProcessed[lang]\n                  return (\n                    <Route key={index} path={route} exact>\n                      {renderRoute({ Content, ThatComponent, title, ContentSync })}\n                    </Route>\n                  )\n                })\n              })\n            }\n            <Route path=\"/:lang/atlas/:visualizationId?\" component={Atlas} />\n            <Route path=\"/:lang\" exact component={Home} />\n            <Redirect to={`/fr/`} />\n          </Switch>\n          {\n            datasets ?\n            null :\n            <Loader percentsLoaded={loadingFraction * 100} />\n          }\n        </main>\n        <footer></footer>\n        \n        \n      </div>\n    </DatasetsContext.Provider>\n  );\n}\n\n\nexport default function Wrapper() {\n  return (\n    <Router>\n      <App />\n    </Router>\n  )\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}