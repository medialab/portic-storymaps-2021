{"version":3,"sources":["../node_modules/kepler.gl/dist/localization sync /^/.//.*$","../ /^/.//.*$/ groupOptions: {} namespace object","helpers/contexts.js","components/SvgComponent/SvgComponent.js","components/SvgComponent/index.js","components/VegaComponent/index.js","components/VegaComponent/VegaComponent.js","components/SigmaComponent/reducers.js","helpers/misc.js","components/SigmaComponent/GraphControls.js","components/SigmaComponent/GraphContainer.js","components/SigmaComponent/index.js","components/GeoComponent/index.js","components/GeoComponent/GeoComponent.js","components/KeplerComponent/store.js","components/KeplerComponent/KeplerComponent.js","components/KeplerComponent/index.js","pages/Home/ports-region-1789.svg","pages/Home/content.mdx","pages/Home/Home.js","pages/Home/index.js","components/HeaderNav/index.js","components/HeaderNav/HeaderNav.js","pages/PlainPage/index.js","pages/PlainPage/PlainPage.js","summary.js","App.js","reportWebVitals.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","webpackAsyncContext","Promise","then","ids","LanguageContext","React","createContext","SvgComponent","path","alt","src","process","VegaComponent","filename","data","spec","useState","setData","loading","setLoading","URL","useEffect","get","csvString","newData","csvParse","catch","err","VegaLite","DEFAULT_NODE_COLOR","DEFAULT_NODE_SIZE_RANGE","DEFAULT_COLOR_SPACE","cmin","cmax","lmin","lmax","SINGLE_COLOR_PALETTE","usePrevious","value","ref","useRef","current","generatePalette","name","count","iwanthue","colorSpace","seed","clustering","GraphControls","rescale","zoomIn","zoomOut","className","cx","onClick","CELL_HEIGHT_SCALE","scaleLinear","domain","range","CELL_WIDTH_SCALE","renderer","getCamera","animatedReset","animatedZoom","animatedUnzoom","GraphContainer","graph","nodeColorVariable","nodeColor","nodeSizeVariable","nodeSize","labelDensity","nodeLabel","onCameraUpdate","cameraPosition","updateTimestamp","sizes","useMemo","res","forEachNode","_node","attributes","push","size","sizeExtent","extent","extents","min","max","values","attr","uniq","colors","length","palette","i","forEach","option","edgesMap","m","Map","_source","_target","sourceAttributes","targetAttributes","edge","_edgeAttributes","set","sourceNode","targetNode","previousNodeColor","previousNodeSize","previousNodeLabel","previousLabelDensity","nodeReducer","nodeSizeFactor","nodeSizeScale","key","renderedNode","x","isNaN","undefined","y","color","v","createNodeReducer","edgeReducer","dontColorEdges","el1","el2","renderedEdge","biggerNode","Color","lighten","rgb","string","createEdgeReducer","container","setRenderer","animate","needToRefresh","settings","labelGrid","cell","width","height","displayedLabels","Set","refresh","setContainer","useCallback","node","kill","newRenderer","WebGLRenderer","camera","getState","on","state","style","bind","inputCameraPosition","angle","ratio","setGraph","setCameraPosition","find","prop","gexfString","gexf","parse","Graph","updateNode","_err","cam","GeoComponent","dataFilename","backgroundFilename","markerSize","markerColor","backgroundData","setBackgroundData","loadingData","setLoadingData","loadingBackground","setLoadingBackground","dataURL","markerData","coordsMap","datum","mark","latitude","longitude","grouped","entries","colorValues","g","colorsMap","reduce","index","sizeScale","backgroundURL","bgData","projection","geoEqualEarth","fitSize","scale","translate","viewBox","border","features","d","geoPath","fill","stroke","strokeWidth","filter","cy","r","reducer","combineReducers","keplerGl","keplerGlReducer","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","sampleData","KeplerViz","props","dispatch","useDispatch","addDataToMap","datasets","info","label","centerMap","readOnly","config","mapStyle","styleType","mapboxApiAccessToken","KeplerComponent","store","layoutProps","MDXContent","components","mdxType","test","parentName","isMDXComponent","Home","lang","Helmet","HeaderNav","routes","onLangChange","to","titles","inputRoute","route","PlainPage","Content","title","contentsURL","fallback","summary","fr","en","contents","LANGUAGES","App","history","useHistory","setLang","renderRoute","ThatComponent","Provider","ln","otherLang","pathOtherLang","location","pathname","split","pop","routeItem","Component","lazy","Wrapper","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dbb24f8c.chunk.js","sourcesContent":["var map = {\n\t\"./\": 50,\n\t\"./ca\": 751,\n\t\"./ca.js\": 751,\n\t\"./en\": 544,\n\t\"./en.js\": 544,\n\t\"./es\": 752,\n\t\"./es.js\": 752,\n\t\"./fi\": 753,\n\t\"./fi.js\": 753,\n\t\"./formatted-message\": 545,\n\t\"./formatted-message.js\": 545,\n\t\"./index\": 50,\n\t\"./index.js\": 50,\n\t\"./locales\": 181,\n\t\"./locales.js\": 181,\n\t\"./pt\": 754,\n\t\"./pt.js\": 754\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1228;","var map = {\n\t\"./en/about.mdx\": [\n\t\t1581,\n\t\t3\n\t],\n\t\"./en/part-1.mdx\": [\n\t\t1582,\n\t\t4\n\t],\n\t\"./en/part-2-1.mdx\": [\n\t\t1583,\n\t\t5\n\t],\n\t\"./en/part-2-2.mdx\": [\n\t\t1584,\n\t\t6\n\t],\n\t\"./en/part-2-3.mdx\": [\n\t\t1585,\n\t\t7\n\t],\n\t\"./en/part-2-intro.mdx\": [\n\t\t1586,\n\t\t8\n\t],\n\t\"./en/part-3.mdx\": [\n\t\t1587,\n\t\t9\n\t],\n\t\"./fr/a-propos.mdx\": [\n\t\t1588,\n\t\t10\n\t],\n\t\"./fr/partie-1.mdx\": [\n\t\t1589,\n\t\t11\n\t],\n\t\"./fr/partie-2-1.mdx\": [\n\t\t1590,\n\t\t12\n\t],\n\t\"./fr/partie-2-2.mdx\": [\n\t\t1591,\n\t\t13\n\t],\n\t\"./fr/partie-2-3.mdx\": [\n\t\t1592,\n\t\t14\n\t],\n\t\"./fr/partie-2-intro.mdx\": [\n\t\t1593,\n\t\t15\n\t],\n\t\"./fr/partie-3.mdx\": [\n\t\t1594,\n\t\t16\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 1563;\nmodule.exports = webpackAsyncContext;","\nimport React from 'react';\n\nexport const VisualizationControlContext = React.createContext({\n\n})\n\nexport const LanguageContext = React.createContext({\n\n})","\n\nfunction SvgComponent ({path}) {\n    return <img alt={path} src={`${process.env.PUBLIC_URL}${path}`} />\n} \n\nexport default SvgComponent;","import SvgComponent from './SvgComponent';\n\nexport default SvgComponent;","import VegaComponent from './VegaComponent';\n\nexport default VegaComponent;","import React, {useState, useEffect} from 'react';\nimport {VegaLite} from 'react-vega';\nimport {csvParse} from 'd3-dsv';\nimport get from 'axios';\n\nconst VegaComponent = ({\n  data: filename,\n  spec\n}) => {\n    // useState renvoie un state et un seter qui permet de le modifier\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const URL = `${process.env.PUBLIC_URL}/data/${filename}`;\n\n  useEffect(() => {\n    // aller chercher les données (get : lancement de la promesse se lance de suite : synchrone, then et catch plus tard)\n    get(URL)\n    .then(({data: csvString}) => {\n      // les convertir en js (avec d3-dsv)\n      const newData = csvParse(csvString);\n      // vega prend qqch comme ça : [{prop1: 'val', pro2: 'val2'}]\n      setData(newData);\n      setLoading(false);\n    })\n    .catch((err) => {\n      setLoading(false);\n    })\n  }, [URL])\n  \n  if (!spec) {\n    return <div>Vous devez spécifier une spec pour le composant vega.</div>\n  }\n\n  if (loading) {\n    return (\n      <div>Chargement des données ({URL}) ...</div>\n    )\n  } else if (!data) {\n    return (\n    <div>Erreur ...</div>\n    )\n  }\n  return (\n      <div>\n        <VegaLite\n          spec={{\n            ...spec,\n            \"$schema\": \"https://vega.github.io/schema/vega-lite/v5.json\",\n            \"data\": {\n              \"values\": data\n            }\n          }}\n        />\n      </div>\n  )\n}\n\nexport default VegaComponent;\n","import Color from 'color';\nimport {scaleLinear} from 'd3-scale';\n// import {evalIfNodeMatches} from '../../helpers/misc';\n\n\n// Defaults\nconst DEFAULT_NODE_COLOR = '#999';\nconst DEFAULT_NODE_SIZE_RANGE = [2, 15];\n\nexport function createNodeReducer({\n  nodeColor,\n  nodeSize,\n  nodeLabel,\n  nodeSizeFactor = 1,\n  extents,\n  // filters = [],\n  // filtersModeAnd\n}) {\n  \n  let nodeSizeScale = null;\n\n  // Creating scales\n  if (!nodeSize) {\n    nodeSizeScale = scaleLinear()\n      .domain([extents.nodeSize.min, extents.nodeSize.max])\n      .range(DEFAULT_NODE_SIZE_RANGE);\n  } else {\n    nodeSizeScale = scaleLinear()\n      .domain([nodeSize.min, nodeSize.max])\n      .range(DEFAULT_NODE_SIZE_RANGE);\n  }\n  \n  // Creating actual reducer\n  const nodeReducer = function (key, attr) {\n    const renderedNode = {\n      ...attr,\n      x: isNaN(attr.x) || attr.x === undefined ? 0 : attr.x,\n      y: isNaN(attr.y) || attr.y === undefined ? 0 : attr.y\n    };\n\n\n\n    // Color\n    if (!nodeColor) {\n      renderedNode.color = attr.color || DEFAULT_NODE_COLOR;\n    } else {\n      renderedNode.color =\n        nodeColor.palette[attr[nodeColor.name]] || DEFAULT_NODE_COLOR;\n    }\n    // Size\n    if (!nodeSize) {\n      let v = attr.size || 1;\n      renderedNode.size = nodeSizeScale(v);\n    } else {\n      let v = attr[nodeSize.name];\n      v = typeof v === 'number' ? v : 1;\n      renderedNode.size = nodeSizeScale(v);\n    }\n\n    renderedNode.size *= nodeSizeFactor;\n\n    return renderedNode;\n  };\n\n\n  return nodeReducer;\n}\n\n\nexport function createEdgeReducer({\n  nodeColor,\n  nodeSize,\n  nodeLabel,\n  nodeSizeFactor = 1,\n  extents,\n  dontColorEdges,\n  edgesMap\n}) {\n\n  \n  // Creating actual reducer\n  const edgeReducer = function (key, attr, el1, el2) {\n    const {\n      sourceNode, \n      targetNode\n    } = edgesMap.get(key);\n    const renderedEdge = {};\n    // color with biggest node\n    const sourceNodeSize = nodeSize ? sourceNode[nodeSize.name] : sourceNode.size;\n    const targetNodeSize = nodeSize ? targetNode[nodeSize.name] : targetNode.size;\n    const biggerNode = sourceNodeSize > targetNodeSize ? sourceNode : targetNode;\n\n    // Color\n    if (biggerNode) {\n      if (!nodeColor) {\n        renderedEdge.color = biggerNode.color || DEFAULT_NODE_COLOR;\n      } else {\n        renderedEdge.color =\n          nodeColor.palette[biggerNode[nodeColor.name]] || DEFAULT_NODE_COLOR;\n      }\n      renderedEdge.color = Color(renderedEdge.color).lighten(0.4).rgb().string();\n    }\n    return renderedEdge;\n  };\n\n  return edgeReducer;\n}","import { csvParse } from 'd3-dsv';\nimport get from 'axios';\nimport iwanthue from 'iwanthue';\nimport {useRef, useEffect} from 'react';\n// import Graph from 'graphology-types';\n\nconst DEFAULT_COLOR_SPACE = {\n  cmin: 25.59,\n  cmax: 55.59,\n  lmin: 60.94,\n  lmax: 90.94\n};\n\nconst SINGLE_COLOR_PALETTE = ['#999'];\n\nexport function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport function generatePalette(name, count) {\n  if (count === 1 || !count) return SINGLE_COLOR_PALETTE;\n  else if (count === 2) {\n    return ['#D77186', '#61A2DA']\n  }\n\n  return iwanthue(count, {\n    colorSpace: DEFAULT_COLOR_SPACE,\n    seed: name,\n    clustering: 'force-vector'\n  });\n}\n\n\nconst _filterData = (data, { startYear, endYear, year, params, ...rest }) => {\n  console.group('filters');\n  console.time('filters time');\n  console.log('input', data);\n  /* dans data on a un dict de type : \n  [   {year: \"1789\", customs_region: \"La Rochelle\", partner_simplification: \"Iles\", export_import: ”Import\", product_revolutionempire: \"...\", ...},\n      {year: \"1782\", customs_region: \"Bordeaux\", ...},\n      {...},\n      columns: [\"year\", \"customs_region\", ...]\n\n  ]\n  */\n  let filteredData = data.filter(row => {\n    let rowYear = row.year ? +row.year.split(\".\")[0] : undefined;\n    if (startYear && endYear) {\n      return rowYear >= +startYear && rowYear <= +endYear;\n      // @todo : quand on aura rajouté startYear et endYear pour\n      // la récupération de portic il s'agira de déduire ce year des données\n    } else if (year && rowYear) {\n      return year === +rowYear;\n    } else return true;\n  })\n  // console.log('1', filteredData);\n\n  filteredData = filteredData.filter(row => {\n    // pour chaque filtre (sauf filtre timespan et filtrage des colomnes) :\n    let isValid = true;\n    // key --> 'year', filter_value --> 1789\n    // kwargs obtenu sous forme de dict : --> { year: 1789, customs_region: 'La Rochelle' }\n\n    // kwargs semble être indiçable mais pas sur qu'on doive pas le mettre dans un format spécial pas comme python\n    // sinon suggestion : function.apply(obj, [args])\n\n    // ligne originale : je ne sais pas pourquoi on ne veut prendre en compte les filtres que pour les colonnes qui ne sont pas à garder dans le résultats (colonne données dans l'argument 'params' sous forme de liste)\n    // for (let key,filter_value in [param for param in kwargs.items() if param[0] not in ['params']]): \n    // console.log('rest', rest);\n    Object.entries(rest)\n      .some(([key, inputFilterValue]) => {\n        const rowValue = row[key];\n        let filterValue = inputFilterValue;\n        // console.log('filter value 1', filterValue);\n        // si la valeur est une liste : on caste en string ses membres\n        if (Array.isArray(filterValue)) {\n          filterValue = filterValue.map(x => x + ''); // caster en string\n        }\n        // sinon c'est un tableau à une valeur qu'on caste en string\n        else {\n          filterValue = [filterValue + ''];\n        }\n        // console.log('filter value final', filterValue);\n        // à partir de là, filter_value est une liste de strings\n\n        // si la ligne a un attribut qui fait partie des valeurs acceptées par le filtre => on examine les autres filtres \n        if (filterValue.length > 0 && !(rowValue.includes(filterValue))) {\n          isValid = false;\n          return true;\n        }\n        return false;\n      })\n\n    return isValid;\n  })\n\n  // console.log('2', filteredData);\n\n\n  const transformedData = filteredData.map(row => {\n    let rowFormated = {};\n\n    // on ne garde que les colonnes qui nous intéressent dans le résultat => \n    // console.log(\"params : \", params);\n    // console.log(\"typeof(params) !== 'undefined' : \", (typeof params !== 'undefined'));\n    // console.log(\"row : \", row);\n    // on ne passe jamais ni dans le if ni dans le else, je ne sais pas pourquoi \n    // if (typeof params !== 'undefined') {\n\n    // if (params &&\n    // ci-dessous : tester si objet vide\n    if (!!params && Object.keys(params).length) {\n      // console.log(\"we are selecting only those columns : \", params);\n      for (let [column, value] of Object.entries(row)) {\n        if (params.includes(column)) {\n          rowFormated[column] = value;\n        }\n      }\n    }\n    // de base c'était else { ... } et on passait jamais dedans apparemment du coup là c'est bizarre\n    // else if (typeof params !== 'undefined') {\n    else {\n      // rowFormated = {...row}; // différencier rowFormated et row (nouvelle ref en unpackant et copiant key / params de row) => en JS differencier input d'output\n      // console.log(\"rowFormated = \", row);\n    }\n    // console.log(\"après le if / else\");\n    return rowFormated;\n  })\n  // console.log('3', transformedData);\n  console.timeEnd('filters time');\n  console.groupEnd('filters');\n  return transformedData;\n}\n\n\nexport const getToflitFlowsByCsv = ({\n  startYear = null,\n  endYear = null,\n  year = null,\n  params = null,\n  ...rest // https://www.peterbe.com/plog/javascript-destructuring-like-python-kwargs-with-defaults ; \n  // \"standard\" JavaScript array : https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters\n}) => {\n  // méthode de gestion avec callback\n  // let result;\n  // trucAsynchrone\n  // .then(data => {\n  //     callback(null, data);\n  // })\n  // .catch(error => {\n  //     callback(error);\n  // })\n\n  // méthode de gestion avec promesse\n  // return new Promise((resolve, reject) => {\n  //     trucAsynchrone\n  //     .then(data => {\n  //         // faire des trucs avec data\n  //         resolve(data);\n  //     })\n  //     .catch(error => {\n  //         // faire des choses avec l'erreur\n  //         reject(error);\n  //     })\n  // })\n\n  // méthode async/await\n  // const result = await trucAsynchrone();\n  // return result;\n\n  /*\n  Synopsis : récupère les flux toflit18\n  --- \n  Paramètres :\n  * startYear : <int> # année de début\n  * endYear : <int> # année de fin\n  * params : <arr> # propriétés à renvoyer\n  * [tous les noms de colonne des flux] : <arr/string> valeurs à filtrer dans les flux (peut être une ou plusieurs valeurs)\n  */\n\n  return new Promise((resolve, reject) => {\n\n    // let results = []; // ça sert à quelque chose ?? pour moi c'est pas utilisé, sinon je ne devrais pas avoir l'erreur \"t.map is not a function\" \n    // => voir https://www.pluralsight.com/guides/typeerror-handling-in-react.js-for-map-function\n\n    let finalStartYear = startYear; // on ne modif pas params en JS\n    let finalEndYear = endYear;\n\n\n\n    // 1. Test de la validité des paramètres\n    if (startYear !== null && endYear === null) {\n      return reject(\"You must put an end year\");\n    } // pas sure pour les accolades\n    else if (endYear !== null && startYear === null) {\n      return reject(\"You must put a start year\");\n    }\n\n    if ((startYear !== null || endYear !== null) && year !== null) {\n      finalStartYear = null;\n      finalEndYear = null;\n    }\n\n    /* en l'état ça ne fonctionne pas */\n    const URL = `${process.env.PUBLIC_URL || 'localhost:3001'}/data/toflit18_flows_sprint.csv`;\n    // console.log(\"URL '${process.env.PUBLIC_URL}/data/toflit18_flows_sprint.csv' : \", URL)\n    get(URL) // get de axios\n      .then(({ data: csvString }) => {\n        // conversion en js (avec d3-dsv)\n        const newData = csvParse(csvString);\n        // faire des choses avec les résultats (filtres, ...)\n        const finalData = _filterData(newData, { startYear: finalStartYear, endYear: finalEndYear, year, params, ...rest });\n        // console.log(\"finalData : \", finalData);\n        resolve(finalData);\n      })\n      .catch((err) => {\n        reject(err);\n      })\n\n  })\n\n}\n\nexport const getToflitFlowsByApi = ({\n  startYear = null,\n  endYear = null,\n  year = null,\n  params = null,\n  ...rest\n}) => {\n\n  return new Promise((resolve, reject) => {\n\n    let finalStartYear = startYear; // on ne modif pas params en JS\n    let finalEndYear = endYear;\n\n    // 1. Test de la validité des paramètres\n    if (startYear !== null && endYear === null) {\n      return reject(\"You must put an end year\");\n    } // pas sure pour les accolades\n    else if (endYear !== null && startYear === null) {\n      return reject(\"You must put a start year\");\n    }\n\n    if ((startYear !== null || endYear !== null) && year !== null) {\n      finalStartYear = null;\n      finalEndYear = null;\n    }\n\n    const URL = `http://data.portic.fr/api/flows/?date=${year}`;\n    console.log({ URL })\n    // équivalent à : const URL = 'http://data.portic.fr/api/flows/?date=' + year;\n    get(URL) // get de axios\n      // mixed content issue => comme l'API ne fournit pas d'accès HTTPS je me sentais un peu bloquée\n      .then(({ data: str }) => {\n        // conversion en js (avec d3-dsv)\n        // const newData = csvParse(csvString);\n        try {\n          const newData = JSON.parse(str);\n          // contraire : JSON.stringify()\n          // faire des choses avec les résultats (filtres, ...)\n          const finalData = _filterData(newData, { startYear: finalStartYear, endYear: finalEndYear, year, params, ...rest })\n          resolve(finalData);\n        } catch (e) {\n          reject(e);\n        }\n\n      })\n      .catch((err) => {\n        reject(err);\n      })\n\n  })\n\n}\n\n\n\n\n\nexport const getPorticPointcallsByApi = ({\n  filename,\n  spec\n}) => {\n\n}\n\n","import React from 'react';\nimport cx from 'classnames';\n\n\nexport default function GraphControls({\n  rescale, \n  zoomIn, \n  zoomOut, \n}) {\n  return (\n    <ul className={cx(\"VisControls GraphControls\")}>\n      <li className=\"vis-controls-item camera\">\n      \n      <button onClick={zoomOut}>\n        -\n      </button>\n      <button onClick={zoomIn}>\n        +\n      </button>\n      <button onClick={rescale}>\n        Recentrer\n      </button>\n      </li>\n    </ul>\n  );\n}","import React, {useCallback, useRef, useState, useEffect, useMemo} from 'react';\nimport gexf from 'graphology-gexf';\nimport Graph from 'graphology';\nimport {WebGLRenderer} from 'sigma';\nimport {scaleLinear} from 'd3-scale';\nimport {min, max, extent} from 'd3-array';\nimport {uniq} from 'lodash';\nimport get from 'axios';\n\nimport {createNodeReducer, createEdgeReducer} from './reducers';\nimport {generatePalette, usePrevious} from '../../helpers/misc';\n\nimport GraphControls from './GraphControls';\n\nimport './GraphContainer.css';\n\n\n// Defaults\nconst CELL_HEIGHT_RANGE = [200, 10];\nconst CELL_WIDTH_RANGE = [300, 30];\nconst CELL_HEIGHT_SCALE = scaleLinear().domain([0, 1]).range(CELL_HEIGHT_RANGE);\nconst CELL_WIDTH_SCALE = scaleLinear().domain([0, 1]).range(CELL_WIDTH_RANGE);\n\n// Camera controls\nfunction rescale(renderer) {\n  const camera = renderer.getCamera();\n  camera.animatedReset(renderer);\n}\n\nfunction zoomIn(renderer) {\n  const camera = renderer.getCamera();\n  camera.animatedZoom(renderer);\n}\n\nfunction zoomOut(renderer) {\n  const camera = renderer.getCamera();\n  camera.animatedUnzoom(renderer);\n}\n\nfunction GraphContainer({\n  graph,\n  nodeColor: nodeColorVariable,\n  nodeSize: nodeSizeVariable,\n  labelDensity,\n  nodeLabel,\n  onCameraUpdate,\n  cameraPosition,\n  updateTimestamp,\n}) {\n  let sizes = useMemo(() => {\n    const res = [];\n    graph.forEachNode((_node, attributes) => {\n      res.push(+(nodeSizeVariable ? attributes[nodeSizeVariable] : attributes.size));\n    })\n    return res;\n  }, [nodeSizeVariable, graph]);\n  \n  const sizeExtent = extent(sizes);\n  const extents = {\n    nodeSize: {\n      min: sizeExtent[0],\n      max: sizeExtent[1]\n    }\n  }\n\n  const nodeSize = useMemo(() => {\n    if (nodeSizeVariable) {\n\n      return {\n        min: min(sizeExtent),\n        max: max(sizeExtent),\n        name: nodeSizeVariable\n      }\n    } else return undefined;\n  }, [nodeSizeVariable, graph])\n\n  const nodeColor = useMemo(() => {\n    if (nodeColorVariable) {\n      let values = [];\n      graph.forEachNode((_node, attr) => {\n        values.push(attr[nodeColorVariable])\n      })\n      values = uniq(values);\n      const colors = generatePalette(nodeColorVariable, values.length);\n      let palette = {};\n      let i = 0;\n      values.forEach(option => {\n        palette[option] = colors[i];\n        i++;\n      });\n      return {\n        palette,\n        name: nodeColorVariable\n      }\n    } else return undefined;\n  }, [nodeColorVariable, graph])\n\n  const edgesMap = useMemo(() => {\n    const m = new Map()\n    graph.forEach(\n      (_source, _target, sourceAttributes, targetAttributes, edge, _edgeAttributes) => {\n      m.set(edge, {sourceNode: sourceAttributes, targetNode: targetAttributes})\n    });\n    return m;\n  }, [graph])\n\n  const previousNodeColor = usePrevious(nodeColor);\n  const previousNodeSize = usePrevious(nodeSize);\n  const previousNodeLabel = usePrevious(nodeLabel);\n  const previousLabelDensity = usePrevious(labelDensity);\n  // const previousSearchString = usePrevious(searchString);\n  // const previousDontColorEdges = usePrevious(dontColorEdges);\n  // const previousFilters = usePrevious(filters);\n\n  const nodeReducer = createNodeReducer({\n    nodeColor,\n    nodeSize,\n    nodeLabel,\n    extents,\n  });\n  \n  const edgeReducer = createEdgeReducer({\n    nodeColor,\n    nodeSize,\n    nodeLabel,\n    extents,\n    edgesMap\n  });\n  \n\n  const container = useRef(null);\n  const [renderer, setRenderer] = useState(null);\n\n  useEffect(() => {\n    if (cameraPosition && renderer) {\n        const camera = renderer.getCamera();\n        // console.log('animate camera', camera);\n        camera.animate(cameraPosition);     \n    }  \n  }, [updateTimestamp]) /* eslint react-hooks/exhaustive-deps : 0 */\n\n  // Should we refresh?\n  if (renderer) {\n    let needToRefresh = false;\n    \n\n    if (\n      previousNodeColor !== nodeColor ||\n      previousNodeSize !== nodeSize ||\n      // previousDontColorEdges !== dontColorEdges ||\n      previousNodeLabel !== nodeLabel\n      // previousSearchString !== searchString ||\n      // previousFilters !== filters\n    ) {\n      // console.log('Refreshing sigma');\n\n      // TODO: use upcoming #.setNodeReducer\n      renderer.settings.nodeReducer = nodeReducer;\n      renderer.settings.edgeReducer = edgeReducer;\n      needToRefresh = true;\n    }\n\n    if (previousLabelDensity !== labelDensity) {\n      renderer.settings.labelGrid.cell = {\n        width: CELL_WIDTH_SCALE(labelDensity),\n        height: CELL_HEIGHT_SCALE(labelDensity)\n      };\n\n      // TODO: we can improve sigma to handle this\n      renderer.displayedLabels = new Set();\n      needToRefresh = true;\n    }\n\n    if (needToRefresh) {\n      renderer.refresh();\n    }\n  }\n\n  const setContainer = useCallback(\n    node => {\n      if (renderer && renderer.graph !== graph) {\n        renderer.kill();\n        setRenderer(null);\n      }\n\n      if (node && graph) {\n        const newRenderer = new WebGLRenderer(graph, node, {nodeReducer, edgeReducer});\n        setRenderer(newRenderer);\n        const camera = newRenderer.getCamera();\n        onCameraUpdate(camera.getState())\n        camera.on('updated', state => {\n          onCameraUpdate(state);\n        })\n      }\n\n      container.current = node;\n    },\n    [graph]\n  );\n\n  return (\n    <div className=\"VisContainer GraphContainer\" >\n\n      <div ref={setContainer} style={{width: '100%', height: '50vh'}}></div>\n      {renderer && (\n        <GraphControls\n          rescale={rescale.bind(null, renderer)}\n          zoomIn={zoomIn.bind(null, renderer)}\n          zoomOut={zoomOut.bind(null, renderer)}\n        />\n      )}\n    </div>\n  );\n}\n\n\nexport default function SigmaComponent({\n  data: filename,\n  nodeColor,\n  nodeLabel,\n  nodeSize,\n  labelDensity = 0.5,\n  cameraPosition: inputCameraPosition = { x: 0.5, y: 0.5, angle: 0, ratio: 1 }\n}) {\n    // useState renvoie un state et un seter qui permet de le modifier\n    const [graph, setGraph] = useState(null);\n    const [cameraPosition, setCameraPosition] = useState(inputCameraPosition);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n      if (['x', 'y', 'angle', 'ratio'].find(prop => inputCameraPosition[prop] !== cameraPosition[prop])) {\n        setCameraPosition(inputCameraPosition);\n      }\n    }, [inputCameraPosition])\n\n    const onCameraUpdate = cam => {\n      setCameraPosition(cam);\n    }\n  \n    const URL = `${process.env.PUBLIC_URL}/data/${filename}`;\n  \n    useEffect(() => {\n      // aller chercher les données (get : lancement de la promesse se lance de suite : synchrone, then et catch plus tard)\n      get(URL)\n      .then(({data: gexfString}) => {\n        const graph = gexf.parse(Graph, gexfString);\n        graph.forEachNode((node) => {\n          graph.updateNode(node, attr => {\n            return {\n              ...attr,\n              x: attr.x ? attr.x : 0,\n              y: attr.y ? attr.y : 0\n            }\n          })\n        })\n        setGraph(graph);\n        setLoading(false);\n      })\n      .catch((_err) => {\n        setLoading(false);\n      })\n    }, [URL])\n  \n    if (loading) {\n      return (\n        <div>Chargement des données ({URL}) ...</div>\n      )\n    } else if (!graph) {\n      return (\n      <div>Erreur ...</div>\n      )\n    }\n    return (\n        <div className=\"SigmaComponent\">\n          <GraphContainer\n            {\n              ...{\n                graph,\n                cameraPosition,\n                nodeColor,\n                nodeSize,\n                labelDensity,\n                nodeLabel,\n                onCameraUpdate\n              }\n            }\n          />\n        </div>\n    )\n}","import GraphContainer from './GraphContainer';\n\nexport default GraphContainer;","import GeoComponent from './GeoComponent';\n\nexport default GeoComponent;","import React, { useState, useEffect, useMemo } from 'react';\nimport { csvParse } from 'd3-dsv';\nimport get from 'axios';\nimport { geoEqualEarth, geoPath } from \"d3-geo\";\nimport { uniq } from 'lodash';\nimport { scaleLinear } from 'd3-scale';\nimport { extent } from 'd3-array';\n\nimport { generatePalette } from '../../helpers/misc';\n\n\nconst GeoComponent = ({\n  dataFilename,\n  backgroundFilename,\n  width = 800,\n  height = 450,\n  markerSize,\n  markerColor\n}) => {\n  // raw marker data\n  const [data, setData] = useState(null);\n  // map background data\n  const [backgroundData, setBackgroundData] = useState(null);\n\n  const [loadingData, setLoadingData] = useState(true);\n  const [loadingBackground, setLoadingBackground] = useState(true);\n\n\n  /**\n   * Marker data loading\n   */\n  useEffect(() => {\n    if (dataFilename) {\n      const dataURL = `${process.env.PUBLIC_URL}/data/${dataFilename}`;\n      get(dataURL)\n        .then(({ data: csvString }) => {\n          const newData = csvParse(csvString);\n\n          setData(newData);\n          setLoadingData(false);\n        })\n        .catch((err) => {\n          setLoadingData(false);\n        })\n    }\n\n  }, [dataFilename])\n\n  /**\n   * Data aggregation for viz (note : could be personalized if we visualize other things than points)\n   */\n  const markerData = useMemo(() => {\n    if (data) {\n      // regroup data by coordinates\n      const coordsMap = {};\n      data.forEach(datum => {\n        const mark = datum.latitude + ',' + datum.longitude;\n        if (!coordsMap[mark]) {\n          coordsMap[mark] = {\n            latitude: datum.latitude,\n            longitude: datum.longitude,\n            color: datum[markerColor],\n            size: isNaN(+datum[markerSize]) ? 0 : +datum[markerSize]\n          }\n        } else {\n          coordsMap[mark].size += (isNaN(+datum[markerSize]) ? 0 : +datum[markerSize])\n        }\n      })\n      let grouped = Object.entries(coordsMap).map(([_mark, datum]) => datum);\n      const colorValues = uniq(grouped.map(g => g.color));\n      const palette = generatePalette('map', colorValues.length);\n      const colorsMap = colorValues.reduce((res, key, index) => ({\n        ...res,\n        [key]: palette[index]\n      }), {});\n\n      const sizeExtent = extent(grouped.map(g => g.size));\n      const sizeScale = scaleLinear().domain(sizeExtent).range([1, width / 100])\n      grouped = grouped.map(datum => ({\n        ...datum,\n        color: colorsMap[datum.color],\n        size: sizeScale(datum.size)\n      }))\n      return grouped;\n    }\n  }, [data, markerColor, markerSize, width])\n\n  /**\n   * Map background data loading\n   */\n  useEffect(() => {\n    if (backgroundFilename) {\n      const backgroundURL = `${process.env.PUBLIC_URL}/data/${backgroundFilename}`;\n      get(backgroundURL)\n        .then(({ data: bgData }) => {\n          setBackgroundData(bgData);\n          setLoadingBackground(false);\n        })\n        .catch((err) => {\n          setLoadingBackground(false);\n        })\n    }\n\n  }, [backgroundFilename])\n\n  /**\n   * d3 projection making\n   */\n  const projection = useMemo(() => {\n    if (backgroundData) {\n      // if bg data is available fit on whole geometry\n      return geoEqualEarth()\n        .fitSize([width, height], backgroundData)\n    }\n    return geoEqualEarth()\n      .scale(200)\n      .translate([width / 2, height / 2])\n  }, [backgroundData, width, height])\n\n\n\n  if (loadingBackground || loadingData) {\n    return (\n      <div>Chargement des données ...</div>\n    )\n  } else if (!backgroundData || !data) {\n    return (\n      <div>Erreur ...</div>\n    )\n  }\n  return (\n    <div>\n      <svg width={width} height={height} viewBox={`0 0 ${width} ${height}`} style={{ border: '1px solid lightgrey' }}>\n        <g className=\"background\">\n          {\n            backgroundData.features.map((d, i) => (\n              <path\n                key={`path-${i}`}\n                d={geoPath().projection(projection)(d)}\n                className=\"geopart\"\n                fill={`rgba(38,50,56,${1 / backgroundData.features.length * i})`}\n                stroke=\"#FFFFFF\"\n                strokeWidth={0.5}\n              />\n            ))\n          }\n        </g>\n        <g className=\"markers\">\n          {\n            markerData\n              .filter(({ latitude, longitude }) => latitude && longitude && !isNaN(latitude) && !isNaN(longitude))\n              .map((datum, index) => {\n                const { latitude, longitude, size, color } = datum;\n                const [x, y] = projection([+longitude, +latitude]);\n                return (\n                  <circle\n                    key={index}\n                    cx={x}\n                    cy={y}\n                    r={size}\n                    fill={color}\n                    className=\"marker\"\n                  />\n                );\n              })\n          }\n        </g>\n      </svg>\n    </div>\n  )\n}\n\nexport default GeoComponent;\n","import {\n  createStore, \n  combineReducers, \n  // applyMiddleware, compose\n} from 'redux';\nimport keplerGlReducer from 'kepler.gl/reducers';\n// import {enhanceReduxMiddleware} from 'kepler.gl/middleware';\n\nconst initialState = {};\nconst reducer = combineReducers({\n  // <-- mount kepler.gl reducer in your app\n  keplerGl: keplerGlReducer,\n});\n\n// using createStore\nexport default createStore(\n  reducer,\n  initialState,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\n\n  /*,\n  applyMiddleware(\n    enhanceReduxMiddleware([\n    ])\n  )*/\n);","import {useEffect} from 'react'\n\nimport { Provider } from 'react-redux';\nimport { useDispatch } from 'react-redux'\nimport store from './store';\n\nimport KeplerGl from 'kepler.gl';\nimport {addDataToMap} from 'kepler.gl/actions';\n\n\nconst WIDTH = 800;\nconst HEIGHT = 500;\n\nconst sampleData = [\n  {\n    name: 'Paris',\n    latitude: 48.8588377,\n    longitude: 2.2770201\n  },\n  {\n      name: 'Boulogne',\n      latitude: 48.834854,\n      longitude: 2.222985\n  }\n]\n\nfunction KeplerViz (props) {\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(\n      addDataToMap({\n        // datasets\n        datasets: {\n          info: {\n            label: 'Sample Taxi Trips in New York City',\n            id: 'test_trip_data'\n          },\n          data: sampleData\n        },\n        // option\n        option: {\n          centerMap: true,\n          readOnly: false\n        },\n        // config\n        config: {\n          mapStyle: {styleType: 'light'}\n        }\n      })\n    )\n    \n  }, []);\n\n  return (\n    <div>\n      <KeplerGl\n        id=\"map\"\n        width={WIDTH}\n        height={HEIGHT}\n        mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_TOKEN}\n      />\n    </div>\n  );\n}\n\nfunction KeplerComponent (props) {\n    return (\n      <Provider store={store}>\n        <KeplerViz {...{props}} />\n      </Provider>\n    )\n} \n\nexport default KeplerComponent;","import KeplerComponent from './KeplerComponent';\n\nexport default KeplerComponent;","export default __webpack_public_path__ + \"static/media/ports-region-1789.3778ed29.svg\";","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport SvgComponent from '../../components/SvgComponent';\nimport VegaComponent from '../../components/VegaComponent';\nimport SigmaComponent from '../../components/SigmaComponent';\nimport GeoComponent from '../../components/GeoComponent';\nimport KeplerComponent from '../../components/KeplerComponent';\nimport test from './ports-region-1789.svg'\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1>{`Commerce multi-échelle dans la région de La Rochelle`}</h1>\n    <p>{`Ce site a vocation à monter progressivement les \"storymaps\" issues du datasprint PORTIC 2021.`}</p>\n    <p>{`Voici un tour d'horizon des modules react préparés pour faciliter le développement :`}</p>\n    <h2>{`Image SVG (avec webpack)`}</h2>\n    <p>{`On intègre une image  SVG depuis le local (elle sera donc packée par webpack) :`}</p>\n    <img src={test} />\n    <h2>{`Image SVG (sans webpack)`}</h2>\n    <p>{`On intègre ici directement une image à partir de son URL en ligne (depuis le dossier `}<inlineCode parentName=\"p\">{`public`}</inlineCode>{`)`}</p>\n    <SvgComponent path=\"/svg/ports-region-1789.svg\" mdxType=\"SvgComponent\" />\n    <h2>{`Visualisation vega`}</h2>\n    <p>{`Les visualisations vega ont besoin d'un fichier csv stocké dans le dossier `}<inlineCode parentName=\"p\">{`public/data`}</inlineCode>{` et d'une spec vega.`}</p>\n    <VegaComponent data=\"sorties_navires_vers_colonies.csv\" spec={{\n      \"mark\": \"rect\",\n      \"encoding\": {\n        \"x\": {\n          \"field\": \"port_depart\",\n          \"type\": \"nominal\"\n        },\n        \"y\": {\n          \"field\": \"port_destination\",\n          \"type\": \"nominal\"\n        },\n        \"color\": {\n          \"type\": \"quantitative\",\n          \"field\": \"tonnage\",\n          \"aggregate\": \"sum\"\n        }\n      }\n    }} mdxType=\"VegaComponent\" />\n    <h2>{`Réseau avec sigma`}</h2>\n    <p>{`Les visualisations sigma ont besoin d'un fichier gexf stocké dans le dossier `}<inlineCode parentName=\"p\">{`public/data`}</inlineCode>{`.`}</p>\n    <p>{`Paramètres :`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`nodeColor`}</inlineCode>{` : attribut pour couleur`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`nodeSize`}</inlineCode>{` : attribut pour taille`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`labelDensity`}</inlineCode>{` : densité des labels (float dans `}{`[0, 1]`}{`)`}</li>\n    </ul>\n    <SigmaComponent data=\"toflit_aggregate_1789_only_out.gexf\" nodeColor={`admiralty`} nodeSize={`inside_degree`} labelDensity={0.5} mdxType=\"SigmaComponent\" />\n    <h2>{`Carto en react+d3+SVG`}</h2>\n    <p>{`Ci-dessous un proto/boilerplate pour rendre du svg + données avec la galaxie d3 + du rendu direct en SVG via react.`}</p>\n    <p>{`Cartographie des destination des bateaux aillant un port d'attache dans la région, par tonnage cumulé (couleur = amirauté) :`}</p>\n    <GeoComponent backgroundFilename=\"cartoweb_france_1789_geojson.geojson\" dataFilename=\"navigo-out-of-ships-from-region.csv\" markerColor=\"pointcall_admiralty\" markerSize=\"tonnage\" mdxType=\"GeoComponent\" />\n    <h2>{`Carto avec kepler (ne fonctionne pas - apparemment problème de version de react)`}</h2>\n    <KeplerComponent mdxType=\"KeplerComponent\" />\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","\nimport React from 'react';\nimport {Helmet} from 'react-helmet';\n/* eslint-disable import/no-webpack-loader-syntax */\nimport Content from '!babel-loader!@mdx-js/loader!./content.mdx';\n\nfunction Home({lang}) {\n  return (\n    <div>\n      <Helmet>\n        <title>{lang === 'fr' ? 'Commerce multi-échelle dans la région de La Rochelle' : 'Multi-scale trade in La Rochelle region'}</title>\n      </Helmet>\n      <Content />\n    </div>\n  )\n}\n\n// <img src={'../../../public/svg/Ports de la région Poitou, Aunis, Saintonge en 1789.svg'} />\nexport default Home;","import Home from './Home';\nexport default Home;\n\n// import Carte from './Ports de la région Poitou, Aunis, Saintonge en 1789.svg'\n// export Carte;","import HeaderNav from './HeaderNav';\n\nexport default HeaderNav;","import React from 'react';\nimport {NavLink as Link} from 'react-router-dom'; \n\nconst HeaderNav = ({\n  routes,\n  lang,\n  onLangChange,\n}) => {\n  return (\n    <nav>\n      <ul>\n          <li className=\"navitem-container\">\n                  <Link to={'/'}>\n                    {lang === 'fr' ? 'Accueil': 'Home'}\n                  </Link>\n          </li>\n          {\n            routes.map(({titles, routes: inputRoute}, index) => {\n              const route = `/page/${lang}/${inputRoute[lang]}`\n              return (\n                <li key={index} className=\"navitem-container\">\n                  <Link to={route}>\n                    {titles[lang]}\n                  </Link>\n                </li>\n              )\n              })\n          }\n          <li className=\"lang-toggle\">\n            <button \n              className={lang === 'fr' ? 'is-active': ''}\n              onClick={() => onLangChange('fr')}\n            >fr</button>\n            <button\n              className={lang === 'en' ? 'is-active': ''}\n              onClick={() => onLangChange('en')}\n            >en</button>\n          </li>\n        </ul>\n    </nav>\n  )\n}\n\nexport default HeaderNav;","import PlainPage from './PlainPage';\n\nexport default PlainPage;","import {Suspense} from 'react';\nimport {Helmet} from \"react-helmet\";\n\nconst PlainPage = ({\n  Content,\n  contentsURL,\n  title,\n}) => {\n  return (\n    <div className=\"PlainPage\">\n      <Helmet>\n        <title>{title}</title>\n      </Helmet>\n      <Suspense fallback={<div>Chargement</div>}>\n        <Content />\n      </Suspense>\n  </div>\n  )\n}\n\nexport default PlainPage;","const summary = [\n  {\n    routes: {\n      fr: 'partie-1',\n      en: 'part-1'\n    },\n    titles: {\n      fr: 'Partie 1 - Le déclin de la région de La Rochelle suite à la perte du Canada',\n      en: 'Partie 1 - The decline of La Rochelle region after Canada\\'s loss'\n    },\n    contents: {\n      fr: 'fr/partie-1.mdx',\n      en: 'en/part-1.mdx'\n    }\n  },\n  {\n    routes: {\n      fr: 'partie-2',\n      en: 'part-2'\n    },\n    titles: {\n      fr: 'Partie 2 - Une forte spécialisation portuaire: le cas de la traite négrière, du commerce du sel et de l\\'eau-de-vie',\n      en: 'Partie 2 - A strong portual specialization'\n    },\n    contents: {\n      fr: 'fr/partie-2-intro.mdx',\n      en: 'en/part-2-intro.mdx'\n    }\n  },\n  {\n    routes: {\n      fr: 'partie-2-1',\n      en: 'part-2-1'\n    },\n    titles: {\n      fr: 'Partie 2.1 - La Rochelle et le commerce triangulaire',\n      en: 'Partie 2.1 - La Rochelle and triangular trade'\n    },\n    contents: {\n      fr: 'fr/partie-2-1.mdx',\n      en: 'en/part-2-1.mdx'\n    }\n  },\n  {\n    routes: {\n      fr: 'partie-2-2',\n      en: 'part-2-2'\n    },\n    titles: {\n      fr: 'Partie 2.2 - Le commerce de l’eau-de-vie',\n      en: 'Partie 2.2 - Eau-de-vie trade'\n    },\n    contents: {\n      fr: 'fr/partie-2-2.mdx',\n      en: 'en/part-2-2.mdx'\n    }\n  },\n  {\n    routes: {\n      fr: 'partie-2-3',\n      en: 'part-2-3'\n    },\n    titles: {\n      fr: 'Partie 2.3 - Marennes et le commerce du sel',\n      en: 'Partie 2.3 - Marennes and salt trade'\n    },\n    contents: {\n      fr: 'fr/partie-2-3.mdx',\n      en: 'en/part-2-3.mdx'\n    }\n  },\n  {\n    routes: {\n      fr: 'partie-3',\n      en: 'part-3'\n    },\n    titles: {\n      fr: 'Partie 3 - La Rochelle, port dominant mais pas structurant',\n      en: 'Part 3 - La Rochelle port, dominating but not structuring'\n    },\n    contents: {\n      fr: 'fr/partie-3.mdx',\n      en: 'en/part-3.mdx'\n    }\n  },\n  {\n    routes: {\n      fr: 'a-propos',\n      en: 'about'\n    },\n    titles: {\n      fr: 'À propos',\n      en: 'About'\n    },\n    contents: {\n      fr: 'fr/a-propos.mdx',\n      en: 'en/about.mdx'\n    }\n  },\n]\n\n\nexport default summary;","\n/* import external libraries */\nimport React, {useState} from \"react\";\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n  useHistory,\n} from \"react-router-dom\";\n\nimport { LanguageContext } from './helpers/contexts';\n\n/* import pages */\nimport Home from './pages/Home';\n// import About from './pages/About';\n// import Topics from './pages/Topics';\n\n/* import components */\nimport HeaderNav from './components/HeaderNav';\nimport PlainPage from './pages/PlainPage';\n\n/* import other assets */\nimport './App.css';\n\nimport routes from './summary'\n\nconst LANGUAGES = ['fr', 'en'];\n\nfunction App() {\n\n  const history = useHistory();\n  const [lang, setLang] = useState('fr');\n  const onLangChange = (ln) => {\n    if (ln !== lang) {\n      const otherLang = lang;\n      const pathOtherLang = history.location.pathname.split('/').pop();\n      const routeItem = routes.find(route => {\n        return route.routes[otherLang] === pathOtherLang;\n      });\n      setLang(ln);\n      if (routeItem) {\n        history.push(`/page/${ln}/${routeItem.routes[ln]}`);\n\n      }\n    }\n    \n  }\n  const renderRoute = ({\n    Content, \n    ThatComponent = PlainPage,\n    title,\n  }) => (\n    <>\n      <ThatComponent\n        {\n          ...{\n            Content,\n            title\n          }\n        }\n      />\n    </>\n\n  );\n  return (\n    <LanguageContext.Provider value={{lang}}>\n      <div id=\"wrapper\">\n        <header>\n          <HeaderNav {...{lang, onLangChange, routes}} />\n        </header>\n        <main>\n          <Switch>\n          {\n            LANGUAGES.map(lang => {\n              return routes.map(({\n                titles,\n                routes: inputRoute, \n                contents,\n                Component: ThatComponent\n              }, index) => {\n                const route = `/page/${lang}/${inputRoute[lang]}`\n                const title = titles[lang];\n                const Content = React.lazy(() => import(`!babel-loader!mdx-loader!./contents/${contents[lang]}`))\n                return (\n                  <Route key={index} path={route}>\n                    {renderRoute({Content, ThatComponent, title})}\n                  </Route>\n                )\n              } )\n            })\n          }\n          <Route path=\"/\">\n            <Home lang={lang} />\n          </Route>\n          <Redirect to={`/`} />\n          </Switch>\n        </main>\n        <footer></footer>\n      </div>\n    </LanguageContext.Provider>\n  );\n}\n\n\nexport default function Wrapper() {\n  return (\n    <Router>\n      <App />\n    </Router>\n  )\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}