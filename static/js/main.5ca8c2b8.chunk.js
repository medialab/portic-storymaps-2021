(this["webpackJsonpportic-storymaps-2021"]=this["webpackJsonpportic-storymaps-2021"]||[]).push([[2],{105:function(e,t,a){"use strict";a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return v})),a.d(t,"c",(function(){return O}));var n=a(9),r=a(2),i=a(19),s=a(20),o=a(17),c=a.n(o),l=a(233),d=a.n(l),u=a(334),p=a(24),m=a(16),f=a(1),b=function(e){var t=Object(n.a)(e.navigoValues,2),a=t[0],o=t[1],l=e.toflitPct,b=e.transformGroup,h=e.circleRadius,j=e.width,g=e.height,v=e.name,O=e.legendMode,x=e.isActive,y=e.isMinified,_=e.onClick,w=Object(m.c)(h),q=Object(m.c)(j),N=Object(m.c)(g),L=Object(r.useState)(!1),k=Object(n.a)(L,2),C=k[0],M=k[1];Object(r.useEffect)((function(){setTimeout((function(){M(!0)}))}),[]),Object(r.useEffect)((function(){p.a.rebuild()}));var T,P,R=Object(s.useSpring)({to:{transform:b},immediate:!C}).transform,A=1.4*w,S=A*A/2,z=a*S,F=o*S,E=Math.sqrt(z*a),B=Math.sqrt(F*o),D=null,I=null;l&&(D=Math.PI/2+(l-50)/100*Math.PI,I=3*Math.PI/2-(l-50)/100*Math.PI,T=d()(0,0,w,D,I).map((function(e){return e.join(" ")})).join(" "),P=d()(0,0,w,D,I-2*Math.PI).map((function(e){return e.join(" ")})).join(" "));var Y=parseInt(.013*N);return Y=Y>8?Y:8,Object(f.jsxs)(s.animated.g,{className:c()("ExtraversionObject",{"is-active":x,"is-minified":y}),transform:R,onClick:function(){return"function"===typeof _?_(v):void 0},children:[Object(f.jsxs)(f.Fragment,{children:[l&&null!=T?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("path",{d:"".concat(T,"\n                  "),stroke:O?"darkgrey":i.a.generic.accent2,strokeWidth:.005*q,fill:"transparent","data-for":"geo-tooltip","data-tip":"".concat((100-l).toFixed(1),"% de valeur d'exports de produits fabriqu\xe9s hors de la direction ").concat("function"===typeof _?"(cliquer pour voir le d\xe9tail des ports)":"")}),Object(f.jsx)("path",{d:"".concat(P,"\n                  "),stroke:O?"grey":i.a.ui.colorAccentBackground,strokeWidth:.005*q,fill:"transparent","data-for":"geo-tooltip","data-tip":"".concat(l.toFixed(1),"% de valeur d'exports de produits fabriqu\xe9s dans la direction ").concat("function"===typeof _?"(cliquer pour voir le d\xe9tail des ports)":"")})]}):null,Object(f.jsx)("path",{className:"left-triangle",fill:O?"darkgrey":i.a.generic.accent2,d:"M ".concat(0," ",-E/2,"\n            V ").concat(E/2,"\n            L ").concat(-E," ",0,"\n            Z\n                "),"data-for":"geo-tooltip","data-tip":"".concat((100*a).toFixed(1),"% du tonnage cumul\xe9 des voyages r\xe9alis\xe9s vers l'ext\xe9rieur de la direction ").concat("function"===typeof _?"(cliquer pour voir le d\xe9tail des ports)":"")}),Object(f.jsx)("path",{className:"right-triangle",fill:O?"grey":i.a.ui.colorAccentBackground,d:"M ".concat(0," ",-B/2,"\n            L ").concat(B," ",0,"\n            L ",0," ").concat(B/2,"\n            Z\n            "),"data-for":"geo-tooltip","data-tip":"".concat((100*o).toFixed(1),"% du tonnage cumul\xe9 des voyages r\xe9alis\xe9s vers l'int\xe9rieur de la direction ").concat("function"===typeof _?"(cliquer pour voir le d\xe9tail des ports)":"")}),Object(f.jsx)("g",{transform:"translate(".concat(parseInt(0),", ").concat(l?parseInt(w)+15:Object(u.a)([E,B])/2+10,")"),children:Object(f.jsx)("text",{className:"object-label","font-size":Y,textAnchor:"middle",children:v})})]}),O?Object(f.jsxs)("g",{className:"legend-container",children:[Object(f.jsx)("foreignObject",{width:2*w,height:2*w,x:3*-w,y:1.7*-w,className:"top left",children:Object(f.jsx)("div",{className:"label-wrapper",children:Object(f.jsx)("span",{children:"Part des exports de produits fabriqu\xe9s hors de la direction"})})}),Object(f.jsx)("line",{x1:.95*-w,y1:1.5*-w,x2:.5*-w,y2:1*-w,markerEnd:"url(#triangle-end)"}),Object(f.jsx)("foreignObject",{width:2*w,height:2*w,x:1.2*w,y:1.7*-w,className:"top right",children:Object(f.jsx)("div",{className:"label-wrapper",children:Object(f.jsx)("span",{children:"Part des exports de produits fabriqu\xe9s dans la direction"})})}),Object(f.jsx)("line",{x1:1.15*w,y1:1.5*-w,x2:.5*w,y2:1*-w,markerEnd:"url(#triangle-end)"}),Object(f.jsx)("foreignObject",{width:2*w,height:2*w,x:3*-w,y:0,className:"bottom left",children:Object(f.jsx)("div",{className:"label-wrapper",children:Object(f.jsx)("span",{children:"Part des voyages hors direction (tonnage c.)"})})}),Object(f.jsx)("line",{x1:1.8*-w,y1:.2*w,x2:.3*-w,y2:.1*w,markerEnd:"url(#triangle-end)"}),Object(f.jsx)("foreignObject",{width:2*w,height:2*w,x:1.2*w,y:0,className:"bottom right",children:Object(f.jsx)("div",{className:"label-wrapper",children:Object(f.jsx)("span",{children:"Part des voyages dans la direction (tonnage c.)"})})}),Object(f.jsx)("line",{x1:2*w,y1:.2*w,x2:.3*w,y2:.1*w,markerEnd:"url(#triangle-end)"})]}):null]})},h=a(172);function j(e){var t=e.datum,a=e.projection,r=e.width,i=e.height,s=e.projectionTemplate,o=e.isActive,c=e.isMinified,l=e.onClick,d=Object(m.c)(r),u=Object(m.c)(i),p=a([+t.longitude,+t.latitude]),h=Object(n.a)(p,2),j=h[0],g=h[1],v=.05*d,O=parseFloat(t.cumulated_tonnage_out_region)+parseFloat(t.cumulated_tonnage_in_region);"port"===t.type_of_object&&(O<1e3?v=.025*d:O>5e3&&(v=.075*d));var x=parseFloat(t.cumulated_tonnage_out_region)/O,y=parseFloat(t.cumulated_tonnage_in_region)/O,_=0;if("customs_office"===t.type_of_object){var w=parseFloat(t.cumulated_exports_value_from_region)+parseFloat(t.cumulated_exports_value_from_ext);_=100===(_=parseFloat(t.cumulated_exports_value_from_region)/w*100)?99.99:_}var q="translate(".concat(j,",").concat(g,")");s.includes("Poitou")&&("Tonnay-Charente"===t.name?q="translate(".concat(j+.15*d,",").concat(g,")"):"Rochefort"===t.name?q="translate(".concat(j+.04*d,",").concat(g-0*u,")"):"Marennes"===t.name?q="translate(".concat(j-.03*d,",").concat(g+.05*u,")"):"Marans"===t.name?q="translate(".concat(j+.03*d,",").concat(g-.05*u,")"):"Saint-Martin-de-R\xe9"===t.name?q="translate(".concat(j-.06*d,",").concat(g,")"):"Les Sables-d'Olonne"===t.name&&(q="translate(".concat(j+.1*d,",").concat(g+.15*u,")")));var N="France"===s?q+" scale(0.1)":q+" scale(".concat(c?.5:1,")");return Object(f.jsx)(b,{transformGroup:N,navigoValues:[x,y],toflitPct:isNaN(_)?100:_,circleRadius:v,width:d,height:u,name:t.name,isActive:o,isMinified:c,onClick:l})}function g(e){var t=e.data,a=t.customsOffices,s=void 0===a?[]:a,o=t.ports,c=void 0===o?[]:o,l=e.projection,d=e.width,u=e.height,p=e.projectionTemplate,h=Object(m.c)(d),g=Object(m.c)(u),v=Object(r.useState)(void 0),O=Object(n.a)(v,2),x=O[0],y=O[1],_=function(e){y(e===x?void 0:e)},w=Object(r.useMemo)((function(){return x?c.filter((function(e){return e.customs_office===x})):[]}),[x,c]),q=.18*g,N=.55*g,L=.35*h,k=w.length?N/w.length:N;return Object(f.jsxs)("g",{className:"Step3Objects",children:[x?Object(f.jsxs)("g",{className:"ports-details",children:[Object(f.jsx)("foreignObject",{x:0,y:0,width:.4*h,height:g/2,className:"ports-details-title",children:Object(f.jsxs)("h5",{children:["Ports associ\xe9s au bureau des fermes de ",x," (",w.length,")"]})}),Object(f.jsx)("g",{className:"ports-space",transform:"translate(".concat(15,", ").concat(q,")"),children:w.sort((function(e,t){var a=l([+e.longitude,+e.latitude]),r=Object(n.a)(a,2),i=(r[0],r[1]),s=l([+t.longitude,+t.latitude]),o=Object(n.a)(s,2);o[0];return i>o[1]?1:-1})).map((function(e,t){var a=l([+e.longitude,+e.latitude]),r=Object(n.a)(a,2),s=r[0],o=r[1],c=.05*h,d=c,u=parseFloat(e.cumulated_tonnage_out_region)+parseFloat(e.cumulated_tonnage_in_region);u<1e3?d=.025*h:u>5e3&&(d=.075*h);var p=parseFloat(e.cumulated_tonnage_out_region)/u,m=parseFloat(e.cumulated_tonnage_in_region)/u,j=L/2-2*c+(w.length>5?t%2===0?0:2*c:0),v=k*t,O="translate(".concat(j,", ").concat(v,")");return Object(f.jsxs)("g",{className:"port-group",children:[Object(f.jsx)("line",{x1:j,y1:v,x2:s-15,y2:o-q}),Object(f.jsx)("circle",{cx:s-15,cy:o-q,r:.002*h,style:{fill:i.a.generic.dark},className:"marker"}),Object(f.jsx)(b,{transformGroup:O,navigoValues:[p,m],circleRadius:d,width:h,height:g,name:e.name})]},e.name)}))})]}):null,s.map((function(e,t){return Object(f.jsx)(j,{datum:e,projection:l,width:h,height:g,projectionTemplate:p,onClick:_,isActive:e.name===x,isMinified:x&&e.name!==x},e.name)}))]})}function v(e){var t=e.data,a=e.width,n=e.height,r=(e.projection,Object(m.c)(a)),i=Object(m.c)(n),s=t.filter((function(e){var t=e.name;return"Le Havre"===t||"Nantes"===t||"Bordeaux"===t||"La Rochelle"===t})).sort((function(e,t){return e.cumulated_exports_value_from_region>t.cumulated_exports_value_from_region?-1:1}));s.unshift({name:"L\xe9gende",cumulated_tonnage_in_region:60,cumulated_tonnage_out_region:60,cumulated_exports_value_from_region:50,cumulated_exports_value_from_ext:50,legendMode:!0});var o=15,c=.05*r,l=i-c-30,d=2*c+o,u=.4*r;return Object(f.jsxs)("g",{className:"small-multiples-and-legend-and-title",children:[Object(f.jsx)("rect",{x:u+30,y:l-3*c,width:r-u-60,height:i-l+3*c-7.5,style:{fill:"white"},opacity:.5}),Object(f.jsx)("foreignObject",{x:u+1.5*c,y:l-3*c,width:(2*c+o)*(s.length-1),height:i,children:Object(f.jsx)("div",{style:{position:"relative"},children:Object(f.jsx)("h5",{className:"visualization-title",style:{position:"absolute",left:0,bottom:0},children:"Comparaison avec les bureaux de fermes et ports dominants d'autres directions en 1787"})})}),Object(f.jsx)("g",{className:"small-multiples",children:s.map((function(e,t){var a=parseFloat(e.cumulated_tonnage_out_region)+parseFloat(e.cumulated_tonnage_in_region),n=parseFloat(e.cumulated_tonnage_out_region)/a,s=parseFloat(e.cumulated_tonnage_in_region)/a,p=parseFloat(e.cumulated_exports_value_from_region)+parseFloat(e.cumulated_exports_value_from_ext),m=parseFloat(e.cumulated_exports_value_from_region)/p*100;return e.legendMode?Object(f.jsx)(b,{transformGroup:"translate(".concat(1*c*4+o+t*(1*c+o),", ").concat(l-(1*c-c),")"),navigoValues:[n,s],toflitPct:m,circleRadius:1*c,width:r,height:i,name:e.name,legendMode:e.legendMode}):Object(f.jsx)(b,{transformGroup:"translate(".concat(u+t*d,", ").concat(l,")"),navigoValues:[n,s],toflitPct:m,circleRadius:c,width:r,height:i,name:e.name,legendMode:e.legendMode})}))}),Object(f.jsx)("defs",{children:Object(f.jsx)("marker",{id:"triangle-end",viewBox:"-10 0 10 10",refX:"1",refY:"5",markerUnits:"strokeWidth",markerWidth:.01*r,markerHeight:.01*r,orient:"auto",children:Object(f.jsx)("path",{d:"M -10 0 L 0 5 L -10 10 Z",fill:"darkgrey"})})})]})}function O(e){var t=e.data,a=e.width,n=e.height,r=e.projection,i=e.projectionTemplate,s=e.atlasMode,o=Object(m.c)(a),c=Object(m.c)(n);return Object(f.jsx)(h.a,{data:t,totalWidth:o,rowHeight:.3*c,projection:r,projectionTemplate:i,atlasMode:s})}},106:function(e,t,a){"use strict";a.d(t,"a",(function(){return L}));var n=a(10),r=a(9),i=a(2),s=a(324),o=a.n(s),c=a(234),l=a.n(c),d=a(325),u=a.n(d),p=a(326),m=a(55),f=a(279),b=a(120),h=a(119),j=a(22),g=a(327),v=a.n(g),O="#999",x=[2,15];var y=a(16),_=(a(590),a(1)),w=Object(m.a)().domain([0,1]).range([200,10]),q=Object(m.a)().domain([0,1]).range([300,30]);function N(e){var t=e.graph,a=e.nodeColor,s=e.nodeSize,o=e.labelDensity,c=e.nodeLabel,l=e.onCameraUpdate,d=e.cameraPosition,u=e.updateTimestamp,g=e.width,N=e.height,L=e.ratio,k=Object(i.useMemo)((function(){var e=[];return t.forEachNode((function(t,a){e.push(+(s?a[s]:a.size))})),e}),[s,t]),C=Object(f.a)(k),M={nodeSize:{min:C[0],max:C[1]}},T=Object(i.useMemo)((function(){return s?{min:Object(b.a)(C),max:Object(h.a)(C),name:s}:void 0}),[s,t]),P=Object(i.useMemo)((function(){if(a&&a.field){var e=[];t.forEachNode((function(t,n){e.push(n[a.field])})),e=Object(j.uniq)(e);var n={};if(a.palette)n=a.palette;else{var r=Object(y.d)(a.field,e.length),i=0;e.forEach((function(e){n[e]=r[i],i++}))}return{palette:n,name:a.field}}}),[a,t]),R=Object(i.useMemo)((function(){var e=new Map;return t.forEach((function(t,a,n,r,i,s){e.set(i,{sourceNode:n,targetNode:r})})),e}),[t]),A=Object(y.g)(P),S=Object(y.g)(T),z=Object(y.g)(c),F=Object(y.g)(o),E=function(e){var t=e.nodeColor,a=e.nodeSize,r=(e.nodeLabel,e.nodeSizeFactor),i=void 0===r?1:r,s=e.extents,o=null;return o=a?Object(m.a)().domain([a.min,a.max]).range(x):Object(m.a)().domain([s.nodeSize.min,s.nodeSize.max]).range(x),function(e,r){var s=Object(n.a)(Object(n.a)({},r),{},{x:isNaN(r.x)||void 0===r.x?0:r.x,y:isNaN(r.y)||void 0===r.y?0:r.y});if(s.color=t?t.palette[r[t.name]]||O:r.color||O,a){var c=r[a.name];c="number"===typeof c?c:1,s.size=o(c)}else{var l=r.size||1;s.size=o(l)}return s.size*=i,s}}({nodeColor:P,nodeSize:T,nodeLabel:c,extents:M}),B=function(e){var t=e.nodeColor,a=e.nodeSize,n=(e.nodeLabel,e.nodeSizeFactor,e.extents,e.dontColorEdges,e.edgesMap);return function(e,r,i,s){var o=n.get(e),c=o.sourceNode,l=o.targetNode,d={},u=(a?c[a.name]:c.size)<(a?l[a.name]:l.size)?c:l;return u&&(d.color=t?t.palette[u[t.name]]||O:u.color||O,d.color=v()(d.color).lighten(.4).rgb().string()),d}}({nodeColor:P,nodeSize:T,nodeLabel:c,extents:M,edgesMap:R}),D=Object(i.useRef)(null),I=Object(i.useState)(null),Y=Object(r.a)(I,2),H=Y[0],X=Y[1];if(Object(i.useEffect)((function(){d&&H&&H.getCamera().animate(d)}),[u]),H){var W=!1;A===P&&S===T&&z===c||(H.settings.nodeReducer=E,H.settings.edgeReducer=B,W=!0),F!==o&&(H.settings.labelGrid.cell={width:q(o),height:w(o)},H.displayedLabels=new Set,W=!0),W&&H.refresh()}Object(i.useEffect)((function(){H&&H.refresh()}),[g,N]);var G=Object(i.useCallback)((function(e){if(H&&H.graph!==t&&(H.kill(),X(null)),e&&t){var a=new p.WebGLRenderer(t,e,{nodeReducer:E,edgeReducer:B});a.settings.labelFont="IBM Plex Sans",X(a);var r=a.getCamera();r.setState(Object(n.a)(Object(n.a)({},r.getState()),{},{ratio:L||1})),r.disable(),l(r.getState()),r.on("updated",(function(e){l(e)}))}D.current=e}),[t]);return Object(_.jsx)("div",{className:"VisContainer GraphContainer",children:Object(_.jsx)("div",{ref:G,style:{width:"100%",height:"100%",minHeight:"10vh",minWidth:"1vw"}})})}function L(e){var t=e.data,a=e.nodeColor,n=e.nodeLabel,s=e.nodeSize,c=e.labelDensity,d=void 0===c?.5:c,p=e.spatialize,m=e.cameraPosition,f=void 0===m?{x:.5,y:.5,angle:0,ratio:1}:m,b=e.width,h=void 0===b?0:b,j=e.height,g=e.ratio,v=e.title,O=Object(i.useRef)(null),x=Object(i.useMemo)((function(){return O.current?O.current.getBoundingClientRect().height:0}),[O.current]),y=Object(i.useState)(f),w=Object(r.a)(y,2),q=w[0],L=w[1];Object(i.useEffect)((function(){["x","y","angle","ratio"].find((function(e){return f[e]!==q[e]}))&&L(f)}),[f]);var k=Object(i.useMemo)((function(){var e=o.a.parse(u.a,t);if(p){var a=l.a.inferSettings(e);l.a.assign(e,{settings:a,iterations:50})}return e}),[t]);return k?Object(_.jsxs)("div",{className:"NetworkGraphChart",style:{width:"100%",height:j||"100%"},children:[Object(_.jsx)("div",{ref:O,className:"row visualization-title-container",children:v?Object(_.jsx)("h5",{className:"visualization-title",children:v}):null}),Object(_.jsx)("div",{style:{position:"relative",flex:1},children:Object(_.jsx)(N,{graph:k,cameraPosition:q,nodeColor:a,nodeSize:s,labelDensity:d,nodeLabel:n,ratio:g,onCameraUpdate:function(e){L(e)},width:h,height:j-x})})]}):null}},121:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return l})),a.d(t,"frontMatter",(function(){return d}));var n=a(21),r=(a(2),a(5)),i=["components"],s={text:"1 min read",minutes:.54,time:32400,words:108},o={};function c(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("div",{className:"column"},Object(r.a)("h2",{id:"le-programme-portic"},"Le programme PORTIC"),Object(r.a)("p",null,"Le programme ANR PORTIC se propose de croiser les donn\xe9es sur la navigation et sur la valeur du commerce \xe9tranger de la France \xe0 la veille de la R\xe9volution fran\xe7aise pour mieux saisir les dynamiques commerciales \xe0 l\u2019\u0153uvre. Pour ce faire, il offre des interfaces d\u2019interrogation et de visualisation des donn\xe9es adapt\xe9es \xe0 des publics et des int\xe9r\xeats vari\xe9s."),Object(r.a)("p",null,Object(r.a)("a",{parentName:"p",href:"https://anr.portic.fr/"},"En savoir plus sur le programme PORTIC"))),Object(r.a)("div",{className:"column"},Object(r.a)("p",null,"Les contenus de ce site sont plac\xe9s sous ",Object(r.a)("a",{parentName:"p",href:"https://creativecommons.org/licenses/by-nc-sa/3.0/fr/"},"licence libre creative commons CC-BY-SA-NC"),"."),Object(r.a)("p",null,"Le code source de ce site est plac\xe9 sous licence libre ",Object(r.a)("a",{parentName:"p",href:"https://www.gnu.org/licenses/agpl-3.0.fr.html"},"AGPL-3.0"),"."),Object(r.a)("p",null,Object(r.a)("a",{parentName:"p",href:"https://github.com/medialab/portic-storymaps-2021/"},"Acc\xe9der au code source de ce site"))))}c.isMDXComponent=!0;var l=function(){return[{id:"le-programme-portic",level:2,title:"Le programme PORTIC",children:[]}]},d={}},16:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"f",(function(){return f})),a.d(t,"b",(function(){return b})),a.d(t,"e",(function(){return h})),a.d(t,"g",(function(){return j})),a.d(t,"d",(function(){return g})),a.d(t,"c",(function(){return v}));a(10),a(9),a(21),a(637),a(68);var n=a(315),r=a.n(n),i=a(2),s=a(78),o=a(95),c=a(19),l=c.a.generic,d={fr:s.a,en:o.a},u={cmin:25.59,cmax:55.59,lmin:60.94,lmax:90.94},p=["#999"];function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fr",a=d[t]||s.a;return"".concat(e," | ").concat(a.title," | PORTIC")}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;if(e.length>t){for(var a=e.split(" "),n=[a[0]],r=1;n.join(" ")<t-3&&r<a.length;)n.push(a[r]),r++;return[n=n.join(" "),a.slice(r).join(" ")]}return[e,void 0]}function b(e,t){return{distance:Math.sqrt(e*e+t*t),radians:Math.atan2(t,e)}}var h=function(e,t){return[e*Math.cos(t),e*Math.sin(t)]};function j(e){var t=Object(i.useRef)();return Object(i.useEffect)((function(){t.current=e})),t.current}function g(e,t){return 1!==t&&t?2===t?[l.accent1,l.accent2]:3===t?[l.dark,l.accent1,l.accent2]:r()(t,{colorSpace:u,seed:e,clustering:"force-vector"}):p}var v=function(e){return isNaN(e)?0:Math.abs(+e)}},168:function(e){e.exports=JSON.parse('{"a":"https://medialab.github.io/portic-storymaps-2021"}')},171:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s}));var n=a(9),r=a(2);function i(e,t){var a=Object(r.useRef)();Object(r.useEffect)((function(){a.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}function s(e,t){var a=Object(r.useState)(e),i=Object(n.a)(a,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){var a=setTimeout((function(){o(e)}),t);return function(){clearTimeout(a)}}),[e,t]),s}},172:function(e,t,a){"use strict";var n=a(9),r=a(55),i=a(119),s=a(17),o=a.n(s),c=(a(539),a(19)),l=a(2),d=a(20),u=a(1),p=function(e){var t=e.numberOfColumns,a=e.port,r=e.scaleX,i=e.scaleY,s=(e.legendWidth,e.columnWidth),p=e.totalHeight,m=e.totalWidth,f=e.projection,b=e.index,h=e.margins,j=e.rowHeight,g=e.fontSize,v=e.projectionTemplate,O=r(+a.nb_pointcalls_out),x=i(+a.mean_tonnage),y=b%t*s+h.left,_=2.3*p,w=f([+a.longitude,+a.latitude]),q=Object(n.a)(w,2),N=q[0],L=q[1],k=Object(l.useState)(!1),C=Object(n.a)(k,2),M=C[0],T=C[1];Object(l.useEffect)((function(){setTimeout((function(){T(!0)}))}),[]);var P=Object(d.useSpring)({to:{transform:"translate(".concat(N,",").concat(L,")"),x1:"rotated Poitou"===v?y+s/2:N,y1:"rotated Poitou"===v?_+j/7:L,markerRadius:"rotated Poitou"===v?.02*p:0,x2:N,y2:L,staticTransform:"rotated Poitou"===v?"translate(".concat(y,", ").concat(_,") scale(1)"):"translate(".concat(N,",").concat(L,") scale(").concat("rotated Poitou"===v?1:.1,")")},immediate:!M}),R=P.transform,A=P.x1,S=P.y1,z=P.x2,F=P.y2,E=P.staticTransform,B=P.markerRadius,D=s/2,I=j/7,Y=j/2+I/2-x/2,H=.08*m,X=12*g;return a.port.length<=10?X=6*g:a.port.length<=12?X=7*g:a.port.length<=15?X=8*g:a.port.length<=18&&(X=10*g),Object(u.jsxs)("g",{className:o()("port-point-and-triangle",{"is-minified":"rotated Poitou"!==v}),children:[Object(u.jsx)(d.animated.line,{x1:A,y1:S,x2:z,y2:F,stroke:"grey",strokeDasharray:"2, 8"}),Object(u.jsx)(d.animated.g,{className:"port-point",transform:R,children:Object(u.jsx)(d.animated.circle,{cx:0,cy:0,r:B,style:{fill:c.a.generic.dark},className:"marker"})}),Object(u.jsxs)(d.animated.g,{className:"port-triangle",transform:E,children:[Object(u.jsx)("path",{className:"vertical-line",d:"M ".concat(D," ").concat(I," \n              V ").concat(Y,"\n              ")}),Object(u.jsx)("g",{transform:"translate(".concat(D,", ").concat(Y,")"),children:Object(u.jsx)("path",{className:"triangle",d:"M ".concat(-O/2," ",0," \n                L ").concat(O/2," ",0,"\n                L ",0," ").concat(x,"\n                Z\n                "),fill:"url(#TriangleGradient)"})}),Object(u.jsxs)("g",{className:"local-legend",children:[Object(u.jsx)("line",{x1:D-O/2,x2:D+O/2,y1:Y-3,y2:Y-3,"marker-start":"url(#triangle-left)",markerEnd:"url(#triangle-right)"}),Object(u.jsx)("line",{x1:D-O/2-3,x2:D-O/2-3,y1:Y,y2:Y+x,"marker-start":"url(#triangle-left)",markerEnd:"url(#triangle-right)"}),Object(u.jsx)("path",{d:"\n            M ".concat(-.2*H-O/3," ").concat(.65*Y,"\n            Q ").concat(D-10," ").concat(.65*Y," ").concat(D-2," ").concat(Y-5,"\n            "),markerEnd:"url(#triangle-right)"}),Object(u.jsx)("path",{d:"\n            M ".concat(-x/3+3," ").concat(Y+.6*x+7,"\n            L ").concat(D-O/2-3," ").concat(Y+.6*x+7,"\n            "),markerEnd:"url(#triangle-right)"}),Object(u.jsx)("foreignObject",{y:Y/2,x:-H-O/3,width:H,height:j,children:Object(u.jsxs)("span",{xmlns:"http://www.w3.org/1999/xhtml",children:["nombre de navires sortis du port en 1789 : ",Object(u.jsx)("strong",{children:a.nb_pointcalls_out})]})}),Object(u.jsx)("foreignObject",{x:-H-O/3,y:Y+.6*x,width:.08*m,height:j,children:Object(u.jsxs)("span",{xmlns:"http://www.w3.org/1999/xhtml",children:["tonnage moyen des navires : ",Object(u.jsx)("strong",{children:(+a.mean_tonnage||0).toFixed(1)})]})})]}),Object(u.jsxs)("g",{className:"label",transformOrigin:"bottom left",transform:"translate(".concat(s/2,", ").concat(j/7-.025*p,")"),children:[Object(u.jsx)("path",{d:"M 0 ".concat(-g," L ").concat(X," ").concat(-g," ").concat(X-5," ").concat((.2*g-g)/2," ").concat(X," ").concat(.2*g," 0 ").concat(.2*g," Z"),style:{fill:c.a.generic.dark},transformOrigin:"bottom left",transform:"rotate (-45)"}),Object(u.jsxs)("text",{transformOrigin:"bottom left",transform:"rotate (-45)","font-size":g,style:{fill:"white"},x:3,y:0,textAnchor:"left",children:[" ",a.port," "]})]})]})]})};t.a=function(e){var t=e.data,a=e.totalWidth,s=void 0===a?1200:a,l=e.legendWidth,d=void 0===l?.1:l,m=e.margins,f=e.rowHeight,b=void 0===f?200:f,h=e.projection,j=e.projectionTemplate,g=e.atlasMode,v=m||{left:.1*s,right:.1*s},O=t.length,x=(s-v.left-v.right)/O,y=t.length/O*b,_=.05*y,w=Object(r.a)().domain([0,Object(i.a)(t.map((function(e){return+e.nb_pointcalls_out})))]).range([5,5*x]),q=Object(r.a)().domain([0,Object(i.a)(t.map((function(e){return+e.mean_tonnage})))]).range([5,.85*b]);return Object(u.jsxs)("g",{className:o()("TriangleChart",{"is-atlas-mode":g}),children:[Object(u.jsx)("defs",{children:Object(u.jsxs)("linearGradient",{id:"TriangleGradient",x2:"0%",y2:"100%",children:[Object(u.jsx)("stop",{offset:"10%",stopColor:"rgb(100,100,100)","stop-opacity":.6}),Object(u.jsx)("stop",{offset:"100%",stopColor:c.a.generic.dark})]})}),Object(u.jsxs)("g",{className:"triangles",children:[t.sort((function(e,t){var a=h([+e.longitude,+e.latitude]),r=Object(n.a)(a,1)[0],i=h([+t.longitude,+t.latitude]);return r>Object(n.a)(i,1)[0]?1:-1})).map((function(e,t){return Object(u.jsx)(p,{numberOfColumns:O,port:e,scaleX:w,scaleY:q,legendWidth:d,columnWidth:x,totalHeight:y,totalWidth:s,projection:h,index:t,margins:v,rowHeight:b,fontSize:_,projectionTemplate:j},t)})),Object(u.jsxs)("defs",{children:[Object(u.jsx)("marker",{id:"triangle-left",viewBox:"0 0 10 10",refX:"1",refY:"5",markerUnits:"strokeWidth",markerWidth:d*s*.04,markerHeight:.02*b,orient:"auto",children:Object(u.jsx)("path",{d:"M 10 0 L 0 5 L 10 10 Z",fill:"darkgrey"})}),Object(u.jsx)("marker",{id:"triangle-right",viewBox:"-10 0 10 10",refX:"1",refY:"5",markerUnits:"strokeWidth",markerWidth:d*s*.04,markerHeight:.024*b,orient:"auto",children:Object(u.jsx)("path",{d:"M -10 0 L 0 5 L -10 10 Z",fill:"darkgrey"})})]})]})]})}},19:function(e,t,a){"use strict";t.a={ui:{colorText:"#403d3d",colorAccent:"#34495e",colorAccentBackground:"#336d7c",colorBackgroundBlue:"#d3e5e5",colorBackground:"#ebebeb"},generic:{dark:"#336D7C",light:"#E0E3E6",accent1:"#00C4AF",accent2:"#FEA43B"},admiralties:{"La Rochelle":"#41BEA3",Marennes:"#A7E6F9","Sables d'Olonne":"#668EDB"},provinces:{Poitou:"#668EDB",Aunis:"#41BEA3",Saintonge:"#A7E6F9",Angoumois:"#514EEE"},product:{sel:"#E0CB0E","eau-de-vie et vins divers":"#A07BEE","autres produits":"#72808D","produits coloniaux":"#FEA43B"},partner:{Afrique:"#875E2E","Reste du monde (USA)":"#E0E3E6","Grande Bretagne":"#542AAD",Europe:"#A07BEE","Ports francs et petites \xeeles":"#5439F9",Colonies:"#E5881A","Ind\xe9termin\xe9 suppos\xe9 Europe":"#A07BEE"},customs_office:{"La Rochelle":"#41BEA3",Rochefort:"#349883","Saint-Martin-de-R\xe9":"#277262","Saint-Martin \xeele de R\xe9":"#277262","Tonnay-Charente":"#5AD0F4",Marans:"#67CBB6","Les Sables-d'Olonne":"#668EDB","Sables d'Olonne":"#668EDB",Marennes:"#A7E6F9",Charente:"#A7E6F9",Alligre:"#349883","Tous les bureaux":"grey"},tonnageClasses:{"100%":"#A07BEE","75% ou plus":"#41BEA3","moins de 75%":"#FEA43B"},portsTreemaps:{"France (r\xe9gion PASA)":"#41BEA3","Ind\xe9termin\xe9":"rgb(240,240,240)","zone maritime":"#98a9d9","multi-Etat":"#a42e0d","France (hors r\xe9gion PASA)":"#FED63B",Hambourg:"#F7E0DE","Duch\xe9 d'Oldenbourg":"#F3D1CE",Prusse:"#EFC1BD",Lubeck:"#E7A39C","Br\xeame":"#EBB2AD",Mecklenbourg:"#E3938C",Autriche:"#bd6a62","Grande-Bretagne":"#A07BEE","Provinces-Unies":"#2759e3",Danemark:"#8e7bee","Etats-Unis d'Am\xe9rique":"#EBB2AD",Pologne:"#804a45",Russie:"#804a45",Espagne:"#e35027",Portugal:"#e35027"}}},215:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return o})),a.d(t,"default",(function(){return l})),a.d(t,"tableOfContents",(function(){return d})),a.d(t,"frontMatter",(function(){return u}));var n=a(21),r=(a(2),a(5)),i=a(25),s=["components"],o={text:"5 min read",minutes:4.145,time:248700,words:829},c={};function l(e){var t=e.components,a=Object(n.a)(e,s);return Object(r.a)("wrapper",Object.assign({},c,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"introduction"},"Introduction"),Object(r.a)(i.a,{id:"intro-provinces",mdxType:"Caller"}),Object(r.a)("p",null,"La France du dix-huiti\xe8me si\xe8cle se caract\xe9rise par le fort dynamisme des ports et des hinterlands de la fa\xe7ade atlantique, stimul\xe9s par le commerce avec les Antilles et une demande europ\xe9enne en biens de consommation orient\xe9e \xe0 la hausse. La guerre maritime qui commence en 1793 et qui se poursuit pendant plus de vingt ans, entra\xeenant la perte d\xe9finitive de Saint-Domingue en 1804 et de l\u2019\xeele de France (\xeele Maurice) en 1815, sonne le glas de cette dynamique et d\xe9place le centre de l\u2019\xe9conomie fran\xe7aise vers l\u2019int\xe9rieur. "),Object(r.a)("p",null,"L\u2019\xe9tude de cas pr\xe9sent\xe9e ici s\u2019int\xe9resse \xe0 la navigation et au commerce maritime des c\xf4tes poitevines et charentaises \xe0 la veille de la R\xe9volution. Cette aire poss\xe8de un dense maillage portuaire, avec une quarantaine de ports en activit\xe9. Certains ne font que du cabotage micro-local, d\u2019autres int\xe8grent petit et grand cabotage, d\u2019autres enfin s\u2019adonnent \xe9galement \xe0 une navigation de long-cours. Cette r\xe9gion se pr\xeate donc particuli\xe8rement \xe0 une \xe9tude portant sur l\u2019articulation entre les diff\xe9rentes \xe9chelles du commerce maritime \xe0 l\u2019aube de la R\xe9volution. "),Object(r.a)(i.a,{id:"intro-ports",mdxType:"Caller"}),Object(r.a)("p",null,"Nous nous proposons de reconstituer l\u2019histoire maritime et commerciale de la r\xe9gion \xe0 partir de deux sources historiques. D\u2019une part, nous disposons de traces administratives de la navigation maritime gr\xe2ce aux redevances qui p\xe8sent sur celle-ci sous l\u2019Ancien R\xe9gime. Les registres des cong\xe9s r\xe9pertorient les navires \xe0 leur d\xe9part d\u2019un port et le montant d\xfb, qui varie le plus souvent selon leur tonnage et leur destination. Ces registres, r\xe9dig\xe9s par les greffiers de l\u2019amiraut\xe9 locale, ont \xe9t\xe9 num\xe9ris\xe9s et structur\xe9s sous la forme d\u2019une base de donn\xe9es appel\xe9e ",Object(r.a)("a",{href:"http://navigocorpus.org/",target:"blank",rel:"noopener noreferrer"},"Navigocorpus"),". Dans cette derni\xe8re, on compte entre autres plus de 32 000 cong\xe9s pour l\u2019ann\xe9e 1787 pour l\u2019ensemble des ports fran\xe7ais, et quelque 6900 cong\xe9s pour 1789 relatifs \xe0 la r\xe9gion \xe9tudi\xe9e."),Object(r.a)("p",null,"Les registres des cong\xe9s nous permettent de rep\xe9rer les dates de d\xe9part des b\xe2timents, ainsi que diverses informations relatives \xe0 l\u2019objet de leur voyage, leur tonnage, leur capitaine, etc.. Ces donn\xe9es ne sont cependant pas d\xe9nu\xe9es d\u2019incertitude : comme nous le verrons, le tonnage des navires est parfois surestim\xe9 dans certains ports. Aussi, dans le cadre de la pr\xe9sente \xe9tude, nous avons pris en compte l\u2019itin\xe9raire d\xe9clar\xe9 par les capitaines de navires au moment du d\xe9part, tout en \xe9tant conscient que la d\xe9claration ne correspond pas n\xe9cessairement au voyage effectif qui l\u2019a suivi. Les cong\xe9s permettent toutefois une bonne mesure des trafics de la r\xe9gion de La Rochelle, y compris \xe0 toute petite \xe9chelle, tout en demandant une attention fine \xe0 la dimension d\u2019incertitude inh\xe9rente \xe0 la source mobilis\xe9e."),Object(r.a)(i.a,{id:"intro-bureaux",mdxType:"Caller"}),Object(r.a)("p",null,"D\u2019autre part, nous disposons de traces administratives relatives au commerce g\xe9n\xe9ral de la r\xe9gion \xe9tudi\xe9e. La base de donn\xe9es ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/home",target:"blank",rel:"noopener noreferrer"},"Toflit18")," se fonde sur la num\xe9risation des documents du Bureau de la balance du commerce de 1716 \xe0 1821. Ces documents ont \xe9t\xe9 produits gr\xe2ce aux services des Fermes : chaque bureau des Fermes enregistrait localement les \xe9tats de sortie et d\u2019entr\xe9e des marchandises entre la France et l\u2019\xe9tranger. Plus de 550 000 flux de sortie / entr\xe9e ont \xe9t\xe9 document\xe9s dans la base de donn\xe9es Toflit18."),Object(r.a)("p",null,"Gr\xe2ce aux donn\xe9es de la base Toflit18, nous sommes en mesure de lister les exports et imports entre les sept diff\xe9rents bureaux de ferme de la r\xe9gion et les partenaires \xe9trangers du royaume de France. Les informations que l\u2019on peut extraire de ces flux sont, entre autres, le nom du produit \xe9chang\xe9, la quantit\xe9, la valeur, le partenaire commercial, et l\u2019entit\xe9 administrative ayant enregistr\xe9 le flux au niveau local. En 1789, elles pr\xe9cisent en outre, sauf pour le commerce de r\xe9exportation des denr\xe9es coloniales, l\u2019origine du produit commercialis\xe9 (ville ou province fran\xe7aise, ou \xc9tat \xe9tranger). Elles fournissent donc des informations compl\xe9mentaires \xe0 celles donn\xe9es par les sources relatives \xe0 la navigation."),Object(r.a)("div",{className:"centered-part"},Object(r.a)("div",{className:"centered-part-contents"},Object(r.a)(i.a,{mdxType:"Caller"}),Object(r.a)("p",null,"Le croisement entre cong\xe9s de navigation et donn\xe9es fiscales de la Ferme rendu possible par les bases de donn\xe9es Toflit18 et Navigocorpus nous permet de saisir le commerce local, national et international, de pr\xe9ciser les flux et leur valeur pour ce qui est du commerce international, et d\u2019explorer les relations et l\u2019articulation entre les diff\xe9rents trafics de cette r\xe9gion."),Object(r.a)("p",null,"La pr\xe9sente \xe9tude de cas d\xe9crit en trois temps l\u2019histoire de la r\xe9gion correspondante \xe0 la direction des Fermes de La Rochelle \xe0 l\u2019aube de la R\xe9volution fran\xe7aise. D\u2019abord, nous constatons la relative perte d\u2019importance et de diversit\xe9 commerciale de la r\xe9gion \xe0 la suite de la perte du Canada par le royaume de France durant la guerre de Sept Ans. Nous proposons ensuite une analyse d\xe9taill\xe9e de la restructuration de la r\xe9gion en relation avec cet \xe9v\xe9nement, selon des fili\xe8res sp\xe9cialis\xe9es qui associent des ports particuliers avec le commerce de produits sp\xe9cifiques. Nous d\xe9montrons enfin que, bien que rest\xe9 dominant dans sa r\xe9gion, le port de la Rochelle a cess\xe9 de structurer la r\xe9gion de Poitou-Aunis-Saintonge au profit d\u2019un r\xe9seau d\u2019\xe9change plus diversifi\xe9."))))}l.isMDXComponent=!0;var d=function(){return[]},u={}},216:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return l})),a.d(t,"frontMatter",(function(){return d}));var n=a(21),r=(a(2),a(5)),i=["components"],s={text:"1 min read",minutes:.015,time:900,words:3},o={};function c(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("p",null,"Todo intro en"))}c.isMDXComponent=!0;var l=function(){return[]},d={}},218:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return o})),a.d(t,"default",(function(){return l})),a.d(t,"tableOfContents",(function(){return d})),a.d(t,"frontMatter",(function(){return u}));var n=a(21),r=(a(2),a(5)),i=a(25),s=["components"],o={text:"6 min read",minutes:6.005,time:360300,words:1201},c={};function l(e){var t=e.components,a=Object(n.a)(e,s);return Object(r.a)("wrapper",Object.assign({},c,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"partie-1-le-d\xe9clin-de-la-r\xe9gion-de-la-rochelle-suite-\xe0-la-perte-du-canada"},"Partie 1. Le d\xe9clin de la r\xe9gion de La Rochelle suite \xe0 la perte du Canada"),Object(r.a)(i.a,{id:"viz-principale-partie-1",step:1,mdxType:"Caller"}),Object(r.a)("p",null,"Au dix-huiti\xe8me si\xe8cle, la France a pleinement profit\xe9 du d\xe9veloppement des relations \xe9conomiques entre l\u2019Afrique, l\u2019Am\xe9rique et l\u2019Europe. L\u2019 \u201cAtlantique fran\xe7ais\u201d reposant sur la traite des Africains et leur exploitation dans les \xceles fran\xe7aises (Antilles et Mascareignes) a connu son apog\xe9e juste avant la r\xe9volte des esclaves de Saint-Domingue en ao\xfbt 1791 et le d\xe9but de la guerre maritime avec l\u2019Angleterre en f\xe9vrier 1793. L\u2019ancienne r\xe9gion Poitou-Charente, correspondant approximativement aux g\xe9n\xe9ralit\xe9s de Poitou, Aunis, Saintonge et Angoumois (PASA), avait une longue tradition maritime \xe0 son actif et \xe9tait bien situ\xe9e pour b\xe9n\xe9ficier de cette phase de prosp\xe9rit\xe9. "),Object(r.a)(i.a,{id:"viz-principale-partie-1",step:2,mdxType:"Caller"}),Object(r.a)("p",null,"L\u2019examen du commerce avec les pays \xe9trangers et les colonies de la direction des Fermes de La Rochelle, qui \xe9tait leur fa\xe7ade maritime, montre toutefois un dynamisme limit\xe9. Il y a bien eu croissance du commerce, mais cette croissance a \xe9t\xe9 plus lente que celle des autres grands ports du royaume. Cela s\u2019explique en grande partie par les relations privil\xe9gi\xe9es de la direction de la Rochelle avec le Canada. D\u2019une part, celui-ci se d\xe9veloppe beaucoup moins vite que les Antilles, et la r\xe9gion souffre de ce manque de dynamisme durant la premi\xe8re moiti\xe9 du si\xe8cle. D\u2019autre part, le Canada est c\xe9d\xe9 aux Anglais lors du trait\xe9 de Paris qui cl\xf4t la guerre de Sept Ans en 1763. Qu\xe9bec avait d\xe9j\xe0 \xe9t\xe9 pris en 1759. Cette perte est s\xe9v\xe8re pour la r\xe9gion dont le commerce entame alors un recul relatif tr\xe8s net. La trajectoire de la r\xe9gion de la Rochelle contraste ainsi avec celles de Bordeaux et de Nantes dans la seconde moiti\xe9 du si\xe8cle. Bordeaux, notamment, est beaucoup plus dynamique que La Rochelle et sa part du commerce fran\xe7ais ne cesse d\u2019augmenter jusqu\u2019en 1789. "),Object(r.a)(i.a,{id:"partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie",mdxType:"Caller"}),Object(r.a)("p",null,"Apr\xe8s une ann\xe9e exceptionnelle en 1747, qui s\u2019explique par l\u2019organisation de convois transatlantiques au d\xe9part de La Rochelle escort\xe9s par la Marine pour \xe9chapper aux pr\xe9dations britanniques, la direction de La Rochelle effectue 4,6% du total du commerce fran\xe7ais en 1750. En 1789 sa part ne repr\xe9sente plus que 2,2%."),Object(r.a)(i.a,{id:"viz-principale-partie-1",step:3,mdxType:"Caller"}),Object(r.a)("p",null,"Le recul de La Rochelle n\u2019est pas que quantitatif. En 1750, les donn\xe9es de la direction des Fermes de La Rochelle, charg\xe9e de la collecte des droits sur le commerce ext\xe9rieur et colonial, montrent que cette partie du territoire commerce 21% des types de biens \xe9chang\xe9s par la France (645 sur 3055, apr\xe8s ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/classification/browser?kind%3Dproduct%26selected%3Dproduct_orthographic%26selectedParent%3Dproduct_source",target:"blank",rel:"noopener noreferrer"},"uniformisation des variations orthographiques"),"). En 1789, elle n\u2019en commerce plus que 7% (248/3565). Cette forte r\xe9duction de la typologie des biens commercialis\xe9s s\u2019observe \xe0 la fois pour les exportations et pour les importations. \xc0 un niveau plus agr\xe9g\xe9 de typologie des produits, parmi les 150 secteurs de la ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/classification/browser?kind%3Dproduct%26selected%3Dproduct_revolutionempire%26selectedParent%3Dproduct_simplification",target:"blank",rel:"noopener noreferrer"},"classification \u201dR\xe9volution et Empire\u201d, utilis\xe9e dans le cadre du programme ANR Toflit18"),", La Rochelle en commerce 121 en 1750, mais seulement 88 en 1789."),Object(r.a)("p",null,"Les exportations sont donc beaucoup plus diversifi\xe9es en 1750 qu\u2019en 1789. L\u2019indice de concentration (Herfindhal) est de 0,1 en 1750 et 0,24 en 1789. Un bien pour lequel il n\u2019y a pas beaucoup de concurrence nationale (les eaux-de-vie) et deux denr\xe9es coloniales r\xe9export\xe9es (le caf\xe9 et le sucre) dominent en 1789 les exportations. Les toiles de coton, souvent r\xe9export\xe9es en direction de l\u2019Afrique, viennent en quatri\xe8me place, suivies du sel (dont la valeur est faible par rapport au tonnage qu\u2019il mobilise, car c\u2019est une marchandise tr\xe8s pond\xe9reuse). En 1750, la mercerie et les \xe9toffes de laine font partie des cinq principales exportations (avec l\u2019indigo, les eaux-de-vie et le sucre : le sel est en 14e position). "),Object(r.a)(i.a,{id:"partie-1-produits-importants-pour-la-rochelle",mdxType:"Caller"}),Object(r.a)("p",null,"La direction des Fermes de La Rochelle s\u2019est donc sp\xe9cialis\xe9e dans les produits agricoles et les r\xe9exportations de dern\xe9es coloniales, au d\xe9pens des biens manufactur\xe9s de la r\xe9gion. Ce constat n\xe9gatif est toutefois nuanc\xe9 par l\u2019intensit\xe9 capitalistique de la production d\u2019eaux-de-vie qui la rapproche des biens manufactur\xe9s. La sp\xe9cialisation et l\u2019importance de ce produit d\u2019exportation ressort avec \xe9vidence en comparant la part de la direction des Fermes de La Rochelle \xe0 la moyenne nationale."),Object(r.a)("p",null,"Nous ne connaissons pas la destination des r\xe9exportations coloniales en 1789. En les excluant, on constate que la concentration des march\xe9s de la direction des Fermes de La Rochelle est la m\xeame en 1750 et en 1789 (entre 0,41 et 0,44), mais que l\u2019Angleterre a pris la place de l\u2019Am\xe9rique (terme qui d\xe9signe en 1789 essentiellement les Antilles fran\xe7aises). Cela est confirm\xe9 par la distribution des tonnages des navires partant depuis la r\xe9gion PASA vers l\u2019\xe9tranger en 1789."),Object(r.a)(i.a,{id:"partie-1-ports-destinations",mdxType:"Caller"}),Object(r.a)("p",null,"Pour aller vite, on pourrait r\xe9sumer en disant que la direction des Fermes de La Rochelle n\u2019exporte plus des biens diff\xe9renci\xe9s vers le Canada, mais essentiellement des eaux-de-vie vers l\u2019Angleterre. Du point de vue de la navigation, le fort tonnage destin\xe9 \xe0 ce type de commerce est inf\xe9rieur \xe0 celui engag\xe9 pour l\u2019exportation du sel vers les mers du Nord et Baltique."),Object(r.a)("p",null,"Les donn\xe9es de la navigation collect\xe9es ne nous permettent pas de contribuer \xe0 l\u2019analyse du d\xe9clin de cette r\xe9gion: d\u2019une part, car n\u2019avons le d\xe9tail des sorties que pour la fin de l\u2019Ancien R\xe9gime, ce qui emp\xeache une analyse diachronique. D\u2019autre part, car les donn\xe9es collect\xe9es pour 1789 n\u2019apportent que des informations limit\xe9es pour ce qui est des produits transport\xe9s: les cong\xe9s du port de La Rochelle, par exemple, ne mentionnent pas la nature de la cargaison, alors que dans les autres ports de la r\xe9gion le greffier se limite le plus souvent \xe0 noter seulement l\u2019article principal qui compose la cargaison. Les registres des cong\xe9s indiquent, toutefois, les destinations de chaque navire sorti et cette donn\xe9e permet de constater un relatif \xe9clatement des march\xe9s de cette r\xe9gion. "),Object(r.a)(i.a,{id:"partie-1-ports-dattache-vers-etranger",mdxType:"Caller"}),Object(r.a)("p",null,"Sans que l\u2019on puisse affirmer qu\u2019il s\u2019agit d\u2019une nouveaut\xe9, la marginalisation de la r\xe9gion vers la fin de l\u2019Ancien R\xe9gime est confirm\xe9e par son manque de capacit\xe9 \xe0 assurer ses propres trafics. La navigation avec l\u2019\xe9tranger est assur\xe9e, \xe0 90%, par des pavillons \xe9trangers ou ext\xe9rieurs \xe0 la r\xe9gion \xe9tudi\xe9e. Il s\u2019agit, pour l\u2019essentiel, des pavillons britannique et nord-europ\xe9ens. Parmi les ports de la r\xe9gion, seul La Rochelle joue un r\xf4le, mais comme nous le verrons (partie 2.1), cette navigation est li\xe9e aux activit\xe9s de traite et au commerce colonial. "),Object(r.a)(i.a,{id:"partie-1-ports-dattache",mdxType:"Caller"}),Object(r.a)("p",null,"Cette incapacit\xe9 de la r\xe9gion \xe0 assurer les exportations vers l\u2019\xe9tranger n\u2019est pas li\xe9e \xe0 une absence d\u2019activit\xe9 maritime: au contraire, si on additionne le total des sorties de navires depuis les ports de la r\xe9gion \xe9tudi\xe9e en 1789, toute destination confondue, on mesure que les b\xe2timents r\xe9gionaux assurent une partie consid\xe9rable des trafics, sup\xe9rieure \xe0 celle assur\xe9e par les navires des autres ports fran\xe7ais, alors que la part de la navigation \xe9trang\xe8re est tr\xe8s minoritaire. Toutefois, la part de navigation sous pavillon fran\xe7ais assur\xe9e par les navires de la r\xe9gion \xe9tudi\xe9e, est inf\xe9rieure \xe0 celle de la plupart des autres provinces fran\xe7aises: en 1787, les ports de l\u2019Aunis-Saintonge-Poitou assurent 51.6% du tonnage qu\u2019ils exp\xe9dient, contre 84.3% pour la Bretagne ou 58,7% pour la Guyenne. La r\xe9gion n\u2019est donc pas tr\xe8s dynamique, \xe0 la fin de l\u2019Ancien R\xe9gime, en mati\xe8re d\u2019armement."))}l.isMDXComponent=!0;var d=function(){return[]},u={}},219:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return l})),a.d(t,"frontMatter",(function(){return d}));var n=a(21),r=(a(2),a(5)),i=["components"],s={text:"1 min read",minutes:.015,time:900,words:3},o={};function c(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("p",null,"Part 1 intro"))}c.isMDXComponent=!0;var l=function(){return[]},d={}},220:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return o})),a.d(t,"default",(function(){return l})),a.d(t,"tableOfContents",(function(){return d})),a.d(t,"frontMatter",(function(){return u}));var n=a(21),r=(a(2),a(5)),i=a(25),s=["components"],o={text:"17 min read",minutes:16.88,time:1012800,words:3376},c={};function l(e){var t=e.components,a=Object(n.a)(e,s);return Object(r.a)("wrapper",Object.assign({},c,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"partie-2-une-forte-sp\xe9cialisation-portuaire--le-cas-de-la-traite-n\xe9gri\xe8re-du-commerce-du-sel-et-de-leau-de-vie"},"Partie 2. Une forte sp\xe9cialisation portuaire : le cas de la traite n\xe9gri\xe8re, du commerce du sel et de l\u2019eau-de-vie"),Object(r.a)(i.a,{id:"viz-principale-partie-2",step:1,highlight:"toflit18",filter:"aucun",bureaux:"tous,La Rochelle,Rochefort,Saint-Martin-de-R\xe9,Les Sables-d'Olonne,Marennes,Charente,Marans,Tonnay-Charente",mdxType:"Caller"}),Object(r.a)("h2",{id:"introduction"},"Introduction"),Object(r.a)("p",null,"La r\xe9gion \xe9tudi\xe9e se caract\xe9rise par une densit\xe9 importante de ports qui entretiennent des relations plus ou moins \xe9tendues et plus ou moins intenses avec le reste de la France et du monde. L\u2019importance de leurs mouvements maritimes et des tonnages impliqu\xe9s n\u2019est pas directement corr\xe9l\xe9e \xe0 la valeur des marchandises transport\xe9es. Ainsi, les deux bureaux des Fermes qui dominent en valeur des exportations sont ceux de La Rochelle, tr\xe8s li\xe9 au commerce colonial et n\xe9grier, et de Tonnay-Charente, exportateur d\u2019eau-de-vie essentiellement vers la Grande-Bretagne. Par contre, l\u2019activit\xe9 portuaire de Marennes (exportateur du sel vers les ports de la mer du Nord et de la Baltique) est en tonnage la plus importante de la r\xe9gion mais ses exportations sont de faible valeur. Les importations sont domin\xe9es par les ports du bureau des fermes de La Rochelle, en raison de la forte valeur des produits coloniaux. La balance du commerce de Rochefort, qui importe des mati\xe8res premi\xe8res navales, est tr\xe8s d\xe9ficitaire."),Object(r.a)(i.a,{id:"partie-2-part-navigation-francaise",mdxType:"Caller"}),Object(r.a)("p",null,"Nos analyses ont certes montr\xe9 que",Object(r.a)("a",{href:"https://drive.google.com/file/d/1Lr_7vo2oUHvWWWxNPknVtioLepYmIxLn/view",target:"blank",rel:"noopener noreferrer"}," les tonnages enregistr\xe9s \xe0 Marennes semblent "),Object(r.a)("a",{href:"https://drive.google.com/file/d/1Lr_7vo2oUHvWWWxNPknVtioLepYmIxLn/view",target:"blank",rel:"noopener noreferrer"},"surestim\xe9s \xe0 20%"),", et cela monte m\xeame \xe0 50% dans 10% des pires cas, mais cela ne remet pas en cause la primaut\xe9 de ce port. La carte, qui repr\xe9sente le tonnage exp\xe9di\xe9 en 1789, \xe0 partir des cong\xe9s d\xe9livr\xe9s aux navires, toutes destinations confondues, met en outre en \xe9vidence le caract\xe8re tr\xe8s internationalis\xe9 des transporteurs dans les ports exportateurs de sel (Noirmoutier et l\u2019\xeele de R\xe9) et d\u2019eau-de-vie (Tonnay-Charente), ainsi que \xe0 Rochefort, largement approvisionn\xe9 par les marines du Nord qui y apportent les mat\xe9riels n\xe9cessaires \xe0 l\u2019arsenal. Ce sont ces transporteurs qui assurent la presque totalit\xe9 du commerce avec l\u2019\xe9tranger de la r\xe9gion \xe9tudi\xe9e. Comme nous le verrons ",Object(r.a)("a",{href:"https://medialab.github.io/portic-storymaps-2021/fr/page/partie-3",target:"blank",rel:"noopener noreferrer"},"dans la partie 3"),", La Rochelle n\u2019a plus un r\xf4le structurant pour les ports de cette r\xe9gion: d\u2019autres ports entretiennent des relations avec l\u2019\xe9tranger et avec les march\xe9s fran\xe7ais, en commercialisant les productions locales, sans que la cha\xeene logistique ne passe par La Rochelle."),Object(r.a)("p",null,"Cette section propose une \xe9tude de trois ports de la r\xe9gion \xe0 la fin de l\u2019Ancien R\xe9gime afin de montrer la diversification de leurs march\xe9s, qui s\u2019explique largement par la nature des produits commercialis\xe9s. De par ses relations exclusives avec les colonies et surtout son investissement dans la traite n\xe9gri\xe8re, La Rochelle m\xe9rite une \xe9tude \xe0 part. L\u2019importation de quantit\xe9s consid\xe9rables de denr\xe9es coloniales, majoritairement r\xe9-export\xe9es vers l\u2019Europe du Nord, met ce port dans une situation unique. Pour le commerce des eaux-de-vie, nous \xe9tudierons le cas de Tonnay-Charente. La mention de l\u2019eau-de-vie parmi les cargaisons indiqu\xe9es par les cong\xe9s \xe9tant rare, il faudra se tourner d\u2019abord vers les sources de la Balance du commerce, pour affiner ensuite les donn\xe9es par l\u2019analyse de la navigation. "),Object(r.a)(i.a,{id:"sorties-de-sel",mdxType:"Caller"}),Object(r.a)("p",null,"Plusieurs autres ports de la r\xe9gion, enfin, se consacrent prioritairement \xe0 l\u2019exportation du sel: Noirmoutier, Ars-en-R\xe9 et surtout Marennes mobilisent de flottes d\xe9passant en 1789 les 10000 tonneaux pour sa commercialisation. Nous d\xe9velopperons ici en d\xe9tail le cas de Marennes, principal port exportateur de sel, dont la particularit\xe9 est de miser largement sur l\u2019approvisionnement du march\xe9 national."),Object(r.a)("h2",{id:"21-la-rochelle-et-le-commerce-triangulaire"},"2.1. La Rochelle et le commerce triangulaire"),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"colonial",highlight:"toflit18",bureaux:"tous,La Rochelle",mdxType:"Caller"}),Object(r.a)("p",null,"Au XVIIIe si\xe8cle, les colonies antillaises augmentent tr\xe8s consid\xe9rablement leur production de sucre, caf\xe9, indigo et produits tinctoriaux, pour r\xe9pondre \xe0 une demande europ\xe9enne fortement orient\xe9e \xe0 la hausse. La croissance de la production passe par un nombre de plus en plus \xe9lev\xe9 de plantations, qui ont un recours massif \xe0 une main-d\u2019\u0153uvre d\u2019esclaves, que les Europ\xe9ens d\xe9portent par centaines de milliers depuis l\u2019Afrique dans le cadre de la traite n\xe9gri\xe8re. Ce commerce transatlantique d\u2019\xeatres humains, achet\xe9s sur les c\xf4tes d\u2019Afrique par les n\xe9griers europ\xe9ens, a commenc\xe9 au XVe si\xe8cle, mais il atteint son apog\xe9e au XVIIIe si\xe8cle, lorsque 6 millions d\u2019Africains sont d\xe9port\xe9s aux Am\xe9riques. La moiti\xe9 d\u2019entre eux est vendue aux Antilles. On estime \xe0 un million le nombre d\u2019Africains introduits dans les colonies fran\xe7aises au XVIIIe si\xe8cle. La principale destination est la colonie de Saint-Domingue (aujourd\u2019hui Ha\xefti) qui compte, \xe0 la veille de la grande r\xe9volte de 1791, un demi-million d\u2019esclaves, dont plus de la moiti\xe9 sont n\xe9s en Afrique. Alors que dans la plupart des ports n\xe9griers fran\xe7ais, la part des armements n\xe9griers est nettement inf\xe9rieure \xe0 celle des armements en droiture vers les Antilles, cela n\u2019est pas le cas \xe0 La Rochelle: au d\xe9part de ce port, les trois quarts des exp\xe9ditions de 1787 destin\xe9es \xe0 approvisionner les Antilles en hommes ou en produits sont des n\xe9griers. Comme \xe0 Honfleur, il y a donc clairement, en mati\xe8re de trafics transatlantiques, une sp\xe9cialisation n\xe9gri\xe8re rochelaise. En 1789, les 12 n\xe9griers partis de La Rochelle sont tous arm\xe9s par des n\xe9gociants rochelais. Trois autres n\xe9griers partent depuis Rochefort. "),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"colonial",highlight:"navigo",bureaux:"tous,La Rochelle",minTonnage:"100",mdxType:"Caller"}),Object(r.a)("p",null,"L\u2019activit\xe9 n\xe9gri\xe8re est aux mains d\u2019armateurs priv\xe9s qui esp\xe8rent r\xe9aliser un profit lors de la revente des captifs aux Antilles. Si Nantes est le principal port n\xe9grier fran\xe7ais, La Rochelle a jou\xe9 un r\xf4le significatif, tout particuli\xe8rement dans les ann\xe9es 1730\u20131740 : entre 1713 et 1744, La Rochelle arme 15% des exp\xe9ditions n\xe9gri\xe8res fran\xe7aises; sa part tombe \xe0 11% apr\xe8s la perte du Canada, en sorte que si La Rochelle est le deuxi\xe8me port n\xe9grier le plus important en France avant 1763, il passe au 4e rang par la suite."),Object(r.a)("p",null,"Malgr\xe9 un d\xe9clin relatif, l\u2019activit\xe9 n\xe9gri\xe8re rochelaise est toutefois r\xe9solument orient\xe9e \xe0 la hausse: les armateurs rochelais passent de 4,3 armements n\xe9griers par an pour la p\xe9riode 1713\u20131744 \xe0 12,5 armements par an dans la d\xe9cennie 1783\u20131793. Pendant cette derni\xe8re d\xe9cennie, la traite est v\xe9ritablement de l\u2019activit\xe9 principale, voire presque exclusive, des armateurs rochelais: en 1789, sur un total de 200 d\xe9parts depuis le port de La Rochelle de navires arm\xe9s par des Rochelais, un peu plus de la moiti\xe9 des tonnages se dirigent vers l\u2019Afrique (42% du total) ou vers les colonies antillaises ou les Mascareignes, le reste se r\xe9partissant entre Terre-Neuve et Saint-Pierre-et-Miquelon (9.2%) La part des armements vers l\u2019\xe9tranger est insignifiante (0.2%), et celle hors des ports limitrophes (Aunis, Poitou, Saintonge) ne d\xe9passe pas le 5%. Les trois quarts de la trentaine de navires rochelais d\xe9passant le 50 tx (le plus grand faisant 827 tonneaux) sortis du port de La Rochelle en 1789 se consacrent au commerce transatlantique et n\xe9grier. "),Object(r.a)("p",null,"D\xe8s lors qu\u2019on \xe9carte la poussi\xe8re des caboteurs, l\u2019importance des destinations africaines et des colonies est lisible sur ce sch\xe9ma, qui repr\xe9sente les destinations des navires sortis du port de La Rochelle en 1789, tout port d\u2019attache confondu. Tous les navires qui se dirigent vers les Am\xe9riques, les Antilles ou l\u2019oc\xe9an Indien sauf un sont par ailleurs arm\xe9s par des armateurs de La Rochelle. "),Object(r.a)("p",null,"Au total, dans les derni\xe8res ann\xe9es de l\u2019Ancien R\xe9gime, une douzaine de navires reviennent chaque ann\xe9e \xe0 La Rochelle depuis les colonies, soit en droiture, soit (et surtout) de retour d\u2019une exp\xe9dition n\xe9gri\xe8re. Les donn\xe9es de la Balance du commerce confirment la centralit\xe9 du commerce colonial et n\xe9grier : en 1789, les exportations vers l\u2019Afrique repr\xe9sentent 23% du total des exportations du bureau des Fermes de La Rochelle, alors que 73% est constitu\xe9 par les r\xe9-exportations des denr\xe9es coloniales. La valeur des produits ramen\xe9s est estim\xe9e, en 1789, \xe0 7.1 millions de livres tournois, dont 5.1 sont r\xe9export\xe9s \xe0 l\u2019\xe9tranger. Les n\xe9gociants rochelais semblent s\u2019\xeatre taill\xe9s une position forte dans le march\xe9 du caf\xe9, ce qui peut s\u2019expliquer par la pr\xe9f\xe9rence pr\xe9f\xe9rence quasi-exclusive pour Saint-Domingue o\xf9 plusieurs grandes familles de la ville (Belin, Garesch\xe9, Poupet Rasteau) sont tr\xe8s bien implant\xe9es. Saint-Domingue fournit en effet la presque totalit\xe9 du caf\xe9 import\xe9 en France depuis les Antilles."),Object(r.a)(i.a,{id:"partie-2-carte-direction-bateaux-de-la-rochelle",mdxType:"Caller"}),Object(r.a)("p",null,"Si les donn\xe9es collect\xe9es par la Balance du commerce ne permettent pas de conna\xeetre les destinations des r\xe9exportations coloniales rochelaises, les destinations des navires qui quittent le port en 1789 nous en donnent une indication approximative. Les Pays-Bas autrichiens (actuelle Belgique), les Provinces-Unies, Br\xeame, Hambourg, les ports de la Baltique re\xe7oivent chacun de navires totalisant entre 500 et 550 tonneaux. Parmi les autres destinations europ\xe9ennes des navires partis de La Rochelle, seule la Grande-Bretagne (1048 tonneaux) n\u2019est vraisemblablement pas destinataire des produits coloniaux, car elle s\u2019approvisionne dans ses propres colonies. "),Object(r.a)("p",null,"D\xe8s lors, il n\u2019est pas surprenant que le n\xe9goce rochelais porte toute son attention aux questions li\xe9es au commerce colonial et n\xe9grier. Cela appara\xeet clairement parmi les sujets discut\xe9s par la chambre de commerce de La Rochelle. L\u2019indexation faite \xe0 la main, \xe0 l\u2019\xe9poque, sur la marge des registres de d\xe9lib\xe9rations de la Chambre de Commerce de La Rochelle permet de constater que dans la seule ann\xe9e 1789, le commerce d\u2019Afrique est discut\xe9 \xe0 une trentaine de reprises, et les colonies \xe0 une 50aine des reprises, le commerce de l\u2019Inde \xe0 9; \xe0 titre de comparaison, le commerce avec l\u2019\xe9tranger est abord\xe9 11 fois en tout, et la p\xeache (avec notamment la question de la concurrence et de l\u2019admission de la p\xeache \xe9tats-unienne, tr\xe8s d\xe9battue cette ann\xe9e l\xe0 en France), 17 fois. Parmi les produits index\xe9s au marge des registres de d\xe9lib\xe9rations, les comestibles sont mentionn\xe9s 16 fois - ce qui dans la conjoncture c\xe9r\xe9ali\xe8re particuli\xe8re de l\u2019\xe9poque n\u2019est gu\xe8re \xe9tonnant-, l\u2019eau-de-vie et le vin 6, les sucres et les raffineries 8, le charbon de terre 3. On mesure clairement, en d\xe9pit d\u2019un crit\xe8re sans doute grossier, que le regard des membres de la Chambre de commerce est clairement riv\xe9 sur les colonies et la traite. "),Object(r.a)("p",null,"Si la question de la traite semble absente des cahiers de dol\xe9ances de la r\xe9gion (l\u2019analyse porte sur un \xe9chantillon de 163 cahiers sur les 522 r\xe9dig\xe9s dans l\u2019ensemble de la r\xe9gion PASA), la d\xe9fense des int\xe9r\xeats coloniaux appara\xeet, significativement, uniquement dans le cahier de dol\xe9ances du Tiers-\xe9tat de la ville de La Rochelle, dont les repr\xe9sentants envoy\xe9s \xe0 Versailles \u201cdemanderont la r\xe9vocation de l\u2019arr\xeat rendu au conseil du roi, le 30 ao\xfbt 1784, concernant le commerce \xe9tranger dans les colonies, et le r\xe9tablissement des dispositions des lettres patentes de 1717 et 1727, auxquelles on est redevable des progr\xe8s qu\u2019ont faits la navigation fran\xe7oise et la culture des isles fran\xe7oises de l\u2019Am\xe9rique\u201d. L\u2019arr\xeat en question est celui qui a \xe9largi l\u2019exclusif mitig\xe9, introduit en 1767, en facilitant l\u2019approvisionnement des colonies par les navires \xe9trangers, bien qu\u2019\xe0 des conditions restrictives pr\xe9cises. L\u2019admission de navires \xe9trangers aux colonies a provoqu\xe9 les protestations de toutes les chambres du commerce de France concern\xe9es par le commerce colonial, car le n\xe9goce fran\xe7ais refuse toute concurrence. Ce qui est int\xe9ressant c\u2019est toutefois que le cahier de dol\xe9ances du Tiers de La Rochelle se fasse le porte-parole des int\xe9r\xeats du n\xe9goce colonial fran\xe7ais, en demandant \xe9galement des lois interdisant la r\xe9exportation des sucres bruts afin d\u2019encourager les raffineries locales. Enfin \u201cles d\xe9put\xe9s demanderont la r\xe9vocation de l\u2019arr\xeat du 14 avril 1785 , qui a cr\xe9\xe9 une nouvelle compagnie des Indes et de celui pour l\u2019admission des \xe9trangers dans les isles de France et de Bourbon\u201d (c\u2019est -\xe0-dire \xe0 l\u2019\xeele Maurice et \xe0 la R\xe9union), m\xeame si pendant l\u2019\xe9poque du commerce libre (1769\u20131785), les armements vers l\u2019oc\xe9an Indien ou la Chine depuis La Rochelle (26) ont \xe9t\xe9 inf\xe9rieurs \xe0 celui de Nantes (44), Bordeaux (41), Marseille (42) ou Saint-Malo (32) et bien s\xfbr de Lorient (120). "),Object(r.a)("p",null,"La participation rocheloise \xe0 la navigation au-del\xe0 du cap de Bonne-Esp\xe9rance \xe0 la fin de l\u2019Ancien R\xe9gime est en effet modeste: l\u2019\xe9tat des exportations de 1789, n\u2019indique que 38060 livres tournois export\xe9s vers l\u2019Inde, et rien vers les Mascareignes. Ces donn\xe9es semblent toutefois incompatibles avec le d\xe9part du navire Henri IV pour l\u2019\xeele de France et l\u2019\xeele Bourbon, le 9 mai 1789, qui arrive \xe0 bon port en f\xe9vrier 1790, et qui n\u2019est pas un n\xe9grier ","[","Toussaint, 1967, p. 291","]"," \xe0 moins que sa cargaison ne vienne enti\xe8rement d\u2019autres directions de Fermes du royaume. En 1787, ce sont trois navires qui partent de La Rochelle vers les Mascareignes : une certaine diversification des armements coloniaux appara\xeet donc, ici comme \xe0 Bordeaux, dans les ann\xe9es 1780, lorsque la baisse des profits du commerce antillais incite \xe0 chercher des investissements plus rentables."),Object(r.a)("h2",{id:"22-le-commerce-de-leau-de-vie"},"2.2. le commerce de l\u2019eau-de-vie"),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"eau-de-vie",bureaux:"Charente, Saint-Martin-de-R\xe9, Rochefort,Tonnay-Charente",mdxType:"Caller"}),Object(r.a)("p",null,"Les cong\xe9s de navigation ne sont malheureusement pas de beaucoup de secours pour identifier les flux d\u2019eau-de-vie. En effet, le greffier du port de Tonnay-Charente ne prend pas le soin d\u2019annoter les cargaisons (il le fait 12 fois sur un total de 601 d\xe9parts): nous avons donc un aper\xe7u global de la navigation, sans pouvoir distinguer la nature des produits. L\u2019analyse men\xe9e sur les sorties de l\u2019ann\xe9e 1787 permet toutefois d\u2019identifier les r\xe9seaux commerciaux. 67 navires de tonnage moyen, proche de 100 tx, quittent alors Tonnay-Charente : 42 se rendent \xe0 l\u2019\xe9tranger (en Angleterre pour les deux tiers, le reste vers les \xeeles anglo-normandes, Ostende et la Baltique) ; les 25 gros caboteurs restants se rendent \xe0 Dunkerque. On identifie ici la flotte europ\xe9enne de l\u2019eau-de-vie, qui repr\xe9sente 22% du tonnage sortant en 1787. Un cran en dessous, on identifie un second groupe, compos\xe9 d\u2019une poussi\xe8re de petits caboteurs (tonnage moyen 35 tx) et qui repr\xe9sente tout de m\xeame 30% du tonnage sortant. Ces navires sont align\xe9s sur une destination unique: La Rochelle. Ils sont pour partie occup\xe9s \xe0 l\u2019approvisionnement de la ville et peut-\xeatre \xe0 un commerce r\xe9gional ou national: en revanche, La Rochelle a perdu le r\xf4le d\u2019entrep\xf4t pour le commerce international de l\u2019eau-de-vie qu\u2019elle avait dans les ann\xe9es 1730. Les principales maisons de n\xe9goce d\u2019eau-de-vie, en particulier Martell, n\u2019ont plus de bureaux \xe0 La Rochelle en 1789: leurs bureaux principaux ont \xe9t\xe9 rapatri\xe9s \xe0 Tonnay-Charente et/ou d\xe9plac\xe9s \xe0 Paris. Enfin, des unit\xe9s plus modestes (25 tx en moyenne) \xe9voluent au sein de la mer des Pertuis (depuis la Seudre sud jusqu\u2019aux Sables d\u2019Olonne) : elles repr\xe9sentent 23% du tonnage \xe0 la sortie du port de Tonnay-Charente. Il faut remarquer que 479 de 743 cong\xe9s d\xe9livr\xe9s en 1787 dans ce port concernent les navires avalant et attach\xe9s \xe0 des ports fluviaux. Venus porter les eaux-de-vie mais aussi les pierres de carri\xe8re et les produits manufactur\xe9s de l\u2019arri\xe8re-pays \xe0 Tonnay-Charente, leurs ma\xeetres quittent ce port soit \xe0 vide, soit avec une cargaison destin\xe9e \xe0 Rochefort, La Rochelle ou bien aux ports de la mer des Pertuis, qui leur fournissent du fret de retour pour leur navigation vers l\u2019amont du fleuve Charente. ","]"),Object(r.a)(i.a,{id:"exports-eau-de-vie-la-rochelle-longitudinal",mdxType:"Caller"}),Object(r.a)("p",null,"Les exportations d\u2019eau-de-vie charentaise en 1789 sont tr\xe8s sup\xe9rieures \xe0 la moyenne s\xe9culaire. L\u2019explication r\xe9side en partie dans les modifications induites par le Trait\xe9 d\u2019Eden de 1786, qui entra\xeene une augmentation extr\xeamement importante des exportations d\u2019eau-de-vie vers l\u2019Angleterre, notamment des eaux-de-vie de qualit\xe9 produites dans la r\xe9gion de Cognac, au d\xe9triment de celles de moindre qualit\xe9. Le total des exportations d\u2019eaux-de-vie fran\xe7aises vers la Grande-Bretagne passe de 10 \xe0 15 millions de livres tournois dans les ann\xe9es 1760\u201370, \xe0 40 millions en 1787\u201389."),Object(r.a)("p",null,"Il faudrait avoir un graphique sur les exportations totales d\u2019eau de vie sur la France enti\xe8re et en particulier sur les g\xe9n\xe9ralit\xe9s de Bordeaux, Bayonne et Nantes. Il y aussi \xe0 partir du milieu des ann\xe9es 20 une augmentation des exportations \xe0 partir des ports m\xe9ridionaux, en particulier S\xe8te. On pourrait avoir des coupes en 1750, une autre ann\xe9e (?) et 1789. "),Object(r.a)(i.a,{id:"exports-eau-de-vie-comparaison-directions-des-fermes",mdxType:"Caller"}),Object(r.a)("p",null,"Autre id\xe9e de visualisation: en 1789, regarder les origines des exports. Il est possible qu\u2019une partie des exports de la r\xe9gion de Cognac passe par Bordeaux, l\u2019Armagnac a priori passe par Bayonne (selon Cullen 1998 qui est LA r\xe9f\xe9rence sur ce th\xe8me). Il y aussi des choses int\xe9ressantes dans l\u2019article de Thierry (2013) sur Tonneau-Charente et Rochefort. Il faut distinguer aussi entre \u201ceau de vie simple\u201d et \u201ceau de vie double\u201d dans TOFLIT18, la 2e cat\xe9gorie correspond je pense \xe0 la meilleure qualit\xe9 (elle est plus ch\xe8re et on la trouve moins souvent), donc le Cognac (et Armagnac)."),Object(r.a)(i.a,{id:"origines-exports-eau-de-vie-1789-la-rochelle",mdxType:"Caller"}),Object(r.a)("p",null,"Par ailleurs, d\u2019apr\xe8s Cullen le commerce d\u2019exportation des eaux de vie conna\xeet une croissance forte apr\xe8s la fin de guerre d\u2019ind\xe9pendance am\xe9ricaine, mais il n\u2019a pas de stat tr\xe8s d\xe9taill\xe9 pour 1789."),Object(r.a)("h2",{id:"23-marennes-et-le-commerce-du-sel"},"2.3. Marennes et le commerce du sel"),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"sel",bureaux:"Saint-Martin-de-R\xe9, Marennes",mdxType:"Caller"}),Object(r.a)("p",null,"Denr\xe9e pond\xe9reuse de faible valeur, le sel voyage d\xe8s que cela est possible par voie maritime. Les c\xf4tes de la r\xe9gion \xe9tudi\xe9e sont, avec celles du sud de la Bretagne, de tr\xe8s grands producteurs de sel. Marennes est un port de gabelle, il approvisionne entre autres les greniers \xe0 sel de Libourne, de Honfleur, et de Saint-Val\xe9ry-sur-Somme. Les march\xe9s sont donc avant tout nationaux - avec une demande soutenue notamment dans les ports de la Manche qui arment \xe0 la grande p\xeache - et en moindre mesure, \xe9trangers (pays de la mer du Nord et du pourtour de la Baltique). "),Object(r.a)(i.a,{id:"sorties-de-marennes",mdxType:"Caller"}),Object(r.a)("p",null,"C\u2019est pourquoi, en quantit\xe9, le bureau des fermes de Marennes est le principal exportateur de sel en France, si l\u2019on inclut aussi les livraisons vers les ports francs fran\xe7ais. Il vient en troisi\xe8me position, derri\xe8re les bureaux du Croisic et de Saint-Martin-de-R\xe9, si on se limite aux march\xe9s ext\xe9rieurs au royaume."),Object(r.a)("p",null,"Les valeurs en jeu ne sont pas \xe9lev\xe9es, compar\xe9es \xe0 celles des flux commerciaux dont il a \xe9t\xe9 question pour La Rochelle et Tonnay-Charente: le sel export\xe9 depuis Marennes, y compris \xe0 destination des ports francs fran\xe7ais, se chiffre autour de 360,000 livres tournois en 1789 (dont 141,000 vers l\u2019\xe9tranger). En revanche, son commerce alimente un mouvement portuaire extr\xeamement intense, qui fait de Marennes, en termes de nombre de navires sortis et de leur tonnage, le principal port de la r\xe9gion \xe9tudi\xe9e. Son commerce maritime est donc une activit\xe9 importante, tant pour la production locale qu\u2019il soutient, que pour l\u2019activit\xe9 induite li\xe9e \xe0 son transport (construction navale, emploi maritime). Comme on l\u2019a vu plus haut (partie 1), les transporteurs ne sont pas de Marennes m\xeame, et les retomb\xe9es concernent donc aussi bien les ports de cabotage de la r\xe9gion que ceux du littoral atlantique fran\xe7ais."),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"sel",highlight:"navigo",mdxType:"Caller"}),Object(r.a)("p",null,"Les donn\xe9es sur la navigation aident \xe0 pr\xe9ciser la g\xe9ographie commerciale du sel export\xe9 depuis Marennes, m\xeame si elles n\u2019indiquent les quantit\xe9s export\xe9es. \xc0 compter du r\xe8gne de Louis XIV, la l\xe9gislation relative aux gabelles fait obligation au chargeur de naviguer avec une cargaison compl\xe8te. Cette situation est peut-\xeatre \xe0 l\u2019origine de la surestimation des tonnages constat\xe9e dans ce seul port de Marennes, qui travaille vraisemblablement sous le regard serr\xe9 des agents de la Ferme. Le tonnage des navires charg\xe9s de sel est donc un assez bon indicateur des quantit\xe9s export\xe9es. Les cong\xe9s confirment que, parmi les ports exportateurs de la r\xe9gion \xe9tudi\xe9e, la primaut\xe9 revient incontestablement \xe0 Marennes: en 1787, le tonnage additionn\xe9 de navires sortis de ports fran\xe7ais avec du sel y est de plus du double qu\u2019\xe0 Ars-en-R\xe9, le deuxi\xe8me grand exportateur de la r\xe9gion. M\xeame en prenant en compte la sur\xe9valuation des tonnages de navires \xe0 Marennes, que nous avons constat\xe9e en comparant le tonnage d\u2019un m\xeame navire relev\xe9 en plusieurs ports, Marennes demeure le principal fournisseur de sel en France, ce qui est confirm\xe9 par la Balance du commerce. "),Object(r.a)("p",null,"L\u2019exportation de sel est en outre une activit\xe9 quasi exclusive \xe0 Marennes : sur 1174 d\xe9parts en 1787, 990 ont charg\xe9 du sel. En 1789, ce sont 1301 sur 1481. "),Object(r.a)("p",null,"Pistes possibles:"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"dvp texte sur march\xe9s ext\xe9rieurs avec valeur et quantit\xe9s (Toflit) et faire calcul valeur/tx"),Object(r.a)("li",{parentName:"ul"},"regarder si Chambre de commerce et cahiers de dol\xe9ances parlent du commerce du sel"),Object(r.a)("li",{parentName:"ul"},"Piste: v\xe9rifier qui, parmi les ports exportateurs du sel, ont de liens forts avec l\u2019\xe9tranger et mettre cela en relation, \xe9ventuellement, aux tirants d\u2019eau - tonnage moyen des navires exportateurs par destination et par port de d\xe9part. En clair: est-ce que Marennes exporte plus vers l\u2019\xe9tranger que vers le march\xe9 national compar\xe9 aux autres ports qui vendent du sel? ici on a besoin de l\u2019expertise de Thierry"),Object(r.a)("li",{parentName:"ul"},"Il y a un ouvrage r\xe9cent publi\xe9 aux PUR (et lisible sur openedition) avec 2 articles sur le sujet. Je (Lo\xefc) n\u2019ai pas eu le temps de les lire.")))}l.isMDXComponent=!0;var d=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"21-la-rochelle-et-le-commerce-triangulaire",level:2,title:"2.1. La Rochelle et le commerce triangulaire",children:[]},{id:"22-le-commerce-de-leau-de-vie",level:2,title:"2.2. le commerce de l\u2019eau-de-vie",children:[]},{id:"23-marennes-et-le-commerce-du-sel",level:2,title:"2.3. Marennes et le commerce du sel",children:[]}]},u={}},221:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return l})),a.d(t,"frontMatter",(function(){return d}));var n=a(21),r=(a(2),a(5)),i=["components"],s={text:"1 min read",minutes:.015,time:900,words:3},o={};function c(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("p",null,"Part 2 TODO"))}c.isMDXComponent=!0;var l=function(){return[]},d={}},222:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return o})),a.d(t,"default",(function(){return l})),a.d(t,"tableOfContents",(function(){return d})),a.d(t,"frontMatter",(function(){return u}));var n=a(21),r=(a(2),a(5)),i=a(25),s=["components"],o={text:"8 min read",minutes:7.32,time:439200,words:1464},c={};function l(e){var t=e.components,a=Object(n.a)(e,s);return Object(r.a)("wrapper",Object.assign({},c,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"partie-3-la-rochelle-port-dominant-mais-pas-structurant"},"Partie 3. La Rochelle, port dominant mais pas structurant"),Object(r.a)(i.a,{id:"viz-principale-partie-3",step:1,mdxType:"Caller"}),Object(r.a)("p",null,"En 1789, les navires qui sortent des ports exportateurs de sels (Marennes, Rochefort, Ars-en-R\xe9) ont un tonnage moyen plus important que ceux sortant de La Rochelle. De mani\xe8re plus surprenante, la quantit\xe9 de navires qui sortent des ports secondaires - Aligre, Charente, Marennes, Saint-Martin de R\xe9, voire m\xeame Rochefort - t\xe9moigne d\u2019un dynamisme qui \xe9chappe largement au port dominant, La Rochelle. Cette particularit\xe9 s\u2019inscrit dans une histoire maritime longue de la r\xe9gion centre-ouest."),Object(r.a)("p",null,"Jusqu\u2019\xe0 la perte des colonies nord-am\xe9ricaines, le port de La Rochelle a cultiv\xe9 une certaine sp\xe9cificit\xe9 g\xe9ographique. Quoique le port de La Rochelle pratiquait, comme la presque totalit\xe9 des ports atlantiques, le commerce antillais et n\xe9grier, une part importante et qui a progressivement augment\xe9 jusqu\u2019\xe0 repr\xe9senter plus de la moiti\xe9 de ses armements pour les colonies dans les ann\xe9es 1750 \xe9tait constitu\xe9e par le commerce nord-am\xe9ricain - Canada, Louisiane et p\xeacheries de Terre-Neuve. Cette sp\xe9cificit\xe9 g\xe9ographique a \xe9galement influ\xe9 sur sa sp\xe9cialisation par produits. Le commerce des fourrures est ainsi une sp\xe9cialit\xe9 rochelaise jusqu\u2019au d\xe9but des ann\xe9es 1760. Les fourrures \xe9taient import\xe9es non seulement du Canada, mais aussi de la Louisiane, porte de sortie des peaux de l\u2019Ohio. Ces fourrures \xe9taient pour partie r\xe9-export\xe9es en France et en Europe (principalement vers l\u2019espace allemand et en Suisse). Une part importante, les peaux de castors en particulier, n\u2019\xe9tait pas r\xe9-export\xe9, mais alimentait l\u2019industrie de chamoiserie niortaise et d\u2019autres localit\xe9s fran\xe7aises. En retour, les Rochelais approvisionnaient les Canadiens et la Louisiane en vivres, mati\xe8res premi\xe8res et en produits manufactur\xe9s. L\u2019Am\xe9rique du Nord \xe9tait donc un d\xe9bouch\xe9 important et facile pour les c\xe9r\xe9ales de la r\xe9gion, les \xe9toffes locales de basse qualit\xe9 et, dans une moindre mesure, le sel n\xe9cessaire aux p\xeacheries de Terre-Neuve. Ce commerce quoique modeste avant les ann\xe9es 1740 fournissait des volumes importants d\u2019emploi dans ces trois secteurs de l\u2019\xe9conomie r\xe9gionale et contribuait \xe0 faire du port de La Rochelle, le centre de gravit\xe9 du complexe portuaire r\xe9gional. Cette domination \xe9tait renforc\xe9e par la pr\xe9pond\xe9rance des capitaux rochelais, investis de mani\xe8re prioritaire dans le commerce Atlantique - nord-am\xe9ricain et antillais. La domination rochelaise se mesurait notamment au d\xe9but du si\xe8cle par la pr\xe9sence des bureaux principaux des maisons de Cognac \xe0 La Rochelle. Mais, d\xe8s la crise qui suivit la chute du syst\xe8me de Law, La Rochelle commen\xe7a \xe0 perdre sa place et Tonnay-Charente \xe0 s\u2019affirmer comme le principal port d\u2019exportation de l\u2019eau-de-vie produite dans la r\xe9gion, et du Cognac en particulier. "),Object(r.a)(i.a,{id:"viz-principale-partie-3",step:2,mdxType:"Caller"}),Object(r.a)("p",null,"Ainsi, m\xeame si le port de la Rochelle a l\u2019ascendant sur les autres ports de la r\xe9gion par la diversit\xe9 des produits qu\u2019il importe et exporte et, surtout, par son activit\xe9 dans le commerce atlantique, les \xe9changes des ports de la r\xe9gion sont largement autonomes comme le montre le r\xe9seau des voyages de la r\xe9gion PASA de 1787 compar\xe9 \xe0 ceux des deux autres r\xe9gions situ\xe9es au nord (la Loire-Atlantique) et au sud (l\u2019Aquitaine). Les indices de centralit\xe9 compar\xe9es avec d\u2019autres r\xe9gions domin\xe9es par un port central (Sud-ouest Atlantique, Normandie, Loire-Atlantique) confirment la relative faiblesse de La Rochelle et son incapacit\xe9 \xe0 structurer les trafics maritimes locaux."),Object(r.a)("p",null,"Ce constat peut \xeatre li\xe9 historiquement \xe0 la perte des colonies nord-am\xe9ricaines (Canada et Louisiane) qui a bris\xe9 une dynamique vertueuse qui s\u2019\xe9tait \xe9tablie dans les ann\xe9es post\xe9rieures \xe0 la guerre de succession d\u2019Autriche. En effet, avant 1748, le commerce des Antilles en droiture et la traite n\xe9gri\xe8re continuaient \xe0 dominer le commerce de la Direction de la Rochelle en valeur, \xe9tant donn\xe9 le dynamisme limit\xe9 de la demande \xe9manant de l\u2019Am\xe9rique du Nord. Mais, d\xe8s la fin de la guerre de Succession d\u2019Autriche, s\u2019ouvre une p\xe9riode de croissance exceptionnelle pour le commerce avec l\u2019Am\xe9rique du Nord. Sur la p\xe9riode 1748\u20131758, La Rochelle re\xe7oit annuellement plus de 1 million 300 mille livres de peaux d\u2019Am\xe9rique du Nord, soit presque autant en valeur que de sucre des Antilles (1 million 450 mille livres). Le nombre d\u2019armements \xe0 destination du Canada est multipli\xe9 par deux alors que celui pour la Louisiane augmente de moiti\xe9. Par rapport aux ann\xe9es pr\xe9c\xe9dant la guerre, le trafic li\xe9 au commerce triangulaire baisse en moyenne d\u2019un quart pour les Antilles et de plus de moiti\xe9 pour la traite, destinations pour lesquelles les envois rochelais sont directement en concurrence avec des ports comme Bordeaux, Nantes, Rouen et m\xeame Dunkerque et Marseille. A l\u2019inverse, les Rochelais ont un monopole de fait pour la Louisiane qui n\u2019int\xe9resse gu\xe8re les ports plus importants et seul Bordeaux les concurrence pour l\u2019approvisionnement du Canada. Par ailleurs, ces deux destinations offraient des possibilit\xe9s compl\xe9mentaires. D\u2019un c\xf4t\xe9, le commerce \xe0 destination du Canada pouvait se transformer en commerce triangulaire invers\xe9 - La Rochelle-Canada-Antilles - lorsque les capitaines rochelais trouvaient au Canada de quoi ravitailler les \xeeles \xe0 sucre en morue sal\xe9e et, plus rarement, en c\xe9r\xe9ales. La Louisiane permettait \xe9galement de r\xe9aliser des op\xe9rations de contrebande avec les colons espagnols, offrant la possibilit\xe9 de riches retours sous forme de piastres (Augeron : 2004; Mathieu : 1986)."),Object(r.a)(i.a,{id:"viz-principale-partie-3",step:3,mdxType:"Caller"}),Object(r.a)("p",null,"Ce commerce de niche, limit\xe9 en volume, mais cr\xe9ateur d\u2019emplois locaux et, au milieu du si\xe8cle, facteur d\u2019un dynamisme certain, s\u2019\xe9croule avec la perte des colonies fran\xe7aises nord-am\xe9ricaines \xe0 la fin de la guerre de Sept Ans. Cette perte d\xe9structure durablement le commerce rochelais qui perd ses march\xe9s privil\xe9gi\xe9s et sa position dominante au sein du r\xe9seau portuaire r\xe9gional. En 1789, le commerce du port de la Rochelle est quasi exclusivement colonial : pr\xe8s de 90% de ses exportations en valeur sont destin\xe9s \xe0 la traite africaine et aux Antilles. Son impact dans la structuration de la r\xe9gion \xe9tudi\xe9e appara\xeet faible, alors que les autres bureaux de Fermes de la r\xe9gion exportent essentiellement des produits r\xe9gionaux, cela n\u2019est pas le cas dans le bureau de La Rochelle. D\u2019autres ports, par ailleurs, sont nettement plus \u201cextravertis\u201d en termes de navigation. Le profil de La Rochelle s\u2019apparente \xe0 celui des autres grands ports coloniaux, \xe0 cela pr\xe8s que Bordeaux exporte une partie consistante de produits r\xe9gionaux de son arri\xe8re-pays, qu\u2019il contribue \xe0 structurer. "),Object(r.a)("p",null,"Les graphiques que nous proposons illustrent fid\xe8lement nos propos. Ce d\xe9clin se donne \xe0 voir, \xe0 la veille de la R\xe9volution, sur le graphique en d\xe9but de section, o\xf9 l\u2019infrastructure de la province de l\u2019Aunis appara\xeet originale par le faible poids relatif de son port principal - La Rochelle - incapable de freiner le d\xe9veloppement des ports qu\u2019il maintenait dans sa d\xe9pendance avant 1763: Tonnay-Charente, Marennes, Rochefort et Ars-en-R\xe9. Dans la p\xe9riode pr\xe9-r\xe9volutionnaire (1787\u20131789), les flux de navires comme de marchandises t\xe9moignent ainsi de la recomposition de l\u2019\xe9conomie de la fa\xe7ade maritime. D\xe9sormais, la valeur des flux de marchandises au d\xe9part de Tonnay-Charente et \xe0 l\u2019arriv\xe9e de Rochefort, qui entretient directement les productions locales, se rapproche de ceux de La Rochelle."),Object(r.a)("p",null,"Cette \xe9volution est la cons\xe9quence de plusieurs contraintes qui se renforcent: la baisse de la capitalisation des n\xe9gociants rochelais, cons\xe9quence directe de la vague de faillites qui secouent le milieu \xe0 la fin de la guerre de Sept Ans; la fermeture des march\xe9s nord-am\xe9ricains subventionn\xe9s qui auraient permis un rebond rapide; la forte concurrence des autres ports sur la destination antillaise. Il ne restait donc que la traite n\xe9gri\xe8re. Pour l\u2019animer, les n\xe9gociants rochelais se procurent les marchandises n\xe9cessaires \xe0 ce commerce dans toute la France et l\u2019Europe et ne se fournissent que tr\xe8s peu dans l\u2019arri\xe8re-pays rochelais. Le port n\u2019est donc plus r\xe9ellement connect\xe9 \xe0 l\u2019arri\xe8re-pays et ce, d\u2019autant plus, que la faiblesse capitalistique de la place \xe9loigne les maisons de commerce sp\xe9cialis\xe9es dans le Cognac; ainsi Martell qui rapatrie leurs bureaux principaux \xe0 Tonnay-Charente ou \xe0 Paris. M\xeame dans le commerce colonial, La Rochelle doit faire une place aux autres ports de la r\xe9gion puisque Rochefort se voit accorder l\u2019autorisation de faire le commerce colonial, t\xe9moignant du d\xe9clin \xe9conomique et politique du port."),Object(r.a)("p",null,"Pour conclure, La Rochelle reste en 1789 un port relativement dominant dans la r\xe9gion, notamment en ce qui concerne le commerce atlantique, mais cette domination a largement diminu\xe9 au cours du si\xe8cle. De plus, la sp\xe9cialisation des ports de la r\xe9gion dans le sel pour les uns (Marennes, Rochefort, Ars-en-R\xe9), dans l\u2019eau-de-vie pour les autres (Tonnay-Charente et, dans une moindre mesure, les ports de l\u2019\xeele de R\xe9), n\u2019est plus articul\xe9e par la place de La Rochelle. Le commerce colonial ne s\u2019appuie plus sur le r\xe9seau des ports et des places manufacturi\xe8res locales, mais survit gr\xe2ce aux capitaux et aux marchandises venus d\u2019ailleurs. Les guerres de la R\xe9volution et napol\xe9oniennes ont par la suite d\xe9montr\xe9 la fragilit\xe9 et l\u2019artificialit\xe9 d\u2019un tel dispositif. Le blocus anglais et l\u2019interdiction de la traite transatlantique sonnent pour le port de la Rochelle le glas de son destin de grand port commercial. "),Object(r.a)(i.a,{id:"partie-3-comparaison-exports-coloniaux",mdxType:"Caller"}))}l.isMDXComponent=!0;var d=function(){return[]},u={}},223:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return l})),a.d(t,"frontMatter",(function(){return d}));var n=a(21),r=(a(2),a(5)),i=["components"],s={text:"1 min read",minutes:.015,time:900,words:3},o={};function c(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("p",null,"Part 3 TODO"))}c.isMDXComponent=!0;var l=function(){return[]},d={}},224:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return l})),a.d(t,"frontMatter",(function(){return d}));var n=a(21),r=(a(2),a(5)),i=(a(25),["components"]),s={text:"16 min read",minutes:15.63,time:937800,words:3126},o={};function c(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"\xe0-propos"},"\xc0 propos"),Object(r.a)("p",null,"Le pr\xe9sent site a \xe9t\xe9 r\xe9alis\xe9 dans le cadre du ",Object(r.a)("a",{href:"https://anr.portic.fr/",target:"blank",rel:"noopener noreferrer"},"programme de recherche ANR PORTIC"),". Ce programme porte sur les dynamiques de navigation et du commerce ext\xe9rieur au dix-huiti\xe8me si\xe8cle, un commerce qui s\u2019effectue largement par voie maritime. Outre la meilleure compr\xe9hension de ces dynamiques par le croisement de deux jeux de donn\xe9es, un enjeu fondamental du programme est de chercher des m\xe9thodes de qualification et d\u2019appr\xe9hension de l\u2019incertitude des donn\xe9es historiques, en exp\xe9rimentant des modes de visualisation et d\u2019\xe9criture appropri\xe9s."),Object(r.a)("p",null,"Dans ce cadre, le Working Package n\xb05 de ce programme de recherche consiste \xe0 effectuer une s\xe9rie d\u2019\xe9tudes de cas tirant parti de deux corpus existants de sources historiques num\xe9ris\xe9es : ",Object(r.a)("a",{href:"http://navigocorpus.org/",target:"blank",rel:"noopener noreferrer"},"Navigocorpus"),", une base de donn\xe9es portant sur l\u2019histoire de la navigation pilot\xe9e par Silvia Marzagalli et Christine Plumejeaud ; et ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/home",target:"blank",rel:"noopener noreferrer"},"Toflit18"),", une base de donn\xe9es portant sur le commerce ext\xe9rieur de la France, pilot\xe9e par Lo\xefc Charles et Guillaume Daudin."),Object(r.a)("p",null,"Ce site web s\u2019inscrit dans un mouvement second faisant suite aux premi\xe8res entreprises de num\xe9risation pour chacune des deux bases, en tentant de valoriser le travail d\xe9j\xe0 accompli via l\u2019\xe9tude approfondie de sous-ensembles signifiants dans les donn\xe9es. Ces \xe9tudes devraient ainsi permettre d\u2019\xe9clairer des questions disciplinaires existantes sous un nouveau jour gr\xe2ce aux nouveaux mat\xe9riaux et m\xe9thodes offerts par les bases de donn\xe9es mobilis\xe9es par le programme. Les questions soulev\xe9es par une telle initiative sont multiples :"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"Comment mobiliser ensemble deux sources dont certaines dimensions sont incommensurables ou difficiles \xe0 mettre en \xe9quivalence ? "),Object(r.a)("li",{parentName:"ul"},"Comment croiser les donn\xe9es num\xe9ris\xe9es des deux bases avec des connaissances plus denses et qualitatives sur les ph\xe9nom\xe8nes \xe9tudi\xe9s, apport\xe9es par des historiens sp\xe9cialistes de la r\xe9gion \xe9tudi\xe9e ? "),Object(r.a)("li",{parentName:"ul"},"Comment prendre en compte, au moment de l\u2019enqu\xeate et du raisonnement, l\u2019importante stratification de transformations, de r\xe9ductions et de d\xe9cisions interpr\xe9tatives constituant la cha\xeene qui relie les sources initiales avec les donn\xe9es qui en ont \xe9t\xe9 tir\xe9es ? "),Object(r.a)("li",{parentName:"ul"},"Comment prendre en compte l\u2019incertitude ou l\u2019incompl\xe9tude des donn\xe9es tout en proposant une analyse scientifiquement solide des ph\xe9nom\xe8nes \xe9tudi\xe9s ? "),Object(r.a)("li",{parentName:"ul"},"Comment faire dialoguer les formes classiques de l\u2019\xe9criture historique - le r\xe9cit d\xe9ploy\xe9 phrase apr\xe8s phrase, l\u2019argument d\xe9roul\xe9 paragraphe par paragraphe - avec les formes d\u2019\xe9criture diagrammatique et computationnelle qu\u2019implique la r\xe9alisation d\u2019un site web ? "),Object(r.a)("li",{parentName:"ul"},"Et enfin, comment g\xe9rer l\u2019inhabituelle collaboration interdisciplinaire et partition d\u2019expertises qu\u2019implique une telle \xe9criture multimodale ?")),Object(r.a)("p",null,"Toutes ces questions ont \xe9t\xe9 travaill\xe9es \xe0 l\u2019occasion de la s\xe9quence de collaboration d\u2019environ six mois qui a men\xe9 \xe0 l\u2019\xe9laboration de ce site, dont voici un bref r\xe9cit."),Object(r.a)("h2",{id:"dune-s\xe9rie-de-questionnements-\xe0-une-semaine-denqu\xeate"},"D\u2019une s\xe9rie de questionnements \xe0 une semaine d\u2019enqu\xeate"),Object(r.a)("p",null,"L\u2019\xe9tude de cas dont ce site est l\u2019aboutissement a \xe9t\xe9 articul\xe9e autour d\u2019un format de collaboration intensive que nous appelons datasprint et qui consiste \xe0 faire travailler ensemble des expert.e.s de plusieurs disciplines sur un temps court et avec des questions de recherche d\xe9termin\xe9es \xe0 l\u2019avance, sur la base d\u2019un ou plusieurs jeux de donn\xe9es pr\xe9par\xe9s pour l\u2019occasion."),Object(r.a)("p",null,"En amont du datasprint, nous avons conduit pendant plusieurs mois un double travail de pr\xe9paration des donn\xe9es, et de pr\xe9paration des questions de recherche. Sur le plan des donn\xe9es, les \xe9quipes de navigo et de toflit18 donn\xe9es ont d\xfb effectuer un important travail de nettoyage et d\u2019affinement concernant les r\xe9gions et les p\xe9riodes \xe9tudi\xe9es : le fait de projeter une \xe9tude de cas pr\xe9cise a fait \xe9merger des probl\xe8mes qui \xe9taient rest\xe9s dans l\u2019ombre faute de besoin d\u2019un r\xe9examen approfondi. Un travail tr\xe8s important a \xe9galement \xe9t\xe9 effectu\xe9 pour \u201caligner\u201d les deux bases, c\u2019est-\xe0-dire pour mettre en correspondance les lieux et les types de produits commerc\xe9s ou transport\xe9s tels qu\u2019ils sont d\xe9crits dans chacune des bases."),Object(r.a)("p",null,"Sur le plan de la pr\xe9paration des questions de recherche de d\xe9part, nous avons conduit une s\xe9rie de r\xe9unions pr\xe9liminaires reli\xe9es par des documents en ligne r\xe9dig\xe9s collaborativement, qui nous ont aid\xe9 \xe0 identifier des questions \xe0 la fois pertinentes en regard de l\u2019histoire de la r\xe9gion et de la litt\xe9rature existante, mais aussi de ce que les donn\xe9es nous permettaient - ou pas - d\u2019explorer et de visualiser. Ce travail d\u2019ajustement et de mise en correspondance entre les questions et les donn\xe9es a ainsi couru d\u2019octobre 2020 \xe0 avril 2021, et nous a permis \xe0 la fois d\u2019identifier les activit\xe9s d\u2019exploration les plus pertinentes \xe0 proposer aux participants durant l\u2019atelier, et d\u2019\xe9viter les chausses-trappes qui nous auraient conduit dans des questionnements impossibles \xe0 r\xe9soudre."),Object(r.a)("p",null,"De ce travail de pr\xe9paration est n\xe9 un document de questionnement scientifique destin\xe9 \xe0 expliciter les questions de recherche \xe0 explorer partag\xe9 \xe0 tous les participant.e.s de la semaine de datasprint. Ainsi, au d\xe9but du datasprint, l\u2019\xe9tude de cas \xe9tait structur\xe9e en deux groupes, correspondant \xe0 deux lignes d\u2019enqu\xeate compl\xe9mentaires mais aussi \xe0 la constitution de deux \xe9quipes \xe9quilibr\xe9es pour la collaboration :"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"la premi\xe8re \xe9quipe devait se consacrer \xe0 \xe9tudier le dynamisme de la r\xe9gion du Poitou par rapport \xe0 la France et au monde en g\xe9n\xe9ral (avec l\u2019hypoth\xe8se d\u2019un d\xe9clin par rapport au reste de la France au cours du dix-huiti\xe8me si\xe8cle)"),Object(r.a)("li",{parentName:"ul"},"la seconde \xe9quipe devait se consacrer \xe0 \xe9tudier les relations de compl\xe9mentarit\xe9 et de domination entre ports de la r\xe9gion, de mani\xe8re notamment \xe0 distinguer les flux et circuits commerciaux qui y sont associ\xe9s")),Object(r.a)("p",null,"Sur cette base, un \u201ckit de bienvenue\u201d a \xe9t\xe9 con\xe7u pour permettre \xe0 tou.te.s les expert.e.s de rapidement saisir les multiples dimensions de l\u2019atelier, et nous avons conduit quelques enqu\xeates pr\xe9liminaires permettant de r\xe9soudre les questions les plus \xe9videntes pour tirer le meilleur parti possible de la concentration d\u2019expertises multiples sur un temps court et tr\xe8s dense permise par le format de travail datasprint."),Object(r.a)("h3",{id:"faire-avec-les-conditions-de-recherche"},"Faire avec les conditions de recherche"),Object(r.a)("p",null,"La semaine du datasprint, qui a eu lieu d\xe9but avril 2021, s\u2019est av\xe9r\xe9e co\xefncider avec un moment de forte reprise de l\u2019\xe9pid\xe9mie de covid-19 en France en g\xe9n\xe9ral et \xe0 Paris en particulier. Cela nous a contraint \xe0 effectuer l\u2019atelier en ligne. Conduire un datasprint en ligne revenait \xe0 se priver de l\u2019incommensurable apport des \xe9changes informels et autres possibilit\xe9s d\u2019affichage, de circulation et de spatialisation offerts par le travail dans un m\xeame lieu physique. \xc0 cette contrainte s\u2019est ajout\xe9e la subite fermeture des \xe9coles maternelles et primaires ladite semaine, qui a occasionn\xe9 une s\xe9rieuse charge extra-professionnelle pour une part substantielle des participant.e.s."),Object(r.a)("p",null,"Le datasprint a n\xe9anmoins eu lieu, et nous avons d\xe9cid\xe9 de consid\xe9rer les conditions particuli\xe8res dans lesquelles il s\u2019est conduit non seulement comme des contraintes demandant de recalibrer drastiquement nos attentes, mais aussi comme des opportunit\xe9s d\u2019invention et d\u2019exp\xe9rimentation appelant \xe0 adapter nos mani\xe8res de proc\xe9der par rapport aux modalit\xe9s initialement planifi\xe9es."),Object(r.a)("h3",{id:"improvisations-et-adaptations"},"Improvisations et adaptations"),Object(r.a)("p",null,"Durant le datasprint, la diversit\xe9 des comp\xe9tences des participant.e.s a impliqu\xe9 de remettre \xe0 plat la r\xe9partition des t\xe2ches. Ainsi, chacun a pu \xeatre amen\xe9 \xe0 sugg\xe9rer des pistes de recherche, manipuler les donn\xe9es, et se pencher sur l\u2019analyse et la mise en forme des r\xe9sultats. Cette semaine a notamment \xe9t\xe9 l\u2019occasion d\u2019exp\xe9rimenter avec un grand nombre de technologies utilis\xe9es durant les activit\xe9s d\u2019enqu\xeate, notamment ",Object(r.a)("a",{href:"https://jupyter.org/",target:"blank",rel:"noopener noreferrer"},"jupyter notebook"),", ",Object(r.a)("a",{href:"https://kepler.gl/",target:"blank",rel:"noopener noreferrer"},"kepler.gl"),", ",Object(r.a)("a",{href:"https://vega.github.io/vega/",target:"blank",rel:"noopener noreferrer"},"vega"),", ou encore ",Object(r.a)("a",{href:"https://matplotlib.org/",target:"blank",rel:"noopener noreferrer"},"matplotlib"),". Nous avons n\xe9anmoins \xe9galement parfois touch\xe9 aux limites de ce principe en condition \u201czoomifi\xe9e\u201d, certaines discussions sp\xe9cialis\xe9es (sur le plan technique ou sur le plan historique par exemple) n\xe9cessitant parfois de reformer les corps disciplinaires et des moments d\u2019appart\xe9 transversaux."),Object(r.a)("p",null,"Le format datasprint implique par ailleurs une dimension exp\xe9rimentale, parfois chaotique, et les difficult\xe9s de communications impliqu\xe9es par la conduite en ligne ont amplifi\xe9 cette dimension. Nous avons donc construit nos journ\xe9es de travail sur un canevas all\xe9g\xe9 en terme d\u2019amplitude horaire, et sous une forme tentant de varier les rythmes et les \xe9chelles d\u2019interaction : un point de pl\xe9ni\xe8re en matin\xe9e, suivi de travail en deux groupes, eux-m\xeames rapidement re-divis\xe9s en bin\xf4mes ou en moments de travail individuel. "),Object(r.a)("p",null,"Sur le plan technique, nous avons opt\xe9 pour une salle zoom permanente ouverte durant toute la semaine et divis\xe9e en \u201cbreakout rooms\u201d (salles de travail) permettant de travailler en plus petits ensembles ; nous avons \xe9galement soutenu la semaine avec un dossier google drive tr\xe8s organis\xe9 dans lequel l\u2019ensemble des activit\xe9s ont \xe9t\xe9 archiv\xe9es et consign\xe9es."),Object(r.a)("p",null,"Pour faciliter le processus d\u2019intercompr\xe9hension, des proc\xe9dures m\xe9thodologiques ont \xe9galement \xe9t\xe9 propos\xe9es aux participants. Ainsi, des personnes jouant le r\xf4le de facilitateurs ont fait le lien entre les diff\xe9rents groupes en circulant continuellement entre les diff\xe9rentes salles zoom de travail. Nous avons par ailleurs insist\xe9 sur l\u2019importance de la documentation en structurant les activit\xe9s de chaque jour autour de l\u2019\xe9criture de \u201crapports\u201d remplis au fur et \xe0 mesure de la journ\xe9e, dont une personne \u201cscribe\u201d \xe9tait charg\xe9e de prendre soin afin de garder un maximum de traces et de permettre les \xe9changes d\u2019information asynchrones. Ces rapports ont finalement \xe9t\xe9 progressivement abandonn\xe9s, car trop lourds \xe9tant donn\xe9 le poids des autres activit\xe9s. Nous avons \xe9galement progressivement r\xe9duit les temps de visioconf\xe9rence pour \xe9conomiser les d\xe9penses cognitives produites par les \xe9changes en ligne."),Object(r.a)("p",null,"Les s\xe9ances de travail d\u2019un datasprint provoquent parfois un \u201ceffet bulle\u201d dans lequel chaque \xe9quipe peut rapidement se d\xe9connecter du travail effectu\xe9 par les autres, entra\xeenant des blocages, des t\xe2ches effectu\xe9es en doublon ou des \u201cangles morts\u201d. Ce probl\xe8me est amplifi\xe9 par la conduite en ligne. Pour faire face \xe0 ce d\xe9fi, nous avons rythm\xe9 les journ\xe9es de points d\u2019\xe9tapes effectu\xe9es \xe0 plusieurs \xe9chelles - par petits groupes, par \xe9quipes, ou en pl\xe9ni\xe8re - afin de partager les avanc\xe9es. Par ailleurs, des visites informelles et autres \u201czoom surfing\u201d ont permis de favoriser certaines circulations d\u2019id\xe9es et de m\xe9thodes."),Object(r.a)("p",null,"L\u2019un des int\xe9r\xeats du format datasprint est enfin de favoriser une unit\xe9 de temps pour le travail interdisciplinaire. L\u2019intensit\xe9 qu\u2019implique cette unit\xe9 de temps appelle cependant une valorisation \xe0 la hauteur des efforts fournis sur le temps court. Le temps du datasprint est, en temps normal, \xe0 la fois un temps d\u2019exploration et d\u2019enqu\xeate, et un temps de production de r\xe9sultats. Cependant, ce principe a \xe9t\xe9 confront\xe9 \xe0 deux sp\xe9cificit\xe9s dans notre cas : les conditions de travail en ligne ont demand\xe9 de revoir les attentes plus modestement, mais aussi le principe et les objectifs m\xeames des datasprint de PORTIC qui, parce qu\u2019ils visent la publication de sites web finalis\xe9s et contribuant de mani\xe8re relativement pr\xe9cise \xe0 des \xe9tudes de cas tr\xe8s serr\xe9es (et non de rapports d\u2019exploration des donn\xe9es comme c\u2019est souvent le cas pour les autres datasprints). Face \xe0 ces sp\xe9cificit\xe9s, il nous a fallu articuler l\u2019atelier avec un travail post\xe9rieur cadr\xe9 par d\u2019autres temporalit\xe9s pour arriver \xe0 un r\xe9sultat publiable."),Object(r.a)("h2",{id:"la-fabrication-dun-site-web-comme-pivot-pour-l\xe9criture-multimodale--entretenir-une-infrastructure-technique-et-m\xe9thodologique"},"La fabrication d\u2019un site web comme pivot pour l\u2019\xe9criture multimodale : entretenir une infrastructure technique et m\xe9thodologique"),Object(r.a)("p",null,"\xc0 partir du travail effectu\xe9 lors du datasprint, nous avons engag\xe9 une seconde phase d\u2019approfondissement et de continuation des enqu\xeates initi\xe9es pendant la semaine de travail intensif. Sur le fond, les axes de recherche initialement envisag\xe9s ont \xe9t\xe9 progressivement remani\xe9s. Cela a \xe9t\xe9 fait d\xe8s la fin de la semaine de datasprint, au moment de la r\xe9daction d\u2019un document de synth\xe8se mettant en regard les visualisations produites durant la semaine. Ce travail a \xe9t\xe9 ensuite continu\xe9 par C\xe9cile Asselin qui a effectu\xe9 un travail de synth\xe8se et de nettoyage sur les productions de la semaine."),Object(r.a)("h3",{id:"une-\xe9criture-multimodale"},"Une \xe9criture multimodale"),Object(r.a)("p",null,"Afin de construire progressivement, \xe0 partir des explorations du datasprint, un document propre \xe0 \xeatre publi\xe9 et \xe0 transmettre un r\xe9cit et des arguments \xe0 partir des donn\xe9es des deux bases, nous avons tent\xe9 d\u2019utiliser la perspective de la fabrication d\u2019un site pour articuler trois types \u201cd\u2019\xe9criture\u201d : la confection de nouveaux fichiers de donn\xe9es correspondant aux enqu\xeates soulev\xe9es par les activit\xe9s de la semaine (\xe9criture computationnelle) ; la confection de visualisations d\u2019informations (\xe9criture diagrammatique) ; enfin, bien s\xfbr, la mise en r\xe9cit et en argument historique de l\u2019\xe9tude de cas (\xe9criture en prose)."),Object(r.a)("p",null,"Pour ce faire, nous avons d\xe9cid\xe9 de structurer le site en une s\xe9rie de trois parties \xe0 la structure identique : une \u201cvisualisation principale\u201d constituant l\u2019argument principal de la partie, accompagn\xe9 d\u2019un texte se fondant d\u2019abord sur elle puis suivant ses propres d\xe9veloppement, accompagn\xe9 de \u201cvisualisations secondaires\u201d. Cette organisation visuelle et rh\xe9torique a induit un mode de travail it\xe9ratif sur le registre du \u201cping pong\u201d qui s\u2019est d\xe9ploy\xe9 en trois temps : "),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"dans la foul\xe9e du datasprint, les historien.ne.s ont d\u2019abord travaill\xe9 \xe0 pr\xe9ciser les arguments de chacune des trois parties (avril-mai 2021)"),Object(r.a)("li",{parentName:"ul"},"nous avons ensuite organis\xe9 deux jours intensifs de conception avec une \xe9quipe r\xe9duite d\u2019ing\xe9nieur.e.s et de designers (C\xe9cile Asselin, Robin de Mourat, Christine Plumejeaud, Paul Girard, Maxime Zoffoli) durant lesquels nous avons con\xe7u des propositions de visualisations principales (fin mai 2021)"),Object(r.a)("li",{parentName:"ul"},"les historien.es ont, \xe0 la suite de ces deux jours, repris la main sur l\u2019\xe9criture, enrichie et structur\xe9e par les propositions constitu\xe9es par les visualisations, en pr\xe9cisant leurs textes comme leurs besoins pour des visualisations compl\xe9mentaires, qui ont \xe9t\xe9 progressivement produites en fonction du texte (juin-septembre 2021)")),Object(r.a)("p",null,"Dans ce cadre, nous avons progressivement n\xe9goci\xe9 une infrastructure de travail orient\xe9e vers le d\xe9veloppement progressif du pr\xe9sent site web. Ce dernier a tout autant servi d\u2019objectif que de moyen de rencontre entre les diff\xe9rentes activit\xe9s qui ont suivi la semaine d\u2019atelier datasprint."),Object(r.a)("p",null,"La fabrication du site pr\xe9sent\xe9 au public a \xe9t\xe9 articul\xe9e autour d\u2019un protocole automatis\xe9 qui a permis de mettre le site \xe0 jour quotidiennement pendant sa phase d\u2019\xe9criture et de d\xe9veloppement, et ainsi de faire progresser conjointement sa structure, son aspect graphique et les divers contenus qui le peuplent (voir son ",Object(r.a)("a",{href:"https://github.com/medialab/portic-storymaps-2021",target:"blank",rel:"noopener noreferrer"},"r\xe9pertoire github")," pour plus d\u2019informations). Plus pr\xe9cis\xe9ment, ce protocole automatis\xe9 consistait \xe0 r\xe9cup\xe9rer les contenus \xe9crits dans un google documents \xe9crit par les historien.ne.s, les donn\xe9es des bases navigo et toflit18 sur leurs espaces num\xe9riques respectifs, et enfin \xe0 produire un ensemble de donn\xe9es optimis\xe9es pour le web avant de refabriquer le site."),Object(r.a)("p",null,"Cette m\xe9thode de travail sur mesure, alternative \xe0 l\u2019utilisation d\u2019un CMS (type wordpress) ou d\u2019une int\xe9gration des contenus enti\xe8rement \u201cartisanale\u201d, nous a permis de multiplier les it\xe9rations sur les donn\xe9es, les visualisations et les textes, afin de d\xe9velopper it\xe9rativement un document ajust\xe9 et coh\xe9rent pour la lecture. Elle nous a \xe9galement permis d\u2019\xe9chapper \xe0 une approche qui voudrait formater la production du site de mani\xe8re trop s\xe9quentielle, c\u2019est-\xe0-dire faisant suivre un premier temps de \u201cconception\u201d puis un deuxi\xe8me temps \u201cd\u2019ex\xe9cution\u201d, pour plut\xf4t faire place \xe0 la d\xe9couverte et au dialogue avec les diff\xe9rents mat\xe9riaux en train de se d\xe9velopper. "),Object(r.a)("p",null,"Ainsi, la m\xe9thode de travail et de montage du site adopt\xe9e ici, outre la dimension d\u2019optimisation qu\u2019implique l\u2019automatisation de certaines t\xe2ches, a \xe9t\xe9 le moyen de favoriser un dialogue plus organique entre les diff\xe9rentes \xe9critures en jeu dans ce document : en r\xe9alisant simultan\xe9ment le design du site, celui des visualisations, et les textes qui les accompagnent, nous avons tent\xe9 de faire profiter chacune de ces activit\xe9s l\u2019une de l\u2019autre, comme des sources d\u2019invention ou de solidification mutuelle, plut\xf4t que de les consid\xe9rer comme des t\xe2ches sp\xe9cialis\xe9es et/ou articul\xe9es selon un r\xe9gime de subordination (de l\u2019histoire \xe0 la technique, ou du visuel au textuel, ou de l\u2019argument \xe0 son illustration, etc.)."),Object(r.a)("h3",{id:"un-site-destin\xe9-\xe0-tisser-des-liens-avec-dautres-activit\xe9s-et-dautres-publics"},"Un site destin\xe9 \xe0 tisser des liens avec d\u2019autres activit\xe9s et d\u2019autres publics"),Object(r.a)("p",null,"Ce site est pens\xe9 \xe0 la fois comme un objet autonome d\xe9roulant le r\xe9cit scientifique de l\u2019histoire de la r\xe9gion de La Rochelle au dix-huiti\xe8me si\xe8cle, et comme la premi\xe8re pi\xe8ce d\u2019assemblages scientifiques et didactiques encore \xe0 venir. Nous l\u2019avons con\xe7u avec le projet de l\u2019adresser \xe0 un public constitu\xe9 d\u2019\xe9tudiant.e.s en histoire, de professeur.e.s d\u2019histoire du secondaire, ou d\u2019amateur.ice.s avanc\xe9s passionn\xe9s par le Poitou. Cependant, le site est \xe9galement pens\xe9 pour pouvoir s\u2019articuler avec deux publics compl\xe9mentaires :"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"vulgarisateurs et autres m\xe9diateurs pourront utiliser certaines des visualisations pour des initiatives destin\xe9es \xe0 un plus grand public"),Object(r.a)("li",{parentName:"ul"},"historien.ne.s sp\xe9cialis\xe9s pourront citer ces visualisations dans des publications conventionnelles en revues ou monographies et ainsi s\u2019appuyer sur ces derni\xe8res pour continuer nos enqu\xeates")),Object(r.a)("p",null,"Pour ce faire, nous avons notamment rendu chacune des visualisations \u201cd\xe9tachable\u201d du r\xe9cit propos\xe9 via la page atlas - et plus techniquement en dotant chacune des visualisations d\u2018une adresse URL propre."),Object(r.a)("p",null,"Par ailleurs, le ",Object(r.a)("a",{href:"https://github.com/medialab/portic-storymaps-2021/",target:"blank",rel:"noopener noreferrer"},"code source du site"),", partag\xe9 sous licence libre, a \xe9t\xe9 construit et document\xe9 de mani\xe8re \xe0 pouvoir \xeatre \xe9ventuellement d\xe9riv\xe9 - en tout ou partie - pour d\u2019autres projets \xe0 venir : il pourra apporter des \xe9l\xe9ments utiles pour les prochaines \xe9tudes de cas du programme PORTIC mais aussi pour d\u2019autres projets similaires. Il est enfin \xe0 noter que toutes les donn\xe9es utilis\xe9es - et les scripts qui les g\xe9n\xe8rent \xe0 partir des donn\xe9es compl\xe8tes de toflit18 et navigo, accessibles toutes les deux librement - sont \xe9galement inclus dans le code source du site, rendant nos visualisations et r\xe9sultats enti\xe8rement reproductibles."),Object(r.a)("h2",{id:"une-\xe9criture-collective--cr\xe9dits"},"Une \xe9criture collective : cr\xe9dits"),Object(r.a)("p",null,"Ce site est le r\xe9sultat d\u2019un processus d\u2019enqu\xeate et d\u2019\xe9criture collective qui a mobilis\xe9 des personnes issues de plusieurs disciplines : histoire, \xe9conomie, informatique, g\xe9omatique, design. Plus pr\xe9cis\xe9ment, il est l\u2019\u0153uvre de :"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"L\u2019ing\xe9nieure stagiaire ",Object(r.a)("a",{href:"https://fr.linkedin.com/in/c%25C3%25A9cile-asselin-3659541b7",target:"blank",rel:"noopener noreferrer"},"C\xe9cile Asselin"),", en double cursus ing\xe9nierie/sciences humaines, qui s\u2019est consacr\xe9e \xe0 plein temps pendant six mois \xe0 la conduite m\xe9thodologique et technique de l\u2019ensemble de l\u2019\xe9tude de cas, accompagn\xe9e par ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/robin-de-mourat/",target:"blank",rel:"noopener noreferrer"},"Robin de Mourat")," (designer de recherche - co-responsable scientifique du programme PORTIC)"),Object(r.a)("li",{parentName:"ul"},"Le c\u0153ur de l\u2019\xe9quipe Navigo : ",Object(r.a)("a",{href:"https://cmmc-nice.fr/membres-du-cmmc/silvia-marzagalli/",target:"blank",rel:"noopener noreferrer"},"Silvia Marzagalli")," (historienne du commerce et de la navigation - directrice et co-responsable scientifique du programme PORTIC) et ",Object(r.a)("a",{href:"https://lienss.univ-larochelle.fr/Plumejeaud-Christine-954",target:"blank",rel:"noopener noreferrer"},"Christine Plumejeaud")," (g\xe9omaticienne - co-responsable scientifique du programme PORTIC)."),Object(r.a)("li",{parentName:"ul"},"Le c\u0153ur de l\u2019\xe9quipe Toflit18 : ",Object(r.a)("a",{href:"https://www.ined.fr/fr/recherche/chercheurs/Charles%2BLo%25C3%25AFc",target:"blank",rel:"noopener noreferrer"},"Lo\xefc Charles")," et ",Object(r.a)("a",{href:"https://leda.dauphine.fr/fr/membre/detail-cv/profile/guillaume-daudin.html",target:"blank",rel:"noopener noreferrer"},"Guillaume Daudin")," (historiens de l\u2019\xe9conomie moderne)."),Object(r.a)("li",{parentName:"ul"},"Les historiens ",Object(r.a)("a",{href:"https://criham.labo.univ-poitiers.fr/membres/thierry-sauzeau/",target:"blank",rel:"noopener noreferrer"},"Thierry Sauzeau")," et ",Object(r.a)("a",{href:"https://www.univ-brest.fr/crbc/menu/Membres%2Bdu%2Blaboratoire/Enseignants-chercheurs/Pierrick_Pourchasse",target:"blank",rel:"noopener noreferrer"},"Pierrick Pourchasse"),", membres permanents du programme PORTIC ayant particip\xe9 au datasprint et/ou \xe0 l\u2019\xe9criture du site"),Object(r.a)("li",{parentName:"ul"},"La data librarian ",Object(r.a)("a",{href:"https://fr.linkedin.com/in/geraldine-geoffroy-4653ab19b",target:"blank",rel:"noopener noreferrer"},"G\xe9raldine Geoffroy")," et le chercheur en informatique ",Object(r.a)("a",{href:"https://l3i.univ-larochelle.fr/Bouju-Alain-MCF-HDR",target:"blank",rel:"noopener noreferrer"},"Alain Bouju"),"."),Object(r.a)("li",{parentName:"ul"},"Les ing\xe9nieurs en m\xe9thodes num\xe9riques et designers du laboratoire m\xe9dialab de Sciences Po ",Object(r.a)("a",{href:"https://bmaz.github.io/",target:"blank",rel:"noopener noreferrer"},"B\xe9atrice Mazoyer"),", ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/benjamin-ooghe-tabanou/",target:"blank",rel:"noopener noreferrer"},"Benjamin Ooghe-Tabanou"),", ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/guillaume-plique/",target:"blank",rel:"noopener noreferrer"},"Guillaume Plique"),", ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/heloise-thero/",target:"blank",rel:"noopener noreferrer"},"H\xe9lo\xefse Th\xe9ro"),", et ",Object(r.a)("a",{href:"https://paulinegourlet.com/",target:"blank",rel:"noopener noreferrer"},"Pauline Gourlet"),", qui ont particip\xe9 au datasprint."),Object(r.a)("li",{parentName:"ul"},"Les experts en traitement et visualisation de donn\xe9es invit\xe9s pour l\u2019occasion du datasprint puis pour la conception des visualisations principales de chacune des trois parties : l\u2019ing\xe9nieur et ancien directeur technique du m\xe9dialab ",Object(r.a)("a",{href:"https://fr.linkedin.com/in/paul-girard-57822118",target:"blank",rel:"noopener noreferrer"},"Paul Girard")," (pour l\u2019entreprise ",Object(r.a)("a",{href:"https://www.ouestware.com/",target:"blank",rel:"noopener noreferrer"},"Ouestware"),") ainsi que le designer d\u2019information expert en visualisation de donn\xe9es ",Object(r.a)("a",{href:"https://www.maximezoffoli.com/",target:"blank",rel:"noopener noreferrer"},"Maxime Zoffoli"),".")))}c.isMDXComponent=!0;var l=function(){return[{id:"dune-s\xe9rie-de-questionnements-\xe0-une-semaine-denqu\xeate",level:2,title:"D\u2019une s\xe9rie de questionnements \xe0 une semaine d\u2019enqu\xeate",children:[{id:"faire-avec-les-conditions-de-recherche",level:3,title:"Faire avec les conditions de recherche",children:[]},{id:"improvisations-et-adaptations",level:3,title:"Improvisations et adaptations",children:[]}]},{id:"la-fabrication-dun-site-web-comme-pivot-pour-l\xe9criture-multimodale--entretenir-une-infrastructure-technique-et-m\xe9thodologique",level:2,title:"La fabrication d\u2019un site web comme pivot pour l\u2019\xe9criture multimodale : entretenir une infrastructure technique et m\xe9thodologique",children:[{id:"une-\xe9criture-multimodale",level:3,title:"Une \xe9criture multimodale",children:[]},{id:"un-site-destin\xe9-\xe0-tisser-des-liens-avec-dautres-activit\xe9s-et-dautres-publics",level:3,title:"Un site destin\xe9 \xe0 tisser des liens avec d\u2019autres activit\xe9s et d\u2019autres publics",children:[]}]},{id:"une-\xe9criture-collective--cr\xe9dits",level:2,title:"Une \xe9criture collective : cr\xe9dits",children:[]}]},d={}},225:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return l})),a.d(t,"frontMatter",(function(){return d}));var n=a(21),r=(a(2),a(5)),i=["components"],s={text:"1 min read",minutes:.01,time:600,words:2},o={};function c(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("p",null,"About TODO"))}c.isMDXComponent=!0;var l=function(){return[]},d={}},226:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return l})),a.d(t,"frontMatter",(function(){return d}));var n=a(21),r=(a(2),a(5)),i=(a(25),["components"]),s={text:"3 min read",minutes:2.13,time:127800,words:426},o={};function c(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"r\xe9f\xe9rences"},"R\xe9f\xe9rences"),Object(r.a)("h3",{id:"sources-archivistiques"},"Sources archivistiques"),Object(r.a)("p",null,"Les donn\xe9es sur la navigation proviennent de la base de donn\xe9es Navigocorpus. Pour cette enqu\xeate, il s\u2019agit plus particuli\xe8rement des:"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"cong\xe9s issus de la sous-s\xe9rie G5 conserv\xe9s aux Archives Nationales de France"),Object(r.a)("li",{parentName:"ul"},"cong\xe9s de Lorient, Archives d\xe9partementales du Morbihan, 10B-19"),Object(r.a)("li",{parentName:"ul"},"cong\xe9s de Saint-Tropez, Archives d\xe9partementales du Var, 7 B 10"),Object(r.a)("li",{parentName:"ul"},"Registres du Bureau de Sant\xe9 de Marseille, 200 E 543 et 545")),Object(r.a)("p",null,"Les donn\xe9es relatives aux exp\xe9ditions n\xe9gri\xe8res ont \xe9t\xe9 compl\xe9t\xe9es avec la base de donn\xe9es ",Object(r.a)("a",{href:"https://www.slavevoyages.org/voyage/database",target:"blank",rel:"noopener noreferrer"},Object(r.a)("a",{parentName:"p",href:"https://www.slavevoyages.org/voyage/database"},"https://www.slavevoyages.org/voyage/database"))),Object(r.a)("p",null,"Les donn\xe9es relatives au commerce ext\xe9rieur proviennent de la base de donn\xe9es Toflit18 (voir ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/exploration/sources",target:"blank",rel:"noopener noreferrer"},Object(r.a)("a",{parentName:"p",href:"http://toflit18.medialab.sciences-po.fr/%5C#/exploration/sources"},"http://toflit18.medialab.sciences-po.fr/\\#/exploration/sources")),")."),Object(r.a)("p",null,"Pour cette enqu\xeate, il s\u2019agit plus particuli\xe8rement des : "),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"Archives Nationales d\u2019Outre-Mer (Pour 1789)"),Object(r.a)("li",{parentName:"ul"},"ANOM, Col. F2 B 14 (pr\xe9sent aussi en AN Marine B 7 514)"),Object(r.a)("li",{parentName:"ul"},"Archives Nationales de France (Pour 1789)"),Object(r.a)("li",{parentName:"ul"},"AN F12 1665 et 1666"),Object(r.a)("li",{parentName:"ul"},"AN Marine B 7 514 (pr\xe9sent aussi en ANOM Col F2 B 14)"),Object(r.a)("li",{parentName:"ul"},"Archives D\xe9partementales de la Charente-Maritime (pour l\u2019historique des exportations de La Rochelle)"),Object(r.a)("li",{parentName:"ul"},"AD17 41 ETP 270"),Object(r.a)("li",{parentName:"ul"},"Fonds Gournay \xe0 la biblioth\xe8que municipale de Saint-Brieuc (pour 1750)"),Object(r.a)("li",{parentName:"ul"},"M84\u201387 ")),Object(r.a)("p",null,"La majeure partie des cahiers de dol\xe9ances \xe9tudi\xe9s sont tir\xe9s des Archives D\xe9partementales de Charente-Maritime (AD17). En effet, les Archives D\xe9partementales de la Vend\xe9e (AD85) ne conservent que de rares cahiers pour littoral du Poitou (Bouin, Noirmoutier, l\u2019Ile d\u2019Elle dans le marais poitevin). La collecte et/ou la transcription ont \xe9t\xe9 r\xe9alis\xe9es selon deux modalit\xe9s. Nous avons tout d\u2019abord r\xe9cup\xe9r\xe9 un ensemble de cahiers charentais transcrits sur le site ",Object(r.a)("a",{href:"http://www.histoirepassion.eu/?-1789-Cahiers-de-doleances-et-Etats-generaux-",target:"blank",rel:"noopener noreferrer"},"Histoire Passion - Saintonge Aunis Angoumois"),". Nous avons ensuite compl\xe9t\xe9 ce corpus gr\xe2ce \xe0 la collaboration des AD17 et des AD85. Ainsi, de nouveaux cahiers ont \xe9t\xe9 r\xe9cup\xe9r\xe9s et transcrits par Thierry Sauzeau, le tout permettant d\u2019\xe9valuer l\u2019exhaustivit\xe9 et la teneur de l\u2019\xe9chantillon utilis\xe9. Le corpus de 163 cahiers rec\xe8le 14 cahiers de paroisses que compl\xe8tent 5 cahiers de districts (groupes de paroisses) du littoral. L\u2019ensemble de ce travail de consolidation et de mise en donn\xe9es est disponible et r\xe9utilisable ",Object(r.a)("a",{href:"https://docs.google.com/spreadsheets/d/1A8-OiTSYv7opCcWvF8tsJ0dmEXkHZMgN-7lhj-4hqFw/edit?usp%3Dsharing",target:"blank",rel:"noopener noreferrer"},"\xe0 cette adresse"),"."),Object(r.a)("p",null,"Les registres de d\xe9lib\xe9ration de la Chambre de Commerce de La Rochelle sont conserv\xe9s aux Archives d\xe9partementales de la Charente Maritime, 41 ETP 8 (accessibles en ligne: ",Object(r.a)("a",{href:"https://archinoe.fr/v2/ad17/visualiseur/ir_ead_visu_lien.html?ir%3D11431%26id%3D490014227",target:"blank",rel:"noopener noreferrer"},Object(r.a)("a",{parentName:"p",href:"https://archinoe.fr/v2/ad17/visualiseur/ir%5C_ead%5C_visu%5C_lien.html?ir=11431&id=490014227"},"https://archinoe.fr/v2/ad17/visualiseur/ir\\_ead\\_visu\\_lien.html?ir=11431","&","id=490014227")),") "),Object(r.a)("h3",{id:"bibliographie"},"Bibliographie"),Object(r.a)("p",null,"Documents pr\xe9liminaires pouvant \xeatre utiles :"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},Object(r.a)("a",{href:"https://docs.google.com/document/d/15AylB2sk_Jrru5GzLTjexs9K3iJgefhn/edit",target:"blank",rel:"noopener noreferrer"},"https://docs.google.com/document/d/15AylB2sk\\_Jrru5GzLTjexs9K3iJgefhn/edit"))),Object(r.a)("p",null,"Auguste Toussaint, La route des Iles. Contribution \xe0 l\u2019histoire maritime des Mascareignes, Paris, SEVPEN, 1967"),Object(r.a)("p",null,"Augeron : 2004; "),Object(r.a)("p",null,"Mathieu : 1986"))}c.isMDXComponent=!0;var l=function(){return[{id:"sources-archivistiques",level:3,title:"Sources archivistiques",children:[]},{id:"bibliographie",level:3,title:"Bibliographie",children:[]}]},d={}},227:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return l})),a.d(t,"frontMatter",(function(){return d}));var n=a(21),r=(a(2),a(5)),i=["components"],s={text:"1 min read",minutes:.01,time:600,words:2},o={};function c(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("p",null,"References"),Object(r.a)("p",null,"TODO"))}c.isMDXComponent=!0;var l=function(){return[]},d={}},228:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return l})),a.d(t,"frontMatter",(function(){return d}));var n=a(21),r=(a(2),a(5)),i=["components"],s={text:"1 min read",minutes:.01,time:600,words:2},o={};function c(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("p",null,"some tests"))}c.isMDXComponent=!0;var l=function(){return[]},d={}},229:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return h})),a.d(t,"default",(function(){return g})),a.d(t,"tableOfContents",(function(){return v})),a.d(t,"frontMatter",(function(){return O}));var n=a(21),r=a(2),i=a(5),s=a(1);a(10);var o=a(9),c=(a(670),a(637)),l=a(68),d=a.n(l),u=(a(106).a,a(44).a),p=(a(172).a,a(231),function(e){var t=e.data,a=e.children,n=Object(r.useState)(null),i=Object(o.a)(n,2),l=i[0],u=i[1],p=Object(r.useState)(!0),m=Object(o.a)(p,2),f=m[0],b=m[1];return Object(r.useEffect)((function(){if(t){var e="".concat("/portic-storymaps-2021","/data/").concat(t);d()(e).then((function(e){var a,n=e.data,r=t.split(".").pop();"csv"===r?a=Object(c.a)(n):"geojson"!==r&&"json"!==r||(a=n),u(a),b(!1)})).catch((function(e){b(!1)}))}}),[t]),f?Object(s.jsx)("div",{children:"Loading"}):a(l)}),m=(a(230),a(56),a(19)),f=a(105),b=["components"],h={text:"8 min read",minutes:7.975,time:478500,words:1595},j={};function g(e){var t=e.components,a=Object(n.a)(e,b);return Object(i.a)("wrapper",Object.assign({},j,a,{components:t,mdxType:"MDXLayout"}),Object(i.a)("p",null,"Test en prod"),Object(i.a)("h2",{id:"carto-en-reactd3svg"},"Carto en react+d3+SVG"),Object(i.a)("p",null,"Ci-dessous un proto/boilerplate pour rendre du svg + donn\xe9es avec la galaxie d3 + du rendu direct en SVG via react."),Object(i.a)("h3",{id:"fond-de-carte---test-custom-layer-avec-config-coast-from-nantes-to-bordeaux"},"Fond de carte - test custom layer avec config \u201ccoast from Nantes to Bordeaux\u201d"),Object(i.a)(p,{data:"cartoweb_france_1789_geojson.geojson",mdxType:"DataProvider"},(function(e){return Object(i.a)(p,{data:"part_3_step3_viz_customs_offices_data.csv",mdxType:"DataProvider"},(function(t){return Object(i.a)(u,{layers:[{type:"choropleth",data:e,color:{field:"shortname"}},{type:"custom",data:t,renderObjects:f.b}],projectionTemplate:"coast from Nantes to Bordeaux",height:800,width:1200,mdxType:"GeographicMapChart"})}))})),Object(i.a)("h3",{id:"fond-de-carte---test-flows-avec-config-world"},"Fond de carte - test flows avec config \u201cWorld\u201d"),Object(i.a)(p,{data:"world_1789_23mars2021_level0.json",mdxType:"DataProvider"},(function(e){return Object(i.a)(p,{data:"aggregated_flows.json",mdxType:"DataProvider"},(function(t){return Object(i.a)(u,{layers:[{type:"choropleth",data:e,color:{field:"shortname",palette:m.a.provinces}},{type:"flows",data:t,size:{field:"tonnages_cumul\xe9s"}}],projectionTemplate:"World",height:800,width:1200,mdxType:"GeographicMapChart"})}))})),Object(i.a)("h3",{id:"fond-de-carte---config-france"},"Fond de carte - config \u201cFrance\u201d"),Object(i.a)(p,{data:"cartoweb_france_1789_geojson.geojson",mdxType:"DataProvider"},(function(e){return Object(i.a)(p,{data:"ports_locations_data.csv",mdxType:"DataProvider"},(function(t){return Object(i.a)(u,{layers:[{type:"choropleth",data:e,color:{field:"shortname",palette:m.a.provinces}},{type:"points",data:t,color:{field:"admiralty",palette:m.a.admiralties},size:{field:"customs_region"},label:{field:"port"}}],projectionTemplate:"France",height:800,width:1200,mdxType:"GeographicMapChart"})}))})),Object(i.a)("h3",{id:"fond-de-carte---config-rotated-poitou"},"Fond de carte - config \u201crotated Poitou\u201d"),Object(i.a)(p,{data:"cartoweb_france_1789_geojson.geojson",mdxType:"DataProvider"},(function(e){return Object(i.a)(p,{data:"part_3_step1_viz_data.csv",mdxType:"DataProvider"},(function(t){return Object(i.a)(u,{layers:[{type:"choropleth",data:e,color:{field:"shortname",palette:m.a.provinces}},{type:"points",data:t,color:{field:"customs_office",palette:m.a.customs_office},size:{field:"mean_tonnage"},label:{field:"port"}}],projectionTemplate:"rotated Poitou",height:800,width:1200,mdxType:"GeographicMapChart"})}))})),Object(i.a)("h3",{id:"fond-de-carte---config-poitou"},"Fond de carte - config \u201cPoitou\u201d"),Object(i.a)("p",null,"Cartographie des destination des bateaux aillant un port d\u2019attache dans la r\xe9gion, par tonnage cumul\xe9 (couleur = amiraut\xe9) :"),Object(i.a)(u,{backgroundFilename:"cartoweb_france_1789_geojson.geojson",dataFilename:"navigo-out-of-ships-from-region.csv",markerColor:"pointcall_admiralty",markerSize:"tonnage",label:"pointcall",showLabels:!0,projectionTemplate:"Poitou",height:800,width:1200,mdxType:"GeographicMapChart"}),Object(i.a)("h2",{id:"fond-de-carte-sans-template-pour-la-config"},"Fond de carte sans template pour la config"),Object(i.a)(u,{backgroundFilename:"cartoweb_france_1789_geojson.geojson",dataFilename:"navigo-out-of-ships-from-region.csv",markerColor:"pointcall_admiralty",markerSize:"tonnage",label:"pointcall",showLabels:!0,mdxType:"GeographicMapChart"}))}g.isMDXComponent=!0;var v=function(){return[{id:"carto-en-reactd3svg",level:2,title:"Carto en react+d3+SVG",children:[{id:"fond-de-carte---test-custom-layer-avec-config-coast-from-nantes-to-bordeaux",level:3,title:"Fond de carte - test custom layer avec config \u201ccoast from Nantes to Bordeaux\u201d",children:[]},{id:"fond-de-carte---test-flows-avec-config-world",level:3,title:"Fond de carte - test flows avec config \u201cWorld\u201d",children:[]},{id:"fond-de-carte---config-france",level:3,title:"Fond de carte - config \u201cFrance\u201d",children:[]},{id:"fond-de-carte---config-rotated-poitou",level:3,title:"Fond de carte - config \u201crotated Poitou\u201d",children:[]},{id:"fond-de-carte---config-poitou",level:3,title:"Fond de carte - config \u201cPoitou\u201d",children:[]}]},{id:"fond-de-carte-sans-template-pour-la-config",level:2,title:"Fond de carte sans template pour la config",children:[]}]},O={}},230:function(e,t,a){"use strict";var n=a(7),r=a(10),i=a(9),s=a(55),o=a(279),c=a(119),l=a(217),d=a(2),u=a(22),p=a(62),m=a(24),f=a(19),b=a(16),h=a(1),j=f.a.generic,g=function(e){var t=e.data,a=e.title,f=e.width,g=void 0===f?1e3:f,v=e.height,O=void 0===v?400:v,x=e.color,y=e.x,_=e.y,w=e.tooltip,q=e.margins,N=void 0===q?{}:q,L=e.annotations,k=void 0===L?[]:L,C=Object(d.useState)(0),M=Object(i.a)(C,2),T=M[0],P=M[1],R=Object(d.useState)(0),A=Object(i.a)(R,2),S=A[0],z=A[1],F=Object(d.useRef)(null),E=Object(d.useRef)(null),B=Object(b.c)(g-S),D=Object(b.c)(O-T);Object(d.useEffect)((function(){setTimeout((function(){var e=E.current?E.current.getBoundingClientRect().height:0,t=F.current?F.current.getBoundingClientRect().width:0;P(e),z(t)}))}),[B,D,x,t]);var I,Y=Object(r.a)({left:100,top:30,bottom:20,right:20},N),H=_.tickFormat,X=_.tickSpan,W=_.domain,G=_.fillGaps,V=y.tickFormat,U=y.tickSpan,J=y.domain;if(x&&x.palette)I=x.palette;else if(x){var Z=Object(u.uniq)(t.map((function(e){return e[x.field]}))),Q=Object(b.d)(x.field,Z.length);I=Z.reduce((function(e,t,a){return Object(r.a)(Object(r.a)({},e),{},Object(n.a)({},t,Q[a]))}),{})}var K=J||Object(o.a)(t.filter((function(e){return+e[_.field]})).map((function(e){return+e[y.field]}))),$=W||[0,Object(c.a)(t.map((function(e){return+e[_.field]})))],ee=Object(s.a)().domain(K).range([Y.left,B-Y.right]).nice(),te=Object(s.a)().domain($).range([D-Y.bottom,Y.top]).nice(),ae=x?Object.entries(Object(u.groupBy)(t,(function(e){return e[x.field]}))):[[void 0,t]],ne=Object(p.axisPropsFromTickScale)(ee).values,re=Object(p.axisPropsFromTickScale)(te,10).values;return U&&(K[0]=K[0]-K[0]%U,K[1]=K[1]+(U-K[0]%U),ne=Object(l.a)(K[0],K[1],U),ee.domain(K)),X&&($[0]=$[0]-$[0]%X,$[1]=$[1]+(X-$[0]%X),re=Object(l.a)($[0],$[1],X),te.domain($)),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("figure",{style:{width:g,height:O},className:"LineChart GenericVisualization",children:[Object(h.jsx)("div",{ref:E,className:"row",children:a?Object(h.jsx)("h5",{className:"visualization-title",style:{marginLeft:Y.left},children:a}):null}),Object(h.jsxs)("div",{className:"row vis-row",children:[Object(h.jsxs)("svg",{className:"chart",width:B,height:D,children:[Object(h.jsxs)("g",{className:"axis left-axis ticks",children:[Object(h.jsx)("text",{x:Y.left-10,y:Y.top-10,className:"axis-title",children:_.title||_.field}),re.map((function(e,t){return Object(h.jsxs)("g",{transform:"translate(0, ".concat(te(e),")"),children:[Object(h.jsx)("text",{x:Y.left-10,y:3,children:"function"===typeof H?H(e,t):e}),Object(h.jsx)("line",{className:"tick-mark",x1:Y.left-5,x2:Y.left,y1:0,y2:0}),Object(h.jsx)("line",{className:"background-line",x1:Y.left,x2:ee(ne[ne.length-1]),y1:0,y2:0})]},e)}))]}),Object(h.jsx)("g",{className:"axis bottom-axis ticks",children:ne.map((function(e,t){return Object(h.jsxs)("g",{transform:"translate(".concat(ee(e),", 0)"),children:[Object(h.jsx)("text",{x:0,y:D-Y.bottom+20,children:"function"===typeof V?V(e,t):e}),Object(h.jsx)("line",{className:"background-line",x1:0,x2:0,y1:te(re[re.length-1]),y2:D-Y.bottom}),Object(h.jsx)("line",{className:"tick-mark",x1:0,x2:0,y1:D-Y.bottom,y2:D-Y.bottom+5})]},e)}))}),Object(h.jsxs)("g",{className:"annotations-container",children:[k.filter((function(e){return"x"===e.axis})).map((function(e,t){var a=e.start,n=e.end,r=e.label,i=e.labelPosition,s=void 0===i?20:i,o=D-te(re[re.length-1])-Y.bottom,c=D-Y.bottom,l=te(re[re.length-1]);return Object(h.jsxs)("g",{className:"annotation x-axis-annotation",children:[Object(h.jsx)("rect",{x:ee(a),width:ee(n)-ee(a),height:o,y:l,fill:"url(#diagonalHatch)",opacity:.4}),Object(h.jsx)("line",{x1:ee(a),x2:ee(a),y1:c,y2:l,stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(h.jsx)("line",{x1:ee(n),x2:ee(n),y1:c,y2:l,stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(h.jsx)("line",{x1:ee(n)+20,x2:ee(n)+10,y1:l+s-5,y2:l+s-5,stroke:"grey",markerEnd:"url(#arrowhead)"}),Object(h.jsx)("text",{x:ee(n)+22,y:l+s,fontSize:".5rem",fill:"grey",children:r}),Object(h.jsx)("defs",{children:Object(h.jsx)("marker",{id:"arrowhead",markerWidth:"5",markerHeight:"5",refX:"0",refY:"2.5",orient:"auto",children:Object(h.jsx)("polygon",{stroke:"grey",fill:"transparent",points:"0 0, 5 2.5, 0 5"})})}),Object(h.jsx)("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:Object(h.jsx)("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"grey",opacity:.5,strokeWidth:1}})})]},t)})),k.filter((function(e){return"y"===e.axis})).map((function(e,t){var a=e.start,n=e.end,r=e.label,i=e.labelPosition,s=void 0===i?20:i,o=Y.left,c=ee(ne[ne.length-1]);return Object(h.jsxs)("g",{className:"annotation y-axis-annotation",children:[Object(h.jsx)("rect",{x:o,width:c-o,y:te(a),height:Math.abs(te(n)-te(a)),fill:"url(#diagonalHatch)",opacity:.4}),Object(h.jsx)("line",{x1:o,x2:c,y1:te(a),y2:te(a),stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(h.jsx)("line",{x1:o,x2:c,y1:te(n),y2:te(n),stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(h.jsx)("line",{x1:o+s-5,x2:o+s-5,y1:te(a)-15,y2:te(a)-5,stroke:"grey",markerEnd:"url(#arrowhead)"}),Object(h.jsx)("text",{x:o+s,y:te(a)-10,fontSize:".5rem",fill:"grey",children:r}),Object(h.jsx)("defs",{children:Object(h.jsx)("marker",{id:"arrowhead",markerWidth:"5",markerHeight:"5",refX:"0",refY:"2.5",orient:"auto",children:Object(h.jsx)("polygon",{stroke:"grey",fill:"transparent",points:"0 0, 5 2.5, 0 5"})})}),Object(h.jsx)("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:Object(h.jsx)("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"grey",opacity:.5,strokeWidth:1}})})]},t)}))]}),Object(h.jsx)("g",{className:"lines-container",children:ae.map((function(e,t){var a=Object(i.a)(e,2),n=a[0],r=a[1],s=I&&n?I[n]:j.dark;return Object(h.jsx)("g",{children:r.map((function(e,t){var a,n,i=t<r.length-1;return i&&(a=r[t+1],n=+e[y.field]+1===+a[y.field]),Object(h.jsxs)(h.Fragment,{children:[i&&G||i&&n&&+e[_.field]&&+a[_.field]?Object(h.jsx)("line",{className:"chart-line",x1:ee(+e[y.field]),x2:ee(+a[y.field]),y1:te(+e[_.field]),y2:te(+a[_.field]),style:{stroke:s}}):null,+e[_.field]>0?Object(h.jsxs)("g",{className:"data-dot-container",children:[Object(h.jsx)("circle",{className:"data-dot",fill:s,r:D/200,cx:ee(e[y.field])||0,cy:te(e[_.field])||0}),Object(h.jsx)("circle",{className:"data-dot-big",fill:s,r:5,cx:ee(e[y.field])||0,cy:te(e[_.field])||0}),Object(h.jsx)("circle",{fill:"transparent",r:5,cx:ee(e[y.field])||0,cy:te(e[_.field])||0,"data-tip":w?w(e):void 0,"data-for":"line-tooltip"})]},t):null]})}))},t)}))})]}),x?Object(h.jsxs)("div",{className:"ColorLegend",ref:F,style:{top:T+Y.top},children:[Object(h.jsx)("h5",{children:x.title||"L\xe9gende"}),Object(h.jsx)("ul",{className:"color-legend",children:Object.entries(I).map((function(e,t){var a=Object(i.a)(e,2),n=a[0],r=a[1];return Object(h.jsxs)("li",{children:[Object(h.jsx)("span",{className:"color-box",style:{background:r}}),Object(h.jsx)("span",{className:"color-label",children:n})]},n)}))})]}):null]})]}),Object(h.jsx)(m.a,{id:"line-tooltip"})]})};t.a=g},231:function(e,t,a){"use strict";var n=a(7),r=a(10),i=a(8),s=a(9),o=a(2),c=a(20),l=a(158),d=a(171),u=a(16),p=(a(632),a(1)),m=1e5,f=function(e){var t=e.width,a=e.height,n=.7*t,r=.05*t;return Object(p.jsx)("path",{className:"hull",d:"M 0 0 L ".concat(t/3," ",0," L ").concat(t/3," ").concat(a/4," L ").concat(.6*t," ").concat(a/4," L ").concat(.6*t," 0 L ").concat(t," 0 L ").concat(n," ").concat(a," L ").concat(r," ").concat(a," Z")})},b=function(e){var t=e.width,a=e.height,n=e.sailSpeed,r=e.distance,i=void 0===r?1:r,s=Object(o.useMemo)((function(){return.4*Math.random()+1}),[]),l=t,d=5*i,u=t+5*i,m={points:"0,".concat(.1*a," ").concat(t,",",0," ").concat(u,",").concat(a/2," ").concat(t,",").concat(.9*a," 0,").concat(a," ").concat(d," ").concat(a/2)},f={points:"0,".concat(.1*a," ").concat(t,",",0," ").concat(l,",").concat(a/2," ").concat(t,",").concat(.9*a," 0,").concat(a," ").concat(0," ").concat(a/2)},b=Object(c.useSpring)({loop:!0,to:[m,f,m],from:m,config:{duration:500*n*s}}).points;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(c.animated.polygon,{points:b,className:"sail"})})},h=function(e){var t=e.width,a=e.height,n=e.sailSpeed,r=e.distance,i=.7*t;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("g",{transform:"translate(".concat(t/2-i/2,", ").concat(.1*a,")"),children:Object(p.jsx)(b,{sailSpeed:n,distance:r,width:i,height:a/4})}),Object(p.jsx)("g",{transform:"translate(0, ".concat(.4*a,")"),children:Object(p.jsx)(b,{sailSpeed:n,distance:r,width:t,height:.45*a})}),Object(p.jsx)("line",{x1:t/2,x2:t/2,y1:0,y2:1.1*a})]})},j=function(e){e.x;var t=e.height,a=e.distance,n=Object(o.useState)(.2),r=Object(s.a)(n,2),i=r[0],l=r[1],d=Object(o.useState)(1),u=Object(s.a)(d,2),m=u[0],b=u[1],j=Object(o.useMemo)((function(){for(var e=[],t=0;t<m;t++)e.push({heightRatio:1});return e}),[m]),g={transform:"skewX(-3)"},v=Object(c.useSpring)({loop:!0,to:[g,{transform:"skewX(3)"},g],from:g,config:{duration:3e3}}).transform;Object(o.useEffect)((function(){var e=Math.round(2*Math.random())+1,t=.1+.1*Math.random();b(e),l(t)}),[]);var O=Object(o.useMemo)((function(){return Math.random()}),[]),x=t;return Object(p.jsxs)(c.animated.g,{className:"boat",transform:v,children:[j.map((function(e,n){var r=.9*x,s=n/j.length*r,o=x/j.length*.8;return Object(p.jsx)("g",{className:"matt",transform:"translate(".concat(s,", 0)"),children:Object(p.jsx)(h,{width:o,height:t-t*i,sailSpeed:.5*O+1,distance:a})},n)})),Object(p.jsx)("g",{transform:"translate(0, ".concat(t-t*i,")"),children:Object(p.jsx)(f,{width:x,height:t*i})})]})},g=function(e){var t=e.boatHeight,a=e.containerHeight,n=e.distance,r=a/20*(n/2),s={points:"0,".concat(0,", ",r/2,",").concat(r/3," ").concat(r,",",0," ").concat(r/2," ").concat(r/2)},l={points:"0,".concat(r,", ").concat(r/2,",",0," ").concat(r,",").concat(r," ").concat(r/2," ").concat(r/3)},d=Object(o.useMemo)((function(){for(var e=[],n=0;n<30;n++){var r=Math.random()*t*1.3+a-1.5*t,i=Math.random()*t*2-t,s=Math.random()+.5;e.push({transform:"translate(".concat(i,", ").concat(r,")scale(").concat(s,")")})}return e}),[t,a]),u=Object(c.useSpring)({loop:!0,to:[s,l,s],from:s,config:{duration:300}}).points,m=Object(c.useSpring)({loop:!0,to:[].concat(Object(i.a)(d),[d[0]]),from:d[0],config:{duration:900}}).transform;return Object(p.jsx)(c.animated.g,{className:"bird",transform:m,children:Object(p.jsx)(c.animated.polygon,{points:u})})},v=function(e){var t=e.containerHeight,a=e.containerWidth,n=e.rightToLeft,r=e.startAt,i=e.size,s=e.distance,l=void 0===s?1:s,d=Object(o.useMemo)((function(){if(l>.5&&Math.random()>.5){for(var e=1+Math.round(20*Math.random()),t=[],a=0;a<e;a++)t.push(a);return t}return[]}),[l]),u=.3*-a,f=1.3*a,b={transform:"translate(".concat(n?f:u,", 0)")},h={transform:"translate(".concat(n?u:f,", 0)")};r&&(b.transform="translate(".concat(r,", 0)"));var v=Object(o.useMemo)((function(){return Math.random()}),[]),O=Object(c.useSpring)({from:b,to:h,config:{duration:m*(2-l*(1+v/10))}}).transform,x=.2*t*i*l;return Object(p.jsx)(c.animated.g,{transform:O,children:Object(p.jsxs)("g",{style:{opacity:l},transform:n?"scale(-1, 1)":"",children:[Object(p.jsx)("g",{transform:"translate(0, ".concat(t-x,")"),children:Object(p.jsx)(j,{x:0,height:x,distance:l})}),d.map((function(e){return Object(p.jsx)(g,{containerHeight:t,boatHeight:x,distance:l},e)}))]})})},O=function(e){var t=e.width,a=void 0===t?1200:t,i=e.height,c=void 0===i?100:i,m=Object(u.c)(a),f=Object(u.c)(c),b=Object(o.useReducer)((function(e,t){switch(t.type){case"removeBoat":return Object.entries(e).reduce((function(e,a){var i=Object(s.a)(a,2),o=i[0],c=i[1];return o!==t.payload?Object(r.a)(Object(r.a)({},e),{},Object(n.a)({},o,c)):e}),{});case"createBoat":default:var a=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).startAt,t=void 0===e?0:e,a=Object(l.v4)(),n=.8*Math.random()+.2,r=Math.random()>=.5,i=Math.round(3*Math.random())+1;return{id:a,distance:n,rightToLeft:r,size:i,createdAt:(new Date).getTime(),startAt:t}}(t.payload);return Object(r.a)(Object(r.a)({},e),{},Object(n.a)({},a.id,a))}}),{}),h=Object(s.a)(b,2),j=h[0],g=h[1];return Object(o.useEffect)((function(){var e=setTimeout((function(){g({type:"createBoat"})}),1e4);return function(){return clearTimeout(e)}}),[j,g]),Object(d.b)((function(){var e=new Date;Object.entries(j).reduce((function(t,a){var i=Object(s.a)(a,2),o=i[0],c=i[1];return e.getTime()<c.createdAt+13e4?Object(r.a)(Object(r.a)({},t),{},Object(n.a)({},o,c)):(g({type:"removeBoat",payload:o}),t)}),{})}),4e3),Object(o.useEffect)((function(){for(var e=0;e<5;e++)g({type:"createBoat",payload:{startAt:m*Math.random()}})}),[]),Object(p.jsx)("svg",{className:"BoatsIllustration",width:m,height:f,children:Object.entries(j).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1],r=n.distance,i=n.rightToLeft,o=n.size,c=n.startAt;return Object(p.jsx)(v,{distance:r,size:o,rightToLeft:i,containerHeight:f,containerWidth:m,startAt:c},a)}))})};t.a=O},25:function(e,t,a){"use strict";var n=a(10),r=a(9),i=a(21),s=a(2),o=a(17),c=a.n(o),l=a(158),d=a(66),u=a(1),p=["id"],m=function(e){var t=e.id,a=Object(i.a)(e,p),o=Object(s.useRef)(null),m=Object(s.useState)(Object(l.v4)()),f=Object(r.a)(m,1)[0],b=Object(s.useContext)(d.b),h=b.activeVisualization,j=b.onBlockClick,g=b.onRegisterVisualization,v=b.onUnregisterVisualization;Object(s.useEffect)((function(){return setTimeout((function(){var e=Object(n.a)({},a);e=Object(n.a)(Object(n.a)({},e),{},{ref:o,visualizationId:t,id:f}),g(e)})),v(f)}),[f]);return Object(u.jsx)("div",{ref:o,onClick:function(e){"function"===typeof j&&j(f,o)},className:c()("Caller",{"is-active":h&&f===h.id,"is-clearfix":!t,"is-hidden":!0,"is-devmode":!1}),children:null})};t.a=m},387:function(e,t,a){},44:function(e,t,a){"use strict";var n=a(10),r=a(9),i=a(2),s=a(24),o=a(664),c=a(7),l=a(674),d=a(16),u=a(22),p=a(17),m=a.n(p),f=a(20),b=a(1),h=function(e){var t=e.d,a=(e.projection,e.project),n=e.palette,o=e.layer,c=(e.width,e.height,Object(i.useState)(!1)),l=Object(r.a)(c,2),d=l[0],u=l[1];Object(i.useEffect)((function(){setTimeout((function(){u(!0)}))}),[]);var p=a(t),m=Object(f.useSpring)({to:{d:p},immediate:!d});return Object(i.useEffect)((function(){s.a.rebuild()})),Object(b.jsx)(f.animated.path,{d:m.d,className:"geopart","data-tip":o.tooltip?o.tooltip(t):void 0,"data-for":"geo-tooltip",style:{fill:void 0!==o.color&&void 0!==n?n[t.properties[o.color.field]]:"transparent"}})},j=function(e){var t,a=e.layer,r=e.projection,i=e.width,s=e.height,o=e.reverseColors,p=Object(l.a)().projection(r);if(!a.data)return console.info(a),null;if(a.data.features&&a.color&&a.color.field){var f=Object(u.uniq)(a.data.features.map((function(e){return e.properties[a.color.field]})));if(a.color.palette)t=a.color.palette;else if(a.color.generatedPalette){var j=Object(d.d)("map",a.data.features.length);t=f.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(c.a)({},t,j[a]))}),{})}}return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("g",{className:m()("ChoroplethLayer",{"reverse-colors":o}),children:a.data.features.map((function(e,n){return Object(b.jsx)(h,{projection:r,project:p,palette:t,layer:a,d:e,width:i,height:s},e.properties.id||e.properties.name||n)}))})})},g=a(55),v=a(279),O=function(e){var t=e.projection,a=e.datum,n=e.layer,s=e.opacity,o=e.onGroupMouseEnter,c=e.onGroupMouseLeave,l=e.displayLabel,d=n.tooltip,u=a.latitude,p=a.longitude,m=a.size,h=a.color,j=a.label,g=a.rawSize,v=a.labelPosition,O=void 0===v?"right":v,x=a.labelSize,y=a.index,_=Math.sqrt(m/Math.PI),w=t([+p,+u]),q=Object(r.a)(w,2),N=q[0],L=q[1],k=Object(i.useState)(!1),C=Object(r.a)(k,2),M=C[0],T=C[1];Object(i.useEffect)((function(){setTimeout((function(){T(!0)}))}),[]);var P=Object(f.useSpring)({to:{transform:"translate(".concat(N,",").concat(L,")")},immediate:!M}).transform;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(f.animated.g,{className:"point-group",transform:P,style:{zIndex:x,opacity:s},onMouseEnter:function(){return o(y)},onMouseMove:function(){return o(y)},onMouseLeave:function(){return c()},"data-for":"geo-tooltip","data-tip":"function"===typeof d?d(a):void 0,children:[Object(b.jsx)("circle",{cx:0,cy:0,r:_,style:{fill:h},className:"marker"}),n.size.displayMetric&&x>6?Object(b.jsx)("text",{x:0,y:x/4,textAnchor:"middle",fontSize:x/2,fill:"white",children:g}):null,j&&l?Object(b.jsx)("text",{x:"right"===O?_+5:-_-5,y:_/2,fill:n.color&&n.color.labelsColor,textAnchor:"right"===O?"start":"end",fontSize:x,children:j}):null]})})},x=function(e){var t=e.layer,a=e.datum,n=e.thatIndex,s=e.opacity,o=e.stackedRowHeight,c=e.onGroupMouseEnter,l=e.onGroupMouseLeave,d=e.labelFontSize,u=e.projection,p=t.tooltip,m=a.latitude,h=a.longitude,j=a.size,g=a.label,v=Math.sqrt(j/Math.PI),O=u([+h,+m]),x=Object(r.a)(O,2),y=x[0],_=x[1],w=Object(i.useState)(!1),q=Object(r.a)(w,2),N=q[0],L=q[1];Object(i.useEffect)((function(){setTimeout((function(){L(!0)}))}),[]);var k=Object(f.useSpring)({to:{x2:y-v,y2:_,transformLabel:"translate(".concat(.01*window.innerWidth,", ").concat(a.labelY,")")},immediate:!N}),C=k.x2,M=k.y2,T=k.transformLabel;return Object(b.jsxs)(f.animated.g,{style:{opacity:s},onMouseEnter:function(){return c(n)},onMouseMove:function(){return c(n)},onMouseLeave:function(){return l()},"data-for":"geo-tooltip","data-tip":"function"===typeof p?p(a):void 0,children:[Object(b.jsx)(f.animated.g,{className:"label-container",transform:T,children:Object(b.jsx)("text",{style:{fontSize:d},children:g})}),Object(b.jsx)(f.animated.line,{x1:d*g.length*.5+.01*window.innerWidth,y1:a.labelY-.2*o,x2:C,y2:M})]})},y=function(e){var t=e.layer,a=e.projection,o=e.width,l=e.height,p=Object(i.useState)(null),m=Object(r.a)(p,2),h=m[0],j=m[1];Object(i.useEffect)((function(){s.a.rebuild()}));var y=Object(i.useMemo)((function(){if(t.data){var e={};t.data.forEach((function(a){var n=a.latitude+","+a.longitude;e[n]?e[n].size+=isNaN(+a[t.size.field])?0:+a[t.size.field]:e[n]={label:t.label?a[t.label.field]:void 0,labelPosition:t.label?t.label.position:void 0,latitude:+a.latitude,longitude:+a.longitude,color:void 0!==t.color?a[t.color.field]:"default",size:void 0!==t.size&&void 0!==t.size.field?isNaN(+a[t.size.field])?0:+a[t.size.field]:0}}));var a,i=Object.entries(e).map((function(e){var t=Object(r.a)(e,2);t[0];return t[1]}));if(void 0!==t.color){var s=Object(u.uniq)(i.map((function(e){return e.color})));if(t.color.palette)a=t.color.palette;else{var l=Object(d.d)("map",s.length);a=s.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(c.a)({},t,l[a]))}),{})}}var p=o/300;void 0!==t.size&&void 0!==t.size.custom&&(p=parseInt(t.size.custom*o/100));var m=Object(v.a)(i.map((function(e){return e.size}))),f=[3,o/30].map((function(e){return Math.PI*e*e})),b=Object(g.a)().domain(m).range(f),h=Object(g.a)().domain(m).range([8,o/30]);return i=i.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{color:void 0!==t.color?a[e.color]:"grey",size:void 0!==t.size?void 0!==t.size.custom?p:b(e.size):o/100,rawSize:e.size,labelSize:void 0!==t.size?h(e.size):o/100})}))}}),[a,o,t]).filter((function(e){var t=e.latitude,a=e.longitude;return t&&a&&!isNaN(t)&&!isNaN(a)})).sort((function(e,t){return e.latitude>t.latitude?1:-1})),_=function(e){h!==e&&j(e)},w=function(){setTimeout((function(){null!==h&&j(null)}))},q=.1*l,N=.9*l/y.length,L=.02*window.innerHeight,k=N<L?N:L;return t.stackLabels&&(y=y.sort((function(e,t){return e.latitude>t.latitude?-1:1})).map((function(e,t){return Object(n.a)(Object(n.a)({},e),{},{labelY:N*t+q})}))),y=y.map((function(e,t){return Object(n.a)(Object(n.a)({},e),{},{index:t})})),Object(b.jsxs)("g",{className:"PointsLayer",children:[t.stackLabels?Object(b.jsx)("g",{className:"stacked-labels-container",children:Object(b.jsx)(f.Transition,{items:y,from:{opacity:0},enter:{opacity:1},leave:{opacity:0},children:function(e,n,r){var i=e.opacity;return Object(b.jsx)(x,{projection:a,datum:n,layer:t,opacity:null!==h?h===n.index?1:.1:i,thatIndex:n.index,onGroupMouseEnter:_,onGroupMouseLeave:w,stackedRowHeight:N,labelFontSize:k},n.label)}})}):null,Object(b.jsx)(f.Transition,{items:y,from:{opacity:0},enter:{opacity:1},leave:{opacity:0},children:function(e,n,r){var i=e.opacity;return Object(b.jsx)(O,{projection:a,datum:n,layer:t,opacity:null!==h?h===n.index?1:.1:i,index:n.index,onGroupMouseEnter:_,onGroupMouseLeave:w,displayLabel:!t.stackLabels},n.label)}})]})},_=a(119),w=function(e){var t=e.arrowSize,a=e.xDep,n=e.yDep,s=e.xDest,o=e.yDest,c=e.strokeWidth,l=(e.width,e.height,e.projectionTemplate,e.datum),u=e.layer,p=e.color,h=void 0===p?"black":p,j="".concat(a,"-").concat(n,"-").concat(s,"-").concat(o),g=Object(i.useState)(!1),v=Object(r.a)(g,2),O=v[0],x=v[1];Object(i.useEffect)((function(){setTimeout((function(){x(!0)}))}),[]);var y="M ".concat(a," ").concat(n," L ").concat(s," ").concat(o),_=Object(f.useSpring)({to:{xDep:a,yDep:n,xDest:s,yDest:o,d:y,strokeWidth:Object(d.c)(c),labelDepTransform:"translate(".concat(a,", ").concat(n,")"),labelDestTransform:"translate(".concat(s,", ").concat(o,")"),arrowPath:"M ".concat(a," ").concat(n," L ").concat(s," ").concat(o)},immediate:!O}),w=_.d,q=_.labelDepTransform,N=_.labelDestTransform,L=_.strokeWidth,k=.01*window.innerWidth;return Object(b.jsxs)("g",{className:"flow-group",children:[Object(b.jsx)("defs",{children:Object(b.jsx)("marker",{id:"triangle-".concat(j),viewBox:"0 0 10 10",refX:"1",refY:"5",markerUnits:"strokeWidth",markerWidth:t,markerHeight:t,orient:"auto",children:Object(b.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 Z",fill:h})})}),Object(b.jsx)(f.animated.path,{d:w,strokeWidth:3*L,fill:"none",stroke:h,opacity:0}),Object(b.jsx)(f.animated.path,{d:w,strokeWidth:L,markerEnd:"url(#triangle-".concat(j,")"),fill:"none",stroke:h}),u.label&&u.label.fields?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f.animated.g,{className:m()("label",{"is-always-visible":u.label.alwaysVisible}),transform:q,children:Object(b.jsx)("text",{textAnchor:s<a?"start":"end",x:s<a?10+2*c:-10-c,y:.3*k,fontSize:k,children:l[u.label.fields[0]]})}),Object(b.jsx)(f.animated.g,{className:m()("label",{"is-always-visible":u.label.alwaysVisible}),transform:N,children:Object(b.jsx)("text",{textAnchor:s>a?"start":"end",x:s>a?10+2*c:-10-c,y:.3*k,fontSize:k,children:l[u.label.fields[1]]})})]}):null]})},q=function(e){var t=e.layer,a=e.projection,s=e.width,o=e.height,l=e.projectionTemplate,p=Object(i.useMemo)((function(){if(t.data){var e,a=Object(g.a)().domain([0,Object(_.a)(t.data.map((function(e){return+e[t.size.field]})))]).range([1,s*o/2e4]),r=a.copy().range([0,s*o/1e5]),i=t.data.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{strokeWidth:a(+e[t.size.field]),arrowSize:r(t.data.strokeWidth)})}));if(void 0!==t.color){var l=Object(u.uniq)(i.map((function(e){return e[t.color.field]})));if(t.color.palette)e=t.color.palette;else{var p=Object(d.d)("map",l.length);e=l.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(c.a)({},t,p[a]))}),{})}i=i.map((function(a){return Object(n.a)(Object(n.a)({},a),{},{color:void 0!==t.color?e[a[t.color.field]]:"grey"})}))}return i}}),[a,s,t,o]);return Object(b.jsx)("g",{className:"FlowsLayer",children:p.filter((function(e){var t=e.latitude_dep,a=e.longitude_dep,n=e.latitude_dest,r=e.longitude_dest;return t&&a&&n&&r&&!isNaN(t)&&!isNaN(a)&&!isNaN(n)&&!isNaN(r)})).map((function(e,n){var i=e.latitude_dep,c=e.longitude_dep,d=e.latitude_dest,u=e.longitude_dest,p=e.strokeWidth,m=e.arrowSize,f=e.color,h=a([+c,+i]),j=Object(r.a)(h,2),g=j[0],v=j[1],O=a([+u,+d]),x=Object(r.a)(O,2),y=x[0],_=x[1];return Object(b.jsx)(w,{arrowSize:m,xDep:g,yDep:v,xDest:y,yDest:_,strokeWidth:p,datum:e,layer:t,width:s,color:f,height:o,projectionTemplate:l})}))})},N=function(e){var t=e.layer,a=e.projection,n=e.width,r=e.height,i=e.projectionTemplate;return Object(b.jsx)("g",{className:"CustomObjectsLayer",children:"function"===typeof t.renderObjects?t.renderObjects({data:t.data,projection:a,width:n,height:r,projectionTemplate:i}):t.data.map((function(e,s){return t.renderObject({datum:e,projection:a,width:n,height:r,projectionTemplate:i})}))})},L=a(21),k=["children","onMouseDown"],C=function(e){var t=e.children,a=e.onMouseDown,s=Object(L.a)(e,k),o=Object(i.useState)(!1),c=Object(r.a)(o,2),l=c[0],d=c[1];return Object(i.useEffect)((function(){var e;return l&&(console.log("setInterval"),e=setInterval(a,100)),function(){console.log("clearInterval"),clearInterval(e)}}),[l,a]),Object(b.jsx)("button",Object(n.a)(Object(n.a)({},s),{},{onMouseDown:function(){d(!0)},onMouseUp:function(){d(!1)},style:{background:l?"red":void 0},children:t}))},M=["value","onBlur"],T=function(e){var t=e.value,a=e.onBlur,n=(Object(L.a)(e,M),Object(i.useState)(t)),s=Object(r.a)(n,2),o=s[0],c=s[1];return Object(i.useEffect)((function(){c(t)}),[t]),Object(b.jsx)("input",{value:o,onChange:function(e){c(e.target.value)},onBlur:function(e){a(e.target.value)}})},P=a(671),R=function(e){var t=e.layers,a=e.position;return Object(b.jsxs)("div",{className:"Legend ".concat("string"===typeof a?a:""),children:[Object(b.jsx)("h5",{className:"legend-main-title",children:"L\xe9gende"}),t.map((function(e,t){var a,i,s;if(e.size&&e.size.field&&(a=!0),e.color&&e.color.field){i=!0;var o,l=Object(P.a)(e.data.map((function(t){return t[e.color.field]})));if(e.color.palette)o=e.color.palette;else{var u=Object(d.d)("map",l.length);o=l.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(c.a)({},t,u[a]))}),{})}s=Object.entries(o)}return Object(b.jsxs)(b.Fragment,{children:[a?Object(b.jsx)("div",{className:"size-legend-container",children:Object(b.jsxs)("div",{className:"size-legend-item",children:[Object(b.jsxs)("span",{className:"size-icon-container",children:[Object(b.jsx)("span",{}),Object(b.jsx)("span",{})]}),Object(b.jsx)("span",{className:"label",children:e.size.title||e.size.field})]})},t):null,i?Object(b.jsxs)("div",{className:"color-legend-container",children:[Object(b.jsx)("h6",{className:"legend-title",children:e.color.title||e.color.field}),Object(b.jsx)("ul",{className:"modalities-list",children:s.map((function(e){var t=Object(r.a)(e,2),a=t[0],n=t[1];return Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{style:{background:n},className:"color-marker"}),Object(b.jsx)("span",{className:"label",children:a})]},a)}))})]},t+"b"):null]})}))]})};a(538),t.a=function(e){var t=e.width,a=void 0===t?1500:t,c=e.height,l=void 0===c?1500:c,u=e.title,p=e.layers,m=void 0===p?[]:p,f=e.projectionTemplate,h=e.projectionConfig,g=e.debug,v=void 0!==g&&g,O=e.withLegend,x=Object(d.c)(a),_=Object(d.c)(l),w=Object(i.useState)(200),L=Object(r.a)(w,2),k=L[0],M=L[1],P=Object(i.useState)(0),A=Object(r.a)(P,2),S=A[0],z=A[1],F=Object(i.useState)(x/2),E=Object(r.a)(F,2),B=E[0],D=E[1],I=Object(i.useState)(_/2),Y=Object(r.a)(I,2),H=Y[0],X=Y[1],W=Object(i.useState)(-1.7475027),G=Object(r.a)(W,2),V=G[0],U=G[1],J=Object(i.useState)(46.573642),Z=Object(r.a)(J,2),Q=Z[0],K=Z[1],$=Object(i.useState)(f),ee=Object(r.a)($,2),te=ee[0],ae=ee[1];Object(i.useEffect)((function(){ae(f)}),[f]);var ne=Object(i.useMemo)((function(){return{rotationDegree:0,centerX:2.4486203,centerY:46.8576176,scale:5*_}}),[_]),re=Object(i.useMemo)((function(){var e=Object(n.a)({},ne),t=Object(o.a)();switch(te){case"World":e=Object(n.a)(Object(n.a)({},e),{},{scale:.5*_,centerX:-1,centerY:15});break;case"coast from Nantes to Bordeaux":e=Object(n.a)(Object(n.a)({},e),{},{scale:24*_,centerX:-1.7475027,centerY:46.573642,translationX:.4*x,translationY:.28*_});break;case"Poitou":e=Object(n.a)(Object(n.a)({},e),{},{scale:30*_,centerX:-1.7475927,centerY:47.4,translationX:.45*x,translationY:0});break;case"Poitou zoomed":e=Object(n.a)(Object(n.a)({},e),{},{scale:23*_,centerX:-1.7475927,centerY:47.4,translationX:.45*x,translationY:0});break;case"rotated Poitou":e=Object(n.a)(Object(n.a)({},e),{},{rotationDegree:58,scale:32*_,centerX:-1.7475027,centerY:46.573642,translationX:.29*x,translationY:.25*_})}return void 0!==h&&(e=Object(n.a)(Object(n.a)({},e),h)),M(e.scale),z(e.rotationDegree),U(e.centerX),K(e.centerY),void 0!==e.translationX?(D(e.translationX),X(e.translationY)):(e.translationX=x/2,e.translationY=_/2,D(x/2),X(_/2)),t.scale(e.scale),t.center([e.centerX,e.centerY]),e.rotationDegree&&t.angle(e.rotationDegree),t.translate([e.translationX,e.translationY]),t}),[x,_,ne,h,te]);return Object(b.jsxs)("div",{className:"GeographicMapChartWrapper",children:[u?Object(b.jsx)("h5",{className:"visualization-title",children:u}):null,v?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h2",{children:["scale: ",k,", rotation: ",S,", translationX: ",B,", translationY: ",H,", centerX: ",V,", centerY: ",Q]}),Object(b.jsx)("div",{className:"table",children:Object(b.jsxs)("ul",{id:"horizontal-list",children:[Object(b.jsx)("li",{children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(C,{onMouseDown:function(){return M(1.6*k)},children:"scale+"})}),Object(b.jsx)("li",{children:Object(b.jsx)(C,{onMouseDown:function(){return M(k/1.6)},children:"scale-"})}),Object(b.jsx)("li",{children:Object(b.jsx)(T,{value:k,placeHolder:"entrez une valeur pour la scale",onBlur:function(e){var t=isNaN(+e)?k:+e;M(t)}})})]})}),Object(b.jsx)("li",{children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(C,{onMouseDown:function(){console.log("DOWN !!"),z(S+2)},children:"rotation+"})}),Object(b.jsx)("li",{children:Object(b.jsx)(C,{onMouseDown:function(){return z(S-2)},children:"rotation-"})})]})}),Object(b.jsx)("li",{children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(C,{onMouseDown:function(){return D(1.2*B)},children:"translationX+"})}),Object(b.jsx)("li",{children:Object(b.jsx)(C,{onMouseDown:function(){return D(.8*B)},children:"translationX-"})}),Object(b.jsxs)("li",{children:["b",Object(b.jsx)(C,{onMouseDown:function(){return X(1.2*H)},children:"translationY+"})]}),Object(b.jsx)("li",{children:Object(b.jsx)(C,{onMouseDown:function(){return X(.8*H)},children:"translationY-"})})]})}),Object(b.jsx)("li",{children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(C,{onMouseDown:function(){return U(V+.3)},children:"centerX+"})}),Object(b.jsx)("li",{children:Object(b.jsx)(C,{onMouseDown:function(){return U(V-.3)},children:"centerX-"})}),Object(b.jsxs)("li",{children:["b",Object(b.jsx)(C,{onMouseDown:function(){return K(Q+.3)},children:"centerY+"})]}),Object(b.jsx)("li",{children:Object(b.jsx)(C,{onMouseDown:function(){return K(Q-.3)},children:"centerY-"})}),Object(b.jsx)("li",{children:Object(b.jsx)(T,{value:V,placeHolder:"entrez une valeur pour la latitude",onBlur:function(e){var t=isNaN(+e)?V:+e;U(t)}})}),Object(b.jsx)("li",{children:Object(b.jsx)(T,{value:Q,placeHolder:"entrez une valeur pour la longitude",onBlur:function(e){var t=isNaN(+e)?Q:+e;K(t)}})})]})})]})})]}):null,Object(b.jsx)("svg",{className:"GeographicMapChart",width:x,height:_,viewBox:"0 0 ".concat(x," ").concat(_),children:m.map((function(e,t){switch(e.type){case"choropleth":return Object(b.jsx)(j,{layer:e,projection:re,width:x,height:_,reverseColors:e.reverseColors},t);case"points":return Object(b.jsx)(y,{layer:e,projection:re,width:x,height:_},t);case"flows":return Object(b.jsx)(q,{layer:e,projection:re,width:x,height:_,projectionTemplate:te},t);case"custom":return Object(b.jsx)(N,{layer:e,projection:re,projectionTemplate:te,width:x,height:_},t);default:return Object(b.jsx)("g",{children:Object(b.jsx)("text",{children:"Unsupported layer type"})},t)}}))}),O?Object(b.jsx)(R,{layers:m,position:O}):null,Object(b.jsx)(s.a,{id:"geo-tooltip"})]})}},508:function(e,t,a){},53:function(e){e.exports=JSON.parse('[{"id":"intro-provinces","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/intro-provinces","datasets":"map_backgrounds/map_france_1789.geojson","titre_fr":"Carte des provinces \xe9tudi\xe9es : Poitou, Aunis, Saintonge, Angoumois (PASA)","comment_lire_fr":"","comment_cest_fait_fr":"Le fond de carte de cette visualisation a \xe9t\xe9 constitu\xe9 sous licence libre dans le cadre du programme Portic en agr\xe9geant de multiples sources et en les mettant en coh\xe9rence avec des m\xe9thodes de g\xe9omatique. Il est disponible ici : http://maps.portic.fr/","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"intro-ports","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/intro-ports","datasets":"map_backgrounds/map_france_1789.geojson,ports_locations_data_intro/ports_locations_data_intro.csv","titre_fr":"Carte des ports de la r\xe9gion PASA","comment_lire_fr":"Les disques repr\xe9sent\xe9s sont dimensionn\xe9s de mani\xe8re \xe0 ce que leur aire soit proportionnelle au nombre de d\xe9parts enregistr\xe9s dans chaun des ports de la r\xe9gion \xe9tudi\xe9e. Chacune des trois couleurs marque l\'appartenance du port \xe0 une province.","comment_cest_fait_fr":"Le fond de carte de cette visualisation a \xe9t\xe9 constitu\xe9 en agr\xe9geant de multiples sources et en les mettant en coh\xe9rence avec des m\xe9thodes de g\xe9omatique. Les donn\xe9es proviennent de la base de donn\xe9es Navigocorpus, qui comprend entre autres les cong\xe9s d\xe9livr\xe9s aux navires \xe0 leur d\xe9part. Ces donn\xe9es ont \xe9t\xe9 r\xe9\xe9albor\xe9e dans une API. La base est structur\xe9e sur les *pointcalls*, soit les indications d\'un lieu o\xf9 \xe0 une date donn\xe9e un navire est observ\xe9 dans son mouvement.Le filtre a permis de s\xe9lectionner les *pointcalls* o\xf9 les navires ont \xe9t\xe9 observ\xe9s directement \xe0 la sortie du port.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"intro-bureaux","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/intro-bureaux","datasets":"map_backgrounds/map_france_1789.geojson,part_3_step3_viz_customs_offices_data/part_3_step3_viz_customs_offices_data.csv","titre_fr":"Carte des bureaux des fermes de la r\xe9gion PASA","comment_lire_fr":"La Direction des Fermes de La Rochelle se compose de sept bureaux. Nous en connaissons le nom et le si\xe8ge, indiqu\xe9 sur la carte, mais pas l\'\xe9tendue de juridiction. Cette incertitude a \xe9t\xe9 signal\xe9e par la couleur diffuse autour du si\xe8ge du bureau.","comment_cest_fait_fr":"Le fond de carte de cette visualisation a \xe9t\xe9 constitu\xe9 en agr\xe9geant de multiples sources et en les mettant en coh\xe9rence avec des m\xe9thodes de g\xe9omatique. Les bureaux de ferme ont \xe9t\xe9 localis\xe9s en fonction de la position de l\'un de leur port, puis d\xe9plac\xe9s arbitrairement pour des besoins de lisibilit\xe9 (ce choix est justifi\xe9 par le fait que leur p\xe9rim\xe8tre d\'action g\xe9ographique est relativement incertain).","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"viz-principale-partie-1","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/viz-principale-partie-1","datasets":"decline_LR_partners/decline_LR_partners.csv, decline_longitudinal_data/decline_longitudinal_data.csv, decline_LR_partners/decline_LR_partners.csv,decline_LR_products/decline_LR_products.csv","titre_fr":"Le d\xe9clin de la r\xe9gion de La Rochelle suite \xe0 la perte du Canada","comment_lire_fr":"","comment_cest_fait_fr":"Les donn\xe9es proviennent de la base de donn\xe9es Toflit18, et plus particuli\xe8rement des flux tir\xe9s de son groupe de sources \\"Best Guess customs region prod x partner\\" qui permettent de raisonner au niveau des directions des fermes (et non de l\'ensemble de la France). Pour chacune des parties de la visualisation, seuls les exports sont pris en compte. La diversit\xe9 du commerce de la r\xe9gion est calcul\xe9e au moyen de l\'indice de Herfindahl-Hirschmann, soit la somme du carr\xe9 des parts du march\xe9 fran\xe7ais par classe de produits export\xe9s (sur la base de la classification \\"R\xe9volution & Empire\\" de Toflit18, visible dans le d\xe9tail de la troisi\xe8me partie). Dans les visualisations en ligne et en histogrammes, les trous indiquent des ann\xe9es pour lesquelles les sources sont manquantes.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"viz-principale-partie-2","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/viz-principale-partie-2","datasets":"part_2_toflit_viz_data/part_2_toflit_viz_data.csv,part_2_navigo_viz_data/part_2_navigo_viz_data.csv","titre_fr":"Une forte sp\xe9cialisation portuaire : le cas de la traite n\xe9gri\xe8re, du commerce du sel et de l\u2019eau-de-vie","comment_lire_fr":"Lecture du radarplot: Le diagramme prend en compte l\'ensemble des navires sortis des ports de la r\xe9gion \xe9tudi\xe9e. La jauge de ces navires est exprim\xe9e en tonneaux (soit 1.44 m\xe8tres cubes de volume). Gr\xe2ce au curseur, il est possible de s\xe9lectionner une fourchette  plus r\xe9duite de tonnages, pour ce concernter, pra exemple, uniquement sur les unit\xe9s d\xe9passant 100 tx. De m\xeame , on peut visualiser, en cochant la ou les cases souhait\xe9es, uniquement les sous-ensembles des ports appartenant \xe0 un ou plusieurs bureaux des fermes de la r\xe9gion \xe9tudo\xe9e. Le radaplot se r\xe9configure alors en indiquant uniquement les groupes de destinations des navires du tonnage et au d\xe9part des ports du ou des bureaux s\xe9lectionn\xe9s. En survolant le radaplot, un encadr\xe9 appara\xeet qui fournit les pour\xe7antage de chaque groupe de destinations. Les ports de destinations ont \xe9t\xe9 ici regroup\xe9s en reprenant les cat\xe9gories de la Balance du commerce de la base Toflit pour faciliter la comparaison entre la base sur la navigation et celle sur la valeur du commerce ext\xe9rieur.","comment_cest_fait_fr":"Les donn\xe9es du diagramme alluvial sont tir\xe9es de la base Toflit18 et concernent tous les \xe9changes avec l\'\xe9tranger (ports francs non pris en compte). Les flux sont tir\xe9s des sources \\"Best Guess customs region prod x partner\\" qui permettent de raisonner au niveau des directions des fermes (et non de l\'ensemble de la France). Les produits et les partenaires affich\xe9s sur la visualisation correspondent \xe0 des agr\xe9gations \xe9labor\xe9es sp\xe9cifiquement pour mettre en lumi\xe8re des circuits sp\xe9cifialis\xe9s (faisant correspondre de mani\xe8re relativement identifiable : un ou plusieurs bureaux de ferme, un type de produit et un groupe de partenaires).Les donn\xe9es du second diagramme (diagramme dit \\"radar\\") sont issues de la base de donn\xe9es Navigocorpus. Sont pris en compte les flux en provenance des ports attach\xe9s \xe0 la direction des fermes de La Rochelle. Les destinations sont regroup\xe9es selon la m\xeame classification que la premi\xe8re visualisation afin de permettre la comparaison (agr\xe9gation it\xe9rative \xe0 partir des ports de destination).","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"viz-principale-partie-3","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/viz-principale-partie-3","datasets":"part_3_centralite_comparaison/part_3_centralite_comparaison.csv,map_backgrounds/map_france_1789.geojson,part_3_step1_viz_data/part_3_step1_viz_data.csv,flows_1787_around_La Rochelle/flows_1787_around_La Rochelle.gexf,flows_1787_around_Bordeaux/flows_1787_around_Bordeaux.gexf,flows_1787_around_Nantes/flows_1787_around_Nantes.gexf,part_3_step3_viz_customs_offices_data/part_3_step3_viz_customs_offices_data.csv,part_3_step3_viz_ports_data/part_3_step3_viz_ports_data.csv","titre_fr":"La Rochelle, port dominant mais pas structurant","comment_lire_fr":"La partie sup\xe9rieure de la visualisation permet de constater les difff\xe9rences entre deux caract\xe9ristiques des ports de  de la r\xe9gion \xe9tudi\xe9e: plus le c\xf4t\xe9 sup\xe9rieur du triangle est large, plus il y a eu de d\xe9parts en 1789 depuis le port; plus le triangle est haut, plus le tonnage moyen est \xe9lev\xe9. Le tonnage est exprim\xe9 en tonneaux de jauge (1 tx = 1.44 m\xe8tres cubes). En se pla\xe7ant avec la souris sur un port au choix, les donn\xe9es correspondantes s\'affichent. On distingue ainsi assez clairement les ports qi se limitent \xe0 une navigation locale (petit nombre, petit tonnage moyen), des grands ports de la r\xe9gion (grand nombre de d\xe9part, et pr\xe9sence de gros tonnages).","comment_cest_fait_fr":"Le fond de carte des visualisations a \xe9t\xe9 constitu\xe9 en agr\xe9geant de multiples sources et en les mettant en coh\xe9rence avec des m\xe9thodes de g\xe9omatique. Les donn\xe9es de la base Navigocorpus sont utilis\xe9es pour toutes les parties li\xe9es \xe0 la navigation.La premi\xe8re partie est constitu\xe9e \xe0 partir des cong\xe9s d\xe9livr\xe9s aux navires sortant d\'un port (*pointcalls*) de la r\xe9gion \xe9tudi\xe9e en 1789, puis transcrite \xe0 travers des objets graphiques dont la hauteur et la largeur repr\xe9sente respectivement le tonnage moyen (jauge) des navires parti du port, et le nombre total de sorties, permettant de distinguer diff\xe9rents types de ports dans la r\xe9gion.La seconde partie (graphes) est fond\xe9e sur les flux pr\xe9sents dans la base Navigocorpus pour l\'ann\xe9e 1787 (la compl\xe9tude des donn\xe9es de 1789 n\'\xe9tant pas suffisante pour effectuer des comparaisons valides). \xc0 partir des flux enregistr\xe9s dans les ports , nous avons isol\xe9 trois corpus: les ports de l\'amiraut\xe9 de Bordeaux, ceux de l\'amiraut\xe9 de Nantes, et celui des trois amiraut\xe9s de La Rochelle, Marennes et Les Sables-d\'Olonne, correspondants \xe0 la r\xe9gion Poitou-Aunis-Saintonge objet de notre \xe9tude de cas. Apr\xe8s exp\xe9rimentation, cette diff\xe9rence (une versus trois amiraut\xe9s) n\'occasionne pas de changement important dans les visualisations et les m\xe9triques. Nous avons ensuite regroup\xe9 pour chaque corpus les voyages par ports. Les n\u0153uds affich\xe9s sur la visualisation repr\xe9sentent donc un port, et les liens un ou plusieurs voyages r\xe9alis\xe9s entre deux ports en 1787. La taille des n\u0153uds correspond \xe0 leur degr\xe9 dans le r\xe9seau, c\'est-\xe0-dire dans ce cas au nombre de ports avec lesquels ils ont \xe9t\xe9 mis en relation par des voyages en 1787.La troisi\xe8me partie de la visualisation m\xe9lange des donn\xe9es de Navigo et de Toflit18.Pour ce qui est des objets visuels de la carte, les portions de cercle sont tir\xe9s des \xe9tats d\'export enregistr\xe9s dans Toflit18, divis\xe9s suivant l\'origine des produits commerc\xe9s (dans la r\xe9gion ou hors de la r\xe9gion) et agr\xe9g\xe9s par leur valeur commerciale en livres tournois. Les triangles correspondent aux \xe9tats de sortie de port enregistr\xe9s dans Navigo, divis\xe9s suivant la destination des navires (dans la r\xe9gion ou hors de la r\xe9gion) et agr\xe9g\xe9s  par tonnage cumul\xe9 des navires partis des ports rattach\xe9s \xe0 chaque bureau de ferme.Les objets visuels permettant de faire la comparaison sont similaires \xe0 deux nuances pr\xe8s : ils sont construits avec les donn\xe9es de 1787 pour permettre une comparaison valide (avec suffisament de donn\xe9es), et les donn\xe9es de navigation concernent les ports dominants de chaque direction des fermes et non l\'ensemble des ports.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"partie-1-produits-importants-pour-la-rochelle","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/partie-1-produits-importants-pour-la-rochelle","datasets":"comparison_products_exports_part_la_rochelle/comparison_products_exports_part_la_rochelle.csv","titre_fr":"Produits dont les valeurs d\'exports sont les plus importantes en 1789 : comparaison de direction des fermes de La Rochelle \xe0 la moyenne fran\xe7aise","comment_lire_fr":"La visualisation permet de comparer la part des principales cat\xe9gories de produits export\xe9s depuis la direction des Fermes de La Rochelle vers l\'\xe9tranger avec la moyenne nationale. On constate par exemple que la r\xe9gion \xe9tudi\xe9e se caract\xe9rise par l\'importance des exportations des eaux-de-vie et du sel; qu\'elle se situe dans la moyenne nationale pour ce qui est des exportations des produits coloniaux (sucre, indigo, caf\xe9: pour ce dernier produit elle d\xe9passe un peu la moyenne), mais qu\'elle ne r\xe9exporte pas une part significative de produits manufactur\xe9s.","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base Toflit18. Apr\xe8s avoir isol\xe9 les flux appropri\xe9s au niveau national et local, les produits ont \xe9t\xe9 agr\xe9g\xe9s au moyen de la classification \\"Revolution & Empire\\" de Toflit18, puis rapport\xe9s \xe0 leur part vis-\xe0-vis des exportations totales sur chacune des deux \xe9chelles. Les ports francs ne sont pas inclus dans les comptages de cette visualisation.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie","datasets":"global_evolution_la_rochelle_imports_exports/global_evolution_la_rochelle_imports_exports.csv","titre_fr":"\xc9volution globale de la part des \xe9changes de La Rochelle par rapport \xe0 l\'ensemble de la France","comment_lire_fr":"Ce graphique permet de visualiser le pourcentage des exportations (en orange) et des importations (en bleu) assur\xe9es par la direction des Fermes de La Rochelle par rapport au total des exportations et des importations de la France. En survolant les barres de chaque ann\xe9e, les donn\xe9es s\'affichent. L\'ensemble permet de constater un d\xe9clin progressif au cours du XVIIIe si\xe8cle, en d\xe9pit d\'un sursaut sans lendemain \xe0 l\'occasion des exp\xe9ditions sous convoi en 1747.","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base Toflit18. Les flux nationaux ont \xe9t\xe9 calcul\xe9s en se fondant sur les enregistrements au niveau national (sources \\"Best Guess National partner\\") et les flux de La Rochelle avec ceux enregistr\xe9s au niveau local (sources \\"Best Guess region prod x part\\"). Les ports francs sont exclus des comptages.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"partie-1-pays-port-d-attache","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/partie-1-pays-port-d-attache","datasets":"origines_bateaux_etrangers_partant_de_la_region/origines_bateaux_etrangers_partant_de_la_region.csv","titre_fr":"Pays d\'attache des navires partant de la r\xe9gion en 1789","comment_lire_fr":"Le graphique permet de visualiser l\'importance des diff\xe9rents pavillons \xe9trangers sortis des ports de la r\xe9gion \xe9tudi\xe9e (Poitou-Aunis-Saintonge). Cette importance se mesure par la somme des tonnages des navires sortis de ces ports, exprim\xe9e en tonneaux (1 tx = 1.44 m\xe8etres cubes). La primaut\xe9 britanniques et des Provinces-Unies \xe9merge ainsi avec force. ","comment_cest_fait_fr":"Les donn\xe9es sont tir\xe9es de la base Navigocorpus. Nous avons d\xe9limit\xe9 les navires partis de la r\xe9gion PASA en 1789. Nous avons ensuite agr\xe9g\xe9 les ports d\'attache des navires \xe9trangers par pays, et calcul\xe9 leur tonnage cumul\xe9.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"partie-1-ports-dattache","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/partie-1-ports-dattache","datasets":"hierarchie_ports_dattache_des_navires_partant_de_la_region/hierarchie_ports_dattache_des_navires_partant_de_la_region.csv","titre_fr":"Ports d\'attache des navires partant de la r\xe9gion PASA en 1789","comment_lire_fr":"Le diagramme permet de visualiser l\'importance respective des diff\xe9rents ports d\'attache des navires dans la navigation \xe0 la sortie des ports de la direction des fermes de La Rochelle en 1789. Nous avons additionn\xe9 le tonnage lors de chaque sortie (pour un m\xeame navire sortant plusieurs fois, son tonnage a \xe9t\xe9 donc multipli\xe9 par le nombre de sorties). La surface des rectangles est proportionnelle au tonnage, exprim\xe9 en tonneaux de mer (1 tx = 1.44 m\xe8tres cubes). Le diagramme permet d\'abord de constater le poids des navires locaux (en vert), leg\xe8rement sup\xe9rieure \xe0 celle des  navires des autres ports fran\xe7ais ext\xe9rieurs \xe0 la r\xe9gion \xe9tudi\xe9e. Elle permet \xe9galement de relativiser la part de la navigation \xe9trang\xe8re: ici les couleurs d\xe9signent chaque pays de l\'\xe9poque. Les rectangles indiquent le toponyme de chaque port avec le tonnage cumul\xe9 sortant. L\'importance des ports fluvieux, comme Port-d\'Enveux, est remarquable.","comment_cest_fait_fr":"Les donn\xe9es sont tir\xe9es de la base Navigocorpus. Nous avons s\xe9lectionn\xe9 les navires partis de la r\xe9gion PASA en 1789. Nous avons ensuite agr\xe9g\xe9 les navires par port d\'attache (fran\xe7ais ou \xe9tranger), et repr\xe9sent\xe9 sur le diagramme leur tonnage cumul\xe9.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"partie-1-ports-destinations","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/partie-1-ports-destinations","datasets":"hierarchie_destinations_des_navires_partant_de_la_region/hierarchie_destinations_des_navires_partant_de_la_region.csv","titre_fr":"Destinations des navires partant depuis la r\xe9gion PASA vers l\'\xe9tranger en 1789","comment_lire_fr":"Le diagramme permet de visualiser l\'importance respective des diff\xe9rentes destinations \xe9trang\xe8res des navires sortis des ports de la direction des fermes de La Rochelle en 1789. Chaque rectangle indique le tonnage cumul\xe9 par destination. La surface des rectangles est proportionnelle au tonnage, exprim\xe9 en tonneaux de mer (1 tx = 1.44 m\xe8tres cubes). La couleur de fond permet de visualiser les ports appartenant au m\xeame Etat de l\'\xe9poque. Il est \xe0 remarquer que parfois la destination est vague: \\"mer Baltique\\". Le diagramme permet de constater le poids des destinations britanniques et des pays de la mer du Nord et de la Baltique. L\'activit\xe9 n\xe9gri\xe8re ressort aussi clairement par les destinations en Afrique (C\xf4te d\'Or et C\xf4te d\'Angole). Chaque rectangle indique le toponyme correspondant avec le tonnage cumul\xe9 sortant. ","comment_cest_fait_fr":"Les donn\xe9es sont tir\xe9es de la base Navigocorpus. Nous avons s\xe9lectionn\xe9 les navires partis de la r\xe9gion PASA en 1789 en direction de l\'\xe9tranger. Nous avons ensuite agr\xe9g\xe9 les donn\xe9es par port d\xe9clar\xe9 comme destination et repr\xe9sent\xe9 leur tonnage cumul\xe9.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"partie-1-ports-dattache-vers-etranger","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/partie-1-ports-dattache-vers-etranger","datasets":"hierarchie_destinations_des_navires_partant_de_la_region_vers_letranger/hierarchie_destinations_des_navires_partant_de_la_region_vers_letranger.csv","titre_fr":"Ports d\u2019attache des navires en direction de l\u2019\xe9tranger en 1789","comment_lire_fr":"Le diagramme permet de visualiser l\'importance respective des diff\xe9rents ports qui arment de navires vers de ports \xe9trangers depuis la direction des fermes de La Rochelle en 1789. Chaque rectangle indique le tonnage cumul\xe9 par port d\'attache. La surface des rectangles est proportionnelle au tonnage, exprim\xe9 en tonneaux de mer (1 tx = 1.44 m\xe8tres cubes). La couleur de fond permet de visualiser les ports appartenant au m\xeame Etat de l\'\xe9poque. Le diagramme permet de constater que l\'essentiel de la navigation avec l\'\xe9tranger de la r\xe9gion \xe9tudi\xe9e est assur\xe9 par des navires \xe9trangers, britanniques, hollandais et scnadinaves pour l\'essentiel. Parmi les ports de la r\xe9gion, La Rochelle domine, suivi par Rochefort: il s\'agit pour l\'essentiel des exp\xe9ditions n\xe9gri\xe8res arm\xe9s vers l\'Afrique, par de navires de tr\xe8s gros tonnage. Chaque rectangle indique le toponyme correspondant avec le tonnage cumul\xe9 sortant.","comment_cest_fait_fr":"Les donn\xe9es sont tir\xe9es de la base Navigo.  Nous avons s\xe9lectionn\xe9 les navires partis de la r\xe9gion PASA en 1789 en direction de l\'\xe9tranger. Nous avons ensuite agr\xe9g\xe9 les donn\xe9es par port d\'attache et repr\xe9sent\xe9 leur tonnage cumul\xe9.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"partie-2-part-navigation-francaise","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/partie-2-part-navigation-francaise","datasets":"part_navigation_fr/part_navigation_fr.csv","titre_fr":"Part de la navigation fran\xe7aise dans la r\xe9gion","comment_lire_fr":"La carte repr\xe9sente le tonnage cumul\xe9 des navires sortis des ports de la r\xe9gion \xe9tudi\xe9e, connu \xe0 partir des cong\xe9s d\xe9livr\xe9s en 1789. L\'aire des disques correspond au tonnage cumul\xe9 des navires sortis de chaque port en 1789. Le tonnage est exprim\xe9 en tonneaux de mer (1 tx = 1.44 m\xe8tres cubes). La couleur permet de distinguer l\'importance de la navigation assur\xe9e par de navires \xe9trangers, d\xe9termin\xe9s \xe0 partir de l\'indication de leur port d\'attache: on constate que quelques tr\xe8s petits ports (en violet) ne sont pas fr\xe9quent\xe9s par de navires \xe9trangers. Les ports les plus ouverts \xe0 la navigation \xe9trang\xe8re (en orange) ne sont toutefois pas forc\xe9ment les plus importants par tonnage total : on distingue ainsi Rochefort, dont l\'arsenal est approvisionn\xe9 par les navires du Nord de l\'Europe, le port de Tonnay-Charente, grand exportateur d\'eau-de-vie, et les ports du sel (\xeele de R\xe9 et Noirmoutier)","comment_cest_fait_fr":"Les donn\xe9es proviennent de la base Navigocorpus, et concernent les d\xe9parts de navires en 1789 depuis les ports de la r\xe9gion Poitou-Aunis-Saintonge \xe9tudi\xe9e (*pointcalls* observ\xe9s).L\'aire des disques correspond au tonnage cumul\xe9 des navires sortis de chaque port en 1789. Leur couleur correspond \xe0 la part de la navigation fran\xe7aise pour les d\xe9parts qui les concerne, d\xe9termin\xe9e \xe0 partir du port d\'attache des navires.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"partie-3-comparaison-exports-coloniaux","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/partie-3-comparaison-exports-coloniaux","datasets":"comparaison_exports_coloniaux/comparaison_exports_coloniaux.csv","titre_fr":"Comparaison des exports de produits coloniaux, locaux et autres par bureaux des fermes","comment_lire_fr":"","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base Toflit18, et plus sp\xe9cifiquement des \xe9tats d\'exports vers l\'\xe9tranger (ports francs non pris en compte). Les flux ont \xe9t\xe9 class\xe9s en trois cat\xe9gories en fonction du type de produits commerc\xe9s. Un produit marqu\xe9 comme originaire de l\'une des provinces de la r\xe9gion PASA a \xe9t\xe9 class\xe9 \\"produit local\\", un produit tombant dans les cat\xe9gories \'Caf\xe9\', \'Sucre\', \'Indigo\', ou \'Coton non transform\xe9\' de la classification \\"R\xe9volution & Empire\\" de Toflit18 a \xe9t\xe9 class\xe9 comme \\"produit colonial\\". Les produits restants ont \xe9t\xe9 regroup\xe9s dans une classe \\"autres produits\\".","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"partie-2-carte-direction-bateaux-de-la-rochelle","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/partie-2-carte-direction-bateaux-de-la-rochelle","datasets":"map_backgrounds/map_world_1789.geojson,voyages-bateaux-homeport-larochelle-1787/voyages-bateaux-homeport-larochelle-1787.csv","titre_fr":"Voyages des navires rattach\xe9s au port de La Rochelle en 1787","comment_lire_fr":"","comment_cest_fait_fr":"Le fond de carte de la visualisation a \xe9t\xe9 constitu\xe9 en agr\xe9geant de multiples sources et en les mettant en coh\xe9rence avec des m\xe9thodes de g\xe9omatique. Les donn\xe9es visualis\xe9es sont tir\xe9es des flux enregistr\xe9s dans Navigo pour 1787 et concernant uniquement les navires dont le port d\'attache est La Rochelle.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"sorties-de-sel","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/sorties-de-sel","datasets":"out_with_salt_by_port/out_with_salt_by_port.csv","titre_fr":"Ports de d\xe9part des navires transportant du sel en 1789 depuis la r\xe9gion PASA, agr\xe9g\xe9s par tonnage cumul\xe9","comment_lire_fr":"","comment_cest_fait_fr":"Les donn\xe9es de cette visualisations ont tir\xe9es de la base de donn\xe9es Navigo. Plus pr\xe9cis\xe9ment, il s\'agit des indications de d\xe9parts de port (*pointcalls* de sortie de port) mentionnant du sel en cargaison principale ou secondaire. La quantification est r\xe9alis\xe9e en fonction du tonnage cumul\xe9 des navires. Note : les navires pouvant transporter plusieurs marchandises diff\xe9rentes, le tonnage des navires ne doit pas \xeatre confondu avec la quantit\xe9 de sel transport\xe9e, qui reste inconnue.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"sorties-de-marennes","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/sorties-de-marennes","datasets":"sorties-de-marennes/sorties-de-marennes.csv","titre_fr":"Destination des navires partant de Marennnes en 1789, agr\xe9g\xe9es par pays et par tonnage cumul\xe9","comment_lire_fr":"","comment_cest_fait_fr":"Les donn\xe9es de cette visualisations ont tir\xe9es de la base de donn\xe9es Navigo. Plus pr\xe9cis\xe9ment, il s\'agit des indications de d\xe9parts (*pointcalls* de sortie de port) du port de Marennes en 1789. La quantification est r\xe9alis\xe9e en fonction du tonnage cumul\xe9 des navires.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"exports-eau-de-vie-la-rochelle-longitudinal","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/exports-eau-de-vie-la-rochelle-longitudinal","datasets":"exports_eau_de_vie_la_rochelle_longitudinal/exports_eau_de_vie_la_rochelle_longitudinal.csv","titre_fr":"\xc9volution des exports d\'eau-de-vie et liqueurs par la direction de La Rochelle (ports francs non pris en compte)","comment_lire_fr":"","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base de donn\xe9es toflit18, et plus pr\xe9cis\xe9ment des mentions d\'exports vers l\'\xe9tranger (ports francs non pris en compte) de produits tombant dans la cat\xe9gorie \\"eaux-de-vie et liqueurs\\" de la classification \\"r\xe9volution & empire\\" de toflit18, pour la direction de La Rochelle. Les flux tir\xe9s de son groupe de sources \\"Best Guess customs region prod x partner\\" qui permettent de raisonner au niveau des directions des fermes (et non de l\'ensemble de la France). La quantification est r\xe9alis\xe9e en fonction de la valeur des exports en livres tournois.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"exports-eau-de-vie-comparaison-directions-des-fermes","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/exports-eau-de-vie-comparaison-directions-des-fermes","datasets":"exports_eau_de_vie_comparaison_directions_des_fermes/exports_eau_de_vie_comparaison_directions_des_fermes.csv","titre_fr":"Comparaison des exports d\'eau-de-vie et liqueurs par diff\xe9rentes directions des fermes (ports francs non pris en compte)","comment_lire_fr":"","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base de donn\xe9es toflit18, et plus pr\xe9cis\xe9ment des mentions d\'exports vers l\'\xe9tranger (ports francs non pris en compte) de produits tombant dans la cat\xe9gorie \\"eaux-de-vie et liqueurs\\" de la classification \\"r\xe9volution & empire\\" de toflit18, pour la direction de La Rochelle. Les flux tir\xe9s de son groupe de sources \\"Best Guess customs region prod x partner\\" qui permettent de raisonner au niveau des directions des fermes (et non de l\'ensemble de la France). La quantification est r\xe9alis\xe9e en fonction de la valeur des exports en livres tournois.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""},{"id":"origines-exports-eau-de-vie-1789-la-rochelle","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/visualization/origines-exports-eau-de-vie-1789-la-rochelle","datasets":"origines_exports_eau_de_vie_1789_la_rochelle/origines_exports_eau_de_vie_1789_la_rochelle.csv","titre_fr":"Origine des exports d\'eau-de-vie de la direction des fermes de La Rochelle en 1789 (ports francs non pris en compte)","comment_lire_fr":"","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base de donn\xe9es toflit18, et plus pr\xe9cis\xe9ment des mentions d\'exports vers l\'\xe9tranger (ports francs non pris en compte) de produits tombant dans la cat\xe9gorie \\"eaux-de-vie et liqueurs\\" de la classification \\"r\xe9volution & empire\\" de toflit18, pour la direction de La Rochelle. Les flux tir\xe9s de son groupe de sources \\"Best Guess customs region prod x partner\\" qui permettent de raisonner au niveau des directions des fermes (et non de l\'ensemble de la France). La quantification est r\xe9alis\xe9e en fonction de la valeur des exports en livres tournois.","titre_en":"","comment_lire_en":"","comment_cest_fait_en":""}]')},534:function(e,t,a){},537:function(e,t,a){},538:function(e,t,a){},539:function(e,t,a){},540:function(e,t,a){},56:function(e,t,a){"use strict";var n=a(10),r=a(21),i=a(7),s=a(9),o=a(659),c=a(55),l=a(217),d=a(279),u=a(119),p=a(2),m=a(22),f=a(62),b=a(24),h=a(19),j=a(16),g=a(1),v=h.a.generic,O=function(e){var t=e.data,a=e.title,r=(e.orientation,e.layout),h=void 0===r?"stack":r,O=e.width,x=void 0===O?1e3:O,y=e.height,_=void 0===y?400:y,w=e.color,q=e.x,N=e.y,L=e.tooltip,k=e.margins,C=void 0===k?{}:k,M=e.annotations,T=void 0===M?[]:M,P=Object(p.useState)(0),R=Object(s.a)(P,2),A=R[0],S=R[1],z=Object(p.useRef)(null),F=Object(p.useRef)(null),E=Object(j.c)(x),B=Object(j.c)(_-A);Object(p.useEffect)((function(){b.a.rebuild()})),Object(p.useEffect)((function(){setTimeout((function(){var e=F.current?F.current.getBoundingClientRect().height:0;S(e)}))}),[E,B,w,t]);var D,I,Y=Object(n.a)({left:100,top:30,bottom:20,right:20},C),H=N.tickFormat,X=N.tickSpan,W=N.domain,G=N.field,V=N.sort,U=void 0===V?{}:V,J=q.tickFormat,Z=q.tickSpan,Q=q.domain,K=q.fillGaps,$=q.field,ee=q.sort,te=void 0===ee?{}:ee,ae=U.field,ne=void 0===ae?G:ae,re=U.ascending,ie=void 0===re||re,se=U.type,oe=void 0===se?"number":se,ce=U.autoSort,le=void 0!==ce&&ce,de=te.field,ue=void 0===de?$:de,pe=te.ascending,me=void 0===pe||pe,fe=te.type;if(w&&(I=Object(m.uniq)(t.map((function(e){return e[w.field]})))),w&&w.palette)D=w.palette;else if(w){var be=Object(j.d)(w.field,I.length);D=I.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(i.a)({},t,be[a]))}),{})}var he=Object(m.uniq)(t.filter((function(e){return+e[N.field]})).map((function(e){return e[q.field]}))),je=E-Y.left-Y.right,ge=he,ve=he.length,Oe=je/ve,xe=Object(o.a)().domain(ge).range([Y.left+Oe/2,E-Y.right-Oe/2]);if(Q)ve=(he=ge=Object(l.a)(Q)).length,Oe=je/ve,xe=Object(c.a)().domain(Object(d.a)(ge)).range([Y.left+Oe/2,E-Y.right-Oe/2]).nice();else if(K){var ye=Object(d.a)(he.filter((function(e){return+e})).map((function(e){return+e})));Z&&(ye[0]=ye[0]-ye[0]%Z,ye[1]=ye[1]+ye[1]%Z),ve=(he=ge=Object(l.a)(ye[0],ye[1])).length,Oe=je/ve,xe=Object(c.a)().domain(Object(d.a)(ge)).range([Y.left+Oe/2,E-Y.right-Oe/2]).nice()}var _e=Object.entries(Object(m.groupBy)(t,(function(e){return e[q.field]}))),we=W||"stack"===h?[0,Object(u.a)(_e.map((function(e){var t=Object(s.a)(e,2);t[0];return t[1].reduce((function(e,t){return e+ +t[N.field]}),0)})))]:[0,Object(u.a)(t.map((function(e){return+e[N.field]})))],qe="stack"===h?Oe/2:Oe/I.length*.5,Ne=Object(c.a)().domain(we).range([B-Y.bottom,Y.top]).nice(),Le=Ne.copy().range([0,B-Y.bottom-Y.top]),ke=Z?Object(l.a)(ge[0],ge[ge.length-1],Z):he,Ce=Object(f.axisPropsFromTickScale)(Ne,10).values;return X&&(we[0]=we[0]-we[0]%X,we[1]=we[1]+(X-we[0]%X),Ce=Object(l.a)(we[0],we[1],X),Ne.domain(we)),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("figure",{style:{width:x,height:_},className:"BarChart is-horizontal GenericVisualization",children:[Object(g.jsx)("div",{ref:F,className:"row",children:a?Object(g.jsx)("h5",{className:"visualization-title",style:{marginLeft:Y.left},children:a}):null}),Object(g.jsxs)("div",{className:"row vis-row",children:[Object(g.jsxs)("svg",{className:"chart",width:E,height:B,children:[Object(g.jsxs)("g",{className:"axis left-axis ticks",children:[Object(g.jsx)("text",{x:Y.left-10,y:Y.top-15,className:"axis-title",children:N.title||N.field}),Ce.map((function(e,t){return Object(g.jsxs)("g",{transform:"translate(0, ".concat(Ne(e),")"),children:[Object(g.jsx)("text",{x:Y.left-10,y:3,children:"function"===typeof H?H(e,t):e}),Object(g.jsx)("line",{className:"tick-mark",x1:Y.left-5,x2:Y.left,y1:0,y2:0}),Object(g.jsx)("line",{className:"background-line",x1:Y.left,x2:xe(ke[ke.length-1]),y1:0,y2:0})]},e)}))]}),Object(g.jsx)("g",{className:"axis bottom-axis ticks",children:ke.map((function(e,t){return Object(g.jsxs)("g",{transform:"translate(".concat(xe(e),", 0)"),children:[Object(g.jsx)("text",{x:0,y:B-Y.bottom+20,children:"function"===typeof J?J(e,t):e}),Object(g.jsx)("line",{className:"background-line",x1:0,x2:0,y1:Ne(Ce[Ce.length-1]),y2:B-Y.bottom}),Object(g.jsx)("line",{className:"tick-mark",x1:0,x2:0,y1:B-Y.bottom,y2:B-Y.bottom+5})]},e)}))}),Object(g.jsxs)("g",{className:"annotations-container",children:[T.filter((function(e){return"x"===e.axis})).map((function(e,t){var a=e.start,n=e.end,r=e.label,i=e.labelPosition,s=void 0===i?20:i,o=Object(j.c)(B-Ne(Ce[Ce.length-1])-Y.bottom),c=B-Y.bottom,l=Ne(Ce[Ce.length-1]);return Object(g.jsxs)("g",{className:"annotation x-axis-annotation",children:[Object(g.jsx)("rect",{x:xe(a),width:Object(j.c)(xe(n)-xe(a)),height:o,y:l,fill:"url(#diagonalHatch)",opacity:.4}),Object(g.jsx)("line",{x1:xe(a),x2:xe(a),y1:c,y2:l,stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(g.jsx)("line",{x1:xe(n),x2:xe(n),y1:c,y2:l,stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(g.jsx)("line",{x1:xe(n)+20,x2:xe(n)+10,y1:l+s-5,y2:l+s-5,stroke:"grey",markerEnd:"url(#arrowhead)"}),Object(g.jsx)("text",{x:xe(n)+22,y:l+s,fontSize:".5rem",fill:"grey",children:r}),Object(g.jsx)("defs",{children:Object(g.jsx)("marker",{id:"arrowhead",markerWidth:"5",markerHeight:"5",refX:"0",refY:"2.5",orient:"auto",children:Object(g.jsx)("polygon",{stroke:"grey",fill:"transparent",points:"0 0, 5 2.5, 0 5"})})}),Object(g.jsx)("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:Object(g.jsx)("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"grey",opacity:.5,strokeWidth:1}})})]},t)})),T.filter((function(e){return"y"===e.axis})).map((function(e,t){var a=e.start,n=e.end,r=e.label,i=e.labelPosition,s=void 0===i?20:i,o=Y.left,c=xe(ke[ke.length-1]);return Object(g.jsxs)("g",{className:"annotation y-axis-annotation",children:[Object(g.jsx)("rect",{x:o,width:Object(j.c)(c-o),y:Ne(a),height:Object(j.c)(Ne(n)-Ne(a)),fill:"url(#diagonalHatch)",opacity:.4}),Object(g.jsx)("line",{x1:o,x2:c,y1:Ne(a),y2:Ne(a),stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(g.jsx)("line",{x1:o,x2:c,y1:Ne(n),y2:Ne(n),stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(g.jsx)("line",{x1:o+s-5,x2:o+s-5,y1:Ne(a)-15,y2:Ne(a)-5,stroke:"grey",markerEnd:"url(#arrowhead)"}),Object(g.jsx)("text",{x:o+s,y:Ne(a)-10,fontSize:".5rem",fill:"grey",children:r}),Object(g.jsx)("defs",{children:Object(g.jsx)("marker",{id:"arrowhead",markerWidth:"5",markerHeight:"5",refX:"0",refY:"2.5",orient:"auto",children:Object(g.jsx)("polygon",{stroke:"grey",fill:"transparent",points:"0 0, 5 2.5, 0 5"})})}),Object(g.jsx)("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:Object(g.jsx)("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"grey",opacity:.5,strokeWidth:1}})})]},t)}))]}),Object(g.jsx)("g",{className:"bars-container",children:_e.sort((function(e,t){var a=me?1:-1;return ue===q.field?("number"===fe?+e[0]:e[0])<("number"===fe?+t[0]:t[0])?-1*a:1*a:("number"===fe?+e[1].reduce((function(e,t){return e+ +t[ue]}),0):e[1][ue])<("number"===fe?+t[1].reduce((function(e,t){return e+ +t[ue]}),0):t[1][ue])?-1*a:1*a})).map((function(e,t){var a=Object(s.a)(e,2),n=(a[0],a[1]),r=B-Y.bottom;return Object(g.jsx)("g",{transform:"translate(".concat(xe(n[0][q.field]),", 0)"),children:n.sort((function(e,t){if(!le)return 0;var a=ie?1:-1;return("number"===oe?+e[ne]:e[ne])>+("number"===oe?+t[ne]:t[ne])?-1*a:1*a})).map((function(e,a){var i="stack"===h?-qe/2:a*(.5*Oe/n.length)-Oe/4,s="stack"===h?Le(e[N.field]):B-Y.bottom-Ne(e[N.field])||0,o="stack"===h?r-s:Ne(e[N.field]);"stack"===h&&(r-=s);var c=D?D[e[w.field]]:v.dark;return Object(g.jsx)(g.Fragment,{children:+e[N.field]>0?Object(g.jsx)("rect",{fill:c,width:Object(j.c)(qe),x:i,y:o,height:Object(j.c)(s),"data-for":"bar-tooltip","data-tip":"function"===typeof L?L(e,a,t):void 0},a):null})}))},t)}))})]}),w?Object(g.jsxs)("div",{className:"ColorLegend",ref:z,style:{top:A},children:[Object(g.jsx)("h5",{children:w.title||"L\xe9gende"}),Object(g.jsx)("ul",{className:"color-legend",children:Object.entries(D).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(g.jsxs)("li",{children:[Object(g.jsx)("span",{className:"color-box",style:{background:n}}),Object(g.jsx)("span",{className:"color-label",children:a})]},a)}))})]}):null]})]}),Object(g.jsx)(b.a,{id:"bar-tooltip"})]})},x=h.a.generic,y=function(e){var t=e.data,a=e.title,r=e.layout,o=void 0===r?"stack":r,d=e.width,h=void 0===d?1200:d,v=e.height,O=void 0===v?1200:v,y=e.color,_=e.y,w=e.x,q=e.tooltip,N=e.margins,L=void 0===N?{}:N,k=Object(p.useState)(0),C=Object(s.a)(k,2),M=C[0],T=C[1],P=Object(p.useState)(0),R=Object(s.a)(P,2),A=R[0],S=R[1],z=Object(p.useRef)(null),F=Object(p.useRef)(null),E=Object(j.c)(h-A),B=Object(j.c)(O-M);Object(p.useEffect)((function(){b.a.rebuild()})),Object(p.useEffect)((function(){setTimeout((function(){var e=F.current?F.current.getBoundingClientRect().height:0,t=z.current?z.current.getBoundingClientRect().width:0;T(e),S(t)}))}),[E,B,y,t]);var D,I,Y=Object(n.a)({left:100,top:30,bottom:20,right:30},L),H=w.tickFormat,X=w.tickSpan,W=w.domain,G=w.field,V=w.sort,U=void 0===V?{}:V,J=_.rowHeight,Z=_.formatLabel,Q=_.field,K=_.sort,$=void 0===K?{}:K,ee=$.field,te=void 0===ee?Q:ee,ae=$.autoSort,ne=void 0!==ae&&ae,re=$.ascending,ie=void 0===re||re,se=$.type,oe=U.field,ce=void 0===oe?G:oe,le=U.ascending,de=void 0===le||le,ue=U.type,pe=void 0===ue?"number":ue;if(y&&(I=Object(m.uniq)(t.map((function(e){return e[y.field]})))),y&&y.palette)D=y.palette;else if(y){var me=Object(j.d)(y.field,I.length);D=I.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(i.a)({},t,me[a]))}),{})}var fe=Object(m.uniq)(t.map((function(e){return e[_.field]}))).length,be=J?J*fe:B-M,he=Object(j.c)(J||be/fe),je=Object.entries(Object(m.groupBy)(t,(function(e){return e[_.field]}))),ge=W||"stack"===o?[0,Object(u.a)(je.map((function(e){var t=Object(s.a)(e,2);t[0];return t[1].reduce((function(e,t){return e+ +t[w.field]}),0)})))]:[0,Object(u.a)(t.map((function(e){return+e[w.field]})))],ve="stack"===o?he/2:he/I.length*.5,Oe=Object(c.a)().domain(ge).range([0,E-Y.left-Y.right]).nice(),xe=Oe.copy().range([0,E-Y.left-Y.right]),ye=Object(f.axisPropsFromTickScale)(Oe,10).values;X&&(ge[0]=ge[0]-ge[0]%X,ge[1]=ge[1]+ge[1]%X,ye=Object(l.a)(ge[0],ge[1],X),Oe.domain(ge));var _e=be+Y.top+Y.bottom,we=O>_e+M?O:_e+M;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("figure",{style:{width:h,height:we},className:"BarChart is-vertical GenericVisualization",children:[Object(g.jsx)("div",{ref:F,className:"row",children:a?Object(g.jsx)("h5",{className:"visualization-title",style:{marginLeft:Y.left},children:a}):null}),Object(g.jsxs)("div",{className:"row vis-row",children:[Object(g.jsxs)("svg",{className:"chart",width:E,height:_e,children:[Object(g.jsx)("g",{className:"axis top-axis ticks",children:ye.map((function(e,t){return Object(g.jsxs)("g",{transform:"translate(".concat(Y.left+Oe(e),", 0)"),children:[Object(g.jsx)("text",{x:0,y:Y.top-5,children:"function"===typeof H?H(e,t):e}),Object(g.jsx)("line",{className:"background-line",x1:0,x2:0,y1:Y.top,y2:be+Y.top}),Object(g.jsx)("text",{x:0,y:_e-Y.bottom+10,children:"function"===typeof H?H(e,t):e})]},t)}))}),Object(g.jsx)("g",{className:"bars-container",children:je.sort((function(e,t){if(!ne)return 0;var a=ie?1:-1;return te===_.field?("number"===se?+e[0]:e[0])<("number"===se?+t[0]:t[0])?-1*a:1*a:("number"===se?+e[1].reduce((function(e,t){return e+ +t[te]}),0):e[1][te])<("number"===se?+t[1].reduce((function(e,t){return e+ +t[te]}),0):t[1][te])?-1*a:1*a})).map((function(e,t){var a=Object(s.a)(e,2),n=a[0],r=a[1],i=Y.left;return Object(g.jsxs)("g",{transform:"translate(0, ".concat(Y.top+he*t,")"),children:[Object(g.jsx)("foreignObject",{x:0,y:"stack"===o?ve/4:ve*r.length/2,width:Y.left,height:he,children:Object(g.jsx)("div",{className:"vertical-bar-label",children:Object(g.jsx)("div",{children:"function"===typeof Z?Z(n,t):n})})}),r.sort((function(e,t){if(!ne)return 0;var a=de?1:-1;return("number"===pe?+e[ce]:e[ce])>+("number"===pe?+t[ce]:t[ce])?-1*a:1*a})).map((function(e,a){var n="stack"===o?ve/2:a*(.5*he/r.length)+he/4,s="stack"===o?xe(+e[w.field]):Oe(e[w.field]),c="stack"===o?i:Y.left;"stack"===o&&(i+=s);var l=D?D[e[y.field]]:x.dark;return Object(g.jsx)(g.Fragment,{children:+e[w.field]>0?Object(g.jsx)("rect",{fill:l,width:Object(j.c)(s),x:c,y:n,height:Object(j.c)(ve-1),"data-for":"bar-tooltip","data-tip":"function"===typeof q?q(e,a,t):void 0},a):null})}))]},t)}))})]}),y?Object(g.jsxs)("div",{className:"ColorLegend",ref:z,style:{top:M},children:[Object(g.jsx)("h5",{children:y.title||"L\xe9gende"}),Object(g.jsx)("ul",{className:"color-legend",children:Object.entries(D).map((function(e,t){var a=Object(s.a)(e,2),n=a[0],r=a[1];return Object(g.jsxs)("li",{children:[Object(g.jsx)("span",{className:"color-box",style:{background:r}}),Object(g.jsx)("span",{className:"color-label",children:n})]},t)}))})]}):null]})]}),Object(g.jsx)(b.a,{id:"bar-tooltip"})]})},_=["orientation"],w=function(e){var t=e.orientation,a=void 0===t?"horizontal":t,i=Object(r.a)(e,_);return"horizontal"===a?Object(g.jsx)(O,Object(n.a)({},i)):Object(g.jsx)(y,Object(n.a)({},i))};t.a=w},590:function(e,t,a){},591:function(e,t,a){},632:function(e,t,a){},634:function(e,t,a){},635:function(e,t,a){var n={"./en/about.mdx":[225],"./en/footer.mdx":[642,5],"./en/introduction.mdx":[216],"./en/metadata":[338,0],"./en/metadata.js":[338,0],"./en/part-1.mdx":[219],"./en/part-2-1.mdx":[643,6],"./en/part-2-2.mdx":[644,7],"./en/part-2-3.mdx":[645,8],"./en/part-2-intro.mdx":[221],"./en/part-3.mdx":[223],"./en/references.mdx":[227],"./en/test-scrolly.mdx":[646,9],"./en/tests.mdx":[228],"./fr/a-propos.mdx":[224],"./fr/footer.mdx":[121],"./fr/introduction.mdx":[215],"./fr/metadata":[339,1],"./fr/metadata.js":[339,1],"./fr/partie-1.mdx":[218],"./fr/partie-2.mdx":[220],"./fr/partie-3.mdx":[222],"./fr/references.mdx":[226],"./fr/test-scrolly.mdx":[647,10],"./fr/tests.mdx":[229]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a(r)}))}r.keys=function(){return Object.keys(n)},r.id=635,e.exports=r},636:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),i=a(42),s=(a(387),a(7)),o=a(10),c=a(8),l=a(9),d=a(37),u=a(40),p=a(311),m=a.n(p),f=a(637),b=a(669),h=a(68),j=a.n(h),g=a(75),v=a(17),O=a.n(v),x=a(24),y=a(78),_=a(95),w=a(215),q=a(216),N=a(96),L=a(314),k=a.n(L),C=a(159),M=a(21),T=a(1),P=function(e){var t=e.datasets,a=void 0===t?{}:t;return Object(T.jsxs)("div",{className:"Test",children:[Object(T.jsx)("div",{children:"Ceci est un appel pour une visualisation qui n'a pas encore \xe9t\xe9 d\xe9velopp\xe9e"}),Object.keys(a).length?Object(T.jsxs)("div",{children:[Object(T.jsx)("h3",{children:"Datasets de la visualisation :"}),Object.entries(a).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(T.jsxs)("div",{children:[Object(T.jsx)("h3",{children:a}),Object(T.jsx)("pre",{children:Object(T.jsx)("code",{children:JSON.stringify(n,null,2)})})]},a)}))]}):null]})},R=a(659),A=a(163),S=a(55),z=a(22),F=a.n(z),E=a(279),B=a(119),D=a(62),I=a(19),Y=a(16),H=function(e){for(var t=Math.round(+e)+"",a="",n=0,r=t.length-1;r>=0;r--){a=t[r]+a,3===++n&&(n=0,a=","+a)}return","===a[0]&&(a=a.slice(1)),a},X=function(e){var t=e.data,a=e.absoluteField,r=e.shareField,i=e.herfindhalField,s=e.width,o=e.height,d=e.axisLeftTitle,u=e.axisRightTitle,p=e.startYear,m=e.endYear,f=e.fillGaps,b=e.barTooltipFn,h=e.cityName,j=e.highlightYears,g=e.title,v=e.colorScaleMessages,y=e.annotations,_=void 0===y?[]:y,w=e.margins,q=Object(n.useMemo)((function(){return t.filter((function(e){return+e.year>=p&+e.year<=m}))}),[p,m,t]),N=Object(n.useRef)(null),L=Object(n.useRef)(null),k=Object(n.useState)(o),C=Object(l.a)(k,2),M=C[0],P=C[1];Object(n.useEffect)((function(){setTimeout((function(){var e=o;N&&N.current&&(e=o-N.current.offsetHeight,L&&L.current&&(e-=L.current.offsetHeight)),P(e),x.a.rebuild()}))}),[o]);var F=Object(E.a)(q.map((function(e){return+e.year}))),X=z.range.apply(void 0,Object(c.a)(F)),W=Object(R.a)().domain([].concat(Object(c.a)(X),[m,m+1])).range([w.left,s-w.right]).padding(.1),G=Object(A.a)().domain(Object(E.a)(q,(function(e){return+e[i]}))).range([I.a.generic.accent2,"grey"]),V=W.domain().map((function(e){return+e})).filter((function(e){return e%5===0})),U=Object(S.a)().domain([0,Object(B.a)(q,(function(e){return+e[a]}))]).nice().range([M-w.bottom,w.top]),J=Object(S.a)().domain([0,Object(B.a)(q,(function(e){return+e[r]}))]).nice().range([M-w.bottom,w.top]),Z=Object(D.axisPropsFromTickScale)(U,Math.round(M/20)).values,Q=Object(D.axisPropsFromTickScale)(J,Math.round(M/20)).values;return J.domain()[1]-J.domain()[0]<=5&&(Q=Object(D.axisPropsFromTickScale)(J,5).values),Object(T.jsxs)("div",{className:O()("LongitudinalTradeChart",{"has-highlights":void 0!==j}),children:[Object(T.jsxs)("div",{className:"chart-header",ref:N,children:[Object(T.jsx)("h3",{className:"visualization-title",style:{marginLeft:w.left},children:g}),Object(T.jsxs)("div",{className:"axis-headers-container",children:[Object(T.jsx)("div",{style:{background:d&&d.length?I.a.generic.accent2:void 0,marginLeft:w.left},className:"axis-header axis-header-left",children:d}),v?Object(T.jsx)("div",{className:"color-scale-container",children:Object(T.jsxs)("div",{className:"color-scale-detail",children:[Object(T.jsx)("div",{className:"bar",style:{background:"linear-gradient(to right, ".concat(G(G.domain()[0]),", ").concat(G(G.domain()[1]),")")}}),Object(T.jsxs)("div",{className:"labels",children:[Object(T.jsx)("span",{children:v.maximum}),Object(T.jsx)("span",{children:v.minimum})]})]})}):null,Object(T.jsx)("div",{style:{background:u&&u.length?I.a.generic.accent1:void 0,marginRight:w.right},className:"axis-header axis-header-right",children:u})]})]}),Object(T.jsxs)("svg",{width:s,height:M,children:[Object(T.jsx)("g",{className:"axis axis-left",children:Q.map((function(e){return Object(T.jsxs)("g",{className:"axis-group",children:[Object(T.jsx)("line",{x1:.8*w.left,x2:w.left,y1:J(e),y2:J(e),stroke:I.a.generic.accent2}),Object(T.jsx)("line",{x1:w.left,x2:s-w.right,y1:J(e),y2:J(e),stroke:I.a.generic.accent2,strokeDasharray:"2, 2",opacity:.2}),Object(T.jsx)("text",{x:.7*w.left,y:J(e)+M/100,fill:I.a.generic.accent2,children:Math.round(100*+e)+"%"})]},e)}))}),Object(T.jsx)("g",{className:"axis axis-right",children:Z.map((function(e){return Object(T.jsxs)("g",{className:"axis-group",children:[Object(T.jsx)("line",{x1:W(V[0])+W.bandwidth()/2,x2:W(V[V.length-1]),y1:U(e),y2:U(e),stroke:I.a.generic.accent1,strokeDasharray:"4, 2",opacity:.5}),Object(T.jsx)("text",{x:s-w.right+2,y:U(e)+M/100,fill:I.a.generic.accent1,children:e>0?Math.round(e/1e6)+"m livres t.":0})]},e)}))}),Object(T.jsxs)("g",{className:"axis axis-bottom",children:[Object(T.jsx)("line",{y1:M-w.bottom,y2:M-w.bottom,x1:W(V[0])+W.bandwidth()/2,x2:W(V[V.length-1])+W.bandwidth()/2,stroke:"lightgrey"}),V.map((function(e,t){var a=W(e)+W.bandwidth()/2,n=M-w.bottom;return Object(T.jsxs)("g",{className:"axis-group",transform:"translate(".concat(a,", ").concat(n,")"),children:[Object(T.jsx)("line",{x1:0,x2:0,y1:0,y2:w.bottom/6,stroke:"grey"}),Object(T.jsx)("g",{transform:"translate(".concat(.5*W.bandwidth(),", ").concat(w.bottom/2,")"),children:Object(T.jsx)("text",{fill:"grey",children:e})})]},t)}))]}),Object(T.jsx)("g",{className:"annotations-container",children:_.filter((function(e){var t=e.startYear,a=e.endYear;return t>=p&&a<=m})).map((function(e,t){var a=e.startYear,n=e.endYear+1;return Object(T.jsxs)("g",{className:"annotation",children:[Object(T.jsx)("rect",{x:W(a),width:W(n)-W(a),height:Object(Y.c)(M-w.top-w.bottom),y:w.top,fill:"url(#diagonalHatch)",opacity:.4}),Object(T.jsx)("line",{x1:W(a),x2:W(a),y1:w.top,y2:M-w.bottom,stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(T.jsx)("line",{x1:W(n),x2:W(n),y1:w.top,y2:M-w.bottom,stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(T.jsx)("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:Object(T.jsx)("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"grey",opacity:.5,strokeWidth:1}})})]},t)}))}),Object(T.jsx)("g",{className:"bars-container",children:q.map((function(e){return Object(T.jsx)("rect",{x:W(+e.year),y:J(e[r]),width:W.bandwidth(),height:Object(Y.c)(J(0)-J(e[r])),fill:i&&e[i]?G(+e[i]):I.a.generic.dark,"data-tip":b?b(e.year,(100*e[r]).toFixed(2),h,e[i]&&(+e[i]||0).toFixed(2)).replace("[colorBox]",'<span style="display:inline-block;width: .8em;height:.8em;background:'.concat(G(+e[i]||0),'"></span>')):void 0,"data-for":h,"data-effect":"solid","data-html":!0,"data-class":"bar-tooltip","data-place":"left",className:O()("graph-bar",{"is-highlighted":j&&j.includes(+e.year)})},e.year)}))}),Object(T.jsxs)("g",{className:"lines-container",children:[q.sort((function(e,t){return+e.year>+t.year?1:-1})).filter((function(e){return+e[a]})).map((function(e,t){var n=W(+e.year)+W.bandwidth()/2,r=U(+e[a]);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("circle",{cx:n,cy:r,r:.005*s,fill:"transparent","data-tip":"".concat(e.year," : export de <strong>").concat(H(+e[a]),"</strong> livres tournois."),"data-for":h,"data-class":"bar-tooltip","data-html":!0},t),Object(T.jsx)("circle",{cx:n,cy:r,r:1.5,fill:I.a.generic.accent1},t+"a")]})})),q.sort((function(e,t){return+e.year>+t.year?1:-1})).map((function(e,t){var n=q[t+1];if(t!==q.length-1&&!f&&+n.year!==+e.year+1)return null;if(!n)return null;var r=W(+e.year)+W.bandwidth()/2,i=W(+n.year)+W.bandwidth()/2,s=U(+e[a]),o=U(+n[a]);if(!+e[a]||!+n[a])return null;var c=+n[a]>+e[a]?+n[a]/+e[a]-1:-(1-+n[a]/+e[a]);return Object(T.jsx)("line",{x1:r,x2:i,y1:s,y2:o,stroke:I.a.generic.accent1,title:"".concat(e.year,"-").concat(n.year),strokeWidth:2,"data-tip":"".concat(e.year," \u2192 <strong>").concat(H(+e[a]),"</strong> livres tournois <br/>").concat(n.year," \u2192 <strong>").concat(H(+n[a]),"</strong> livres tournois<br/><i>(").concat(c>0?"+":"").concat(Math.round(100*c),"%)</i>"),"data-for":h,"data-class":"bar-tooltip","data-html":!0},e.year)}))]}),Object(T.jsx)("g",{className:"annotations-container",children:_.filter((function(e){var t=e.startYear,a=e.endYear;return t>=p&&a<=m})).map((function(e,t){var a=e.startYear,n=e.endYear,r=e.label,i=e.row,s=void 0===i?0:i,o=e.labelPosition,c=void 0===o?"right":o,l=n+1;return Object(T.jsxs)("g",{className:"annotation",children:["right"===c?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("line",{x1:W(l)+20,x2:W(l)+10,y1:w.top+7.5+20*s,y2:w.top+7.5+20*s,stroke:"grey",markerEnd:"url(#arrowhead)"}),Object(T.jsx)("text",{x:W(l)+22,y:w.top+10+20*s,fontSize:".5rem",fill:"grey",children:r})]}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("line",{x1:W(a)-20,x2:W(a)-10,y1:w.top+7.5+20*s,y2:w.top+7.5+20*s,stroke:"grey",markerEnd:"url(#arrowhead)"}),Object(T.jsx)("text",{x:W(a)-22,y:w.top+10+20*s,fontSize:".5rem",textAnchor:"end",fill:"grey",children:r})]}),Object(T.jsx)("defs",{children:Object(T.jsx)("marker",{id:"arrowhead",markerWidth:"5",markerHeight:"5",refX:"0",refY:"2.5",orient:"auto",children:Object(T.jsx)("polygon",{stroke:"grey",fill:"transparent",points:"0 0, 5 2.5, 0 5"})})}),Object(T.jsx)("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:Object(T.jsx)("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"grey",opacity:.5,strokeWidth:1}})})]},t)}))})]}),Object(T.jsx)(x.a,{id:h})]})},W=function(e){var t=e.data,a=e.tradeData,r=void 0===a?[]:a,i=e.field,d=e.partTreshold,u=e.height,p=e.barWidth,m=e.herfindhalField,f=e.years,b=e.width,h=e.title,j=e.margins,g=e.productTooltipFn,v=e.compareFrom,y=Object(n.useRef)(null),_=Object(n.useRef)(null),w=Object(n.useRef)(new Array(f.length));Object(n.useEffect)((function(){setTimeout((function(){x.a.rebuild()}))}),[u]);var q=Object(n.useState)(void 0),N=Object(l.a)(q,2),L=N[0],k=N[1],C=Object(Y.c)(u),M=C/20+10;y&&y.current&&(C=u-y.current.getBoundingClientRect().height-M);var P=Object(n.useMemo)((function(){if(v){var e,a=f[f.length-1],n=t.filter((function(e){return e.year+""===a+""})),r=Object(z.sum)(n.map((function(e){return+e[i]}))),c=0,l=Object(z.sortBy)(n,(function(e){return-e[i]})).filter((function(e){return(c+=+e[i])<=d*r})),u=l.map((function(e){return e.product})),p=(e={},Object(s.a)(e,i,r-Object(z.sum)(l.map((function(e){return+e[i]})))),Object(s.a)(e,"product","".concat(n.length-l.length," autres types de produits")),e);return l.push(p),f.reduce((function(e,n){var r;if(n===a)return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},n,l));var c=t.filter((function(e){return e.year+""===n+""})),d=Object(z.sum)(c.map((function(e){return+e[i]}))),p=c.filter((function(e){return u.includes(e.product)})).sort((function(e,t){return+e[i]>+t[i]?-1:1}));return p.push((r={},Object(s.a)(r,i,d-Object(z.sum)(p.map((function(e){return+e[i]})))),Object(s.a)(r,"product","".concat(c.length-p.length," autres types de produits")),r)),Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},n,p))}))}return f.reduce((function(e,a){var n,r=t.filter((function(e){return e.year+""===a+""})),c=Object(z.sum)(r.map((function(e){return+e[i]}))),l=0,u=Object(z.sortBy)(r,(function(e){return-e[i]})).filter((function(e){return(l+=+e[i])<=d*c})),p=(n={},Object(s.a)(n,i,c-Object(z.sum)(u.map((function(e){return+e[i]})))),Object(s.a)(n,"product","".concat(r.length-u.length," autres types de produits")),n);return u.push(p),Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},a,u))}),{})}),[f,JSON.stringify(t)]),R=Object(n.useMemo)((function(){return f.filter((function(e,t){return t<f.length-1})).map((function(e,t){var a=f[t+1],n=P[e+""],r=P[a+""];if(!r)return null;var s=Object(z.sum)(n.map((function(e){return+e[i]}))),o=Object(z.sum)(r.map((function(e){return+e[i]}))),l=0;return n.reduce((function(e,t,a){var n,d=0,u=t[i]/s*C;return l+=u,r.find((function(e){return n=function(e){return e/o*C}(e[i]),d+=n,e.product===t.product}))?[].concat(Object(c.a)(e),[{product:t.product,y1:l,height1:u,y2:d-n,height2:n}]):e}),[])}))}),[P,f,C]),F=Object(A.a)().domain(Object(E.a)(r,(function(e){return+e[m]}))).range([I.a.generic.accent2,"grey"]),B=w.current&&w.current.length&&w.current[0]?w.current[0].parentNode.offsetTop:void 0;return Object(T.jsxs)("div",{className:"ProductsDistributionChart",children:[Object(T.jsx)("h3",{className:"visualization-title",style:{marginLeft:j.left},ref:y,children:h}),Object(T.jsxs)("div",{className:O()("years-container",{"has-highlights":void 0!==L}),style:{marginLeft:j.left+5,marginRight:j.right+.002*b},children:[Object(T.jsx)("svg",{ref:_,className:O()("links-container",{"has-highlights":L}),style:{top:B},width:b,height:C,children:R.map((function(e,t){var a=w.current&&w.current.length>=t&&w.current[t]&&w.current[t],n=w.current&&w.current.length>=t+1&&w.current[t+1]&&w.current[t+1],r=a?w.current[t].getBoundingClientRect().width:0,i=n&&_.current?w.current[t+1].getBoundingClientRect().x-_.current.getBoundingClientRect().x:b;return Object(T.jsx)("g",{className:"year-links",children:e.map((function(e,t){var a=e.product,n=e.y1-e.height1/2,s=e.y2+e.height2/2,o=L===a;return Object(T.jsx)("path",{d:"M ".concat(r," ").concat(n," C ").concat(r+.5*(i-r)," ").concat(n," ").concat(r+.5*(i-r)," ").concat(s," ").concat(i," ").concat(s),className:O()("link",{"is-highlighted":o})},t)}))},t)}))}),f.map((function(e,a){var n=t.filter((function(t){return t.year+""===e+""})),s=r.filter((function(t){return t.year===e+""})),o=s&&+s[0][m],c=o?F(+o):"lightgrey",l=Object(z.sum)(n.map((function(e){return+e[i]}))),d=P[e+""],u=Object(S.a)().domain(Object(E.a)(n,(function(e){return+e[i]}))).range([C/100,C/15]);return Object(T.jsxs)("div",{className:"year-column",children:[Object(T.jsx)("h4",{className:"year-label",children:Object(T.jsx)("span",{children:e})}),Object(T.jsxs)("div",{className:"year-items",children:[Object(T.jsx)("div",{className:"dimensions-placeholder",ref:function(e){w.current[a]=e},style:{width:"".concat(p,"px"),height:0,position:"absolute",top:0,left:a===f.length-1?void 0:0,right:a===f.length-1?0:void 0}}),d&&d.map((function(t,n){var r,s=L===t.product,o=n===d.length-1?10:u(+t[i]);return s&&o<10&&(o=10),Object(T.jsxs)("div",{style:{height:"".concat((r=t[i],r/l*C),"px")},className:O()("product-group",{"is-highlighted":s}),onClick:function(){L!==t.product&&n!==d.length-1?k(t.product):k(void 0)},"data-tip":g&&n!==d.length-1?g(e,t.product,(t[i]/l*100).toFixed(2)):void 0,"data-for":"product-tooltip","data-html":!0,"data-class":"bar-tooltip","data-place":0===a?"right":"left","data-effect":"solid",children:[Object(T.jsx)("div",{style:{height:"100%",width:"".concat(p,"px"),maxWidth:"".concat(p,"px"),minWidth:"".concat(p,"px"),backgroundColor:c},className:"bar"}),Object(T.jsx)("span",{className:"label",style:{fontSize:o},children:t.product})]},t.product)}))]})]},a)}))]}),Object(T.jsx)(x.a,{id:"product-tooltip"})]})},G=(a(508),function(e){var t=e.width,a=e.height,n=e.lang,r=void 0===n?"fr":n,i=e.startYear,s=void 0===i?1720:i,o=e.endYear,c=void 0===o?1789:o,d=e.productTradePartThreshold,u=void 0===d?.9:d,p=e.rows,m=e.datasets,f=void 0===m?{}:m,b=e.atlasMode,h=b?1200:Object(Y.c)(a),j=Object(Y.c)(t),g={franceOverviewTitle:{fr:function(e,t){return"\xc9volution de la valeur des exports du royaume de France de ".concat(e," \xe0 ").concat(t)},en:function(e,t){return"Evolution of the value of exports from the kingdom of France from ".concat(e," to ").concat(t)}},tradeEvolutionTitle:{fr:function(e,t,a){return"\xc9volution du commerce de la direction des fermes de ".concat(e," de ").concat(t," \xe0 ").concat(a)},en:function(e,t,a){return"Evolution of the direction des fermes of ".concat(e," trade from ").concat(t," to ").concat(a)}},top90PctTitle:{fr:function(e,t,a){return"Comparaison des parts des produits export\xe9s par la direction des fermes de ".concat(e," totalisant plus de 90% du commerce en ").concat(t," et en ").concat(a," (ports francs non pris en compte)")},en:function(e,t,a){return"Comparison of shares of the top 90% of exported products by the direction des fermes of ".concat(e," in ").concat(t," and in ").concat(a," (ports francs non pris en compte)")}},partInPct:{fr:function(){return"part des exports fr."},en:function(){return"share of french exports"}},absoluteValue:{fr:function(){return"valeur absolue des exports"},en:function(){return"exports' absolute value"}},herfindalLegendTitle:{fr:function(){return"degr\xe9 de diversit\xe9 du commerce"},en:function(){return"degree of trade diversity"}},herfindal0:{fr:function(){return"commerce peu diversifi\xe9"},en:function(){return"fewly diversified trade"}},herfindal1:{fr:function(){return"commerce tr\xe8s diversifi\xe9"},en:function(){return"very diversified trade"}},barTooltip:{fr:function(e,t,a,n){return"En <strong>".concat(e,"</strong>, ").concat(t,"% des biens export\xe9s depuis la France le sont \xe0 partir de <strong>").concat(a,"</strong>.<br/><br/>Concentration du commerce <i>(indice de Herfindahl-Hirschmann : somme du carr\xe9 des parts du march\xe9 fran\xe7ais par classe de produits export\xe9s)</i> : <span>[colorBox] ").concat(n,"</span>")},en:function(e,t,a,n){return"In <strong>".concat(e,"</strong>, ").concat(t,"% of exported goods from France are exported <strong>").concat(a,"</strong>.<br/><br/>Trade concentration <i>(Herfindahl-Hirschmann index : sum of square french market' shares sorted by exported products classes)</i> : <span>[colorBox] ").concat(n,"</span>")}},productTooltip:{fr:function(e,t,a){return"En <strong>".concat(e,'</strong>, les produits de la classe "').concat(t,'" repr\xe9sentent <strong>').concat(a,"%</strong> de la valeur des biens export\xe9s par la direction des fermes de La Rochelle.")},en:function(e,t,a){return"In <strong>".concat(e,'</strong>, products classed as "').concat(t,'" represent ').concat(a,"% of goods exported by La Rochelle's direction des fermes.")}},sevenYearsWar:{fr:function(){return"guerre de sept ans"},en:function(){return"seven years war"}},austriaWar:{fr:function(){return"guerre franco-britannique au sein de la guerre de succession d\u2019Autriche"},en:function(){return"guerre franco-britannique au sein de la guerre de succession d\u2019Autriche"}},usIndependance:{fr:function(){return"guerre d\u2019ind\xe9pendance Am\xe9ricaine"},en:function(){return"guerre d\u2019ind\xe9pendance Am\xe9ricaine"}},laRochelleDiaspora:{fr:function(){return"Organisation de convois partant de La Rochelle pour \xe9chapper aux Anglais"},en:function(){return"Organisation de convois partant de La Rochelle pour \xe9chapper aux Anglais"}}},v={top:10,right:50,bottom:30,left:50},x=Object.entries(p).reduce((function(e,t){var a=Object(l.a)(t,2);a[0];return e+a[1]}),0),y=function(e,t,a){switch(e){case"France":return f["decline_longitudinal_data/decline_longitudinal_data.csv"]?Object(T.jsx)(X,{width:j,height:Object(Y.c)(h/x*t),data:f["decline_longitudinal_data/decline_longitudinal_data.csv"].filter((function(e){return"France"===e.region})),absoluteField:"Exports",title:g.franceOverviewTitle[r](s,c),axisLeftTitle:"",axisRightTitle:g.absoluteValue[r](),margins:v,annotations:[{type:"span",startYear:1756,endYear:1763,label:g.sevenYearsWar[r]()},{type:"span",startYear:1744,endYear:1748,row:.5,label:g.austriaWar[r]()},{type:"span",startYear:1778,endYear:1781,labelPosition:"left",row:3,label:g.usIndependance[r]()}],startYear:s,endYear:c}):null;case"La Rochelle":return f["decline_longitudinal_data/decline_longitudinal_data.csv"]?Object(T.jsx)(X,{width:j,height:Object(Y.c)(h/x*t),data:f["decline_longitudinal_data/decline_longitudinal_data.csv"].filter((function(e){return"La Rochelle"===e.region})),absoluteField:"Exports",shareField:"Exports_share",herfindhalField:"product_revolutionempire_exports_herfindahl",title:g.tradeEvolutionTitle[r]("La Rochelle",s,c),axisLeftTitle:g.partInPct[r](),axisRightTitle:g.absoluteValue[r](),margins:v,barTooltipFn:g.barTooltip[r],cityName:"La Rochelle",highlightYears:p.comparison>0?[s,c]:void 0,annotations:[{type:"span",startYear:1756,endYear:1763,label:g.sevenYearsWar[r]()},{type:"span",startYear:1744,endYear:1748,row:1,label:g.austriaWar[r]()},{type:"span",startYear:1747,endYear:1747,row:2,label:g.laRochelleDiaspora[r]()},{type:"span",startYear:1778,endYear:1781,labelPosition:"left",row:3,label:g.usIndependance[r]()}],colorScaleMessages:{title:g.herfindalLegendTitle[r](),minimum:g.herfindal0[r](),maximum:g.herfindal1[r]()},startYear:s,endYear:c}):null;case"Bordeaux":return f["decline_longitudinal_data/decline_longitudinal_data.csv"]?Object(T.jsx)(X,{width:j,height:Object(Y.c)(h/x*t),data:f["decline_longitudinal_data/decline_longitudinal_data.csv"].filter((function(e){return"Bordeaux"===e.region})),absoluteField:"Exports",shareField:"Exports_share",herfindhalField:"product_revolutionempire_exports_herfindahl",title:g.tradeEvolutionTitle[r]("Bordeaux",s,c),axisLeftTitle:g.partInPct[r](),axisRightTitle:g.absoluteValue[r](),barTooltipFn:g.barTooltip[r],cityName:"Bordeaux",annotations:[{type:"span",startYear:1756,endYear:1763,row:.5,label:g.sevenYearsWar[r]()},{type:"span",startYear:1744,endYear:1748,row:0,label:g.austriaWar[r]()},{type:"span",startYear:1778,endYear:1781,labelPosition:"left",row:1,label:g.usIndependance[r]()}],margins:v,colorScaleMessages:{title:g.herfindalLegendTitle[r](),minimum:g.herfindal0[r](),maximum:g.herfindal1[r]()},startYear:s,endYear:c}):null;case"comparison":return f["decline_LR_products/decline_LR_products.csv"]&&f["decline_longitudinal_data/decline_longitudinal_data.csv"]?Object(T.jsx)(W,{data:f["decline_LR_products/decline_LR_products.csv"],tradeData:f["decline_longitudinal_data/decline_longitudinal_data.csv"],field:"Exports",partTreshold:u,height:Object(Y.c)(h/x*t),barWidth:.02*j,years:[b?1750:s,b?1789:c],margins:v,herfindhalField:"product_revolutionempire_exports_herfindahl",title:g.top90PctTitle[r]("La Rochelle",b?1750:s,b?1789:c),productTooltipFn:g.productTooltip[r],width:j},a):null;default:return Object(T.jsx)("div",{children:e})}};return Object(T.jsx)("div",{className:"DeclineChart",children:Object.entries(p).map((function(e,t){var a=Object(l.a)(e,2),n=a[0],r=a[1];return Object(T.jsx)("div",{className:O()("row",{"is-visible":p[n]}),children:y(n,r,t)})}))})}),V=["width","height","step"],U=function(e){var t=e.width,a=e.height,n=e.step,r=Object(M.a)(e,V);if(r.atlasMode)return Object(T.jsx)(G,Object(o.a)({startYear:1720,endYear:1789,rows:{France:1,"La Rochelle":1,Bordeaux:1,comparison:1}},Object(o.a)({width:t,height:a},r)));switch(n+""){case"1":return Object(T.jsx)(G,Object(o.a)({startYear:1720,endYear:1789,rows:{France:2,"La Rochelle":3,Bordeaux:3,comparison:0}},Object(o.a)({width:t,height:a},r)));case"2":return Object(T.jsx)(G,Object(o.a)({startYear:1720,endYear:1789,rows:{France:0,"La Rochelle":1,Bordeaux:1,comparison:0}},Object(o.a)({width:t,height:a},r)));case"3":return Object(T.jsx)(G,Object(o.a)({startYear:1750,endYear:1789,rows:{France:0,"La Rochelle":1,Bordeaux:0,comparison:2}},Object(o.a)({width:t,height:a},r)));case"4":default:return Object(T.jsx)(G,Object(o.a)({startYear:1750,endYear:1789,rows:{France:1,"La Rochelle":1,Bordeaux:0,comparison:1}},Object(o.a)({width:t,height:a},r)))}},J=a(660),Z=a(661),Q=a(662),K=a(318),$=a.n(K),ee=(a(534),a(120)),te=a(671),ae=a(20),ne=["children","className","onClick"],re=["children","onClick","className","style"],ie=["style","className","onClick"],se=["style","className","onClick"],oe=["style","className","onClick"],ce=["style","className","onClick"],le=[J.a,Z.a,Q.a],de=function(e){var t=e.children,a=e.className,n=e.onClick,r=Object(M.a)(e,ne),i=Object(ae.useSpring)(r);return Object(T.jsx)(ae.animated.g,Object(o.a)(Object(o.a)({className:a,onClick:n},i),{},{children:t}))},ue=function(e){var t=e.children,a=e.onClick,n=e.className,r=e.style,i=Object(M.a)(e,re),s=Object(ae.useSpring)(i);return Object(T.jsx)(ae.animated.text,Object(o.a)(Object(o.a)({className:n,onClick:a,style:r},s),{},{children:t}))},pe=function(e){var t=e.style,a=e.className,n=e.onClick,r=Object(M.a)(e,ie),i=Object(ae.useSpring)(r);return Object(T.jsx)(ae.animated.line,Object(o.a)({className:a,onClick:n,style:t},i))},me=function(e){var t=e.style,a=e.className,n=e.onClick,r=Object(M.a)(e,se),i=Object(ae.useSpring)(r);return Object(T.jsx)(ae.animated.circle,Object(o.a)({className:a,onClick:n,style:t},i))},fe=function(e){var t=e.style,a=e.className,n=e.onClick,r=Object(M.a)(e,oe),i=Object(ae.useSpring)(r);return Object(T.jsx)(ae.animated.rect,Object(o.a)({className:a,onClick:n,style:t},i))},be=function(e){var t=e.style,a=e.className,n=e.onClick,r=Object(M.a)(e,ce),i=Object(ae.useSpring)(r);return Object(T.jsx)(ae.animated.path,Object(o.a)({className:a,onClick:n,style:t},i))},he=function(e){var t=e.data,a=void 0===t?[]:t,r=e.sumBy,i=e.steps,d=e.width,u=void 0===d?1200:d,p=e.height,m=void 0===p?800:p,f=e.filters,b=void 0===f?[]:f,h=e.debug,j=void 0!==h&&h,g=e.title,v=e.colorsPalettes,y=e.centerHorizontalLabels,_=void 0===y||y,w=e.displaceHorizontalLabels,q=void 0===w||w,N=e.tooltips,L=e.lang,k=Object(n.useRef)(null),C=k.current?m-k.current.getBoundingClientRect().height:m;C=Object(Y.c)(C);var M=Object(Y.c)(u),P=Object(n.useState)(void 0),R=Object(l.a)(P,2),A=R[0],z=R[1],F=Object(n.useState)(void 0),E=Object(l.a)(F,2),B=E[0],D=E[1],I=Object(n.useMemo)((function(){return function(e,t){var a=t.sumBy,n=t.steps,r=e.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{_id:t})})),i=n.map((function(e,t){var n=e.filters,i=r;n&&n.length&&(i=n.reduce((function(e,t){var a=t.key,n=t.value;return e.filter((function(e){return e[a]===n}))}),i));var s=$()(i,(function(t){return t[e.field]})),c=(s=Object.entries(s).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1].map((function(e){var t;if(a){var n=e[a];t=+(n=""===n?0:n)}else t=1;return Object(o.a)(Object(o.a)({},e),{},{valueAbs:t})}));return{id:n,valueAbs:r.reduce((function(e,t){return e+t.valueAbs}),0),flows:r}}))).reduce((function(e,t){return e+t.valueAbs}),0);return s=s.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{valuePart:e.valueAbs/c,flows:e.flows.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{valuePart:e.valueAbs/c})})).sort((function(e,a){var n=t>=2&&t<=4?-1:1;return e.valuePart<a.valuePart?n:-n}))})})),Object(o.a)(Object(o.a)({},e),{},{totalValue:c,nodes:s.sort((function(e,a){var n=t>=2&&t<=4?-1:1;return e.valuePart<a.valuePart?n:-n}))})}));return(i=i.map((function(e,t){var a=0,n=0,r=e.nodes.map((function(e){var t=a,r=n,i=Object(o.a)(Object(o.a)({},e),{},{displaceAbs:a,displacePart:n,flows:e.flows.map((function(e){var i=Object(o.a)(Object(o.a)({},e),{},{displaceAbs:t,displacePart:r,relativeDisplaceAbs:t-a,relativeDisplacePart:r-n});return t+=e.valueAbs,r+=e.valuePart,i}))});return a+=e.valueAbs,n+=e.valuePart,i}));return Object(o.a)(Object(o.a)({},e),{},{nodes:r})}))).map((function(e,t){if(t<i.length-1){var a=i[t+1],n=a.field,r=e.nodes.map((function(e,t){var r=e.flows.map((function(e,t){var r=e[n],i=a.nodes.find((function(e){return e.id===r}));if(i){var s=i.flows.find((function(t){return e._id===t._id}));if(s){var c={displaceAbs:s.displaceAbs,displacePart:s.displacePart,relativeDisplaceAbs:s.relativeDisplaceAbs,relativeDisplacePart:s.relativeDisplacePart};return Object(o.a)(Object(o.a)({},e),{},{nextPosition:c})}}return e}));return Object(o.a)(Object(o.a)({},e),{},{flows:r})}));return Object(o.a)(Object(o.a)({},e),{},{nodes:r})}return e}))}(a,{sumBy:r,steps:i})}),[a,r,i]),H=Object(n.useMemo)((function(){return b&&b.length?a.filter((function(e){return b.find((function(t){var a=t.key,n=t.value;return e[a]===n}))})).reduce((function(e,t){return e+ +t[r]}),0):a.reduce((function(e,t){return e+ +t[r]}),0)}),[a,r,b]);Object(n.useEffect)((function(){x.a.rebuild()})),Object(n.useEffect)((function(){z(void 0),D(void 0)}),[b]);var X=Object(n.useMemo)((function(){var e=I.reduce((function(e,t){var a=Object(te.a)(t.nodes.map((function(e){return e.id})));return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},t.field,e[t.field]?Object(te.a)([].concat(Object(c.a)(e[t.field]),Object(c.a)(a))):a))}),{});return Object.entries(e).reduce((function(e,t,a){var n=Object(l.a)(t,2),r=n[0],i=n[1],c=0;return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},r,i.reduce((function(e,t){return c++,Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},t,le[a][c-1]))}),{})))}),{})}),[I]),W=Object(n.useMemo)((function(){return Object(ee.a)([M,C])}),[M,C]),G=.3*W,V=W/50,U=.2*W,J=Object(S.a)().range([W/120,W/50]).domain([0,1]),Z=Object(Y.b)(-W/2+G,-U/2).distance,Q=Object(Y.b)(-W/2,-U/2+V).distance,K=Math.abs(W/2-Q),ae=W/2-Z,ne={0:{orientation:"horizontal",direction:"top",displaceX:K,displaceY:W/2-U/2,displaceText:.2*U+5},1:{orientation:"vertical",displaceX:W/2,displaceY:0},2:{orientation:"horizontal",displaceX:W-G-K,displaceY:W/2-U/2,displaceText:.2*U+5,direction:"top"},3:{orientation:"horizontal",displaceX:W-G-K,displaceY:W/2+U/2,displaceText:-5,direction:"bottom"},4:{orientation:"vertical",displaceX:W/2,displaceY:W-G},5:{orientation:"horizontal",displaceY:W/2+U/2,displaceX:K,displaceText:-5,direction:"bottom"}},re=B?I.find((function(e){return e.field===B.key})).nodes.find((function(e){return e.id===B.value})):void 0,ie=re?re.flows.reduce((function(e,t){return e+ +t[r]}),0):0;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h5",{ref:k,className:"visualization-title",children:g}),Object(T.jsx)("svg",{"data-for":"alluvial-tooltip","data-tip":undefined,width:M,height:C,className:O()("CircularAlluvialChart",{"has-filters":b.length,"has-highlight":A||B}),children:Object(T.jsxs)(de,{transform:"translate(".concat(.05*M,", ").concat(.05*C,")scale(.9)"),children:[Object(T.jsxs)(de,{className:"background-marks",transform:"translate(".concat(M/2-W/2,", 0)"),children:[Object(T.jsx)(pe,{x1:0,x2:W,y1:W/2,y2:W/2}),j?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(me,{cx:W/2,cy:W/2,r:.5*W}),Object(T.jsx)(me,{cx:W/2,cy:W/2,r:Q}),Object(T.jsx)(me,{cx:W/2,cy:W/2,r:Z})]}):null,Object(T.jsx)(ue,{x:W/2,y:W/2-.8*U+V,style:{fontWeight:B&&B.index<=2||A&&A.stepIndex<=2?800:void 0},children:"EXPORTS"}),Object(T.jsx)(ue,{x:W/2,y:W/2+.8*U+V,style:{fontWeight:B&&B.index>2||A&&A.stepIndex>2?800:void 0},children:"IMPORTS"})]}),Object(T.jsx)(de,{transform:"translate(".concat(M/2-W/2,", 0)"),children:I.map((function(e,t){var a=ne[t],n=a.orientation,i=a.direction,s=a.displaceX,c=a.displaceY,d=a.displaceText,u=c,p=Object(S.a)().domain([0,1]).range([0,"vertical"===n?ae:G-K]),m=0;return Object(T.jsxs)(de,{className:O()("step-container","is-oriented-"+n),children:[Object(T.jsx)(fe,{x:s,y:u,width:"vertical"===n?V:G,height:"vertical"===n?G:V,fill:"white",className:"step-bar-background"}),e.nodes.map((function(a,c){return Object(T.jsx)(de,{className:O()("links-group"),children:a.flows.filter((function(e){return e.nextPosition})).map((function(c,l){var d=ne[t+1],m=Object(S.a)().domain([0,1]).range([0,"vertical"===d.orientation?ae:G-V/3]),f=s+V,h=u+p(c.displacePart),g=d.displaceX,x=d.displaceY+m(c.nextPosition.displacePart),y=d.displaceX,_=d.displaceY+m(c.nextPosition.displacePart)+m(c.valuePart),w=u+p(c.displacePart)+p(c.valuePart),q=s+V;"horizontal"===n&&(f=s+p(c.displacePart),h=u+("bottom"===i?V:0),w=u+("bottom"===i?V:0),q=s+p(c.displacePart)+p(c.valuePart)),"horizontal"===d.orientation&&(g=d.displaceX+m(c.nextPosition.displacePart)+m(c.valuePart),x=d.displaceY+("bottom"===d.direction?V:0),y=d.displaceX+m(c.nextPosition.displacePart),_=d.displaceY+("bottom"===d.direction?V:0)),3===t&&(g+=V,y+=V,x+=V,_+=V),4===t&&(f-=V,q-=V,h+=V,w+=V);var k=f,C=x,M=f,P=x,R=q,F=_,E=q,I=_;1!==t&&4!==t||(k=g,C=h,M=g,P=h,R=y,F=w,E=y,I=w),0===t?(C=h-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(x-h),M=g-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(g-f),I=w-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(w-_),R=y-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(y-q)):1===t?(k=f+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(g-f),P=x-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(x-h),F=_-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(_-w),E=q+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(q-y)):3===t?(C=h+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(x-h),M=g+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(g-f),R=y+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(q-y),I=w+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(_-w)):4===t&&(k=f-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(g-f),P=x+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(x-h),E=q-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(q-y),F=_+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(_-w));var Y=c.flow_type,H=c.customs_office,W=c.product,U=c.partner,J=c[r],Z=N.flow[L]({flow_type:Y,customs_office:H,product:W,sumBy:r,value:J,partner:U});return Object(T.jsxs)(de,{onClick:function(){A&&A._id===c._id?(D(void 0),z(void 0)):(B&&D(void 0),z(Object(o.a)(Object(o.a)({},c),{},{stepIndex:t})))},className:O()("flow-link",{"is-filtered-in":b&&b.find((function(e){var t=e.key,a=e.value;return c[t]===a})),"is-highlighted":A&&A._id===c._id||B&&c[B.key]===B.value}),"data-for":"alluvial-tooltip","data-tip":Z,children:[Object(T.jsx)(be,{d:"\n                                    M ".concat(f," ").concat(h," \n                                    C ").concat(k,",").concat(C," ").concat(M,",").concat(P," ").concat(g," ").concat(x," \n                                    L ").concat(y," ").concat(_,"\n                                    C ").concat(R,",").concat(F," ").concat(E,",").concat(I," ").concat(q," ").concat(w," \n                                    Z\n                                    ").trim().replace(/\n/g," "),style:{fill:v?v[e.field][a.id]:X[e.field][a.id]}}),j?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(pe,{stroke:"red",x1:f,y1:h,x2:k,y2:C}),Object(T.jsx)(me,{cx:k,cy:C,r:2,fill:"red"}),Object(T.jsx)(pe,{stroke:"blue",x1:g,y1:x,x2:M,y2:P}),Object(T.jsx)(me,{cx:M,cy:P,r:2,fill:"blue"}),Object(T.jsx)(pe,{stroke:"green",x1:y,y1:_,x2:R,y2:F}),Object(T.jsx)(me,{cx:R,cy:F,r:2,fill:"green"}),Object(T.jsx)(pe,{stroke:"lightblue",x1:q,y1:w,x2:E,y2:I}),Object(T.jsx)(me,{cx:E,cy:I,r:2,fill:"lightblue"})]}):null]},l)}))},c)})),e.nodes.map((function(a,i){var o=p(a.valuePart),c=p(a.displacePart),f=o-2,h=u+c,j=s,g=V,x=f;"horizontal"===n&&(g=f,x=V,j=s+c,h=u),4===t&&(h+=V);var y=B&&a.id===B.value&&t===B.index,w=0;B?w=a.flows.filter((function(e){return e[B.key]===B.value})).reduce((function(e,t){return e+ +t[r]}),0)/ie:b&&b.length&&(w=a.flows.filter((function(e){return b.find((function(t){var a=t.key,n=t.value;return e[a]===n}))})).reduce((function(e,t){return e+ +t[r]}),0)/H),w>1&&(w=1);var k=b&&b.find((function(e){var t=e.key,n=e.value;return a.flows.find((function(e){return e[t]===n}))})),C=0;0===t||2===t?C=30:3!==t&&5!==t||(C=-30);var M="vertical"===n?j+2*V:j+(_?g/2:0),P=M;if("horizontal"===n){q&&m&&P<m+20&&(P=m+20),m=P}var R="vertical"===n?h+x/2:h+d,S=Object(Y.f)(a.id,20),F=Object(l.a)(S,2),E=F[0],I=F[1],W=A&&a.flows.find((function(e){return e._id===A._id}))||B&&e.id===B.key&&a.id===B.value,G=B&&e.field===B.key&&a.id===B.value,U=J(B||re?w>0?w:a.valuePart:1),Z=N.node[L](a,t);return Object(T.jsxs)(de,{className:O()("step-node-container",{"has-highlights":W,"is-filtered-in":k,"is-highlighted":G}),onClick:function(){B&&B.value===a.id?(z(void 0),D(void 0)):(A&&z(void 0),D({key:e.field,value:a.id,index:t}))},"data-for":"alluvial-tooltip","data-tip":Z,children:[Object(T.jsx)(fe,{x:j,y:h,width:g,height:x,className:"node-level-node"}),Object(T.jsx)(de,{transform:"\n                            translate(".concat(P,", ").concat(R,")\n                            rotate(").concat(C,")\n                          "),className:O()("node-level-label",{"is-filtered-in":k,"is-highlighted":y,"is-secondary-highlighted":!y&&w>0}),children:Object(T.jsx)(ue,{style:{fontSize:U},children:k||y?E+" "+(I||""):"".concat(I?E+"...":E)})}),q&&M!==P?Object(T.jsx)(pe,{x1:j+o/2,y1:0===t||2===t?h+V:h,x2:P,y2:R,className:O()("label-line",{"is-filtered-in":k,"is-highlighted":y,"is-secondary-highlighted":!y&&w>0})}):null,a.flows.map((function(r,i){var o=j,c=u+p(r.displacePart);4===t&&(c+=V);var l=V,d=p(r.valuePart);return"horizontal"===n&&(l=p(r.valuePart),d=V,o=s+p(r.displacePart),c=u),Object(T.jsx)(fe,{x:o,y:c,width:l,height:d,className:O()("flow-level-node",{"is-filtered-in":b&&b.find((function(e){var t=e.key,a=e.value;return r[t]===a})),"is-highlighted":A&&A._id===r._id||B&&r[B.key]===B.value}),style:{fill:v?v[e.field][a.id]:X[e.field][a.id]},title:a.id},i)}))]},a.id)}))]},t)}))})]})}),Object(T.jsx)(x.a,{id:"alluvial-tooltip"})]})},je=a(240),ge=(a(536),(0,je.a.createSliderWithTooltip)(je.a.Range)),ve=function(e){var t=e.title,a=e.min,n=e.max,r=e.value,i=e.onChange;return Object(T.jsxs)("div",{style:{width:300,margin:50},children:[Object(T.jsx)("p",{children:t}),Object(T.jsx)(ge,{allowCross:!1,min:a,max:n,value:r,onChange:i})]})},Oe=function(e){var t=e.size,a=e.MARGIN,n=e.axisIndex,r=e.axisRankScale,i=e.axis,s=e.label,o=t/2+a/2,c=t/2+a/2,d=Object(Y.e)(t/2,r(n)),u=Object(l.a)(d,2),p=o+u[0],m=c+u[1],f=-a/8,b=15;n>0&&(b=-10,n===i.length/2?(b=-20,f=-a/6):f=n<i.length/2?-a/2:5,3!==n&&5!==n||(b=-30),7===n&&(b=5),1===n&&(b=5,f=-a/3));var h=Object(ae.useSpring)({x1:o,y1:c,x2:p,y2:m,labelX:p+f,labelY:m+b}),j=h.x1,g=h.y1,v=h.x2,O=h.y2,x=h.labelX,y=h.labelY;return Object(T.jsxs)("g",{className:"AxisObject",children:[Object(T.jsx)(ae.animated.line,{x1:j,y1:g,x2:v,y2:O}),Object(T.jsx)(ae.animated.foreignObject,{x:x,y:y,width:.7*a,height:a,children:Object(T.jsx)("div",{className:"label",children:s})})]},n)},xe=["cx","cy","r"],ye=function(e){var t=e.cx,a=e.cy,n=e.r,r=Object(M.a)(e,xe),i=Object(ae.useSpring)({cx:Object(Y.c)(t),cy:Object(Y.c)(a),r:n}),s=i.cx,c=i.cy,l=i.r;return Object(T.jsx)(ae.animated.circle,Object(o.a)({cx:s,cy:c,r:l},r))},_e=function(e){var t=e.color,a=e.data,n=e.axisIndexMap,r=e.axisRankScale,i=e.center,s=e.name,o=e.radiusScale,c=Object.entries(n).map((function(e){var t=Object(l.a)(e,2),n=t[0],s=t[1],c=a[n]||0,d=o(c),u=r(+s),p=Object(Y.e)(d,u),m=Object(l.a)(p,2),f=m[0],b=m[1];return[Object(Y.c)(f+i[0]),Object(Y.c)(b+i[1])]})),d=Object(ae.useSpring)({joinedPoints:c.map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return"".concat(a,",").concat(n)})).join(" ")}).joinedPoints,u=Object.entries(a),p=Object(z.sum)(u.map((function(e){return e[1]})));return u=u.map((function(e){var t=Object(l.a)(e,2);return[t[0],t[1]/p]})),Object(T.jsxs)("g",{className:"VisObject","data-for":"radar-tooltip","data-html":!0,"data-place":"left","data-tip":"\n      <p>\n      ".concat("Tous les bureaux"===s?"Parts des destinations des voyages de 1789 initi\xe9s depuis tous les ports de la r\xe9gion":"Part des destinations pour les voyages de 1789 initi\xe9s depuis des ports rattach\xe9s au bureau des fermes de <strong>"+s+"</strong>"," :\n      </p>\n      <ol>\n        ").concat(u.sort((function(e,t){var a=Object(l.a)(e,2),n=(a[0],a[1]),r=Object(l.a)(t,2);r[0];return n>r[1]?-1:1})).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return"\n            <li>\n              <strong>".concat(a,"</strong> : <strong>").concat((100*n).toFixed(2),"%</strong>\n            </li>\n          ")})).join("\n"),"\n      </ol>\n  "),children:[Object(T.jsx)(ae.animated.polygon,{points:d,fill:t,fillOpacity:.5}),c.map((function(e,a){var n=Object(l.a)(e,2),r=n[0],i=n[1];return Object(T.jsx)(ye,{cx:r,cy:i,r:1,fill:t},a)}))]})},we=function(e){var t=e.data,a=e.size,r=void 0===a?100:a,i=e.axis;Object(n.useEffect)((function(){x.a.rebuild()}));var c=Object(n.useMemo)((function(){return i.reduce((function(e,t,a){return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},t,a))}),{})}),[i]),l=100,d=r-l,u=Object(ae.useSpring)({visCenter:d/2+50,visSize:d/2}),p=u.visCenter,m=u.visSize,f=Object(S.a)().domain([0,i.length]).range([Math.PI/2,2.5*Math.PI]),b=Object(S.a)().domain([0,1]).range([0,d/2]);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("svg",{className:"RadarPlot",width:r,height:r,children:[Object(T.jsx)(ae.animated.circle,{cx:p,cy:p,r:m,strokeWidth:.5,stroke:"grey",fill:"none"}),Object(T.jsx)("g",{className:"background-container",children:i.map((function(e,t){return Object(T.jsx)(Oe,{size:d,MARGIN:l,axisIndex:t,axisRankScale:f,axis:i,label:e},t)}))}),Object(T.jsx)("g",{className:"objects-container",children:t.map((function(e,t){return Object(T.jsx)(_e,{color:e.meta.color,name:e.meta.name,data:e.data,axisIndexMap:c,axisRankScale:f,center:[d/2+50,d/2+50],radiusScale:b},e.meta.name)}))})]}),Object(T.jsx)(x.a,{id:"radar-tooltip"})]})},qe=function(e,t){var a=Object(z.maxBy)(Object(z.values)(e),(function(e){return e})),n=Object(S.a)().domain([0,a]).range([0,1]);for(var r in e)e.hasOwnProperty(r)&&(e[r]=n(e[r]));for(var i in t)e.hasOwnProperty(i)||(e[i]=0);return e},Ne=function(e){var t=e.data,a=e.globalWidth,r=void 0===a?500:a,i=e.minified,s=e.title,o=e.bureaux,d=void 0===o?"tous":o,u=e.navigoAgregation,p=void 0===u?"tonnage":u,m=e.minTonnage,f=e.maxTonnage,b=e.axis,h=void 0===b?[]:b,j=e.colorPalette,g=Object(n.useState)(new Set(["Tous les bureaux"])),v=Object(l.a)(g,2),x=v[0],y=v[1],_=Object(n.useState)("tonnage"),w=Object(l.a)(_,2),q=w[0],N=w[1],L=Object(n.useState)([]),k=Object(l.a)(L,2),C=k[0],M=k[1],P=Object(n.useState)(),R=Object(l.a)(P,2),A=R[0],S=R[1],E=Object(n.useMemo)((function(){if(t){var e=t.map((function(e){if(""!==e.destination_radar&""!==e.ferme_bureau)return{ferme_bureau:e.ferme_bureau,destination_radar:e.destination_radar.replace(/['"]+/g,""),tonnage:+e.tonnage}})).filter((function(e){return e})),a=Object(z.maxBy)(e,"tonnage").tonnage;S(a),f&&(a=+f);var n=0;return m&&(n=+m),M([n,a]),e}return t}),[t]),B=Object(n.useMemo)((function(){return["Tous les bureaux"].concat(Object(c.a)(Object(z.uniqBy)(E,"ferme_bureau").map((function(e){return e.ferme_bureau}))))}),[E]),D=Object(n.useMemo)((function(){var e=Array.from(x);return E.filter((function(t){return!!e.includes("Tous les bureaux")||e.includes(t.ferme_bureau)})).filter((function(e){return"tonnage"!==q||!C||!C.length||e.tonnage>=C[0]&&e.tonnage<=C[1]}))}),[E,x,C]);Object(n.useEffect)((function(){N(p)}),[p]),Object(n.useEffect)((function(){if(d){var e=d.split(",").map((function(e){return e.trim()})).map((function(e){return"tous"===e?"Tous les bureaux":e}));y(new Set(e))}}),[d]),Object(n.useEffect)((function(){f&&(C&&C.length?M([C[0],+f]):M([0,+f]))}),[f]),Object(n.useEffect)((function(){if(m)if(C&&C.length)M([+m,C[1]]);else{var e=Object(z.maxBy)(E,"tonnage").tonnage;M([+m,e])}}),[m]);var I=Object(n.useMemo)((function(){return Array.from(x).map((function(e){var t,a="Tous les bureaux"===e?D:D.filter((function(t){return t.ferme_bureau===e})),n="tonnage"===q?(t=a,F()(t).groupBy("destination_radar").map((function(e,t){var a={};return a[t]=Object(z.sumBy)(e,"tonnage"),a})).value()):function(e){return F()(e).groupBy("destination_radar").map((function(e,t){var a={};return a[t]=e.length,a})).value()}(a);return{data:qe(Object.assign.apply(Object,[{}].concat(Object(c.a)(n)))),meta:{color:j[e],name:e}}}))}),[x,C,q]);return E&&I?Object(T.jsxs)("div",{className:O()("RadarWrapper",{"is-minified":i}),children:[Object(T.jsx)("h5",{className:"visualization-title",children:s}),Object(T.jsx)(we,{data:I.reverse(),size:i?.4*r:.7*r,axis:h}),Object(T.jsx)("div",{className:O()("controls-container",{"is-minified":i}),children:Object(T.jsxs)("div",{className:"controls-contents",children:[Object(T.jsx)("strong",{children:D.length})," voyages agr\xe9g\xe9s par ",Object(T.jsxs)("span",{className:"aggregation-controls-container",children:[Object(T.jsxs)("select",{value:q,onChange:function(e){return N(e.target.value)},children:[Object(T.jsxs)("option",{id:"tonnage",value:"tonnage",children:["tonnage","tonnage"===q?" (navires de ".concat(C[0]," \xe0 ").concat(C[1]," tonneaux)"):""]},"tonnage"),Object(T.jsx)("option",{id:"voyages",value:"voyages",children:"nombre de voyages"},"voyages")]}),q&&"tonnage"===q&&Object(T.jsx)("span",{className:"slider-container",children:Object(T.jsx)(ve,{min:0,max:A,value:C,onChange:function(e){return[M(e)]}})})]}),Object(T.jsx)("ul",{className:"bureaux-list",children:B.map((function(e,t){return Object(T.jsxs)("li",{onClick:function(){var t=new Set(x);x.has(e)&&Array.from(x).length>1?t.delete(e):t.add(e),y(t)},className:O()("bureau-item",{"is-active":x.has(e)}),children:[Object(T.jsx)("span",{className:"color-marker",style:{background:j[e]}}),Object(T.jsx)("span",{className:"bureau-label",children:"Tous les bureaux"===e?"Ensemble des ports":e})]},t)}))})]})})]}):null},Le=(a(537),["width","height","datasets","showOnlyToflit","atlasMode","highlight","lang","filter","bureaux","navigoAgregation","minTonnage","maxTonnage"]),ke=["id"],Ce=["id"],Me=function(e){var t=e.width,a=e.height,r=e.datasets,i=(e.showOnlyToflit,e.atlasMode),s=e.highlight,o=void 0===s?"toflit18":s,c=e.lang,l=void 0===c?"fr":c,d=e.filter,u=void 0===d?"aucun":d,p=e.bureaux,m=void 0===p?"tous":p,f=e.navigoAgregation,b=void 0===f?"tonnage":f,h=e.minTonnage,j=e.maxTonnage,g=(Object(M.a)(e,Le),Object(Y.c)(t)),v=i?1200:Object(Y.c)(a),x=Object(n.useMemo)((function(){var e="value",t=[];switch(u){case"colonial":t=[{key:"product",value:"produits coloniaux"},{key:"partner",value:"Afrique"},{key:"partner",value:"Colonies"}];break;case"eau-de-vie":t=[{key:"product",value:"eau-de-vie et vins divers"}];break;case"sel":t=[{key:"product",value:"sel"}],e="product_weight_kg"}return{sumToflitBy:e,alluvialFilters:t}}),[u]),y=x.sumToflitBy,_=x.alluvialFilters,w={fr:"\xc9changes de la direction des fermes de La Rochelle en 1789 par produit et partenaire, dimensionn\xe9s selon leur ".concat("value"===y?"valeur commerciale":"poids de marchandises"),en:"\xc9changes de la direction des fermes de La Rochelle en 1789 par produit et partenaire, dimensionn\xe9s selon leur ".concat("value"===y?"valeur commerciale":"poids de marchandises")};return Object(T.jsxs)("div",{className:O()("PrincipalVisualizationPart2",{"is-atlas-mode":i}),children:[Object(T.jsx)("div",{className:"circular-alluvial-container",style:{width:i?.5*window.innerWidth:"toflit18"===o?.6*g:.5*g,height:i?.5*window.innerWidth:"toflit18"===o?v:.5*v},children:Object(T.jsx)(he,{data:r["part_2_toflit_viz_data/part_2_toflit_viz_data.csv"],width:i?.5*window.innerWidth:"toflit18"===o?.6*g:.45*g,height:i?.5*window.innerWidth:"toflit18"===o?v:.45*v,sumBy:y,filters:_,colorsPalettes:I.a,lang:l,title:w[l],displaceHorizontalLabels:"toflit18"===o,centerHorizontalLabels:"toflit18"===o,tooltips:{node:{fr:function(e,t){var a=e.id,n=Object(M.a)(e,ke);return 0===t||5===t?"En 1789, le bureau des fermes de ".concat(a," a ").concat(t<3?"export\xe9":"import\xe9"," ").concat(parseInt(n.valueAbs)," ").concat("value"===y?"livres tournoi":"kg","."):1===t||4===t?"En 1789, la direction des fermes de La Rochelle a ".concat(t<3?"export\xe9":"import\xe9"," ").concat(parseInt(n.valueAbs)," ").concat("value"===y?"livres tournoi":"kg"," de ").concat(a,"."):"En 1789, la direction des fermes de La Rochelle a ".concat(t<3?"export\xe9":"import\xe9"," ").concat(parseInt(n.valueAbs)," ").concat("value"===y?"livres tournoi":"kg"," vers le partenaire ").concat(a,".")},en:function(){return function(e,t){var a=e.id,n=Object(M.a)(e,Ce);return 0===t||5===t?"In 1789, the bureau des fermes of ".concat(a," has ").concat(t<3?"imported":"exported"," ").concat(n[y]," ").concat("value"===y?"livres tournoi":"kg","."):1===t||4===t?"In 1789, the direction des fermes de La Rochelle has ".concat(t<3?"imported":"exported"," ").concat(parseInt(n.valueAbs)," ").concat("value"===y?"livres tournoi":"kg"," of ").concat(a,"."):"In 1789, the direction des fermes de La Rochelle has ".concat(t<3?"imported":"exported"," ").concat(parseInt(n.valueAbs)," ").concat("value"===y?"livres tournoi":"kg"," to the partner ").concat(a,".")}}},flow:{fr:function(e){var t=e.flow_type,a=e.customs_office,n=e.product,r=e.sumBy,i=e.value,s=e.partner;return"En 1789, le bureau des fermes de ".concat(a," a ").concat("import"===t?"import\xe9":"export\xe9"," ").concat(parseInt(i)," ").concat("value"===r?"livres tournois":"kg"," de ").concat(n," ").concat("import"===t?"depuis":"vers"," le partenaire ").concat(s)},en:function(e){var t=e.flow_type,a=e.customs_office,n=e.product,r=e.sumBy,i=e.value,s=e.partner;return"In 1789, the bureau des fermes of ".concat(a," has ").concat("import"===t?"imported":"exported"," ").concat(parseInt(i)," ").concat("value"===r?"livres tournois":"kg"," of ").concat(n," ").concat("import"===t?"from":"to"," the partner ").concat(s)}}},steps:[{field:"customs_office",labels:{fr:"bureau des fermes",en:"customs office"},filters:[{key:"flow_type",value:"export"}]},{field:"product",labels:{fr:"type de produit",en:"product type"},filters:[{key:"flow_type",value:"export"}]},{field:"partner",labels:{fr:"partenaire du commerce ext\xe9rieur",en:"external trade partner"},filters:[{key:"flow_type",value:"export"}]},{field:"partner",labels:{fr:"partenaire du commerce ext\xe9rieur",en:"external trade partner"},filters:[{key:"flow_type",value:"import"}]},{field:"product",labels:{fr:"type de produit",en:"product type"},filters:[{key:"flow_type",value:"import"}]},{field:"customs_office",labels:{fr:"bureau des fermes",en:"customs office"},filters:[{key:"flow_type",value:"import"}]}]})}),Object(T.jsx)("div",{className:"radar-container",style:{width:i?.5*window.innerWidth:"navigo"===o?.7*g:.4*g},children:Object(T.jsx)(Ne,{data:r["part_2_navigo_viz_data/part_2_navigo_viz_data.csv"],minified:!i&&"navigo"!==o,globalWidth:i?.5*window.innerWidth:g,bureaux:m,navigoAgregation:b,minTonnage:h,maxTonnage:j,title:{fr:"Parts de diff\xe9rents groupes de directions pour les navires partis de la r\xe9gion PASA en 1789",en:"Parts de diff\xe9rents groupes de direction pour les navires partis de la r\xe9gion PASA en 1789"}[l],axis:["Local","Afrique","Colonies","Grande-Bretagne","Europe","Ports francs et petites \xeeles","France","Reste du monde"],colorPalette:I.a.customs_office})})]})},Te=a(44),Pe=a(105),Re=(a(540),a(106)),Ae=a(56),Se=function(e){var t=e.width,a=e.height,n=e.datasets,r=Object(Y.c)(t),i=Object(Y.c)(a);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"graphs-container",style:{position:"relative",height:.6*i},children:[Object(T.jsx)("div",{className:"graph-container",style:{width:.6*r,height:.6*i,position:"absolute"},children:Object(T.jsx)(Re.a,{data:n["flows_1787_around_La Rochelle/flows_1787_around_La Rochelle.gexf"],nodeSize:"degree",labelDensity:1,nodeColor:{field:"internal",palette:{"interne \xe0 la r\xe9gion":I.a.generic.dark,"externe \xe0 la r\xe9gion":I.a.generic.accent2}},spatialize:!0,ratio:1.1,title:"R\xe9seau des voyages partant ou arrivant dans la r\xe9gion PASA en 1787 ..."})}),Object(T.jsx)("div",{className:"graph-container",style:{width:.4*r,height:.3*i,position:"absolute",right:0,top:0},children:Object(T.jsx)(Re.a,{data:n["flows_1787_around_Bordeaux/flows_1787_around_Bordeaux.gexf"],nodeSize:"degree",labelDensity:1,nodeColor:{field:"internal",palette:{"interne \xe0 la r\xe9gion":I.a.generic.dark,"externe \xe0 la r\xe9gion":I.a.generic.accent2}},spatialize:!0,title:"...compar\xe9 \xe0 celui de l'amiraut\xe9 de Bordeaux",ratio:1})}),Object(T.jsx)("div",{className:"graph-container",style:{width:.4*r,height:.3*i,position:"absolute",right:0,bottom:0},children:Object(T.jsx)(Re.a,{data:n["flows_1787_around_Nantes/flows_1787_around_Nantes.gexf"],nodeSize:"degree",labelDensity:1,nodeColor:{field:"internal",palette:{"interne \xe0 la r\xe9gion":I.a.generic.dark,"externe \xe0 la r\xe9gion":I.a.generic.accent2}},title:"...compar\xe9 \xe0 celui de l'amiraut\xe9 de Nantes",ratio:1,spatialize:!0})})]}),Object(T.jsxs)("div",{style:{position:"absolute",bottom:0,left:0,width:.3*r,height:.3*i,paddingLeft:0},className:"ColorLegend",children:[Object(T.jsx)("h5",{children:"L\xe9gende des r\xe9seaux"}),Object(T.jsxs)("ul",{className:"color-legend",children:[Object(T.jsx)("li",{children:"Taille des points repr\xe9sentant les ports : nombre de liens avec d'autres ports dans le r\xe9seau"}),Object(T.jsxs)("li",{children:[Object(T.jsx)("span",{style:{background:I.a.generic.dark},className:"color-box"}),Object(T.jsx)("span",{className:"color-label",children:"Port interne \xe0 la r\xe9gion"})]}),Object(T.jsxs)("li",{children:[Object(T.jsx)("span",{style:{background:I.a.generic.accent2},className:"color-box"}),Object(T.jsx)("span",{className:"color-label",children:"Port externe \xe0 la r\xe9gion"})]})]})]}),Object(T.jsx)("div",{style:{position:"absolute",bottom:0,right:0,width:.7*r,height:.3*i},children:Object(T.jsx)(Ae.a,{data:n["part_3_centralite_comparaison/part_3_centralite_comparaison.csv"],title:"Centralit\xe9 compar\xe9e de La Rochelle par rapport \xe0 PASA et, pour ses r\xe9gions c\xf4ti\xe8res voisines, du port principal par rapport au r\xe9seau des voyages de son amiraut\xe9 (1787)",width:.7*r,height:.3*i,orientation:"vertical",layout:"groups",y:{field:"port",title:"Port (dans son r\xe9seau local)"},x:{field:"score",title:"Score"},color:{field:"metrics_type",title:"Type de m\xe9trique",palette:{PageRank:I.a.generic.dark,"betweenness centrality":I.a.generic.accent1}},margins:{bottom:20},tooltip:function(e){return"PageRank"===e.metrics_type?"Le PageRank est une mesure de centralit\xe9 qui consiste \xe0 donner \xe0 chaque port un score proportionnel \xe0 la somme des pageranks des ports avec lesquels il a des voyages en commun.":"La centralit\xe9 interm\xe9diaire est une mesure de centralit\xe9 \xe9gale au nombre de fois o\xf9 un port donn\xe9 est sur le chemin le plus court entre deux autres ports du r\xe9seau des voyages."}})})]})},ze=function(e){var t=e.datasets,a=e.step,r=e.width,i=e.height,s=e.atlasMode,c=Object(Y.c)(r),d=s?window.innerHeight:Object(Y.c)(i),u=Object(n.useState)("France"),p=Object(l.a)(u,2),m=p[0],f=p[1];return Object(n.useEffect)((function(){setTimeout((function(){switch(a){case 1:f("rotated Poitou");break;case 3:f("Poitou zoomed")}}),1)}),[a]),Object(T.jsxs)("div",{className:O()("PrincipalVisualizationPart3",{"is-atlas-mode":s}),style:{height:s?void 0:d},children:[Object(T.jsx)("div",{className:O()("step",{"is-visible":1===a}),children:Object(T.jsx)(Te.a,{title:"Navigation au d\xe9part des ports de la r\xe9gion PASA en 1789",layers:[{type:"choropleth",data:t["map_backgrounds/map_france_1789.geojson"]},{type:"custom",data:t["part_3_step1_viz_data/part_3_step1_viz_data.csv"],renderObjects:function(){return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("rect",{x:0,y:0,width:c,height:d/8,fill:"url(#radial-bg)"}),Object(T.jsx)("defs",{children:Object(T.jsxs)("linearGradient",{id:"radial-bg",gradientTransform:"rotate(90)",children:[Object(T.jsx)("stop",{offset:"10%",stopColor:s?"white":I.a.ui.colorBackgroundBlue}),Object(T.jsx)("stop",{offset:"100%",stopColor:s?"white":I.a.ui.colorBackgroundBlue,"stop-opacity":0})]})})]})}},{type:"custom",data:t["part_3_step1_viz_data/part_3_step1_viz_data.csv"],renderObjects:function(e){return Object(Pe.c)(Object(o.a)(Object(o.a)({},e),{},{atlasMode:s}))}}],projectionTemplate:s?"rotated Poitou":m,height:s?.9*window.innerHeight:d,width:c})}),Object(T.jsx)("div",{className:O()("step",{"is-visible":2===a}),style:{height:d},children:Object(T.jsx)(Se,{width:c,height:d,datasets:t})}),Object(T.jsx)("div",{className:O()("step",{"is-visible":3===a}),height:d,children:Object(T.jsx)(Te.a,{layers:[{type:"choropleth",data:t["map_backgrounds/map_france_1789.geojson"],color:{field:"shortname"}},{type:"custom",data:{customsOffices:t["part_3_step3_viz_customs_offices_data/part_3_step3_viz_customs_offices_data.csv"].filter((function(e){return"La Rochelle"===e.customs_region&&"undefined customs office"!==e.name&&!e.name.includes("Bouin")})),ports:t["part_3_step3_viz_ports_data/part_3_step3_viz_ports_data.csv"]},renderObjects:Pe.b},{type:"custom",data:t["part_3_step3_viz_customs_offices_data/part_3_step3_viz_customs_offices_data.csv"],renderObjects:Pe.a}],projectionTemplate:s?"Poitou zoomed":m,height:d,width:c,title:"Extraversion du commerce et de la navigation regroup\xe9s par bureau de fermes en 1789"})})]})},Fe=a(230),Ee=a(66),Be=a(53),De=(a(591),function(e){var t=e.projection,a=e.atlasMode,r=(e.height,e.datum),i=(e.width,e.index),s=e.radius,o=t([+r.longitude,+r.latitude]),c=Object(l.a)(o,2),d=c[0],u=c[1],p=Object(n.useState)(!1),m=Object(l.a)(p,2),f=m[0],b=m[1];Object(n.useEffect)((function(){setTimeout((function(){b(!0)}))}),[]);var h=Object(ae.useSpring)({to:{transform:"translate(".concat(d,", ").concat(u,")")},immediate:!f}).transform;return Object(T.jsxs)(ae.animated.g,{transform:h,children:[Object(T.jsx)(ae.animated.circle,{r:2*s,cx:0,cy:0,fill:"url(#bureau-".concat(i,")")}),Object(T.jsxs)("radialGradient",{id:"bureau-".concat(i),children:[Object(T.jsx)("stop",{offset:a?"0%":"20%",stopColor:I.a.customs_office[r.name]}),Object(T.jsx)("stop",{offset:"100%",stopColor:a?"rgba(255,255,255,0)":"rgba(51,109,124,0)"})]})]})}),Ie=function(e){var t=e.projection,a=e.height,r=e.datum,i=e.width,s=(e.index,e.radius),o=t([+r.longitude,+r.latitude]),c=Object(l.a)(o,2),d=c[0],u=c[1],p=["La Rochelle","Tonnay-Charente"].includes(r.name),m=Object(Y.c)(r.name.length*i*a*5e-4),f=Object(n.useState)(!1),b=Object(l.a)(f,2),h=b[0],j=b[1];Object(n.useEffect)((function(){setTimeout((function(){j(!0)}))}),[]);var g=Object(ae.useSpring)({to:{transform:"translate(".concat(d,", ").concat(u,")")},immediate:!h}).transform;return Object(T.jsxs)(ae.animated.g,{transform:g,children:[Object(T.jsx)("circle",{r:2,cx:0,cy:0,fill:"white"}),Object(T.jsx)("foreignObject",{x:p?s/2:-s/2-m,y:-a/70,fill:"white",width:m,height:a/20,className:O()("bureau-label",{"is-reversed":!p}),children:Object(T.jsx)("span",{xmlns:"http://www.w3.org/1999/xhtml",children:r.name})})]})},Ye=function(e){var t=e.datasets,a=e.atlasMode,n=e.dimensions;return Object(T.jsx)(Te.a,{title:"Carte des bureaux des fermes de la r\xe9gion PASA",layers:[{type:"choropleth",data:t["map_backgrounds/map_france_1789.geojson"],reverseColors:!a},{type:"custom",data:t["part_3_step3_viz_customs_offices_data/part_3_step3_viz_customs_offices_data.csv"],renderObjects:function(e){return function(e){var t=e.data,a=e.projection,n=e.width,r=e.height,i=e.atlasMode,s=n*r*6e-5;return Object(T.jsxs)("g",{className:O()("IntroBureaux",{"is-atlas-mode":i}),children:[t.filter((function(e){return!isNaN(+e.latitude)&&I.a.customs_office[e.name]})).map((function(e,t){return Object(T.jsx)(De,{projection:a,atlasMode:i,height:r,datum:e,width:n,index:t,radius:s},t)})),t.filter((function(e){return!isNaN(+e.latitude)&&I.a.customs_office[e.name]})).map((function(e,t){return Object(T.jsx)(Ie,{projection:a,height:r,datum:e,width:n,index:t,radius:s},t)}))]})}(Object(o.a)(Object(o.a)({},e),{},{atlasMode:a}))}}],projectionTemplate:"Poitou",width:Object(Y.c)(n.width),height:a?.9*window.innerHeight:Object(Y.c)(n.height)})},He=function(e){var t=e.datasets,a=e.atlasMode,n=e.dimensions,r=a?.9*window.innerHeight:Object(Y.c)(n.height);return Object(T.jsxs)("div",{className:"HomeportFlows",children:[Object(T.jsx)("div",{className:"column",children:Object(T.jsx)(Te.a,{title:"Voyages des bateaux rattach\xe9s au port de La Rochelle en 1787",layers:[{type:"choropleth",data:t["map_backgrounds/map_france_1789.geojson"],reverseColors:!a||void 0},{type:"flows",data:t["voyages-bateaux-homeport-larochelle-1787/voyages-bateaux-homeport-larochelle-1787.csv"],size:{field:"tonnages_cumul\xe9s",title:"Fl\xe8ches dimensionn\xe9es par tonnage cumul\xe9"},label:{fields:["port_dep","port_dest"]},color:{field:"category",title:"Port de d\xe9part"}},{type:"points",data:t["voyages-bateaux-homeport-larochelle-1787/voyages-bateaux-homeport-larochelle-1787.csv"].map((function(e){return Object(o.a)(Object(o.a)({},e),{},{longitude:e.longitude_dep,latitude:e.latitude_dep})})),size:{field:"tonnages_cumul\xe9s",title:"tonnage cumul\xe9"},color:{field:"category",title:"Port de d\xe9part"},label:{field:"port_dep"}}],projectionTemplate:"coast from Nantes to Bordeaux",width:Object(Y.c)(n.width/2),height:r})}),Object(T.jsxs)("div",{className:"column",children:[Object(T.jsx)(Te.a,{title:"Voyages des bateaux rattach\xe9s au port de La Rochelle en 1787",layers:[{type:"choropleth",data:t["map_backgrounds/map_france_1789.geojson"],reverseColors:!a||void 0},{type:"flows",data:t["voyages-bateaux-homeport-larochelle-1787/voyages-bateaux-homeport-larochelle-1787.csv"],size:{field:"tonnages_cumul\xe9s",title:"Fl\xe8ches dimensionn\xe9es par tonnage cumul\xe9"},label:{fields:["port_dep","port_dest"]},color:{field:"category",title:"Port de d\xe9part"}}],projectionTemplate:"France",width:Object(Y.c)(n.width/2),height:r/2}),Object(T.jsx)(Te.a,{title:"Voyages des bateaux rattach\xe9s au port de La Rochelle en 1787",layers:[{type:"choropleth",data:t["map_backgrounds/map_world_1789.geojson"],reverseColors:!a||void 0},{type:"flows",data:t["voyages-bateaux-homeport-larochelle-1787/voyages-bateaux-homeport-larochelle-1787.csv"],size:{field:"tonnages_cumul\xe9s",title:"Fl\xe8ches dimensionn\xe9es par tonnage cumul\xe9"},label:{fields:["port_dep","port_dest"]},color:{field:"category",title:"Port de d\xe9part"}}],projectionTemplate:"World",width:Object(Y.c)(n.width/2),height:r/2,withLegend:"bottom left"})]})]})},Xe=a(336),We=a(672),Ge=a(673),Ve=a(667),Ue=function e(t){return Array.isArray(t)?{name:"root",children:t.map(e)}:t.key&&t.values?{name:t.key,children:t.values.map(e)}:t},Je=function(e){var t,a=e.data,r=e.fieldsHierarchy,i=void 0===r?[]:r,c=e.title,d=e.width,u=void 0===d?1e3:d,p=e.height,m=void 0===p?400:p,f=e.leaf,b=f.labelField,h=f.countField,j=e.color,g=e.tooltip,v=e.margins,O=void 0===v?{}:v,y=Object(n.useState)(0),_=Object(l.a)(y,2),w=_[0],q=_[1],N=Object(n.useState)(0),L=Object(l.a)(N,2),k=L[0],C=L[1],M=Object(n.useRef)(null),P=Object(n.useRef)(null),R=Object(Y.c)(u-k-10),A=Object(Y.c)(m-w),S=Object(o.a)({left:100,top:30,bottom:20,right:20},O),F=Object(n.useMemo)((function(){var e=Object(Xe.a)();i.forEach((function(t){e.key((function(e){return e[t]}))}));var t=Ue(e.entries(a)),n=Object(We.a)(t).sum((function(e){return+e[h]}));return Object(Ge.a)().size([R,A]).tile(Ve.a).round(!0)(n),n}),[a,i,R,A,h]);if(Object(n.useEffect)((function(){setTimeout((function(){var e=P.current?P.current.getBoundingClientRect().height:0,t=M.current?M.current.getBoundingClientRect().width:0;q(e),C(t)}))}),[R,A,j,a]),Object(n.useEffect)((function(){x.a.rebuild()})),j&&j.palette)t=j.palette;else if(j){var E=Object(z.uniq)(a.map((function(e){return e[j.field]}))),B=Object(Y.d)(j.field,E.length);t=E.reduce((function(e,t,a){return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},t,B[a]))}),{})}return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("figure",{style:{width:u,height:m},className:"TreemapChart GenericVisualization",children:[Object(T.jsx)("div",{ref:P,className:"row",children:c?Object(T.jsx)("h5",{className:"visualization-title",children:c}):null}),Object(T.jsxs)("div",{className:"row vis-row",children:[Object(T.jsx)("svg",{className:"chart",width:R,height:A,children:F.leaves().map((function(e,a){var n=e.x0,r=e.y0,i=e.x1-n,s=e.y1-r,o="".concat(e.data[b]," (").concat(e.data[h],")"),c=i/o.length*1.5;return Object(T.jsxs)("g",{transform:"translate(".concat(n,",").concat(r,")"),"data-for":"treemap-tooltip","data-tip":g?g(e.data):void 0,children:[Object(T.jsx)("rect",{stroke:"white",x:0,y:0,width:i,height:s,fill:t[e.data[j.field]]}),s>c?Object(T.jsx)("text",{x:i/2,y:s/2+5,style:{fontSize:c},textAnchor:"middle",children:o}):null]},"".concat(n,"-").concat(r))}))}),j?Object(T.jsxs)("div",{className:"ColorLegend",ref:M,style:{top:w+S.top},children:[Object(T.jsx)("h5",{children:j.title||"L\xe9gende"}),Object(T.jsx)("ul",{className:"color-legend",children:Object.entries(t).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(T.jsxs)("li",{children:[Object(T.jsx)("span",{className:"color-box",style:{background:n}}),Object(T.jsx)("span",{className:"color-label",children:a})]},a)}))})]}):null]})]}),Object(T.jsx)(x.a,{id:"treemap-tooltip"})]})},Ze=["id","dimensions"],Qe=function(e){var t=e.id,a=e.dimensions,r=Object(M.a)(e,Ze),i=Object(o.a)({},a),c=Object(n.useContext)(Ee.a),d=Object(n.useMemo)((function(){var e=Be.find((function(e){return e.id===t}));if(e){var a=e.datasets&&e.datasets.split(",").map((function(e){return e.trim()}));if(a.length&&c)return a.reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},t,c[t]))}),{})}}),[t,c]);if(!(Object.keys(d||{}).length&&!Object.entries(d).find((function(e){var t=Object(l.a)(e,2);t[0];return!t[1]}))))return null;switch(t){case"viz-principale-partie-1":return Object(T.jsx)(U,Object(o.a)(Object(o.a)({},r),{},{datasets:d||{}},i));case"viz-principale-partie-2":return Object(T.jsx)(Me,Object(o.a)(Object(o.a)({},r),{},{datasets:d||{}},i));case"viz-principale-partie-3":return Object(T.jsx)(ze,Object(o.a)(Object(o.a)({},r),{},{datasets:d||{}},i));case"partie-1-produits-importants-pour-la-rochelle":return Object(T.jsx)(Ae.a,{data:d[Object.keys(d)[0]].sort((function(e,t){return+e.order>+t.order?1:-1})).slice(0,20),title:"Produits dont les valeurs d'exports sont les plus importantes en 1789 : comparaison de La Rochelle \xe0 la moyenne fran\xe7aise",width:i.width,height:r.atlasMode?window.innerHeight/2:i.height,orientation:"vertical",layout:"groups",y:{field:"product",title:"produit"},x:{field:"value_rel_per_direction",title:"Valeur en pourcentage",tickSpan:.1,tickFormat:function(e,t){return parseInt(100*e)+"%"}},color:{field:"entity",title:"Part des exports pour :"},margins:{left:140},tooltip:function(e){return"Le produit ".concat(e.product," repr\xe9sente ").concat((100*e.value_rel_per_direction).toFixed(2),"% des exports pour ").concat(e.entity.includes("France")?"la France":"la direction des fermes de La Rochelle")}});case"partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie":return Object(T.jsx)(Ae.a,{data:d[Object.keys(d)[0]],title:"\xc9volution globale de la part des \xe9changes de La Rochelle par rapport \xe0 l'ensemble de la France",width:i.width,height:r.atlasMode?window.innerHeight/2:.5*i.height,orientation:"horizontal",layout:"stack",y:{field:"portion",title:"part du commerce fr.",tickFormat:function(e){return parseInt(100*e)+"%"}},x:{field:"year",title:"ann\xe9e",fillGaps:!0,tickSpan:5},color:{field:"type",title:"Type"},margins:{left:140,right:0},tooltip:function(e){return"En ".concat(e.year,", la direction des fermes de la Rochelle a ").concat("import"===e.type?"import\xe9":"export\xe9"," ").concat((100*+e.portion).toFixed(2),"% des ").concat("import"===e.type?"imports":"exports"," fran\xe7ais totaux")}});case"sorties-de-sel":return Object(T.jsx)(Ae.a,{data:d[Object.keys(d)[0]],title:"Ports de d\xe9part des navires transportant du sel en 1789, agr\xe9g\xe9s par tonnage cumul\xe9",width:i.width,height:r.atlasMode?.8*window.innerHeight:i.height,orientation:"vertical",y:{field:"port",title:"Port",sort:{field:"tonnage",autoSort:!0,ascending:!1,type:"number"}},x:{field:"tonnage",title:"Tonnage cumul\xe9",tickFormat:function(e,t){return"".concat(e," tonneaux")}},margins:{right:60},tooltip:function(e){return"En 1789, ".concat(e.tonnage," tonneaux (et ").concat(e.nb_pointcalls," navires) sont partis de la r\xe9gion PASA avec du sel comme cargaison.")}});case"sorties-de-marennes":return Object(T.jsx)(Ae.a,{data:d[Object.keys(d)[0]],title:"Destination des navires partant de Marennnes en 1789, agr\xe9g\xe9es par pays et par tonnage cumul\xe9",width:i.width,height:r.atlasMode?.8*window.innerHeight:i.height/2,orientation:"vertical",y:{field:"country",title:"Pays",sort:{field:"tonnage",autoSort:!0,ascending:!1,type:"number"}},x:{field:"tonnage",title:"Tonnage cumul\xe9",tickFormat:function(e,t){return"".concat(e," tonneaux")}},margins:{right:60},tooltip:function(e){return"En 1789, ".concat(e.tonnage," tonneaux (et ").concat(e.nb_pointcalls," navires) sont partis du port de Marennes en direction d'un port de ").concat(e.country,".")}});case"partie-1-pays-port-d-attache":return Object(T.jsx)(Ae.a,{data:d[Object.keys(d)[0]],title:"Pays du port d'attache des navires \xe9trangers partant de la r\xe9gion en 1789",width:i.width,height:r.atlasMode?.8*window.innerHeight:i.height,orientation:"vertical",y:{field:"country",title:"Pays du port d'attache",sort:{field:"tonnage",autoSort:!0,ascending:!1,type:"number"}},x:{field:"tonnage",title:"Tonnage cumul\xe9",tickFormat:function(e,t){return"".concat(e," tx")}},margins:{right:60},tooltip:function(e){return"En 1789, ".concat(e.nb_pointcalls," navires soit ").concat(e.tonnage," tonnaux sont partis de la r\xe9gion de La Rochelle (amiraut\xe9s de La Rochelle, Sables d'Olonnes ou Marennes)")}});case"partie-3-comparaison-exports-coloniaux":return Object(T.jsx)(Ae.a,{data:d[Object.keys(d)[0]],title:"Comparaison des exports de produits coloniaux, locaux et autres par bureaux des fermes (1789)",width:i.width,height:r.atlasMode?.8*window.innerHeight:.5*i.height,orientation:"vertical",layout:"grouped",y:{field:"customs_office",title:"Bureau des fermes"},x:{field:"value",title:"valeur en livres tournoi",tickSpan:1e6,domain:[0,6e6]},color:{field:"type",title:"Type de produit"},margins:{left:140,right:50},tooltip:function(e){return"En 1789, le bureau des fermes de ".concat(e.customs_office," a export\xe9 \xe0 l'\xe9trange ").concat(e.value," livres tournois de produits de type ").concat(e.type)}});case"intro-provinces":return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(Te.a,{title:"Carte des provinces \xe9tudi\xe9es : Poitou, Aunis, Saintonge, Angoumois (PASA)",layers:[{type:"choropleth",data:c["map_backgrounds/map_france_1789.geojson"],reverseColors:!r.atlasMode||void 0,color:{field:"shortname",palette:I.a.provinces},tooltip:function(e){return e.properties.shortname}}],projectionTemplate:"France",width:i.width,height:r.atlasMode?.9*window.innerHeight:i.height})});case"intro-ports":return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(Te.a,{title:"Carte des ports de la r\xe9gion PASA",layers:[{type:"choropleth",data:c["map_backgrounds/map_france_1789.geojson"],reverseColors:!r.atlasMode||void 0},{type:"points",data:c["ports_locations_data_intro/ports_locations_data_intro.csv"],color:{field:"province",title:"Province du port",palette:I.a.provinces,labelsColor:r.atlasMode?void 0:"white"},size:{field:"nb_pointcalls",title:"nombre de cong\xe9s enregistr\xe9s en 1789"},tooltip:function(e){return"".concat(e.rawSize," d\xe9parts de navires ont \xe9t\xe9 observ\xe9s par le port de ").concat(e.label," en 1789")},label:{field:"port",position:"left"},stackLabels:!0}],projectionTemplate:"Poitou",width:i.width,height:r.atlasMode?.9*window.innerHeight:i.height,withLegend:"top right"})});case"intro-bureaux":return Object(T.jsx)(Ye,{datasets:c,atlasMode:r.atlasMode,dimensions:i});case"partie-2-part-navigation-francaise":return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(Te.a,{title:"Part de la navigation fran\xe7aise dans la r\xe9gion",layers:[{type:"choropleth",data:c["map_backgrounds/map_france_1789.geojson"],reverseColors:!r.atlasMode||void 0},{type:"points",data:c["part_navigation_fr/part_navigation_fr.csv"],color:{field:"tonnage_part_of_french",title:"Part de la navigation fran\xe7aise (par tonnage cumul\xe9)",palette:I.a.tonnageClasses,labelsColor:r.atlasMode?void 0:"white"},size:{field:"tonnage",title:"Tonnage sorti des ports (en miliers)",displayMetric:!0},label:{field:"port",position:"left"},stackLabels:!0}],projectionTemplate:"Poitou",width:i.width,height:r.atlasMode?.9*window.innerHeight:i.height,withLegend:"top right"})});case"partie-2-carte-direction-bateaux-de-la-rochelle":return Object(T.jsx)(He,{datasets:c,atlasMode:r.atlasMode,dimensions:i});case"partie-1-ports-dattache":return Object(T.jsx)(Je,{data:c["hierarchie_ports_dattache_des_navires_partant_de_la_region/hierarchie_ports_dattache_des_navires_partant_de_la_region.csv"],title:"Ports d'attache des navires partant de la r\xe9gion PASA en 1789 (dimensionn\xe9s par tonnage cumul\xe9)",width:i.width,height:r.atlasMode?.8*window.innerHeight:.8*i.height,tooltip:function(e){return"En 1789, ".concat(e.tonnage," tonneaux cumul\xe9s sortis de la r\xe9gion PASA provenaient de navires rattach\xe9s au port de ").concat(e.homeport," - ").concat(e.category_2,".")},fieldsHierarchy:["country_group","category_1","category_2","ports"],color:{field:"category_2",palette:I.a.portsTreemaps},leaf:{labelField:"homeport",countField:"tonnage"}});case"partie-1-ports-destinations":var u=Object(o.a)({},I.a.portsTreemaps);return delete u["France (r\xe9gion PASA)"],delete u["France (hors r\xe9gion PASA)"],Object(T.jsx)(Je,{data:c["hierarchie_destinations_des_navires_partant_de_la_region/hierarchie_destinations_des_navires_partant_de_la_region.csv"],title:"Destinations des navires partant depuis la r\xe9gion PASA vers l'\xe9tranger en 1789 (dimensionn\xe9es par tonnage cumul\xe9)",width:i.width,height:r.atlasMode?.8*window.innerHeight:.8*i.height,tooltip:function(e){return"En 1789, ".concat(e.tonnage," tonneaux cumul\xe9s sortis de la r\xe9gion PASA ont eu pour destination le port de ").concat(e.port," - ").concat(e.category_2,".")},fieldsHierarchy:["country_group","category_1","category_2","ports"],color:{field:"category_2",palette:u},leaf:{labelField:"port",countField:"tonnage"}});case"exports-eau-de-vie-la-rochelle-longitudinal":return Object(T.jsx)(Fe.a,{data:d[Object.keys(d)[0]],title:"\xc9volution des exports d'eau-de-vie et liqueurs par la direction de La Rochelle (ports francs non pris en compte)",width:i.width,height:r.atlasMode?window.innerHeight/2:i.height/2,orientation:"horizontal",y:{field:"value",title:"valeur",tickFormat:function(e){return e+" lt"}},x:{field:"year",title:"Ann\xe9e"},margins:{left:140},tooltip:function(e){return"En ".concat(e.year,", la direction des fermes de La Rochelle a export\xe9 ").concat(e.value," livres tournois d'eau-de-vie et liqueurs.")}});case"exports-eau-de-vie-comparaison-directions-des-fermes":return Object(T.jsx)(Ae.a,{data:d[Object.keys(d)[0]],title:"Comparaison des exports d'eau-de-vie et liqueurs par diff\xe9rentes directions des fermes (ports francs non pris en compte)",width:i.width,height:r.atlasMode?window.innerHeight/2:i.height/2,orientation:"vertical",layout:"groups",y:{field:"year",title:"ann\xe9e"},x:{field:"value",title:"valeur",tickSpan:1e6},color:{field:"customs_region",title:"direction des fermes"},margins:{left:140},tooltip:function(e){return"En ".concat(e.year,", la direction des fermes de ").concat(e.customs_region," a export\xe9 ").concat(parseInt(e.value)," livres tournois d'eau-de-vie et liqueurs.")}});case"origines-exports-eau-de-vie-1789-la-rochelle":return Object(T.jsx)(Ae.a,{data:d[Object.keys(d)[0]],title:"Origine des exports d'eau-de-vie de la direction des fermes de La Rochelle en 1789 (ports francs non pris en compte)",width:i.width,height:r.atlasMode?window.innerHeight/2:i.height/2,orientation:"vertical",layout:"groups",y:{field:"origin",title:"origine"},x:{field:"value",title:"valeur"},color:{field:"type",title:"type d'eau de vie"},margins:{left:140},tooltip:function(e){return"La direction des fermes de La Rochelle a export\xe9 ".concat(parseInt(e.value)," livres tournois d'eau-de-vie et liqueurs de type \"").concat(e.type,'", originaires de ').concat(e.origin,".")}});case"partie-1-ports-dattache-vers-etranger":return Object(T.jsx)(Je,{data:c["hierarchie_destinations_des_navires_partant_de_la_region_vers_letranger/hierarchie_destinations_des_navires_partant_de_la_region_vers_letranger.csv"],title:"Ports d\u2019attache des navires en provenance de la r\xe9gion PASA et en direction de l\u2019\xe9tranger en 1789 (dimensionn\xe9es par tonnages cumul\xe9s)",width:i.width,height:r.atlasMode?.8*window.innerHeight:.8*i.height,tooltip:function(e){return"En 1789, ".concat(e.tonnage," tonneaux cumul\xe9s sortis de la r\xe9gion PASA \xe9taient rattach\xe9s au port de ").concat(e.homeport," - ").concat(e.category_2,".")},fieldsHierarchy:["country_group","category_1","category_2","homeport"],color:{field:"category_2",palette:I.a.portsTreemaps},leaf:{labelField:"homeport",countField:"tonnage"}});case"test":default:return Object(T.jsx)(P,Object(o.a)(Object(o.a)({},r),{},{datasets:d||{}}))}},Ke=function(e){var t=e.lang,a=e.activeVisualization,r=e.atlasMode,i=Object(n.useState)({}),s=Object(l.a)(i,2),c=s[0],d=s[1],u=a&&k()(a,["id","ref","visualizationId"]);return Object(T.jsx)(C.a,{bounds:!0,onResize:function(e){d(e.bounds)},children:function(e){var n=e.measureRef;return Object(T.jsx)("div",{ref:n,className:O()("VisualizationController",{"is-empty":!a}),children:a?Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(Qe,Object(o.a)(Object(o.a)({lang:t,atlasMode:r,id:r?a.id:a.visualizationId},u),{},{dimensions:c}))}):null})}})},$e=Ke,et=a(168),tt=a(328),at=a.n(tt),nt=a(239),rt=function(e){var t,a,r=e.visualization,i=e.lang,s=e.onClose,o=Object(n.useState)(!1),c=Object(l.a)(o,2),d=c[0],u=c[1];r&&(t=r["comment_cest_fait_".concat(i)],a=r["comment_lire_".concat(i)]);var p={howDone:{fr:"Comment les donn\xe9es et la visualisations ont-elles \xe9t\xe9 produites ?",en:"How were the data and visualization produced ?"},howRead:{fr:"Comment lire la visualisation ?",en:"How to read the visualization?"},copyLink:{fr:"copier le lien de cette visualisation",en:"copy this visualization link"},linkCopied:{fr:"lien copi\xe9 dans le presse-papier !",en:"link copied in the clipboard !"}};return Object(T.jsxs)("div",{className:"VisualizationFocus ".concat(r?"is-visible":"is-hidden"),children:[Object(T.jsx)("div",{onClick:s,className:"lightbox-background"}),r?Object(T.jsxs)("div",{className:"lightbox-contents",children:[Object(T.jsxs)("div",{className:"visualization-details",children:[Object(T.jsxs)("div",{className:"details-header",children:[Object(T.jsx)("h2",{children:r["titre_".concat(i)]}),Object(T.jsx)("button",{className:"close-btn",onClick:s,children:"\u2715"})]}),Object(T.jsx)("div",{className:"copy-link-container",children:Object(T.jsx)("button",{onClick:function(e){e.stopPropagation();var t="".concat(et.a,"/").concat(i,"/atlas/").concat(r.id);u(!0),at()(t),setTimeout((function(){return u(!1)}),5e3)},children:d?p.linkCopied[i]:p.copyLink[i]})}),Object(T.jsxs)("div",{className:"details-contents",children:[t&&t.length?Object(T.jsxs)("section",{className:"details-contents-section",children:[Object(T.jsx)("h3",{children:p.howDone[i]}),Object(T.jsx)(nt.a,{children:t})]}):null,a&&a.length?Object(T.jsxs)("section",{className:"details-contents-section",children:[Object(T.jsx)("h3",{children:p.howRead[i]}),Object(T.jsx)(nt.a,{children:a})]}):null]})]}),Object(T.jsx)("div",{className:"visualization-wrapper",children:Object(T.jsx)(Ke,{lang:i,atlasMode:!0,activeVisualization:r})})]}):null]})},it=rt,st=Be.reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},t.id,t))}),{}),ot=function(e){var t=e.ContentSync,a=e.title,r=e.lang,i=Object(n.useRef)(null),c=Object(n.useState)(!1),d=Object(l.a)(c,2),u=d[0],p=d[1],m=Object(n.useState)(!1),f=Object(l.a)(m,2),b=f[0],h=f[1],j=Object(n.useState)(void 0),v=Object(l.a)(j,2),y=v[0],_=v[1],w=Object(n.useReducer)((function(e,t){return Object(o.a)(Object(o.a)({},e),t)}),{}),q=Object(l.a)(w,2),L=q[0],k=q[1],C=Object(N.useScrollYPosition)();Object(n.useEffect)((function(){!y&&u&&p(!1)}),[y]);Object(n.useEffect)((function(){window.scrollTo(0,0)}),[t]),Object(n.useEffect)((function(){if(!b){var e,t=.6*window.innerHeight,a=C+t,n=Object.entries(L),r=i.current&&i.current.getBoundingClientRect();if(a>r.y+window.scrollY+r.height)y&&_(void 0);else{for(var s=n.length-1;s>=0;s--){var o=Object(l.a)(n[s],2),c=(o[0],o[1]),d=c.ref;if(d.current){var u=d.current.getBoundingClientRect().y+window.scrollY;if("centered-part-contents"===d.current.parentNode.className&&(u+=d.current.parentNode.parentNode.getBoundingClientRect().y),!c.visualizationId&&C+.8*window.innerHeight>u){e=!0,_(void 0);break}if(a>u){e=!0,c.visualizationId?_(c):_(void 0);break}}}0===C&&n.length?_(n[0][1]):!e&&y&&_(void 0)}}}),[C,L]);return Object(T.jsxs)(Ee.b.Provider,{value:{activeVisualization:y,onBlockClick:function(e,t){var a=t.current.getBoundingClientRect().y+window.scrollY-.9*(.6*window.innerHeight);window.scrollTo({top:a,behavior:"smooth"})},onRegisterVisualization:function(e){var t=Object(o.a)({},e);k(Object(o.a)(Object(o.a)({},L),{},Object(s.a)({},e.id,t)))},onUnregisterVisualization:function(e){var t=Object.entries(L).reduce((function(t,a){var n=Object(l.a)(a,2),r=n[0],i=n[1];return r===e?t:Object(o.a)(Object(o.a)({},t),{},Object(s.a)({},r,i))}),{});k(t)}},children:[Object(T.jsx)(g.a,{children:Object(T.jsx)("title",{children:Object(Y.a)(a,r)})}),Object(T.jsxs)("div",{className:"ScrollyPage",children:[Object(T.jsx)("section",{ref:i,className:O()({"is-focused":!u}),children:Object(T.jsx)(t,{})}),Object(T.jsxs)("aside",{className:O()({"is-focused":u}),children:[Object(T.jsx)($e,{activeVisualization:y}),y?Object(T.jsx)("div",{className:"fullscreen-viz-toggle-container",children:Object(T.jsx)("button",{"data-for":"contents-tooltip","data-tip":"plus d'informations sur cette visualisation",onClick:function(){return h(!0)},children:Object(T.jsx)("span",{children:"+"})})}):null]}),Object(T.jsx)(it,{visualization:b&&y?st[y.visualizationId]:void 0,lang:r,onClose:function(){h(!1)}}),Object(T.jsx)("div",{className:O()("vis-focus-container",{"is-active":u,"is-visible":y}),children:Object(T.jsx)("button",{"data-for":"contents-tooltip","data-effect":"solid","data-tip":"fr"===r?"voir la visualisation associ\xe9e":"see associated visualization",onClick:function(){return p(!u)},children:Object(T.jsx)("span",{children:"\u02c3"})})}),Object(T.jsx)(x.a,{id:"contents-tooltip"})]})]})},ct=a(218),lt=a(219),dt=a(220),ut=a(221),pt=a(222),mt=a(223),ft=a(224),bt=a(225),ht=a(226),jt=a(227),gt=a(229),vt=a(228),Ot=[{routes:{fr:"partie-1",en:"part-1"},titles:{fr:"Le d\xe9clin de la r\xe9gion de La Rochelle suite \xe0 la perte du Canada",en:"The decline of La Rochelle region after Canada's loss"},shortTitles:{fr:"le d\xe9clin de la r\xe9gion de La Rochelle",en:"the decline of La Rochelle region"},contents:{fr:"fr/partie-1.mdx",en:"en/part-1.mdx"},contentsProcessed:{fr:ct.default,en:lt.default},Component:ot,routeGroup:"primary"},{routes:{fr:"partie-2",en:"part-2"},titles:{fr:"Une forte sp\xe9cialisation portuaire: le cas de la traite n\xe9gri\xe8re, du commerce du sel et de l'eau-de-vie",en:"A strong portual specialization"},shortTitles:{fr:"une forte sp\xe9cialisation portuaire",en:"a strong portual specialization"},contents:{fr:"fr/partie-2.mdx",en:"en/part-2.mdx"},contentsProcessed:{fr:dt.default,en:ut.default},Component:ot,routeGroup:"primary"},{routes:{fr:"partie-3",en:"part-3"},titles:{fr:"La Rochelle, port dominant mais pas structurant",en:"La Rochelle port, dominating but not structuring"},shortTitles:{fr:"un port dominant mais pas structurant",en:"a dominating but not structuring port"},contents:{fr:"fr/partie-3.mdx",en:"en/part-3.mdx"},contentsProcessed:{fr:pt.default,en:mt.default},Component:ot,routeGroup:"primary"},{routes:{fr:"references",en:"references"},titles:{fr:"R\xe9f\xe9rences",en:"References"},shortTitles:{fr:"r\xe9f\xe9rences",en:"references"},contents:{fr:"fr/references.mdx",en:"en/references.mdx"},contentsProcessed:{fr:ht.default,en:jt.default},routeGroup:"secondary"},{routes:{fr:"a-propos",en:"about"},titles:{fr:"\xc0 propos",en:"About"},shortTitles:{fr:"\xe0 propos",en:"about"},contents:{fr:"fr/a-propos.mdx",en:"en/about.mdx"},contentsProcessed:{fr:ft.default,en:bt.default},routeGroup:"secondary"},{routes:{fr:"tests",en:"tests"},titles:{fr:"Tests",en:"Tests"},shortTitles:{fr:"tests",en:"tests"},contents:{fr:"fr/tests.mdx",en:"fr/tests.mdx"},contentsProcessed:{fr:gt.default,en:vt.default},routeGroup:"secondary",hide:!0}],xt=a(231),yt=function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(T.jsx)(C.a,{bounds:!0,onResize:function(e){r(e.bounds)},children:function(e){var t=e.measureRef;return Object(T.jsx)("div",{ref:t,className:"boats-container",children:Object(T.jsx)(xt.a,Object(o.a)({},Object(o.a)({},a)))})}})};var _t=function(e){var t=e.lang,a=void 0===t?"fr":t,n=e.summary,r={intro:{fr:"d\xe9couvrir les 3 chapitres de l\u2019\xe9tude de cas",en:"discover the 3 chapters of the case study"},atlas:{fr:"Acc\xe9der \xe0 l'atlas de toutes les visualisations",en:"Access all visualizations' atlas"},chapter:{fr:"Chapitre",en:"Chapter"}};return Object(T.jsx)("div",{className:"HomeSummary",children:Object(T.jsxs)("div",{className:"contents",children:[Object(T.jsx)("div",{className:"intro",children:r.intro[a]}),Object(T.jsx)("ul",{className:"chapters-links-container",children:n.filter((function(e){return"primary"===e.routeGroup})).filter((function(e){return e.routes[a]})).map((function(e,t){var n=e.titles[a],i="/".concat(a,"/page/").concat(e.routes[a]);return Object(T.jsx)("li",{children:Object(T.jsxs)(u.c,{to:i,children:[Object(T.jsxs)("h4",{className:"pretitle",children:[r.chapter[a]," ",t+1]}),Object(T.jsx)("h3",{className:"title",children:n})]})},t)}))}),Object(T.jsx)("div",{className:"atlas-link-container",children:Object(T.jsx)(u.c,{to:"ReactSnap"===navigator.userAgent?"/fr/atlas":"/".concat(a,"/atlas"),children:Object(T.jsx)("h3",{className:"title",children:r.atlas[a]})})})]})})},wt={fr:y.a,en:_.a};var qt=function(e){var t=e.match.params.lang,a=void 0===t?"fr":t,r=Object(n.useRef)(null),i=Object(n.useState)(!1),c=Object(l.a)(i,2),d=c[0],u=c[1],p=Object(n.useState)(!1),m=Object(l.a)(p,2),f=m[0],b=m[1],h=wt[a]||y.a,j=h.title,v=h.titleHTML,_=h.subtitle,L=Object(n.useState)(void 0),k=Object(l.a)(L,2),C=k[0],M=k[1],P=Object(n.useReducer)((function(e,t){return Object(o.a)(Object(o.a)({},e),t)}),{}),R=Object(l.a)(P,2),A=R[0],S=R[1],z=Object(N.useScrollYPosition)();return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.useEffect)((function(){for(var e,t,a=.5*window.innerHeight,n=Object.entries(A),r=1/0,i=n.length-1;i>=0;i--){var s=0===i?z+.2*window.innerHeight:z+a,o=Object(l.a)(n[i],2),c=(o[0],o[1]),d=c.ref;if(d.current){var u=d.current.getBoundingClientRect().y+window.scrollY;if("centered-part-contents"===d.current.parentNode.className&&(u+=d.current.parentNode.parentNode.getBoundingClientRect().y),u<r&&(r=u),0===i&&s<u)e=!0,t=c;else if(s>u){e=!0,t=c.visualizationId?c:void 0;break}}}z>.9*window.innerHeight&&!f?b(!0):z<.9*window.innerHeight&&f&&b(!1),!e&&z<r&&n.length&&(t=n[0][1]),!e&&C&&(t=void 0),(C!==!t||!C&&t||C.id!==t.id)&&M(t)}),[z,A]),Object(n.useEffect)((function(){!C&&d&&u(!1)}),[C]),Object(T.jsxs)("div",{className:"Home",children:[Object(T.jsx)(g.a,{children:Object(T.jsx)("title",{children:j})}),Object(T.jsxs)("div",{className:"header",children:[Object(T.jsxs)("div",{className:"titles-container",children:[Object(T.jsx)("h1",{dangerouslySetInnerHTML:{__html:v}}),Object(T.jsx)("h2",{children:_}),Object(T.jsx)("button",{onClick:function(){if(r&&r.current){var e=r.current.offsetTop-window.innerHeight/15;window.scrollTo({top:e,behavior:"smooth"})}},className:"go-to-start",children:Object(T.jsx)("span",{children:"\u2304"})})]}),Object(T.jsx)(yt,{})]}),Object(T.jsxs)("main",{ref:r,className:"intro-container",children:[Object(T.jsx)(Ee.b.Provider,{value:{activeVisualization:C,onBlockClick:function(e,t){var a=t.current.getBoundingClientRect().y+window.scrollY-.9*(.5*window.innerHeight);window.scrollTo({top:a,behavior:"smooth"})},onRegisterVisualization:function(e){var t=Object(o.a)({},e);S(Object(o.a)(Object(o.a)({},A),{},Object(s.a)({},e.id,t)))},onUnregisterVisualization:function(e){var t=Object.entries(A).reduce((function(t,a){var n=Object(l.a)(a,2),r=n[0],i=n[1];return r===e?t:Object(o.a)(Object(o.a)({},t),{},Object(s.a)({},r,i))}),{});S(t)}},children:Object(T.jsxs)("div",{className:"Contents",children:[Object(T.jsx)("section",{className:O()({"is-focused":!d}),children:"fr"===a?Object(T.jsx)(w.default,{}):Object(T.jsx)(q.default,{})}),Object(T.jsx)("aside",{className:O()({"is-focused":d,"is-fixed":f}),children:Object(T.jsx)($e,{activeVisualization:C})})]})}),Object(T.jsx)(_t,{lang:a,summary:Ot}),Object(T.jsx)("div",{className:O()("vis-focus-container",{"is-active":d,"is-visible":C}),children:Object(T.jsx)("button",{"data-for":"contents-tooltip","data-effect":"solid","data-tip":"fr"===a?"voir la visualisation associ\xe9e":"see associated visualization",onClick:function(){return u(!d)},children:Object(T.jsx)("span",{children:"\u02c3"})})})]}),Object(T.jsx)(x.a,{id:"contents-tooltip"})]})},Nt=Be.reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},t.id,t))}),{});var Lt=function(e){var t=e.match.params,a=t.visualizationId,r=t.lang,i=void 0===r?"fr":r;Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var s=Object(d.g)(),o=a&&Nt[a];return Object(T.jsxs)("div",{className:"Atlas secondary-page",children:[Object(T.jsx)(g.a,{children:Object(T.jsx)("title",{children:Object(Y.a)("Atlas",i)})}),Object(T.jsxs)("div",{className:"centered-contents",children:[Object(T.jsx)("h1",{children:"fr"===i?"Atlas des visualisations":"Visualizations atlas"}),Object(T.jsx)("ul",{className:"visualizations-list",children:Be.map((function(e,t){return Object(T.jsxs)("li",{className:O()("visualization-item",{"is-active":o&&o.id===e.id}),onClick:function(){s.push({pathname:"/".concat(i,"/atlas/").concat(e.id)})},children:[Object(T.jsx)("figure",{className:"thumbnail-container",children:Object(T.jsx)("img",{src:"".concat("/portic-storymaps-2021","/thumbnails/").concat(i,"/").concat(e.id,".png"),alt:e["titre_".concat(i)]})}),Object(T.jsx)("h5",{className:"visualization-title",children:e["titre_".concat(i)]})]},t)}))})]}),Object(T.jsx)(rt,{visualization:o,lang:i,onClose:function(){s.push({pathname:"/".concat(i,"/atlas/")})}})]})},kt=function(e){var t=e.id,a=e.lang,n=Be.find((function(e){return e.id===t}));return Object(T.jsx)("div",{className:"StandaloneVisualization",children:Object(T.jsx)(Ke,{lang:a,atlasMode:!0,activeVisualization:n})})},Ct=function(e){var t=e.Content,a=(e.contentsURL,e.title),r=e.lang,i=void 0===r?"fr":r;return Object(T.jsxs)("div",{className:"PlainPage secondary-page",children:[Object(T.jsx)(g.a,{children:Object(T.jsx)("title",{children:Object(Y.a)(a,i)})}),Object(T.jsx)("div",{className:"centered-contents",children:Object(T.jsx)(n.Suspense,{fallback:Object(T.jsx)("div",{children:"Chargement"}),children:Object(T.jsx)(t,{})})})]})},Mt=a(171),Tt={fr:y.a,en:_.a},Pt=I.a.ui,Rt=Pt.colorText,At=Pt.colorAccentBackground,St=Pt.colorBackgroundBlue,zt=Pt.colorBackground,Ft=function(e){var t=e.routes,a=(e.onLangChange,Object(n.useState)(!1)),r=Object(l.a)(a,2),i=r[0],s=r[1],o=Object(d.h)(),c=Object(n.useMemo)((function(){return o.pathname.includes("/page/part")?"page":"/fr/"===o.pathname||"/en/"===o.pathname?"home":"other-page"}),[o]),p=o&&o.match&&o.match.params&&o.match.params.lang,m="fr";p?m=p:o.pathname.includes("/en/")&&(m="en");var f=Object(N.useScrollYPosition)(),b=Object(Mt.a)(f,50),h=Object(S.a)().range([St,zt]).domain([0,1]),j=Object(n.useMemo)((function(){var e=window.innerHeight;switch(c){case"page":return b<e?{fontColor:Rt,backgroundColor:h(b/(e/2))}:{backgroundColor:zt};case"home":return b<.8*e?{fontColor:Rt,backgroundColor:St}:{fontColor:"white",backgroundColor:At};case"other-page":default:return{fontColor:void 0,backgroundColor:zt}}}),[b,h,c]),g=j.fontColor,v=j.backgroundColor,x=Tt[m].titleHTML;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("nav",{style:{background:v,color:g},className:"nav nav-large",children:[Object(T.jsxs)("ul",{className:"primary-nav-container",children:[Object(T.jsx)("li",{className:"navitem-container",children:Object(T.jsx)(u.c,{exact:!0,to:"/".concat(m,"/"),children:"white"===g?Object(T.jsx)("img",{src:"".concat("/portic-storymaps-2021","/rose_des_vents_white.svg"),alt:"logo"}):Object(T.jsx)("img",{src:"".concat("/portic-storymaps-2021","/rose_des_vents.svg"),alt:"logo"})})}),t.filter((function(e){var t=e.routeGroup,a=void 0===t?"primary":t,n=e.hide;return"primary"===a&&!n})).map((function(e,t){var a=e.shortTitles,n=e.routes,r="/".concat(m,"/page/").concat(n[m]);return Object(T.jsx)("li",{className:"navitem-container",children:Object(T.jsx)(u.c,{to:r,children:a[m]})},t)}))]}),Object(T.jsxs)("ul",{className:"secondary-nav-container",children:[Object(T.jsx)("li",{className:"navitem-container",children:Object(T.jsx)(u.c,{to:"/".concat(m,"/atlas"),children:"fr"===m?"atlas des visualisations":"visualizations atlas"})}),t.filter((function(e){var t=e.routeGroup,a=void 0===t?"primary":t,n=e.hide;return"secondary"===a&&!n})).map((function(e,t){var a=e.shortTitles,n=e.routes,r="/".concat(m,"/page/").concat(n[m]);return Object(T.jsx)("li",{className:"navitem-container",children:Object(T.jsx)(u.c,{to:r,children:a[m]})},t)})),null]})]}),Object(T.jsxs)("nav",{style:{},className:O()("nav nav-drawer",{"is-open":i}),children:[Object(T.jsx)("div",{className:"drawer-background",onClick:function(){return s(!i)}}),Object(T.jsxs)("div",{className:"drawer-body",children:[Object(T.jsxs)("ul",{className:"primary-nav-container",children:[Object(T.jsx)("li",{onClick:function(){return s(!1)},className:"navitem-container",children:Object(T.jsx)(u.c,{exact:!0,to:"/".concat(m,"/"),children:"fr"===m?"accueil":"home"})}),t.filter((function(e){var t=e.routeGroup,a=void 0===t?"primary":t,n=e.hide;return"primary"===a&&!n})).map((function(e,t){var a=e.shortTitles,n=e.routes,r="/".concat(m,"/page/").concat(n[m]);return Object(T.jsx)("li",{onClick:function(){return s(!1)},className:"navitem-container",children:Object(T.jsx)(u.c,{to:r,children:a[m]})},t)}))]}),Object(T.jsxs)("ul",{className:"secondary-nav-container",children:[t.filter((function(e){var t=e.routeGroup,a=void 0===t?"primary":t,n=e.hide;return"secondary"===a&&!n})).map((function(e,t){var a=e.shortTitles,n=e.routes,r="/".concat(m,"/page/").concat(n[m]);return Object(T.jsx)("li",{onClick:function(){return s(!1)},className:"navitem-container",children:Object(T.jsx)(u.c,{to:r,children:a[m]})},t)})),Object(T.jsx)("li",{onClick:function(){return s(!1)},className:"navitem-container",children:Object(T.jsx)(u.c,{to:"/".concat(m,"/atlas"),children:"fr"===m?"atlas des visualisations":"visualizations atlas"})}),null]})]}),Object(T.jsxs)("div",{className:"drawer-header",children:[Object(T.jsx)("button",{onClick:function(){return s(!i)},className:O()("drawer-button"),children:"white"===g||i?Object(T.jsx)("img",{style:{background:i?void 0:v},src:"".concat("/portic-storymaps-2021","/rose_des_vents_white.svg"),alt:"logo"}):Object(T.jsx)("img",{style:{background:i?void 0:v},src:"".concat("/portic-storymaps-2021","/rose_des_vents.svg"),alt:"logo"})}),Object(T.jsx)(u.c,{exact:!0,to:"/".concat(m,"/"),children:Object(T.jsx)("h1",{style:{color:i?void 0:g,background:i?void 0:v},dangerouslySetInnerHTML:{__html:x}})})]})]})]})},Et=function(e){var t=e.percentsLoaded,a=void 0===t?0:t;return Object(T.jsx)("div",{className:"loader-container",children:Object(T.jsx)("div",{className:"loader",children:Object(T.jsx)("div",{className:"loading-bar",style:{width:a+"%"}})})})},Bt=a(121),Dt=function(e){e.lang;return Object(T.jsx)("footer",{className:"Footer",children:Object(T.jsx)("div",{className:"footer-contents",children:Object(T.jsx)(Bt.default,{})})})},It=(a(634),["fr","en"]);function Yt(){var e=Object(d.g)(),t=Object(d.h)(),i=Object(n.useState)({}),p=Object(l.a)(i,2),h=p[0],g=p[1],v=Object(n.useState)(0),O=Object(l.a)(v,2),x=O[0],y=O[1];Object(n.useEffect)((function(){var e=m()(Be.filter((function(e){return e.datasets})).reduce((function(e,t){return[].concat(Object(c.a)(e),Object(c.a)(t.datasets.split(",").map((function(e){return e.trim()}))))}),[]));e.reduce((function(t,a,n){return t.then((function(t){return new Promise((function(r,i){var c=a?"".concat("/portic-storymaps-2021","/data/").concat(a):void 0;if(!c)return r(t);j.a.get(c,{onDownloadProgress:function(t){var a=t.loaded/t.total;a=a>1?1:a;var r=n/e.length;y(r+a/e.length)}}).then((function(e){var n=e.data;setTimeout((function(){var e=n;"csv"===c.split(".").pop()?e=Object(f.a)(n):"tsv"===c.split(".").pop()&&(e=Object(b.a)(n)),r(Object(o.a)(Object(o.a)({},t),{},Object(s.a)({},a,e)))}))})).catch((function(e){return console.error(e),r(t)}))}))}))}),Promise.resolve({})).then((function(e){y(1),g(e)})).catch(console.error)}),[]);var _=function(e){var t=e.Content,a=e.ContentSync,n=e.ThatComponent,r=void 0===n?Ct:n,i=e.title,s=e.lang;return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(r,{Content:t,ContentSync:a,title:i,lang:s})})};return Object(T.jsxs)(Ee.a.Provider,{value:h,children:[Object(T.jsxs)("div",{id:"wrapper",children:[Object(T.jsx)("header",{children:Object(T.jsx)(Ft,{onLangChange:function(a){var n="fr"===a?"en":"fr",r=t.pathname;if(r.includes("atlas")){var i=r.split("/atlas/").pop();e.push("/".concat(a,"/atlas/").concat(i||""))}else{var s=e.location.pathname.split("/").pop(),o=Ot.find((function(e){return e.routes[n]===s}));o?e.push("/".concat(a,"/page/").concat(o.routes[a])):e.push("/".concat(a,"/"))}},routes:Ot})}),Object(T.jsxs)("main",{children:[Object(T.jsxs)(d.d,{children:[It.map((function(e){return Ot.map((function(t,n){var i=t.titles,s=t.routes,o=t.contents,c=t.Component,l=t.contentsProcessed,u="/".concat(e,"/page/").concat(s[e]),p=i[e],m=r.a.lazy((function(){return a(635)("./".concat(o[e]))})),f=l[e];return Object(T.jsx)(d.b,{path:u,exact:!0,children:_({Content:m,ThatComponent:c,title:p,ContentSync:f,lang:e})},n)}))})),It.map((function(e){return Be.map((function(t,a){var n=t.id,r="/".concat(e,"/visualization/").concat(n);return Object(T.jsx)(d.b,{path:r,exact:!0,component:function(){return Object(T.jsx)(kt,{id:n,lang:e})}},a)}))})),Object(T.jsx)(d.b,{path:"/:lang/atlas/:visualizationId?",component:Lt}),Object(T.jsx)(d.b,{path:"/:lang",exact:!0,component:qt}),Object(T.jsx)(d.a,{to:"/fr/"})]}),x<1?Object(T.jsx)(Et,{percentsLoaded:100*x}):null]}),Object(T.jsx)(Dt,{lang:"fr"})]}),Object(T.jsxs)(r.a.Fragment,{children:[It.map((function(e){return Ot.filter((function(t){var a=t.routes;return a[e]&&!a[e].includes("test")})).map((function(t,a){t.titles;var n=t.routes,r=(t.contents,t.Component,t.contentsProcessed,"/".concat(e,"/page/").concat(n[e]));return Object(T.jsx)(u.b,{to:r,exact:!0})}))})),It.map((function(e){return Be.map((function(t,a){var n=t.id,r="/".concat(e,"/atlas/").concat(n);return Object(T.jsx)(u.b,{to:r,exact:!0})}))}))]})]})}var Ht="/".concat(et.a.split("/").pop());function Xt(){return Object(T.jsx)(u.a,{basename:Ht,children:Object(T.jsx)(Yt,{})})}var Wt=function(e){e&&e instanceof Function&&a.e(11).then(a.bind(null,675)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),i(e),s(e)}))},Gt=document.getElementById("root");Gt.hasChildNodes()?Object(i.hydrate)(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(Xt,{})}),Gt):Object(i.render)(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(Xt,{})}),Gt),Wt()},66:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s}));var n=a(2),r=a.n(n),i=r.a.createContext({}),s=r.a.createContext({})},78:function(e,t,a){"use strict";t.a={title:"Commerce multi-\xe9chelles autour du port de La Rochelle au XVIII\xe8me si\xe8cle",titleHTML:"Commerce multi-\xe9chelles autour du port de La Rochelle au <span>XVIII</span><sup>e</sup> si\xe8cle",subtitle:"Une \xe9tude de cas du programme de recherche interdisciplinaire PORTIC"}},95:function(e,t,a){"use strict";t.a={title:"Commerce multi-\xe9chelles autour du port de La Rochelle au XVIII\xe8me si\xe8cle",titleHTML:"Commerce multi-\xe9chelles autour du port de La Rochelle au XVIII<sup>e</sup> si\xe8cle",subtitle:"Une \xe9tude de cas du programme de recherche interdisciplinaire PORTIC"}}},[[636,3,4]]]);
//# sourceMappingURL=main.5ca8c2b8.chunk.js.map