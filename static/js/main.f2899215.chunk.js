(this["webpackJsonpreact-gh-pages"]=this["webpackJsonpreact-gh-pages"]||[]).push([[0],{156:function(e,t,n){},262:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){var a={"./en/about.mdx":[271,3],"./en/part-1.mdx":[272,4],"./en/part-2-1.mdx":[273,5],"./en/part-2-2.mdx":[274,6],"./en/part-2-3.mdx":[275,7],"./en/part-2-intro.mdx":[276,8],"./en/part-3.mdx":[277,9],"./fr/a-propos.mdx":[278,10],"./fr/partie-1.mdx":[279,11],"./fr/partie-2-1.mdx":[280,12],"./fr/partie-2-2.mdx":[281,13],"./fr/partie-2-3.mdx":[282,14],"./fr/partie-2-intro.mdx":[283,15],"./fr/partie-3.mdx":[284,16]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=266,e.exports=r},267:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),c=n(132),o=n.n(c),i=(n(156),n(7)),s=n(14),l=n(50),d=r.a.createContext({}),u=n(68),p=n(27),j=n(9),b=n(5);var m=function(e){var t=e.path;return Object(b.jsx)("img",{alt:t,src:"".concat("/portic-storymaps-2021").concat(t)})},f=n(17),O=n(296),h=n(292),g=n(36),x=n.n(g),v=function(e){var t=e.data,n=e.spec,r=Object(a.useState)(null),c=Object(i.a)(r,2),o=c[0],s=c[1],l=Object(a.useState)(!0),d=Object(i.a)(l,2),u=d[0],p=d[1],j="".concat("/portic-storymaps-2021","/data/").concat(t);return Object(a.useEffect)((function(){x()(j).then((function(e){var t=e.data,n=Object(h.a)(t);s(n),p(!1)})).catch((function(e){p(!1)}))}),[j]),n?u?Object(b.jsxs)("div",{children:["Chargement des donn\xe9es (",j,") ..."]}):o?Object(b.jsx)("div",{children:Object(b.jsx)(O.a,{spec:Object(f.a)(Object(f.a)({},n),{},{$schema:"https://vega.github.io/schema/vega-lite/v5.json",data:{values:o}})})}):Object(b.jsx)("div",{children:"Erreur ..."}):Object(b.jsx)("div",{children:"Vous devez sp\xe9cifier une spec pour le composant vega."})},C=n(140),y=n(23),N=n(295),S=n(94),z=n(95),L=n(141),P=n(142),R=n.n(P),k="#999",E=[2,15];var w=n(143),M=n.n(w),D=n(144),T=n.n(D),_=n(145),V=n.n(_);function F(e){var t=e.rescale,n=e.zoomIn,a=e.zoomOut;return Object(b.jsx)("ul",{className:V()("VisControls GraphControls"),children:Object(b.jsxs)("li",{className:"vis-controls-item camera",children:[Object(b.jsx)("button",{onClick:a,children:"-"}),Object(b.jsx)("button",{onClick:n,children:"+"}),Object(b.jsx)("button",{onClick:t,children:"Recentrer"})]})})}var U=n(146),G=n.n(U),I={cmin:25.59,cmax:55.59,lmin:60.94,lmax:90.94},A=["#999"];function q(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}n(262);var B=Object(y.a)().domain([0,1]).range([200,10]),J=Object(y.a)().domain([0,1]).range([300,30]);function X(e){e.getCamera().animatedReset(e)}function H(e){e.getCamera().animatedZoom(e)}function W(e){e.getCamera().animatedUnzoom(e)}function Z(e){var t=e.graph,n=e.nodeColor,r=e.nodeSize,c=e.labelDensity,o=e.nodeLabel,s=e.onCameraUpdate,l=e.cameraPosition,d=e.updateTimestamp,u=Object(a.useMemo)((function(){var e=[];return t.forEachNode((function(t,n){e.push(+(r?n[r]:n.size))})),e}),[r,t]),p=Object(N.a)(u),j={nodeSize:{min:p[0],max:p[1]}},m=Object(a.useMemo)((function(){return r?{min:Object(S.a)(p),max:Object(z.a)(p),name:r}:void 0}),[r,p]),O=Object(a.useMemo)((function(){if(n){var e=[];t.forEachNode((function(t,a){e.push(a[n])})),e=Object(L.uniq)(e);var a=(o=n,1!==(i=e.length)&&i?2===i?["#D77186","#61A2DA"]:G()(i,{colorSpace:I,seed:o,clustering:"force-vector"}):A),r={},c=0;return e.forEach((function(e){r[e]=a[c],c++})),{palette:r,name:n}}var o,i}),[n,t]),h=Object(a.useMemo)((function(){var e=new Map;return t.forEach((function(t,n,a,r,c,o){e.set(c,{sourceNode:a,targetNode:r})})),e}),[t]),g=q(O),x=q(m),v=q(o),P=q(c),w=function(e){var t=e.nodeColor,n=e.nodeSize,a=(e.nodeLabel,e.nodeSizeFactor),r=void 0===a?1:a,c=e.extents,o=null;return o=n?Object(y.a)().domain([n.min,n.max]).range(E):Object(y.a)().domain([c.nodeSize.min,c.nodeSize.max]).range(E),function(e,a){var c=Object(f.a)(Object(f.a)({},a),{},{x:isNaN(a.x)||void 0===a.x?0:a.x,y:isNaN(a.y)||void 0===a.y?0:a.y});if(c.color=t?t.palette[a[t.name]]||k:a.color||k,n){var i=a[n.name];i="number"===typeof i?i:1,c.size=o(i)}else{var s=a.size||1;c.size=o(s)}return c.size*=r,c}}({nodeColor:O,nodeSize:m,nodeLabel:o,extents:j}),M=function(e){var t=e.nodeColor,n=e.nodeSize,a=(e.nodeLabel,e.nodeSizeFactor,e.extents,e.dontColorEdges,e.edgesMap);return function(e,r,c,o){var i=a.get(e),s=i.sourceNode,l=i.targetNode,d={},u=(n?s[n.name]:s.size)>(n?l[n.name]:l.size)?s:l;return u&&(d.color=t?t.palette[u[t.name]]||k:u.color||k,d.color=R()(d.color).lighten(.4).rgb().string()),d}}({nodeColor:O,nodeSize:m,nodeLabel:o,extents:j,edgesMap:h}),D=Object(a.useRef)(null),T=Object(a.useState)(null),_=Object(i.a)(T,2),V=_[0],U=_[1];if(Object(a.useEffect)((function(){l&&V&&V.getCamera().animate(l)}),[d]),V){var Z=!1;g===O&&x===m&&v===o||(V.settings.nodeReducer=w,V.settings.edgeReducer=M,Z=!0),P!==c&&(V.settings.labelGrid.cell={width:J(c),height:B(c)},V.displayedLabels=new Set,Z=!0),Z&&V.refresh()}var $=Object(a.useCallback)((function(e){if(V&&V.graph!==t&&(V.kill(),U(null)),e&&t){var n=new C.WebGLRenderer(t,e,{nodeReducer:w,edgeReducer:M});U(n);var a=n.getCamera();s(a.getState()),a.on("updated",(function(e){s(e)}))}D.current=e}),[t]);return Object(b.jsxs)("div",{className:"VisContainer GraphContainer",children:[Object(b.jsx)("div",{ref:$,style:{width:"100%",height:"50vh"}}),V&&Object(b.jsx)(F,{rescale:X.bind(null,V),zoomIn:H.bind(null,V),zoomOut:W.bind(null,V)})]})}var $=function(e){var t=e.data,n=e.nodeColor,r=e.nodeLabel,c=e.nodeSize,o=e.labelDensity,s=void 0===o?.5:o,l=e.cameraPosition,d=void 0===l?{x:.5,y:.5,angle:0,ratio:1}:l,u=Object(a.useState)(null),p=Object(i.a)(u,2),j=p[0],m=p[1],O=Object(a.useState)(d),h=Object(i.a)(O,2),g=h[0],v=h[1],C=Object(a.useState)(!0),y=Object(i.a)(C,2),N=y[0],S=y[1];Object(a.useEffect)((function(){v(d)}),[d]);var z="".concat("/portic-storymaps-2021","/data/").concat(t);return Object(a.useEffect)((function(){x()(z).then((function(e){var t=e.data,n=M.a.parse(T.a,t);n.forEachNode((function(e){n.updateNode(e,(function(e){return Object(f.a)(Object(f.a)({},e),{},{x:e.x?e.x:0,y:e.y?e.y:0})}))})),m(n),S(!1)})).catch((function(e){S(!1)}))}),[z]),N?Object(b.jsxs)("div",{children:["Chargement des donn\xe9es (",z,") ..."]}):j?Object(b.jsx)("div",{className:"SigmaComponent",children:Object(b.jsx)(Z,{graph:j,cameraPosition:g,nodeColor:n,nodeSize:c,labelDensity:s,nodeLabel:r,onCameraUpdate:function(e){v(e)}})}):Object(b.jsx)("div",{children:"Erreur ..."})},K=n.p+"static/media/ports-region-1789.3778ed29.svg",Q={};function Y(e){var t=e.components,n=Object(p.a)(e,["components"]);return Object(j.a)("wrapper",Object.assign({},Q,n,{components:t,mdxType:"MDXLayout"}),Object(j.a)("h1",null,"Commerce multi-\xe9chelle dans la r\xe9gion de La Rochelle"),Object(j.a)("p",null,'Ce site a vocation \xe0 monter progressivement les "storymaps" issues du datasprint PORTIC 2021.'),Object(j.a)("p",null,"Voici un tour d'horizon des modules react pr\xe9par\xe9s pour faciliter le d\xe9veloppement :"),Object(j.a)("h2",null,"Image SVG (avec webpack)"),Object(j.a)("p",null,"On int\xe8gre une image  SVG depuis le local (elle sera donc pack\xe9e par webpack) :"),Object(j.a)("img",{src:K}),Object(j.a)("h2",null,"Image SVG (sans webpack)"),Object(j.a)("p",null,"On int\xe8gre ici directement une image \xe0 partir de son URL en ligne (depuis le dossier ",Object(j.a)("inlineCode",{parentName:"p"},"public"),")"),Object(j.a)(m,{path:"/svg/ports-region-1789.svg",mdxType:"SvgComponent"}),Object(j.a)("h2",null,"Visualisation vega"),Object(j.a)("p",null,"Les visualisations vega ont besoin d'un fichier csv stock\xe9 dans le dossier ",Object(j.a)("inlineCode",{parentName:"p"},"public/data")," et d'une spec vega."),Object(j.a)(v,{data:"sorties_navires_vers_colonies.csv",spec:{mark:"rect",encoding:{x:{field:"port_depart",type:"nominal"},y:{field:"port_destination",type:"nominal"},color:{type:"quantitative",field:"tonnage",aggregate:"sum"}}},mdxType:"VegaComponent"}),Object(j.a)("h2",null,"R\xe9seau avec sigma"),Object(j.a)("p",null,"Les visualisations sigma ont besoin d'un fichier gexf stock\xe9 dans le dossier ",Object(j.a)("inlineCode",{parentName:"p"},"public/data"),"."),Object(j.a)("p",null,"Param\xe8tres :"),Object(j.a)("ul",null,Object(j.a)("li",{parentName:"ul"},Object(j.a)("inlineCode",{parentName:"li"},"nodeColor")," : attribut pour couleur"),Object(j.a)("li",{parentName:"ul"},Object(j.a)("inlineCode",{parentName:"li"},"nodeSize")," : attribut pour taille"),Object(j.a)("li",{parentName:"ul"},Object(j.a)("inlineCode",{parentName:"li"},"labelDensity")," : densit\xe9 des labels (float dans ","[0, 1]",")")),Object(j.a)($,{data:"toflit_aggregate_1789_only_out.gexf",nodeColor:"admiralty",nodeSize:"inside_degree",labelDensity:.5,mdxType:"SigmaComponent"}),Object(j.a)("h2",null,"Carto avec kepler"),Object(j.a)("h2",null,"Carto sans kepler"))}Y.isMDXComponent=!0;var ee=function(e){var t=e.lang;return Object(b.jsxs)("div",{children:[Object(b.jsx)(u.a,{children:Object(b.jsx)("title",{children:"fr"===t?"Commerce multi-\xe9chelle dans la r\xe9gion de La Rochelle":"Multi-scale trade in La Rochelle region"})}),Object(b.jsx)(Y,{})]})},te=function(e){var t=e.routes,n=e.lang,a=e.onLangChange;return Object(b.jsx)("nav",{children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{className:"navitem-container",children:Object(b.jsx)(l.b,{to:"/",children:"fr"===n?"Accueil":"Home"})}),t.map((function(e,t){var a=e.titles,r=e.routes,c="/page/".concat(n,"/").concat(r[n]);return Object(b.jsx)("li",{className:"navitem-container",children:Object(b.jsx)(l.b,{to:c,children:a[n]})},t)})),Object(b.jsxs)("li",{className:"lang-toggle",children:[Object(b.jsx)("button",{className:"fr"===n?"is-active":"",onClick:function(){return a("fr")},children:"fr"}),Object(b.jsx)("button",{className:"en"===n?"is-active":"",onClick:function(){return a("en")},children:"en"})]})]})})},ne=function(e){var t=e.Content,n=(e.contentsURL,e.title);return Object(b.jsxs)("div",{className:"PlainPage",children:[Object(b.jsx)(u.a,{children:Object(b.jsx)("title",{children:n})}),Object(b.jsx)(a.Suspense,{fallback:Object(b.jsx)("div",{children:"Chargement"}),children:Object(b.jsx)(t,{})})]})},ae=(n(265),[{routes:{fr:"partie-1",en:"part-1"},titles:{fr:"Partie 1 - Le d\xe9clin de la r\xe9gion de La Rochelle suite \xe0 la perte du Canada",en:"Partie 1 - The decline of La Rochelle region after Canada's loss"},contents:{fr:"fr/partie-1.mdx",en:"en/part-1.mdx"}},{routes:{fr:"partie-2",en:"part-2"},titles:{fr:"Partie 2 - Une forte sp\xe9cialisation portuaire: le cas de la traite n\xe9gri\xe8re, du commerce du sel et de l'eau-de-vie",en:"Partie 2 - A strong portual specialization"},contents:{fr:"fr/partie-2-intro.mdx",en:"en/part-2-intro.mdx"}},{routes:{fr:"partie-2-1",en:"part-2-1"},titles:{fr:"Partie 2.1 - La Rochelle et le commerce triangulaire",en:"Partie 2.1 - La Rochelle and triangular trade"},contents:{fr:"fr/partie-2-1.mdx",en:"en/part-2-1.mdx"}},{routes:{fr:"partie-2-2",en:"part-2-2"},titles:{fr:"Partie 2.2 - Le commerce de l\u2019eau-de-vie",en:"Partie 2.2 - Eau-de-vie trade"},contents:{fr:"fr/partie-2-2.mdx",en:"en/part-2-2.mdx"}},{routes:{fr:"partie-2-3",en:"part-2-3"},titles:{fr:"Partie 2.3 - Marennes et le commerce du sel",en:"Partie 2.3 - Marennes and salt trade"},contents:{fr:"fr/partie-2-3.mdx",en:"en/part-2-3.mdx"}},{routes:{fr:"partie-3",en:"part-3"},titles:{fr:"Partie 3 - La Rochelle, port dominant mais pas structurant",en:"Part 3 - La Rochelle port, dominating but not structuring"},contents:{fr:"fr/partie-3.mdx",en:"en/part-3.mdx"}},{routes:{fr:"a-propos",en:"about"},titles:{fr:"\xc0 propos",en:"About"},contents:{fr:"fr/a-propos.mdx",en:"en/about.mdx"}}]),re=["fr","en"];function ce(){var e=Object(s.g)(),t=Object(a.useState)("fr"),c=Object(i.a)(t,2),o=c[0],l=c[1],u=function(e){var t=e.Content,n=e.ThatComponent,a=void 0===n?ne:n,r=e.title;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(a,{Content:t,title:r})})};return Object(b.jsx)(d.Provider,{value:{lang:o},children:Object(b.jsxs)("div",{id:"wrapper",children:[Object(b.jsx)("header",{children:Object(b.jsx)(te,{lang:o,onLangChange:function(t){if(t!==o){var n=o,a=e.location.pathname.split("/").pop(),r=ae.find((function(e){return e.routes[n]===a}));l(t),r&&e.push("/page/".concat(t,"/").concat(r.routes[t]))}},routes:ae})}),Object(b.jsx)("main",{children:Object(b.jsxs)(s.d,{children:[re.map((function(e){return ae.map((function(t,a){var c=t.titles,o=t.routes,i=t.contents,l=t.Component,d="/page/".concat(e,"/").concat(o[e]),p=c[e],j=r.a.lazy((function(){return n(266)("./".concat(i[e]))}));return Object(b.jsx)(s.b,{path:d,children:u({Content:j,ThatComponent:l,title:p})},a)}))})),Object(b.jsx)(s.b,{path:"/",children:Object(b.jsx)(ee,{lang:o})}),Object(b.jsx)(s.a,{to:"/"})]})}),Object(b.jsx)("footer",{})]})})}function oe(){return Object(b.jsx)(l.a,{children:Object(b.jsx)(ce,{})})}var ie=function(e){e&&e instanceof Function&&n.e(17).then(n.bind(null,297)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(oe,{})}),document.getElementById("root")),ie()}},[[267,1,2]]]);
//# sourceMappingURL=main.f2899215.chunk.js.map