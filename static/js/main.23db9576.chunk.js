(this["webpackJsonpportic-storymaps-2021"]=this["webpackJsonpportic-storymaps-2021"]||[]).push([[2],{107:function(e,t,a){"use strict";a.d(t,"b",(function(){return x})),a.d(t,"a",(function(){return O})),a.d(t,"c",(function(){return y}));var n=a(8),r=a(2),i=a(21),o=a(23),s=a(18),l=a.n(s),c=a(236),d=a.n(c),u=a(337),p=a(26),h=a(16),m=a(31),f=a(13),g=a(1),b=function(e){var t=Object(n.a)(e.navigoValues,2),a=t[0],s=t[1],c=e.toflitPct,b=e.transformGroup,v=e.circleRadius,j=e.width,x=e.height,O=e.name,y=e.legendMode,w=e.isActive,_=e.isMinified,L=e.onClick,k=Object(h.c)(v),C=Object(h.c)(j),T=Object(h.c)(x),q=Object(r.useState)(!1),A=Object(n.a)(q,2),R=A[0],N=A[1];Object(r.useEffect)((function(){setTimeout((function(){N(!0)}))}),[]),Object(r.useEffect)((function(){p.a.rebuild()}));var M,S,P=Object(o.useSpring)({to:{transform:b},immediate:!R}).transform,z=1.4*k,F=z*z/2,B=a*F,E=s*F,D=Math.sqrt(B*a),I=Math.sqrt(E*s),H=null,W=null;c&&(H=Math.PI/2+(c-50)/100*Math.PI,W=3*Math.PI/2-(c-50)/100*Math.PI,M=d()(0,0,k,H,W).map((function(e){return e.join(" ")})).join(" "),S=d()(0,0,k,H,W-2*Math.PI).map((function(e){return e.join(" ")})).join(" "));var $=Object(r.useContext)(m.b).lang,G=parseInt(.013*T);return G=G>8?G:8,Object(g.jsxs)(o.animated.g,{className:l()("ExtraversionObject",{"is-active":w,"is-minified":_}),transform:P,onClick:function(){return"function"===typeof L?L(O):void 0},children:[Object(g.jsxs)(g.Fragment,{children:[c&&null!=M?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("path",{d:"".concat(M,"\n                  "),stroke:y?"darkgrey":i.a.generic.accent2,strokeWidth:.005*C,fill:"transparent","data-for":"geo-tooltip","data-tip":"fr"===$&&Object(f.a)("viz-principale-partie-3","value_export_out",$,{number:(100-c).toFixed(1),onclick:"function"===typeof L?"(cliquer pour voir le d\xe9tail des ports)":""})||Object(f.a)("viz-principale-partie-3","value_export_out",$,{number:(100-c).toFixed(1),onclick:"function"===typeof L?"(click to see the details of the ports)":""})}),Object(g.jsx)("path",{d:"".concat(S,"\n                  "),stroke:y?"grey":i.a.ui.colorAccentBackground,strokeWidth:.005*C,fill:"transparent","data-for":"geo-tooltip","data-tip":"fr"===$&&Object(f.a)("viz-principale-partie-3","value_export_in",$,{number:c.toFixed(1),onclick:"function"===typeof L?"(cliquer pour voir le d\xe9tail des ports)":""})||Object(f.a)("viz-principale-partie-3","value_export_in",$,{number:c.toFixed(1),onclick:"function"===typeof L?"(click to see the details of the ports)":""})})]}):null,Object(g.jsx)("path",{className:"left-triangle",fill:y?"darkgrey":i.a.generic.accent2,d:"M ".concat(0," ",-D/2,"\n            V ").concat(D/2,"\n            L ").concat(-D," ",0,"\n            Z\n                "),"data-for":"geo-tooltip","data-tip":"fr"===$&&Object(f.a)("viz-principale-partie-3","value_tonnage_out",$,{number:(100*a).toFixed(1),onclick:"function"===typeof L?"(cliquer pour voir le d\xe9tail des ports)":""})||Object(f.a)("viz-principale-partie-3","value_tonnage_out",$,{number:(100*a).toFixed(1),onclick:"function"===typeof L?"(click to see the details of the ports)":""})}),Object(g.jsx)("path",{className:"right-triangle",fill:y?"grey":i.a.ui.colorAccentBackground,d:"M ".concat(0," ",-I/2,"\n            L ").concat(I," ",0,"\n            L ",0," ").concat(I/2,"\n            Z\n            "),"data-for":"geo-tooltip","data-tip":"fr"===$&&Object(f.a)("viz-principale-partie-3","value_tonnage_in",$,{number:(100*s).toFixed(1),onclick:"function"===typeof L?"(cliquer pour voir le d\xe9tail des ports)":""})||Object(f.a)("viz-principale-partie-3","value_tonnage_in",$,{number:(100*s).toFixed(1),onclick:"function"===typeof L?"(click to see the details of the ports)":""})}),Object(g.jsx)("g",{transform:"translate(".concat(parseInt(0),", ").concat(c?parseInt(k)+15:Object(u.a)([D,I])/2+10,")"),children:Object(g.jsx)("text",{className:"object-label","font-size":G,textAnchor:"middle",children:O})})]}),y?Object(g.jsxs)("g",{className:"legend-container",children:[Object(g.jsx)("foreignObject",{width:2*k,height:2*k,x:3*-k,y:1.7*-k,className:"top left",children:Object(g.jsx)("div",{className:"label-wrapper",children:Object(g.jsx)("span",{children:Object(f.a)("viz-principale-partie-3","foreignObject_export_out",$)})})}),Object(g.jsx)("line",{x1:.95*-k,y1:1.5*-k,x2:.5*-k,y2:1*-k,markerEnd:"url(#triangle-end)"}),Object(g.jsx)("foreignObject",{width:2*k,height:2*k,x:1.2*k,y:1.7*-k,className:"top right",children:Object(g.jsx)("div",{className:"label-wrapper",children:Object(g.jsx)("span",{children:Object(f.a)("viz-principale-partie-3","foreignObject_export_in",$)})})}),Object(g.jsx)("line",{x1:1.15*k,y1:1.5*-k,x2:.5*k,y2:1*-k,markerEnd:"url(#triangle-end)"}),Object(g.jsx)("foreignObject",{width:2*k,height:2*k,x:3*-k,y:0,className:"bottom left",children:Object(g.jsx)("div",{className:"label-wrapper",children:Object(g.jsx)("span",{children:Object(f.a)("viz-principale-partie-3","foreignObject_flow_out",$)})})}),Object(g.jsx)("line",{x1:1.8*-k,y1:.2*k,x2:.3*-k,y2:.1*k,markerEnd:"url(#triangle-end)"}),Object(g.jsx)("foreignObject",{width:2*k,height:2*k,x:1.2*k,y:0,className:"bottom right",children:Object(g.jsx)("div",{className:"label-wrapper",children:Object(g.jsx)("span",{children:Object(f.a)("viz-principale-partie-3","foreignObject_flow_in",$)})})}),Object(g.jsx)("line",{x1:2*k,y1:.2*k,x2:.3*k,y2:.1*k,markerEnd:"url(#triangle-end)"})]}):null]})},v=a(173);function j(e){var t=e.datum,a=e.projection,r=e.width,i=e.height,o=e.projectionTemplate,s=e.isActive,l=e.isMinified,c=e.onClick,d=Object(h.c)(r),u=Object(h.c)(i),p=a([+t.longitude,+t.latitude]),m=Object(n.a)(p,2),f=m[0],v=m[1],j=.05*d,x=parseFloat(t.cumulated_tonnage_out_region)+parseFloat(t.cumulated_tonnage_in_region);"port"===t.type_of_object&&(x<1e3?j=.025*d:x>5e3&&(j=.075*d));var O=parseFloat(t.cumulated_tonnage_out_region)/x,y=parseFloat(t.cumulated_tonnage_in_region)/x,w=0;if("customs_office"===t.type_of_object){var _=parseFloat(t.cumulated_exports_value_from_region)+parseFloat(t.cumulated_exports_value_from_ext);w=100===(w=parseFloat(t.cumulated_exports_value_from_region)/_*100)?99.99:w}var L="translate(".concat(f,",").concat(v,")");o.includes("Poitou")&&("Tonnay-Charente"===t.name?L="translate(".concat(f+.15*d,",").concat(v,")"):"Rochefort"===t.name?L="translate(".concat(f+.04*d,",").concat(v-0*u,")"):"Marennes"===t.name?L="translate(".concat(f-.03*d,",").concat(v+.05*u,")"):"Marans"===t.name?L="translate(".concat(f+.03*d,",").concat(v-.05*u,")"):"Saint-Martin-de-R\xe9"===t.name?L="translate(".concat(f-.06*d,",").concat(v,")"):"Les Sables-d'Olonne"===t.name&&(L="translate(".concat(f-.01*d,",").concat(v-.03*u,")")));var k="France"===o?L+" scale(0.1)":L+" scale(".concat(l?.5:1,")");return Object(g.jsx)(b,{transformGroup:k,navigoValues:[O,y],toflitPct:isNaN(w)?100:w,circleRadius:j,width:d,height:u,name:t.name,isActive:s,isMinified:l,onClick:c})}function x(e){var t=e.data,a=t.customsOffices,o=void 0===a?[]:a,s=t.ports,l=void 0===s?[]:s,c=e.projection,d=e.width,u=e.height,p=e.projectionTemplate,m=Object(h.c)(d),f=Object(h.c)(u),v=Object(r.useState)(void 0),x=Object(n.a)(v,2),O=x[0],y=x[1],w=function(e){y(e===O?void 0:e)},_=Object(r.useMemo)((function(){return O?l.filter((function(e){return e.customs_office===O})):[]}),[O,l]),L=.18*f,k=.55*f,C=.35*m,T=_.length?k/_.length:k;return Object(g.jsxs)("g",{className:"Step3Objects",children:[O?Object(g.jsxs)("g",{className:"ports-details",children:[Object(g.jsx)("foreignObject",{x:0,y:0,width:.4*m,height:f/2,className:"ports-details-title",children:Object(g.jsxs)("h5",{children:["Ports associ\xe9s au bureau des fermes de ",O," (",_.length,")"]})}),Object(g.jsx)("g",{className:"ports-space",transform:"translate(".concat(15,", ").concat(L,")"),children:_.sort((function(e,t){var a=c([+e.longitude,+e.latitude]),r=Object(n.a)(a,2),i=(r[0],r[1]),o=c([+t.longitude,+t.latitude]),s=Object(n.a)(o,2);s[0];return i>s[1]?1:-1})).map((function(e,t){var a=c([+e.longitude,+e.latitude]),r=Object(n.a)(a,2),o=r[0],s=r[1],l=.05*m,d=l,u=parseFloat(e.cumulated_tonnage_out_region)+parseFloat(e.cumulated_tonnage_in_region);u<1e3?d=.025*m:u>5e3&&(d=.075*m);var p=parseFloat(e.cumulated_tonnage_out_region)/u,h=parseFloat(e.cumulated_tonnage_in_region)/u,v=C/2-2*l+(_.length>5?t%2===0?0:2*l:0),j=T*t,x="translate(".concat(v,", ").concat(j,")");return Object(g.jsxs)("g",{className:"port-group",children:[Object(g.jsx)("line",{x1:v,y1:j,x2:o-15,y2:s-L}),Object(g.jsx)("circle",{cx:o-15,cy:s-L,r:.002*m,style:{fill:i.a.generic.dark},className:"marker"}),Object(g.jsx)(b,{transformGroup:x,navigoValues:[p,h],circleRadius:d,width:m,height:f,name:e.name})]},e.name)}))})]}):null,o.map((function(e,t){return Object(g.jsx)(j,{datum:e,projection:c,width:m,height:f,projectionTemplate:p,onClick:w,isActive:e.name===O,isMinified:O&&e.name!==O},e.name)}))]})}function O(e){var t=e.data,a=e.width,n=e.height,i=Object(h.c)(a),o=Object(h.c)(n),s=t.filter((function(e){var t=e.name;return"Le Havre"===t||"Nantes"===t||"Bordeaux"===t||"La Rochelle"===t})).sort((function(e,t){return e.cumulated_exports_value_from_region>t.cumulated_exports_value_from_region?-1:1}));s.unshift({name:"L\xe9gende",cumulated_tonnage_in_region:60,cumulated_tonnage_out_region:60,cumulated_exports_value_from_region:50,cumulated_exports_value_from_ext:50,legendMode:!0});var l=15,c=.05*i,d=o-c-30,u=2*c+l,p=.4*i,v=Object(r.useContext)(m.b).lang;return Object(g.jsxs)("g",{className:"small-multiples-and-legend-and-title",children:[Object(g.jsx)("rect",{x:p+30,y:d-3*c,width:i-p-60,height:o-d+3*c-7.5,style:{fill:"white"},opacity:.5}),Object(g.jsx)("foreignObject",{x:p+1.5*c,y:d-3*c,width:(2*c+l)*(s.length-1),height:o,children:Object(g.jsx)("div",{style:{position:"relative"},children:Object(g.jsx)("h5",{className:"visualization-title",style:{position:"absolute",left:0,bottom:0},children:Object(f.a)("viz-principale-partie-3","SmallMultiples_title",v)})})}),Object(g.jsx)("g",{className:"small-multiples",children:s.map((function(e,t){var a=parseFloat(e.cumulated_tonnage_out_region)+parseFloat(e.cumulated_tonnage_in_region),n=parseFloat(e.cumulated_tonnage_out_region)/a,r=parseFloat(e.cumulated_tonnage_in_region)/a,s=parseFloat(e.cumulated_exports_value_from_region)+parseFloat(e.cumulated_exports_value_from_ext),h=parseFloat(e.cumulated_exports_value_from_region)/s*100;return e.legendMode?Object(g.jsx)(b,{transformGroup:"translate(".concat(1*c*4+l+t*(1*c+l),", ").concat(d-(1*c-c),")"),navigoValues:[n,r],toflitPct:h,circleRadius:1*c,width:i,height:o,name:e.name,legendMode:e.legendMode}):Object(g.jsx)(b,{transformGroup:"translate(".concat(p+t*u,", ").concat(d,")"),navigoValues:[n,r],toflitPct:h,circleRadius:c,width:i,height:o,name:e.name,legendMode:e.legendMode})}))}),Object(g.jsx)("defs",{children:Object(g.jsx)("marker",{id:"triangle-end",viewBox:"-10 0 10 10",refX:"1",refY:"5",markerUnits:"strokeWidth",markerWidth:.01*i,markerHeight:.01*i,orient:"auto",children:Object(g.jsx)("path",{d:"M -10 0 L 0 5 L -10 10 Z",fill:"darkgrey"})})})]})}function y(e){var t=e.data,a=e.width,n=e.height,r=e.projection,i=e.projectionTemplate,o=e.atlasMode,s=e.lang,l=Object(h.c)(a),c=Object(h.c)(n);return Object(g.jsx)(v.a,{data:t,totalWidth:l,rowHeight:.3*c,projection:r,projectionTemplate:i,atlasMode:o,lang:s})}},108:function(e,t,a){"use strict";a.d(t,"a",(function(){return T}));var n=a(10),r=a(8),i=a(2),o=a(327),s=a.n(o),l=a(237),c=a.n(l),d=a(328),u=a.n(d),p=a(329),h=a(57),m=a(282),f=a(122),g=a(121),b=a(24),v=a(330),j=a.n(v),x="#999",O=[2,15];var y=a(16),w=a(70),_=(a(595),a(1)),L=Object(h.a)().domain([0,1]).range([200,10]),k=Object(h.a)().domain([0,1]).range([300,30]);function C(e){var t=e.graph,a=e.nodeColor,o=e.nodeSize,s=e.labelDensity,l=e.nodeLabel,c=e.onCameraUpdate,d=e.cameraPosition,u=e.updateTimestamp,v=e.width,C=e.height,T=e.ratio,q=Object(i.useMemo)((function(){var e=[];return t.forEachNode((function(t,a){e.push(+(o?a[o]:a.size))})),e}),[o,t]),A=Object(m.a)(q),R={nodeSize:{min:A[0],max:A[1]}},N=Object(i.useMemo)((function(){return o?{min:Object(f.a)(A),max:Object(g.a)(A),name:o}:void 0}),[o,t]),M=Object(i.useMemo)((function(){if(a&&a.field){var e=[];t.forEachNode((function(t,n){e.push(n[a.field])})),e=Object(b.uniq)(e);var n={};if(a.palette)n=a.palette;else{var r=Object(y.e)(a.field,e.length),i=0;e.forEach((function(e){n[e]=r[i],i++}))}return{palette:n,name:a.field}}}),[a,t]),S=Object(i.useMemo)((function(){var e=new Map;return t.forEach((function(t,a,n,r,i,o){e.set(i,{sourceNode:n,targetNode:r})})),e}),[t]),P=Object(w.c)(M),z=Object(w.c)(N),F=Object(w.c)(l),B=Object(w.c)(s),E=function(e){var t=e.nodeColor,a=e.nodeSize,r=(e.nodeLabel,e.nodeSizeFactor),i=void 0===r?1:r,o=e.extents,s=null;return s=a?Object(h.a)().domain([a.min,a.max]).range(O):Object(h.a)().domain([o.nodeSize.min,o.nodeSize.max]).range(O),function(e,r){var o=Object(n.a)(Object(n.a)({},r),{},{x:isNaN(r.x)||void 0===r.x?0:r.x,y:isNaN(r.y)||void 0===r.y?0:r.y});if(o.color=t?t.palette[r[t.name]]||x:r.color||x,a){var l=r[a.name];l="number"===typeof l?l:1,o.size=s(l)}else{var c=r.size||1;o.size=s(c)}return o.size*=i,o}}({nodeColor:M,nodeSize:N,nodeLabel:l,extents:R}),D=function(e){var t=e.nodeColor,a=e.nodeSize,n=(e.nodeLabel,e.nodeSizeFactor,e.extents,e.dontColorEdges,e.edgesMap);return function(e,r,i,o){var s=n.get(e),l=s.sourceNode,c=s.targetNode,d={},u=(a?l[a.name]:l.size)<(a?c[a.name]:c.size)?l:c;return u&&(d.color=t?t.palette[u[t.name]]||x:u.color||x,d.color=j()(d.color).lighten(.4).rgb().string()),d}}({nodeColor:M,nodeSize:N,nodeLabel:l,extents:R,edgesMap:S}),I=Object(i.useRef)(null),H=Object(i.useState)(null),W=Object(r.a)(H,2),$=W[0],G=W[1];if(Object(i.useEffect)((function(){d&&$&&$.getCamera().animate(d)}),[u]),$){var Y=!1;P===M&&z===N&&F===l||($.settings.nodeReducer=E,$.settings.edgeReducer=D,Y=!0),B!==s&&($.settings.labelGrid.cell={width:k(s),height:L(s)},$.displayedLabels=new Set,Y=!0),Y&&$.refresh()}Object(i.useEffect)((function(){$&&$.refresh()}),[v,C]);var X=Object(i.useCallback)((function(e){if($&&$.graph!==t&&($.kill(),G(null)),e&&t){var a=new p.WebGLRenderer(t,e,{nodeReducer:E,edgeReducer:D});a.settings.labelFont="IBM Plex Sans",G(a);var r=a.getCamera();r.setState(Object(n.a)(Object(n.a)({},r.getState()),{},{ratio:T||1})),r.disable(),c(r.getState()),r.on("updated",(function(e){c(e)}))}I.current=e}),[t]);return Object(_.jsx)("div",{className:"VisContainer GraphContainer",children:Object(_.jsx)("div",{ref:X,style:{width:"100%",height:"100%",minHeight:"10vh",minWidth:"1vw"}})})}function T(e){var t=e.data,a=e.nodeColor,n=e.nodeLabel,o=e.nodeSize,l=e.labelDensity,d=void 0===l?.5:l,p=e.spatialize,h=e.cameraPosition,m=void 0===h?{x:.5,y:.5,angle:0,ratio:1}:h,f=e.width,g=void 0===f?0:f,b=e.height,v=e.ratio,j=e.title,x=Object(i.useRef)(null),O=Object(i.useMemo)((function(){return x.current?x.current.getBoundingClientRect().height:0}),[x.current]),y=Object(i.useState)(m),w=Object(r.a)(y,2),L=w[0],k=w[1];Object(i.useEffect)((function(){["x","y","angle","ratio"].find((function(e){return m[e]!==L[e]}))&&k(m)}),[m]);var T=Object(i.useMemo)((function(){var e=s.a.parse(u.a,t);if(p){var a=c.a.inferSettings(e);c.a.assign(e,{settings:a,iterations:50})}return e}),[t]);return T?Object(_.jsxs)("div",{className:"NetworkGraphChart",style:{width:"100%",height:b||"100%"},children:[Object(_.jsx)("div",{ref:x,className:"row visualization-title-container",children:j?Object(_.jsx)("h5",{className:"visualization-title",children:j}):null}),Object(_.jsx)("div",{style:{position:"relative",flex:1},children:Object(_.jsx)(C,{graph:T,cameraPosition:L,nodeColor:a,nodeSize:o,labelDensity:d,nodeLabel:n,ratio:v,onCameraUpdate:function(e){k(e)},width:g,height:b-O})})]}):null}},129:function(e){e.exports=JSON.parse('{"viz-principale-partie-1":{"franceOverviewTitle":{"fr":"\xc9volution de la valeur des exports du royaume de France de ${start} \xe0 ${end}","en":"Evolution of the value of exports from the kingdom of France from ${start} to ${end}"},"tradeEvolutionTitle":{"fr":"\xc9volution du commerce de la direction des fermes de ${cityName} de ${start} \xe0 ${end}","en":"Evolution of the direction des fermes of ${cityName} trade from ${start} to ${end}"},"top90PctTitle":{"fr":"Comparaison des parts des produits export\xe9s par la direction des fermes de ${cityName} totalisant plus de 90% du commerce en ${start} et en ${end} (ports francs non pris en compte)","en":"Comparison of shares of the top 90% of exported products by the direction des fermes of ${cityName} in ${start} and in ${end} (ports francs non pris en compte)"},"partInPct":{"fr":"part des exports fr","en":"share of french exports"},"absoluteValue":{"fr":"valeur absolue des exports","en":"exports absolute value"},"herfindalLegendTitle":{"fr":"degr\xe9 de diversit\xe9 du commerce","en":"degree of trade diversity"},"herfindal0":{"fr":"commerce peu diversifi\xe9","en":"fewly diversified trade"},"herfindal1":{"fr":"commerce tr\xe8s diversifi\xe9","en":"very diversified trade"},"barTooltip":{"fr":"En <strong>${year}</strong> ${pct}% des biens export\xe9s depuis la France le sont \xe0 partir de <strong>${city}</strong>.<br/><br/>Concentration du commerce <i>(indice de Herfindahl-Hirschmann : somme du carr\xe9 des parts du march\xe9 fran\xe7ais par classe de produits export\xe9s)</i> : <span>[colorBox] ${herfindal}</span>","en":"In <strong>${year}</strong> ${pct}% of exported goods from France were exported from <strong>${city}</strong>.<br/><br/>Trade concentration <i>(Herfindahl-Hirschmann index : sum of square French market shares sorted by exported products classes)</i> : <span>[colorBox] ${herfindal}</span>"},"productTooltip":{"fr":"En <strong>${year}</strong> les produits de la classe \\"${product}\\" repr\xe9sentent <strong>${pct}%</strong> de la valeur des biens export\xe9s par la direction des fermes de La Rochelle.","en":"In <strong>${year}</strong> products classed as \\"${product}\\" represent ${pct}% of goods exported by La Rochelles direction des fermes."},"sevenYearsWar":{"fr":"guerre de sept ans","en":"seven years war"},"austriaWar":{"fr":"guerre franco-britannique au sein de la guerre de succession d\u2019Autriche","en":"Franco-British conflict within the War of Jenkins\'s Ear"},"usIndependance":{"fr":"guerre d\u2019ind\xe9pendance Am\xe9ricaine","en":"American War of Independence"},"laRochelleDiaspora":{"fr":"Organisation de convois partant de La Rochelle pour \xe9chapper aux Anglais","en":"Organization of convoys from La Rochelle to avoid British seizures"},"other_product":{"fr":"${number} autres types de produits","en":"${number} of other kinds of products"}},"viz-principale-partie-2":{"toflit18titles":{"fr":"\xc9changes de la direction des fermes de La Rochelle en 1789 par bureau, produit et partenaire, dimensionn\xe9s selon leur ${sumToflitBy}","en":"Trade from the Customs region of La Rochelle in 1789 per bureau, product and partner, sized according to their ${sumToflitBy}"},"navigoTitles":{"fr":"Parts de diff\xe9rents groupes de directions pour les navires partis de la r\xe9gion PASA en 1789","en":"Different groups of Customs regions for ships departing from the PASA region"},"node_0_5":{"fr":"En 1789, le bureau des fermes de ${id} a ${step} ${number} ${sumBy}","en":"In 1789, the bureau des fermes of ${id} has ${step} ${number} ${sumBy}"},"node_1_4":{"fr":"En 1789, la direction des fermes de La Rochelle a ${step} ${number} ${sumBy} de ${id}","en":"In 1789, the direction des fermes de La Rochelle has ${step} ${number} ${sumBy} of ${id}"},"node_other":{"fr":"En 1789, la direction des fermes de La Rochelle a ${step} ${number} ${sumBy} vers le partenaire ${id}","en":"In 1789, the direction des fermes de La Rochelle has ${step} ${number} ${sumBy} to the partner ${id}"},"flow":{"fr":"En 1789, le bureau des fermes de ${customs_office} a ${flow_type} ${number} ${sumBy} de ${product} ${flow_direction} le partenaire ${partner}","en":"In 1789, the bureau des fermes of ${customs_office} has ${flow_type} ${number} ${sumBy} of ${product} ${flow_direction} the partner ${partner}"},"customs_office":{"fr":"bureau des fermes","en":"customs office"},"product":{"fr":"type de produit","en":"product type"},"partner":{"fr":"partenaire du commerce ext\xe9rieur","en":"external trade partner"},"radar_legend":{"fr":"Ports de d\xe9part agr\xe9g\xe9s par bureau des Fermes","en":"Aggregate ports of bureau des Fermes"},"travel_aggregate":{"fr":"voyages agr\xe9g\xe9s par","en":"flows aggregate by"},"radar_tonnage":{"fr":"tonnage ${method}","en":"tonnage ${method}"},"radar_flows":{"fr":"nombre de voyages ${tonnage}","en":"flows number"},"radar_tip_region":{"fr":"Parts des destinations des voyages de 1789 initi\xe9s depuis tous les ports de la r\xe9gion","en":"Destinations of ships departing from all ports of the PASA region in 1789"},"radar_tip_office":{"fr":"Part des destinations pour les voyages de 1789 initi\xe9s depuis des ports rattach\xe9s au bureau des fermes de <strong>${name}</strong>","en":"Destinations of ships departed from the ports of the Customs office of <strong>${name}</strong> in 1789"}},"viz-principale-partie-3":{"GeographicMapChart_title":{"fr":"Navigation au d\xe9part des ports de la r\xe9gion PASA en 1789","en":"Departures from the PASA region in 1789"},"nb_pointcalls_out":{"fr":"Nombre de navires sortis du port en 1789","en":"Number of departures from the port in 1789"},"mean_tonnage":{"fr":"Tonnage moyen des navires","en":"Average ships\' burden (in French tonneaux)"},"GeographicMapChart_second_title":{"fr":"Extraversion du commerce et de la navigation regroup\xe9s par bureau de fermes en 1789","en":"Trade and shipping extroversion by Customs office in 1789"},"network_1_title":{"fr":"R\xe9seau des voyages partant ou arrivant dans la r\xe9gion PASA en 1787\u2026","en":"Voyage network of ships departing from or bound for the PASA region in 1787..."},"network_2_title":{"fr":"\u2026compar\xe9 \xe0 celui de l\\\\\'amiraut\xe9 de Bordeaux","en":"\u2026compared to the admiralty office of Bordeaux"},"network_3_title":{"fr":"\u2026compar\xe9 \xe0 celui de l\\\\\'amiraut\xe9 de Nantes","en":"\u2026compared to the admiralty office of Nantes"},"network_legend_title":{"fr":"L\xe9gende des r\xe9seaux","en":"Network caption"},"network_legend_color_title":{"fr":"Taille des points repr\xe9sentant les ports : nombre de liens avec d\'autres ports dans le r\xe9seau","en":"Size of the dots representing the ports: number of links to other ports in the network"},"network_legend_color_1":{"fr":"Port interne \xe0 la r\xe9gion","en":"Port within the PASA region"},"network_legend_color_2":{"fr":"Port externe \xe0 la r\xe9gion","en":"Port outside the PASA region"},"barchart_title":{"fr":"Centralit\xe9 compar\xe9e de La Rochelle par rapport \xe0 PASA et, pour ses r\xe9gions c\xf4ti\xe8res voisines, du port principal par rapport au r\xe9seau des voyages de son amiraut\xe9 (1787)","en":"Comparative centrality of La Rochelle with regard to the PASA region, and, for its neighboring regions, centrality of the main port with regard to the total departures from ports in its admiralty office (1787)"},"barchart_y":{"fr":"Port (dans son r\xe9seau local)","en":"Port (in its local network"},"barchart_x":{"fr":"Score","en":"Score"},"barchart_color":{"fr":"Type de m\xe9trique","en":"Kind of measure"},"barchart_toolip_pagerank":{"fr":"Le PageRank est une mesure de centralit\xe9 qui consiste \xe0 donner \xe0 chaque port un score proportionnel \xe0 la somme des pageranks des ports avec lesquels il a des voyages en commun.","en":"PageRank is a centrality measure providing each port with a score proportional to the sum of pageranks of ports to which it is directly connected."},"barchart_toolip_nopagerank":{"fr":"La centralit\xe9 interm\xe9diaire est une mesure de centralit\xe9 \xe9gale au nombre de fois o\xf9 un port donn\xe9 est sur le chemin le plus court entre deux autres ports du r\xe9seau des voyages.","en":"The betweenness centrality is a centrality measure equal to the number of instances in which a given port is on the shortest path between two other ports of the voyage network"},"SmallMultiples_title":{"fr":"Comparaison avec les bureaux de fermes et ports dominants d\'autres directions en 1787","en":"Trade and shipping extroversion by Customs office in 1789"},"value_export_out":{"fr":"${number}% de valeur d\'exports de produits fabriqu\xe9s hors de la direction ${onclick}","en":"${number}% of exports (value) of goods produced outside the Customs region ${onclick}"},"value_export_in":{"fr":"${number}% de valeur d\'exports de produits fabriqu\xe9s dans la direction ${onclick}","en":"${number}% of exports (value) of goods produced within the Customs region ${onclick"},"value_tonnage_out":{"fr":"${number}% du tonnage cumul\xe9 des voyages r\xe9alis\xe9s vers l\'ext\xe9rieur de la direction ${onclick}","en":"${number}% of cumulative ships\' tonnage of voyages bound outside the Customs region ${onclick}"},"value_tonnage_in":{"fr":"${number}% du tonnage cumul\xe9 des voyages r\xe9alis\xe9s vers l\'int\xe9rieur de la direction ${onclick}","en":"${number}% of cumulative ships\' tonnage of voyages within the Customs region ${onclick}"},"foreignObject_export_out":{"fr":"Part des exports de produits fabriqu\xe9s hors de la direction","en":"Share of exports of goods produced outside the Customs region"},"foreignObject_export_in":{"fr":"Part des exports de produits fabriqu\xe9s dans la direction","en":"Share of exports of goods produced within the Customs region"},"foreignObject_flow_out":{"fr":"Part des voyages hors direction (tonnage c.)","en":"Share of voyages outside the Customs region (cumulated tonnage)"},"foreignObject_flow_in":{"fr":"Part des voyages dans la direction (tonnage c.)","en":"Share of voyages within the Customs region (cumulated tonnage)"}},"partie-1-produits-importants-pour-la-rochelle":{"title":{"fr":"Produits dont les valeurs d\'exports sont les plus importantes en 1789 : comparaison de La Rochelle \xe0 la moyenne fran\xe7aise","en":"Most important exported products (in value) in 1789: La Rochelle compared to the French average"},"color":{"fr":"Part des exports pour :","en":"Percentage of exports for:"},"x":{"fr":"Valeur en pourcentage","en":"Value (percentage)"},"y":{"fr":"Produit","en":"Product"},"tooltip":{"fr":"Le produit ${product} repr\xe9sente ${value}% des exports pour ${entite}","en":"The product ${product} represents ${value}% of exports for ${entite}"}},"partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie":{"title":{"fr":"\xc9volution globale de la part des \xe9changes de La Rochelle par rapport \xe0 l\'ensemble de la France","en":"Global development of La Rochelle\u2019s trade compared with French trade as a total"},"color":{"fr":"Type","en":"Type"},"x":{"fr":"Ann\xe9e","en":"Year"},"y":{"fr":"Part du commerce fr.","en":"Percentage of French trade"},"tooltip":{"fr":"En ${year}, la direction des fermes de la Rochelle a ${direction} ${value}% des ${type} fran\xe7ais totaux","en":"In ${year}, the Customs region of La Rochelle ${direction} ${value}% of total French ${type}"}},"sorties-de-sel":{"title":{"fr":"Ports de d\xe9part des navires transportant du sel en 1789, agr\xe9g\xe9s par tonnage cumul\xe9","en":"Cumulative tonnage of ships carrying salt in 1789, per port"},"y":{"fr":"Port","en":"port"},"x":{"fr":"Tonnage cumul\xe9","en":"Cumulative tonnage"},"tooltip":{"fr":"En 1789, ${tonnage} tonneaux (et ${number} navires) sont partis de la r\xe9gion PASA avec du sel comme cargaison.","en":"In 1789, ${tonnage} French tonneaux (and ${number} ships) departed from the PASA region with a cargo of salt"}},"sorties-de-marennes":{"title":{"fr":"Destination des navires partant de Marennnes en 1789, agr\xe9g\xe9es par pays et par tonnage cumul\xe9","en":"Aggregated tonnage of ships departing from Marennes in 1789, by country of destination"},"y":{"fr":"Pays","en":"Country"},"x":{"fr":"Tonnage cumul\xe9","en":"Cumulative tonnage"},"tooltip":{"fr":"En 1789, ${tonnage} tonneaux (et ${number} navires) sont partis du port de Marennes en direction d\'un port de ${country}.","en":"In 1789, ${tonnage} French tonneaux (and ${number} ships) departed from Marennes bound to a port of ${country}."}},"partie-1-pays-port-d-attache":{"title":{"fr":"Pays du port d\'attache des navires \xe9trangers partant de la r\xe9gion en 1789","en":"Country of the homeport of foreign ships departing from the region in 1789"},"y":{"fr":"Pays du port d\'attache","en":"Country of the homeport"},"x":{"fr":"Tonnage cumul\xe9","en":"Cumulative tonnage"},"tooltip":{"fr":"En 1789, ${number} navires soit ${tonnage} tonnaux sont partis de la r\xe9gion de La Rochelle (amiraut\xe9s de La Rochelle, Sables d\'Olonnes ou Marennes)","en":"In 1789, ${number} ships of ${tonnage} French tonneaux departed from La Rochelle r\xe9gion (admiralty offices of La Rochelle, Sables d\'Olonnes or Marennes)"}},"partie-3-comparaison-exports-coloniaux":{"title":{"fr":"Comparaison des exports de produits coloniaux, locaux et autres par bureaux des fermes (1789)","en":"Comparison of exports of colonial, local and other goods per Customs office (1789)"},"color":{"fr":"Type de produit","en":"Kind of product"},"y":{"fr":"Bureau des fermes","en":"Customs office"},"x":{"fr":"Valeur en livres tournoi","en":"Value (in French livres)"},"tooltip":{"fr":"En 1789, le bureau des fermes de ${customs_office} a export\xe9 \xe0 l\'\xe9trange ${value} livres tournois de produits de type ${type}","en":"In 1789, the Customs office of ${customs_office} exported abroad ${value} livres tournois of products of ${type} type"}},"intro-provinces":{"title":{"fr":"Carte des provinces \xe9tudi\xe9es : Poitou, Aunis, Saintonge, Angoumois (PASA)","en":"Map of the provinces studied: Poitou, Aunis, Saintonge, and Angoumois (PASA)"}},"sorties-de-marennes-avec-sel-destinations":{"title":{"fr":"Carte des navires sortis de Marennes avec du sel en 1789, dimensionn\xe9s par tonnage cumul\xe9","en":"Maps of ships departing from Marennes with salt in 1789, proportional to cumulated tonnage"},"size":{"fr":"Tonnage cumul\xe9","en":"Cumulative tonnage"},"tooltip":{"fr":"En 1789, des navires pour un total d\'approximativement ${rawSize} tonneaux sont partis de Marennes avec du sel pour se rendre au port de ${label}","en":"In 1789, ships of a total of ca. ${rawSize} tonneaux departed from Marennes with salt bound for the port of ${label}"}},"intro-ports":{"title":{"fr":"Carte des ports de la r\xe9gion PASA","en":"Map of PASA region ports"},"color":{"fr":"Province du port","en":"Port\'s provincial affiliation"},"size":{"fr":"Nombre de cong\xe9s enregistr\xe9s en 1789","en":"Number of departures in 1789"},"tooltip":{"fr":"${rawSize} d\xe9parts de navires ont \xe9t\xe9 observ\xe9s par le port de ${label} en 1789","en":"${rawSize} ships\' departures were recorded from the port of ${label} in 1789"}},"partie-2-part-navigation-francaise":{"title":{"fr":"Part de la navigation fran\xe7aise dans la r\xe9gion","en":"French shipping within the region"},"color":{"fr":"Part de la navigation fran\xe7aise (par tonnage cumul\xe9)","en":"French shipping (per cumulative tonnage)"},"size":{"fr":"Tonnage sorti des ports (en miliers)","en":"Total tonnage of ships on departure (in thousands of French tonneaux)"}},"partie-1-ports-dattache":{"title":{"fr":"Ports d\'attache des navires partant de la r\xe9gion PASA en 1789 (dimensionn\xe9s par tonnage cumul\xe9)","en":"Homeports of ships departing from the PASA region in 1789 (proportional to cumulative tonnage )"},"tooltip":{"fr":"En 1789, ${tonnage} tonneaux cumul\xe9s sortis de la r\xe9gion PASA provenaient de navires rattach\xe9s au port de ${homeport} - ${category}.","en":"In 1789, a total of ${tonnage} French tonneaux departing from the PASA region had ${homeport} - ${category} as homeport."}},"partie-1-ports-destinations":{"title":{"fr":"Destinations des navires partant depuis la r\xe9gion PASA vers l\'\xe9tranger en 1789 (dimensionn\xe9es par tonnage cumul\xe9)","en":"Destinations of ships sailing from the PASA region to another country in 1789"},"tooltip":{"fr":"En 1789, ${tonnage} tonneaux cumul\xe9s sortis de la r\xe9gion PASA ont eu pour destination le port de ${homeport} - ${category}.","en":"In 1789, a total of ${tonnage} French tonneaux departing from the PASA region had ${homeport} - ${category} as homeport."}},"exports-eau-de-vie-la-rochelle-longitudinal":{"title":{"fr":"\xc9volution des exports d\'eau-de-vie et liqueurs par la direction de La Rochelle (ports francs non pris en compte)","en":"Evolution of brandy and spirits exports from the Customs region of La Rochelle (to freeports excepted)"},"y":{"fr":"Valeur","en":"Value"},"x":{"fr":"Ann\xe9e","en":"Year"},"tooltip":{"fr":"En ${year}, la direction des fermes de La Rochelle a export\xe9 ${value} livres tournois d\'eau-de-vie et liqueurs.","en":"In ${year}, La Rochelle Customs region exported ${value} livres tournois of brandy and spirits."}},"exports-eau-de-vie-comparaison-directions-des-fermes":{"title":{"fr":"Comparaison des exports d\'eau-de-vie et liqueurs par diff\xe9rentes directions des fermes (ports francs non pris en compte - pas de donn\xe9es pour Montpellier en 1770)","en":"Comparison of brandy exports from different customs regions (free ports not included - no data for Montpellier in 1770)"},"y":{"fr":"Ann\xe9e","en":"Year"},"x":{"fr":"Valeur","en":"Value"},"color":{"fr":"Direction des fermes","en":"Customs region"},"tooltip":{"fr":"En ${year}, la direction des fermes de ${customsRegion} a export\xe9 ${value} livres tournois d\'eau-de-vie et liqueurs.","en":"In ${year}, the Customs region of ${customsRegion} exported ${value} livres tournois of brandy and spirits."}},"origines-exports-eau-de-vie-1789-la-rochelle":{"title":{"fr":"Origine des exports d\'eau-de-vie de la direction des fermes de La Rochelle en 1789 (ports francs non pris en compte)","en":"Origin of brandy exports from the La Rochelle customs region in 1789 (free ports not included)"},"y":{"fr":"Origine","en":"Origin"},"x":{"fr":"Valeur","en":"Value"},"color":{"fr":"Type d\'eau de vie","en":"Kind of Brandy"},"tooltip":{"fr":"La direction des fermes de La Rochelle a export\xe9 ${value} livres tournois d\'eau-de-vie et liqueurs de type \\"${type}\\", originaires de ${origin}.","en":"The Customs region of La Rochelle exported ${value} livres tournois of brandy and spirits of \\"${type}\\" type, produced in ${origin}."}},"partie-1-ports-dattache-vers-etranger":{"title":{"fr":"Ports d\u2019attache des navires en provenance de la r\xe9gion PASA et en direction de l\u2019\xe9tranger en 1789 (dimensionn\xe9es par tonnages cumul\xe9s)","en":"Homeports of ships departing from the PASA region bound for foreign ports in 1789 (size proportional to cumulative tonnage)"},"tooltip":{"fr":"En 1789, ${tonnage} tonneaux cumul\xe9s sortis de la r\xe9gion PASA \xe9taient rattach\xe9s au port de ${homeport} - ${category}.","en":"In 1789, a total of ${tonnage} French tonneaux departing from the PASA region had ${homeport} - ${category} as homport."}},"partie-2-carte-direction-bateaux-de-la-rochelle":{"title":{"fr":"Voyages des navires rattach\xe9s au port de La Rochelle en 1787","en":"Voyages of ships having La Rochelle as homeport in 1787"},"size":{"fr":"Fl\xe8ches dimensionn\xe9es par tonnage cumul\xe9","en":"Arrows proportional to cumulative tonnage"},"color":{"fr":"Port de d\xe9part","en":"Port of departure"}},"intro-bureaux":{"title":{"fr":"Carte des bureaux des fermes de la r\xe9gion PASA","en":"Map of customs offices in the PASA region"}}}')},13:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(129),r=new RegExp(/\$\{(\w+)\}/g);function i(e,t,a,i){if(void 0===n[e]||void 0===n[e][t]||void 0===n[e][t][a])return"pas de traduction disponible (".concat(e," | ").concat(t,")");var o=n[e][t][a];return!1===!!o?"pas de traduction disponible (".concat(e," | ").concat(t,")"):void 0===i?o:o=o.replace(r,(function(e,t){return i[t]||t}))}},16:function(e,t,a){"use strict";a.d(t,"a",(function(){return h})),a.d(t,"g",(function(){return m})),a.d(t,"b",(function(){return f})),a.d(t,"f",(function(){return g})),a.d(t,"e",(function(){return b})),a.d(t,"c",(function(){return v})),a.d(t,"d",(function(){return j}));a(10),a(8),a(20);var n=a(9),r=(a(651),a(76),a(318)),i=a.n(r),o=a(80),s=a(97),l=a(21),c=l.a.generic,d={fr:o.a,en:s.a},u={cmin:25.59,cmax:55.59,lmin:60.94,lmax:90.94},p=["#999"];function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fr",a=d[t]||o.a;return"".concat(e," | ").concat(a.title," | PORTIC")}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;if(e.length>t){for(var a=e.split(" "),n=[a[0]],r=1;n.join(" ")<t-3&&r<a.length;)n.push(a[r]),r++;return[n=n.join(" "),a.slice(r).join(" ")]}return[e,void 0]}function f(e,t){return{distance:Math.sqrt(e*e+t*t),radians:Math.atan2(t,e)}}var g=function(e,t){return[e*Math.cos(t),e*Math.sin(t)]};function b(e,t){return 1!==t&&t?2===t?[c.accent1,c.accent2]:3===t?[c.dark,c.accent1,c.accent2]:i()(t,{colorSpace:u,seed:e,clustering:"force-vector"}):p}var v=function(e){return isNaN(e)?0:Math.abs(+e)},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fr";return(""+e).split("").reverse().reduce((function(a,r,i){var o=a.count,s=a.result;return 3===o||0===o&&i===(""+e).length-1?{count:1,result:[].concat(Object(n.a)(s),["fr"===t?" ":",",r])}:{count:o+1,result:[].concat(Object(n.a)(s),[r])}}),{count:0,result:[]}).result.reverse().join("")}},170:function(e){e.exports=JSON.parse('{"a":"https://medialab.github.io/portic-storymaps-2021"}')},173:function(e,t,a){"use strict";var n=a(8),r=a(57),i=a(121),o=a(18),s=a.n(o),l=(a(544),a(21)),c=a(2),d=a(23),u=a(13),p=a(1),h=function(e){var t=e.numberOfColumns,a=e.port,r=e.scaleX,i=e.scaleY,o=(e.legendWidth,e.columnWidth),h=e.totalHeight,m=e.totalWidth,f=e.projection,g=e.index,b=e.margins,v=e.rowHeight,j=e.fontSize,x=e.projectionTemplate,O=e.lang,y=r(+a.nb_pointcalls_out),w=i(+a.mean_tonnage),_=g%t*o+b.left,L=2.3*h,k=f([+a.longitude,+a.latitude]),C=Object(n.a)(k,2),T=C[0],q=C[1],A=Object(c.useState)(!1),R=Object(n.a)(A,2),N=R[0],M=R[1];Object(c.useEffect)((function(){setTimeout((function(){M(!0)}))}),[]);var S=Object(d.useSpring)({to:{transform:"translate(".concat(T,",").concat(q,")"),x1:"rotated Poitou"===x?_+o/2:T,y1:"rotated Poitou"===x?L+v/7:q,markerRadius:"rotated Poitou"===x?.02*h:0,x2:T,y2:q,staticTransform:"rotated Poitou"===x?"translate(".concat(_,", ").concat(L,") scale(1)"):"translate(".concat(T,",").concat(q,") scale(").concat("rotated Poitou"===x?1:.1,")")},immediate:!N}),P=S.transform,z=S.x1,F=S.y1,B=S.x2,E=S.y2,D=S.staticTransform,I=S.markerRadius,H=o/2,W=v/7,$=v/2+W/2-w/2,G=.08*m,Y=12*j;return a.port.length<=10?Y=6*j:a.port.length<=12?Y=7*j:a.port.length<=15?Y=8*j:a.port.length<=18&&(Y=10*j),Object(p.jsxs)("g",{className:s()("port-point-and-triangle",{"is-minified":"rotated Poitou"!==x}),children:[Object(p.jsx)(d.animated.line,{x1:z,y1:F,x2:B,y2:E,stroke:"grey",strokeDasharray:"2, 8"}),Object(p.jsx)(d.animated.g,{className:"port-point",transform:P,children:Object(p.jsx)(d.animated.circle,{cx:0,cy:0,r:I,style:{fill:l.a.generic.dark},className:"marker"})}),Object(p.jsxs)(d.animated.g,{className:"port-triangle",transform:D,children:[Object(p.jsx)("path",{className:"vertical-line",d:"M ".concat(H," ").concat(W," \n              V ").concat($,"\n              ")}),Object(p.jsx)("g",{transform:"translate(".concat(H,", ").concat($,")"),children:Object(p.jsx)("path",{className:"triangle",d:"M ".concat(-y/2," ",0," \n                L ").concat(y/2," ",0,"\n                L ",0," ").concat(w,"\n                Z\n                "),fill:"url(#TriangleGradient)"})}),Object(p.jsxs)("g",{className:"local-legend",children:[Object(p.jsx)("line",{x1:H-y/2,x2:H+y/2,y1:$-3,y2:$-3,markerStart:"url(#triangle-left)",markerEnd:"url(#triangle-right)"}),Object(p.jsx)("line",{x1:H-y/2-3,x2:H-y/2-3,y1:$,y2:$+w,markerStart:"url(#triangle-left)",markerEnd:"url(#triangle-right)"}),Object(p.jsx)("path",{d:"\n            M ".concat(-.2*G-y/3," ").concat(.65*$,"\n            Q ").concat(H-10," ").concat(.65*$," ").concat(H-2," ").concat($-5,"\n            "),markerEnd:"url(#triangle-right)"}),Object(p.jsx)("path",{d:"\n            M ".concat(-w/3+3," ").concat($+.6*w+7,"\n            L ").concat(H-y/2-3," ").concat($+.6*w+7,"\n            "),markerEnd:"url(#triangle-right)"}),Object(p.jsx)("foreignObject",{y:$/2,x:-G-y/3,width:G,height:v,children:Object(p.jsxs)("span",{xmlns:"http://www.w3.org/1999/xhtml",children:[Object(u.a)("viz-principale-partie-3","nb_pointcalls_out",O),"  : ",Object(p.jsx)("strong",{children:a.nb_pointcalls_out})]})}),Object(p.jsx)("foreignObject",{x:-G-y/3,y:$+.6*w,width:.08*m,height:v,children:Object(p.jsxs)("span",{xmlns:"http://www.w3.org/1999/xhtml",children:[Object(u.a)("viz-principale-partie-3","mean_tonnage",O)," : ",Object(p.jsx)("strong",{children:(+a.mean_tonnage||0).toFixed(1)})]})})]}),Object(p.jsxs)("g",{className:"label",transformOrigin:"bottom left",transform:"translate(".concat(o/2,", ").concat(v/7-.025*h,")"),children:[Object(p.jsx)("path",{d:"M 0 ".concat(-j," L ").concat(Y," ").concat(-j," ").concat(Y-5," ").concat((.2*j-j)/2," ").concat(Y," ").concat(.2*j," 0 ").concat(.2*j," Z"),style:{fill:l.a.generic.dark},transformOrigin:"bottom left",transform:"rotate (-45)"}),Object(p.jsxs)("text",{transformOrigin:"bottom left",transform:"rotate (-45)","font-size":j,style:{fill:"white"},x:3,y:0,textAnchor:"left",children:[" ",a.port," "]})]})]})]})};t.a=function(e){var t=e.data,a=e.totalWidth,o=void 0===a?1200:a,c=e.legendWidth,d=void 0===c?.1:c,u=e.margins,m=e.rowHeight,f=void 0===m?200:m,g=e.projection,b=e.projectionTemplate,v=e.atlasMode,j=e.lang,x=u||{left:.1*o,right:.1*o},O=t.length,y=(o-x.left-x.right)/O,w=t.length/O*f,_=.05*w,L=Object(r.a)().domain([0,Object(i.a)(t.map((function(e){return+e.nb_pointcalls_out})))]).range([5,5*y]),k=Object(r.a)().domain([0,Object(i.a)(t.map((function(e){return+e.mean_tonnage})))]).range([5,.85*f]);return Object(p.jsxs)("g",{className:s()("TriangleChart",{"is-atlas-mode":v}),children:[Object(p.jsx)("defs",{children:Object(p.jsxs)("linearGradient",{id:"TriangleGradient",x2:"0%",y2:"100%",children:[Object(p.jsx)("stop",{offset:"10%",stopColor:"rgb(100,100,100)",stopOpacity:.6}),Object(p.jsx)("stop",{offset:"100%",stopColor:l.a.generic.dark})]})}),Object(p.jsxs)("g",{className:"triangles",children:[t.sort((function(e,t){var a=g([+e.longitude,+e.latitude]),r=Object(n.a)(a,1)[0],i=g([+t.longitude,+t.latitude]);return r>Object(n.a)(i,1)[0]?1:-1})).map((function(e,t){return Object(p.jsx)(h,{lang:j,numberOfColumns:O,port:e,scaleX:L,scaleY:k,legendWidth:d,columnWidth:y,totalHeight:w,totalWidth:o,projection:g,index:t,margins:x,rowHeight:f,fontSize:_,projectionTemplate:b},t)})),Object(p.jsxs)("defs",{children:[Object(p.jsx)("marker",{id:"triangle-left",viewBox:"0 0 10 10",refX:"1",refY:"5",markerUnits:"strokeWidth",markerWidth:d*o*.04,markerHeight:.02*f,orient:"auto",children:Object(p.jsx)("path",{d:"M 10 0 L 0 5 L 10 10 Z",fill:"darkgrey"})}),Object(p.jsx)("marker",{id:"triangle-right",viewBox:"-10 0 10 10",refX:"1",refY:"5",markerUnits:"strokeWidth",markerWidth:d*o*.04,markerHeight:.024*f,orient:"auto",children:Object(p.jsx)("path",{d:"M -10 0 L 0 5 L -10 10 Z",fill:"darkgrey"})})]})]})]})}},21:function(e,t,a){"use strict";t.a={ui:{colorText:"#403d3d",colorAccent:"#34495e",colorAccentBackground:"#336d7c",colorBackgroundBlue:"#d3e5e5",colorBackground:"#ebebeb"},generic:{dark:"#336D7C",light:"#E0E3E6",accent1:"#00C4AF",accent2:"#FEA43B"},admiralties:{"La Rochelle":"#41BEA3",Marennes:"#A7E6F9","Sables d'Olonne":"#668EDB"},provinces:{Poitou:"#668EDB",Aunis:"#41BEA3",Saintonge:"#A7E6F9",Angoumois:"#514EEE"},product:{sel:"#E0CB0E","eau-de-vie et vins divers":"#A07BEE","autres produits":"#72808D","produits coloniaux":"#FEA43B"},partner:{Afrique:"#875E2E","Reste du monde (USA)":"#E0E3E6","Grande Bretagne":"#542AAD",Europe:"#A07BEE","Ports francs et petites \xeeles":"#5439F9",Colonies:"#E5881A","Ind\xe9termin\xe9 suppos\xe9 Europe":"#A07BEE"},customs_office:{"La Rochelle":"#41BEA3",Rochefort:"#349883","Saint-Martin-de-R\xe9":"#277262","Saint-Martin \xeele de R\xe9":"#277262","Tonnay-Charente":"#5AD0F4",Marans:"#67CBB6","Les Sables-d'Olonne":"#668EDB","Sables d'Olonne":"#668EDB",Marennes:"#A7E6F9",Charente:"#A7E6F9",Alligre:"#349883","Tous les bureaux":"grey"},tonnageClasses:{"100%":"#A07BEE","75% ou plus":"#41BEA3","moins de 75%":"#FEA43B"},franceAlone:{France:"#41BEA3"},portsTreemaps:{"France (r\xe9gion PASA)":"#41BEA3","Ind\xe9termin\xe9":"rgb(240,240,240)","zone maritime":"#98a9d9","multi-Etat":"#a42e0d","France (hors r\xe9gion PASA)":"#FED63B",Hambourg:"#F7E0DE","Duch\xe9 d'Oldenbourg":"#F3D1CE",Prusse:"#EFC1BD",Lubeck:"#E7A39C","Br\xeame":"#EBB2AD",Mecklenbourg:"#E3938C",Autriche:"#bd6a62","Grande-Bretagne":"#A07BEE","Provinces-Unies":"#2759e3",Danemark:"#8e7bee","Etats-Unis d'Am\xe9rique":"#EBB2AD",Pologne:"#804a45",Russie:"#804a45",Espagne:"#e35027",Portugal:"#e35027"}}},216:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return d})),a.d(t,"frontMatter",(function(){return u}));var n=a(20),r=(a(2),a(3)),i=a(22),o=["components"],s={text:"5 min read",minutes:4.285,time:257100,words:857},l={};function c(e){var t=e.components,a=Object(n.a)(e,o);return Object(r.a)("wrapper",Object.assign({},l,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"introduction"},"Introduction"),Object(r.a)(i.a,{id:"intro-provinces",mdxType:"Caller"}),Object(r.a)("p",null,"La France du dix-huiti\xe8me si\xe8cle se caract\xe9rise par le fort dynamisme des ports et des hinterlands de la fa\xe7ade atlantique, stimul\xe9s par le commerce avec les Antilles et une demande europ\xe9enne en biens de consommation en hausse. La guerre maritime qui commence en 1793 et qui se poursuit pendant plus de vingt ans, entra\xeenant la perte d\xe9finitive de Saint-Domingue en 1804 et de l\u2019\xeele de France (\xeele Maurice) en 1815, sonne le glas de cette dynamique et d\xe9place le centre de l\u2019\xe9conomie fran\xe7aise vers l\u2019int\xe9rieur. "),Object(r.a)("p",null,"L\u2019\xe9tude de cas pr\xe9sent\xe9e ici s\u2019int\xe9resse \xe0 la navigation et au commerce maritime des c\xf4tes poitevines et charentaises \xe0 la veille de la R\xe9volution. Cela correspond \xe0 la direction des fermes de la Rochelle et \xe0 la fa\xe7ade maritime des provinces du Poitou, de l\u2019Aunis, de la Saintonge et de l\u2019Angoumois (r\xe9gion \xab\xa0PASA\xa0\xbb). Cette aire poss\xe8de un dense maillage portuaire, avec une quarantaine de ports en activit\xe9. Certains ne font que du cabotage micro-local, d\u2019autres int\xe8grent petit et grand cabotage, d\u2019autres enfin s\u2019adonnent \xe9galement \xe0 une navigation de long-cours. Cette r\xe9gion se pr\xeate donc particuli\xe8rement \xe0 une \xe9tude portant sur l\u2019articulation entre les diff\xe9rentes \xe9chelles du commerce maritime \xe0 l\u2019aube de la R\xe9volution. "),Object(r.a)(i.a,{id:"intro-ports",mdxType:"Caller"}),Object(r.a)("p",null,"Nous reconstituons l\u2019histoire maritime et commerciale de la r\xe9gion PASA \xe0 partir de deux sources historiques. D\u2019une part, nous disposons de traces administratives de la navigation maritime gr\xe2ce aux redevances qui p\xe8sent sur celle-ci sous l\u2019Ancien R\xe9gime. Les registres des cong\xe9s r\xe9pertorient les navires \xe0 leur d\xe9part d\u2019un port et le montant d\xfb, qui varie le plus souvent selon leur tonnage et leur destination. Ces registres, r\xe9dig\xe9s par les greffiers de l\u2019amiraut\xe9 locale, ont \xe9t\xe9 num\xe9ris\xe9s et structur\xe9s dans une base de donn\xe9es appel\xe9e ",Object(r.a)("a",{href:"http://navigocorpus.org/",target:"blank",rel:"noopener noreferrer"},"Navigocorpus"),". Elle compte entre autres plus de 32 000 cong\xe9s pour l\u2019ann\xe9e 1787 pour l\u2019ensemble des ports fran\xe7ais, et quelque 6 900 cong\xe9s pour 1789 relatifs aux c\xf4tes poitevines et charentaises."),Object(r.a)("p",null,"Les registres des cong\xe9s nous permettent de rep\xe9rer les dates de d\xe9part des b\xe2timents, ainsi que diverses informations relatives \xe0 l\u2019objet de leur voyage, leur tonnage, leur capitaine, etc. Ces donn\xe9es ne sont cependant pas d\xe9nu\xe9es d\u2019incertitude : comme nous le verrons, le tonnage des navires est parfois surestim\xe9 dans certains ports. Aussi, dans le cadre de la pr\xe9sente \xe9tude, nous avons pris en compte l\u2019itin\xe9raire d\xe9clar\xe9 par les capitaines de navires au moment du d\xe9part, tout en \xe9tant conscients que la d\xe9claration ne correspond pas n\xe9cessairement au voyage effectif. Les cong\xe9s permettent toutefois une bonne mesure des trafics de la r\xe9gion de La Rochelle, y compris \xe0 toute petite \xe9chelle, tout en demandant une attention fine \xe0 la dimension d\u2019incertitude inh\xe9rente \xe0 la source mobilis\xe9e."),Object(r.a)(i.a,{id:"intro-bureaux",mdxType:"Caller"}),Object(r.a)("p",null,"D\u2019autre part, nous disposons de traces administratives relatives au commerce de la r\xe9gion PASA. La base de donn\xe9es ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/home",target:"blank",rel:"noopener noreferrer"},"Toflit18")," se fonde sur la num\xe9risation des documents du Bureau de la balance du commerce de 1716 \xe0 1821. Ces documents ont \xe9t\xe9 produits gr\xe2ce aux services des Fermes : chaque bureau des Fermes enregistrait localement les \xe9tats de sortie et d\u2019entr\xe9e des marchandises entre la France et l\u2019\xe9tranger. Plus de 550 000 flux de sortie / entr\xe9e ont \xe9t\xe9 document\xe9s dans la base de donn\xe9es Toflit18. La direction des fermes de La Rochelle correspondait \xe0 la fa\xe7ade maritime de la r\xe9gion PASA."),Object(r.a)("p",null,"Gr\xe2ce aux donn\xe9es de la base Toflit18, nous sommes en mesure de lister les exports et imports entre les sept diff\xe9rents bureaux de ferme de la r\xe9gion PASA et les partenaires \xe9trangers du royaume de France. Les informations que l\u2019on peut extraire de ces flux sont, entre autres, le nom du produit \xe9chang\xe9, la quantit\xe9, la valeur, le partenaire commercial, et l\u2019entit\xe9 administrative ayant enregistr\xe9 le flux au niveau local. En 1789, elles pr\xe9cisent en outre, sauf pour le commerce de r\xe9exportation des denr\xe9es coloniales, l\u2019origine du produit commercialis\xe9 (ville ou province fran\xe7aise, ou \xc9tat \xe9tranger). Elles fournissent donc des informations compl\xe9mentaires \xe0 celles donn\xe9es par les sources relatives \xe0 la navigation."),Object(r.a)("div",{className:"centered-part"},Object(r.a)("div",{className:"centered-part-contents"},Object(r.a)(i.a,{mdxType:"Caller"}),Object(r.a)("p",null,"Le croisement entre cong\xe9s de navigation et donn\xe9es du Bureau de la balance du commerce rendu possible par les bases de donn\xe9es Toflit18 et Navigocorpus nous permet de saisir le commerce local, national et international, de pr\xe9ciser les flux et leur valeur pour ce qui est du commerce international, et d\u2019explorer les relations et l\u2019articulation entre les diff\xe9rents trafics de cette r\xe9gion."),Object(r.a)("p",null,"La pr\xe9sente \xe9tude de cas d\xe9crit en trois temps l\u2019histoire de la r\xe9gion PASA \xe0 l\u2019aube de la R\xe9volution fran\xe7aise. D\u2019abord, nous constatons la relative perte d\u2019importance et de diversit\xe9 commerciale de la r\xe9gion \xe0 la suite de la perte du Canada par le royaume de France durant la guerre de Sept Ans. Nous proposons ensuite une analyse d\xe9taill\xe9e de la restructuration de la r\xe9gion en relation avec cet \xe9v\xe9nement, selon des fili\xe8res sp\xe9cialis\xe9es qui associent des ports particuliers avec le commerce de produits sp\xe9cifiques. Nous d\xe9montrons enfin que, bien que dominant dans sa r\xe9gion, le port de la Rochelle ne structure pas en 1789 la r\xe9gion au profit d\u2019un r\xe9seau d\u2019\xe9change plus diversifi\xe9."))))}c.isMDXComponent=!0;var d=function(){return[]},u={}},217:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return d})),a.d(t,"frontMatter",(function(){return u}));var n=a(20),r=(a(2),a(3)),i=a(22),o=["components"],s={text:"5 min read",minutes:4.045,time:242700,words:809},l={};function c(e){var t=e.components,a=Object(n.a)(e,o);return Object(r.a)("wrapper",Object.assign({},l,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"introduction"},"Introduction"),Object(r.a)(i.a,{id:"intro-provinces",mdxType:"Caller"}),Object(r.a)("p",null,"Eighteenth-century France was known for its vibrant Atlantic coast ports and their hinterlands, thriving on West Indian trade as well as the increasing European demand for consumer goods. As a result of the French Revolutionary wars - beginning in 1793 and lasting over twenty years \u2013 Saint-Domingue was lost in 1804, followed by Isle de France (Mauritius) in 1815, marking the end of this dynamic period and moving the center of gravity of the French economy to the interior. "),Object(r.a)("p",null,"This case study focuses on seafaring and maritime trade along the Poitou and Charente coasts on the eve of the Revolution. The area encompassed the La Rochelle customs region, corresponding to the Poitou, Aunis, and Saintonge maritime provinces and their hinterland, the Angoumois (hereafter \xab\xa0PASA\xa0\xbb region), representing a dense network of ports, numbering around forty active ports. Some ports were limited to micro-local coastal trade, others were open to more distant cabotage, while yet others also engaged in long-distance navigation. The region therefore is particularly suited to a study of the connections between the various kinds of maritime trade practiced on the eve of the Revolution. "),Object(r.a)(i.a,{id:"intro-ports",mdxType:"Caller"}),Object(r.a)("p",null,"Our reconstruction of the maritime and trade history of the PASA region is based on two historical sources. Firstly, we have relied on the administrative records listing departure fees imposed on maritime shipping during the Old Regime. Clearance (i.e. permission to leave) records provide lists of vessels departing from a port and the amount of duty they owed, usually reflecting the ships\u2019 tonnage and destination. These records compiled by officials of the local Amiraut\xe9 were digitized and organized in a database called ",Object(r.a)("a",{href:"http://navigocorpus.org/",target:"blank",rel:"noopener noreferrer"},"Navigocorpus"),". The records for 1787 include more than 32,000 clearances for all French ports, and a further 6,900 in 1789 for the Poitou and Charente coast."),Object(r.a)("p",null,"These records allow us to identify vessel departure dates and reveal other information regarding the purpose of its voyage, its tonnage, its captain, etc. However, these data are not entirely trustworthy as a ship\u2019s tonnage was sometimes overestimated in some ports, as will be explained below. In the context of this study, we also took into account the itinerary declared by vessel captains at the time of departure, albeit that the declaration was not necessarily reflective of the actual trip. Clearance documents present a good overview of traffic in the La Rochelle region, including on a very small scale, but must nevertheless by used with caution given the uncertainty of tonnages and declared destinations."),Object(r.a)(i.a,{id:"intro-bureaux",mdxType:"Caller"}),Object(r.a)("p",null,"The second source-base is the PASA region trade records. The ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/home",target:"blank",rel:"noopener noreferrer"},"Toflit18")," database contains the digitized documents of the Balance of Trade Department (Bureau de la Balance du Commerce) from 1716 to 1821. These documents were produced by local customs offices which recorded the export and import figures of international and colonial trade goods. Over 550,000 import or export flows (a \xab\xa0flow\xa0\xbb being defined in this context as the record of the import or export of one item from/to a given country in a given year) were documented in the Toflit18 database. The La Rochelle customs region (\u2018direction de La Rochelle\u2019) represented the PASA region\u2019s maritime activities."),Object(r.a)("p",null,"The Toflit18 data enabled us to list exports and imports between the seven different customs offices (\u2018bureaux\u2019) of the PASA region and their foreign trade partners. The information extracted from this dataset includes, for example, the name of the product exchanged, its quantity and value, the trade partner, and the administrative entity that recorded the transaction at the local level. In 1789, these lists also specified the origin of the traded product (French city or province, or foreign state), except in the case of re-exported colonial commodities. This information therefore complements the information provided by the navigation sources."),Object(r.a)("div",{className:"centered-part"},Object(r.a)("div",{className:"centered-part-contents"},Object(r.a)(i.a,{mdxType:"Caller"}),Object(r.a)("p",null,"The combination of data from navigation clearance taxes and from the Balance of Trade Department provided by the Toflit18 and Navigocorpus databases allows us to better understand local, national, and international trade, to more precisely define the transactions and their value in terms of international trade, and to explore the relations and links between the various trade activities of this region."),Object(r.a)("p",null,"This case study presents the history of the PASA region on the eve of the French Revolution in three stages. First, we note how the loss of Canada during the Seven Years\u2019 War led subsequently to a reduction in importance and commercial diversity in the region. Next, we offer a detailed analysis of the region\u2019s restructuring following that loss as we examine specialized sectors linking particular ports with the trade of specific products. Finally, we demonstrate that by 1789 the port of La Rochelle, although still dominant in the region, no longer served as a trade hub in the region, which had by then greatly diversified its networks."))))}c.isMDXComponent=!0;var d=function(){return[]},u={}},219:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return d})),a.d(t,"frontMatter",(function(){return u}));var n=a(20),r=(a(2),a(3)),i=a(22),o=["components"],s={text:"7 min read",minutes:6.35,time:381e3,words:1270},l={};function c(e){var t=e.components,a=Object(n.a)(e,o);return Object(r.a)("wrapper",Object.assign({},l,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"partie-1-le-d\xe9clin-de-la-r\xe9gion-de-la-rochelle-suite-\xe0-la-perte-du-canada"},"Partie 1. Le d\xe9clin de la r\xe9gion de La Rochelle suite \xe0 la perte du Canada"),Object(r.a)(i.a,{id:"viz-principale-partie-1",step:1,mdxType:"Caller"}),Object(r.a)("p",null,"Au dix-huiti\xe8me si\xe8cle, la France a pleinement profit\xe9 du d\xe9veloppement des relations \xe9conomiques entre l\u2019Afrique, l\u2019Am\xe9rique et l\u2019Europe. L\u2019 \xab\xa0Atlantique fran\xe7ais\xa0\xbb reposant sur la traite des Africains et leur exploitation dans les \xceles fran\xe7aises (Antilles et Mascareignes) a connu son apog\xe9e juste avant la r\xe9volte des esclaves de Saint-Domingue en ao\xfbt 1791 et le d\xe9but de la guerre maritime avec l\u2019Angleterre en f\xe9vrier 1793. L\u2019ancienne r\xe9gion Poitou-Charente, correspondant approximativement aux g\xe9n\xe9ralit\xe9s de Poitou, Aunis, Saintonge et Angoumois (PASA), avait une longue tradition maritime \xe0 son actif et \xe9tait bien situ\xe9e pour b\xe9n\xe9ficier de cette phase de prosp\xe9rit\xe9. "),Object(r.a)(i.a,{id:"viz-principale-partie-1",step:2,mdxType:"Caller"}),Object(r.a)("p",null,"L\u2019examen du commerce avec les pays \xe9trangers et les colonies de la direction des Fermes de La Rochelle, qui \xe9tait leur fa\xe7ade maritime, montre toutefois un dynamisme limit\xe9. Il y a bien eu croissance du commerce, mais cette croissance a \xe9t\xe9 plus lente que celle des autres grands ports du royaume. Cela s\u2019explique en grande partie par les relations privil\xe9gi\xe9es de la direction de la Rochelle avec le Canada. D\u2019une part, celui-ci se d\xe9veloppe beaucoup moins vite que les Antilles, et la r\xe9gion souffre de ce manque de dynamisme durant la premi\xe8re moiti\xe9 du si\xe8cle. D\u2019autre part, le Canada est c\xe9d\xe9 aux Anglais lors du trait\xe9 de Paris qui cl\xf4t la guerre de Sept Ans en 1763. Qu\xe9bec avait d\xe9j\xe0 \xe9t\xe9 pris en 1759. Cette perte est s\xe9v\xe8re pour la r\xe9gion dont le commerce entame alors un recul relatif tr\xe8s net. La trajectoire de la r\xe9gion de la Rochelle contraste ainsi avec celles de Bordeaux et de Nantes dans la seconde moiti\xe9 du si\xe8cle. Bordeaux, notamment, est beaucoup plus dynamique que La Rochelle et sa part du commerce fran\xe7ais ne cesse d\u2019augmenter jusqu\u2019en 1789. "),Object(r.a)(i.a,{id:"partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie",mdxType:"Caller"}),Object(r.a)("p",null,"Apr\xe8s une ann\xe9e exceptionnelle en 1747, qui s\u2019explique par l\u2019organisation de convois transatlantiques au d\xe9part de La Rochelle escort\xe9s par la Marine pour \xe9chapper aux pr\xe9dations britanniques, la direction de La Rochelle effectue 4,6% du total du commerce fran\xe7ais en 1750. En 1789 sa part ne repr\xe9sente plus que 2,2%."),Object(r.a)(i.a,{id:"viz-principale-partie-1",step:3,mdxType:"Caller"}),Object(r.a)("p",null,"Le recul de La Rochelle n\u2019est pas que quantitatif. En 1750, les donn\xe9es de la direction des Fermes de La Rochelle, charg\xe9e de la collecte des droits sur le commerce ext\xe9rieur et colonial, montrent que cette partie du territoire commerce 21% des types de biens \xe9chang\xe9s par la France (645 sur 3055, apr\xe8s ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/classification/browser?kind%3Dproduct%26selected%3Dproduct_orthographic%26selectedParent%3Dproduct_source",target:"blank",rel:"noopener noreferrer"},"uniformisation des variations orthographiques"),"). En 1789, elle n\u2019en commerce plus que 7% (248/3565). Cette forte r\xe9duction de la typologie des biens commercialis\xe9s s\u2019observe \xe0 la fois pour les exportations et pour les importations. \xc0 un niveau plus agr\xe9g\xe9 de typologie des produits, parmi les 150 secteurs de la ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/classification/browser?kind%3Dproduct%26selected%3Dproduct_revolutionempire%26selectedParent%3Dproduct_simplification",target:"blank",rel:"noopener noreferrer"},"classification \u201dR\xe9volution et Empire\u201d, utilis\xe9e dans le cadre du programme ANR Toflit18"),", La Rochelle en commerce 121 en 1750, mais seulement 88 en 1789."),Object(r.a)("p",null,"Les exportations sont donc beaucoup plus diversifi\xe9es en 1750 qu\u2019en 1789. L\u2019indice de concentration (Herfindhal) est de 0,1 en 1750 et 0,24 en 1789. Un bien pour lequel il n\u2019y a pas beaucoup de concurrence nationale (les eaux-de-vie) et deux denr\xe9es coloniales r\xe9export\xe9es (le caf\xe9 et le sucre) dominent en 1789 les exportations. Les toiles de coton, souvent r\xe9export\xe9es en direction de l\u2019Afrique, viennent en quatri\xe8me place, suivies du sel (dont la valeur est faible par rapport au tonnage qu\u2019il mobilise, car c\u2019est une marchandise tr\xe8s pond\xe9reuse). En 1750, la mercerie et les \xe9toffes de laine font partie des cinq principales exportations (avec l\u2019indigo, les eaux-de-vie et le sucre : le sel est en 14e position). "),Object(r.a)(i.a,{id:"partie-1-produits-importants-pour-la-rochelle",mdxType:"Caller"}),Object(r.a)("p",null,"La direction des Fermes de La Rochelle s\u2019est donc sp\xe9cialis\xe9e dans les produits agricoles et les r\xe9exportations de denr\xe9es coloniales, aux d\xe9pens des biens manufactur\xe9s de la r\xe9gion. Ce constat n\xe9gatif est toutefois nuanc\xe9 par l\u2019intensit\xe9 capitalistique de la production d\u2019eaux-de-vie qui la rapproche des biens manufactur\xe9s. La sp\xe9cialisation et l\u2019importance de ce produit d\u2019exportation ressort avec \xe9vidence en comparant la part de la direction des Fermes de La Rochelle \xe0 la moyenne nationale."),Object(r.a)("p",null,"Nous ne connaissons pas la destination des r\xe9exportations coloniales en 1789. En les excluant, on constate que la concentration des march\xe9s de la direction des Fermes de La Rochelle est la m\xeame en 1750 et en 1789 (entre 0,41 et 0,44), mais que l\u2019Angleterre a pris la place de l\u2019Am\xe9rique (terme qui d\xe9signe en 1789 essentiellement les Antilles fran\xe7aises). Cela est confirm\xe9 par la distribution des tonnages des navires partant depuis la r\xe9gion PASA vers l\u2019\xe9tranger en 1789 : l\u2019Angleterre y a une part tr\xe8s importante."),Object(r.a)("p",null,"Pour aller vite, on pourrait r\xe9sumer en disant que la direction des Fermes de La Rochelle n\u2019exporte plus des biens diff\xe9renci\xe9s vers le Canada, mais essentiellement des eaux-de-vie vers l\u2019Angleterre. Du point de vue de la navigation, le fort tonnage destin\xe9 \xe0 ce type de commerce est inf\xe9rieur \xe0 celui engag\xe9 pour l\u2019exportation du sel vers les mers du Nord et Baltique."),Object(r.a)("p",null,"Les donn\xe9es de la navigation collect\xe9es ne nous permettent pas de contribuer \xe0 l\u2019analyse du d\xe9clin de cette r\xe9gion: d\u2019une part, car nous n\u2019avons le d\xe9tail des sorties que pour la fin de l\u2019Ancien R\xe9gime, ce qui emp\xeache une analyse diachronique. D\u2019autre part, car les donn\xe9es collect\xe9es pour 1789 n\u2019apportent que des informations limit\xe9es pour ce qui est des produits transport\xe9s : les cong\xe9s du port de La Rochelle, par exemple, ne mentionnent pas la nature de la cargaison, alors que dans les autres ports de la r\xe9gion le greffier se limite le plus souvent \xe0 noter seulement l\u2019article principal qui compose la cargaison. Les registres des cong\xe9s indiquent, toutefois, les destinations de chaque navire sorti et cette donn\xe9e permet de constater un relatif \xe9clatement des march\xe9s de cette r\xe9gion. "),Object(r.a)(i.a,{id:"partie-1-ports-destinations",mdxType:"Caller"}),Object(r.a)("p",null,"Sans que l\u2019on puisse affirmer qu\u2019il s\u2019agit d\u2019une nouveaut\xe9, la marginalisation de la r\xe9gion vers la fin de l\u2019Ancien R\xe9gime est confirm\xe9e par son manque de capacit\xe9 \xe0 assurer ses propres trafics. La navigation avec l\u2019\xe9tranger est assur\xe9e, \xe0 90%, par des pavillons \xe9trangers ou ext\xe9rieurs \xe0 la r\xe9gion \xe9tudi\xe9e. Il s\u2019agit, pour l\u2019essentiel, des pavillons britannique et nord-europ\xe9ens. Parmi les ports de la r\xe9gion, seul La Rochelle joue un r\xf4le, mais comme nous le verrons (partie 2.1), cette navigation est li\xe9e aux activit\xe9s de traite et au commerce colonial. "),Object(r.a)(i.a,{id:"partie-1-ports-dattache-vers-etranger",mdxType:"Caller"}),Object(r.a)("p",null,"Cette incapacit\xe9 de la r\xe9gion \xe0 assurer les exportations vers l\u2019\xe9tranger n\u2019est pas li\xe9e \xe0 une absence d\u2019activit\xe9 maritime : au contraire, si on additionne le total des sorties de navires depuis les ports de la r\xe9gion \xe9tudi\xe9e en 1789, toute destination confondue, on mesure que les b\xe2timents r\xe9gionaux assurent une partie consid\xe9rable des trafics, sup\xe9rieure \xe0 celle assur\xe9e par les navires des autres ports fran\xe7ais, alors que la part de la navigation \xe9trang\xe8re est tr\xe8s minoritaire. Toutefois, la part de navigation sous pavillon fran\xe7ais assur\xe9e par les navires de la r\xe9gion \xe9tudi\xe9e, est inf\xe9rieure \xe0 celle de la plupart des autres provinces fran\xe7aises: en 1787, les ports de l\u2019Aunis-Saintonge-Poitou assurent 51.6% du tonnage qu\u2019ils exp\xe9dient, contre 84.3% pour la Bretagne ou 58,7% pour la Guyenne. "),Object(r.a)(i.a,{id:"partie-1-ports-dattache",mdxType:"Caller"}),Object(r.a)("p",null,"La r\xe9gion n\u2019est donc pas tr\xe8s dynamique, \xe0 la fin de l\u2019Ancien R\xe9gime, en mati\xe8re d\u2019armement. Ce constat ne doit pas faire oublier les \xe9volutions qui ont eu lieu en son sein au cours de la seconde moiti\xe9 du XVIIIe si\xe8cle, notamment gr\xe2ce au d\xe9veloppement ou au maintien de productions locales destin\xe9es \xe0 l\u2019exportation depuis d\u2019autres ports que celui de La Rochelle. La section suivante \xe9tudie la forte diversification des ports de cette r\xe9gion."))}c.isMDXComponent=!0;var d=function(){return[]},u={}},22:function(e,t,a){"use strict";var n=a(10),r=a(8),i=a(20),o=a(2),s=a(18),l=a.n(s),c=a(160),d=a(31),u=a(1),p=["id","lang"],h=function(e){var t=e.id,a=(e.lang,Object(i.a)(e,p)),s=Object(o.useRef)(null),h=Object(o.useState)(Object(c.v4)()),m=Object(r.a)(h,1)[0],f=Object(o.useContext)(d.c),g=f.activeVisualization,b=f.onBlockClick,v=f.onRegisterVisualization,j=f.onUnregisterVisualization;Object(o.useEffect)((function(){return setTimeout((function(){var e=Object(n.a)({},a);e=Object(n.a)(Object(n.a)({},e),{},{ref:s,visualizationId:t,id:m}),v(e)})),j(m)}),[m]);return Object(u.jsx)("div",{ref:s,onClick:function(e){"function"===typeof b&&b(m,s)},className:l()("Caller",{"is-active":g&&m===g.id,"is-clearfix":!t,"is-hidden":!0,"is-devmode":!1}),children:null})};t.a=h},220:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return d})),a.d(t,"frontMatter",(function(){return u}));var n=a(20),r=(a(2),a(3)),i=a(22),o=["components"],s={text:"6 min read",minutes:5.92,time:355200,words:1184},l={};function c(e){var t=e.components,a=Object(n.a)(e,o);return Object(r.a)("wrapper",Object.assign({},l,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"part-1-the-decline-of-the-la-rochelle-region-following-the-loss-of-canada"},"Part 1. The decline of the La Rochelle region following the loss of Canada"),Object(r.a)(i.a,{id:"viz-principale-partie-1",step:1,mdxType:"Caller"}),Object(r.a)("p",null,"During the eighteenth century, France took full advantage of the expanding economic relations between Africa, America, and Europe. The \xab\xa0French Atlantic\xa0\xbb trade was based on the African slave trade and slave exploitation in the French Islands (West Indies and Mascarenes), which peaked before the Saint-Domingue slave revolt in August 1791 and sharply declined following the outbreak of a maritime war with Great Britain in February 1793. The former Poitou-Charente region, roughly comprising the provinces of Poitou, Aunis, Saintonge and Angoumois (PASA) under the Old Regime, had a long-established history of maritime activity and was ideally situated to benefit from this phase of prosperity. "),Object(r.a)(i.a,{id:"viz-principale-partie-1",step:1,mdxType:"Caller"}),Object(r.a)("p",null,"However, upon examination, the international and colonial sea trade of the La Rochelle customs region presents a somewhat limited growth. The slight increase in trade occurred at a slower pace than at other major ports of the kingdom. This is largely explained by La Rochelle and its region\u2019s preference for trading with Canada, which simply could not match the success of West Indian trade."),Object(r.a)("p",null,"This factor negatively impacted on the region\u2019s growth in the first half of the eighteenth century. Further, following British victory in the Battle of Quebec in 1759 the Seven Years\u2019 War came to an end in 1763 when France\u2019s Canadian territories were ceded to Great Britain."),Object(r.a)("p",null,"This severe loss led to a very clear trade decline in the region\u2019s colonial trade. The contrast between trade developments in the La Rochelle region with those in Bordeaux and Nantes in the second half of the century are notable. Bordeaux, for example, was much more dynamic than La Rochelle and its share in French trade continued to increase until 1789. "),Object(r.a)(i.a,{id:"partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie",mdxType:"Caller"}),Object(r.a)("p",null,"After an exceptional year in 1747, due largely to the organization of transatlantic convoys departing from La Rochelle and escorted by the French Navy, in an effort to avoid merchant ships being plundered by the British, the La Rochelle region was responsible for 4.6% of total French trade in 1750. In 1789, its share dropped to 2.2%."),Object(r.a)(i.a,{id:"viz-principale-partie-1",step:1,mdxType:"Caller"}),Object(r.a)("p",null,"La Rochelle\u2019s decline was not solely due to the quantity of trade. Data on foreign and colonial trade duties collected by the La Rochelle customs office, reveals that in 1750 this part of the territory handled 21% of the commodities traded by France (645 out of 3,055 after ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/classification/browser?kind%3Dproduct%26selected%3Dproduct_orthographic%26selectedParent%3Dproduct_source",target:"blank",rel:"noopener noreferrer"},"standardizing product spelling variations"),"). In 1789, it only traded 7% (248 out of 3,565). This sharp reduction in commodity types applies both to exports and imports. If these commodities are further combined in the 150 fields used in the ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/classification/browser?kind%3Dproduct%26selected%3Dproduct_revolutionempire%26selectedParent%3Dproduct_simplification",target:"blank",rel:"noopener noreferrer"},"\xab\xa0Revolution and Empire\xa0\xbb classification used by the ANR Toflit18")," program, the La Rochelle region traded in 121 of these fields in 1750, but in only 88 in 1789."),Object(r.a)("p",null,"Exports took a much more diversified form in 1750 than in 1789 with a concentration index (Herfindhal) of 0.1 in 1750 and 0.24 in 1789. Exports were dominated in 1789 by a product for which there was not much national competition (brandy) and two re-exported colonial goods (coffee and sugar). Cotton cloth, often re-exported to Africa, came in fourth place, followed by salt (the value of salt was low compared to its tonnage, as it is a bulky, cheap product). In 1750, haberdashery and woollen fabrics were among the five main exports (along with indigo, brandy and sugar; salt was in 14th position). "),Object(r.a)(i.a,{id:"partie-1-produits-importants-pour-la-rochelle",mdxType:"Caller"}),Object(r.a)("p",null,"The La Rochelle customs region thus specialized in agricultural products and the re-export of colonial goods, at the expense of goods manufactured in the region. However, this seemingly negative consequence is balanced out by the capital intensity of brandy production, which approximated that of manufactured goods. When comparing the La Rochelle customs region with the national average, the importance and specialization of this export product clearly stands out."),Object(r.a)("p",null,"We do not know where colonial re-exports ended up in 1789. By excluding them, we can see that market concentration in the La Rochelle customs region was the same in 1750 and in 1789 (between 0.41 and 0.44), but that \xab\xa0England\xa0\xbb (a category designating Great Britain in French trade statistics) had replaced \xab\xa0America\xa0\xbb (a term that in 1789 essentially referred to the French West Indies). This is confirmed by the tonnage distribution of vessels departing from the PASA region to foreign countries in 1789, which shows that a very large share went to Great Britain."),Object(r.a)("p",null,"In brief, the La Rochelle customs region largely ceased exporting differentiated goods to Canada and mainly sent brandy to British ports. From a navigation perspective, the tonnage devoted to this type of trade was smaller than the tonnage mobilized for exporting salt to the North and Baltic seas."),Object(r.a)("p",null,"The collected navigation data does not allow for further analysis of the trade decline in the region. First, we only have details of departures for the end of the Old Regime and this makes diachronic analysis impossible. Second, the data collected for 1789 only provide limited information regarding the products transported: the La Rochelle clearance tax records, for example, do not mention the nature of the cargo and customs agents in the region\u2019s other ports often only recorded the cargo\u2019s main product. However, the clearance tax records indicate the destination of each departed ship and this shows a relative fragmentation of the markets in the region. "),Object(r.a)(i.a,{id:"partie-1-ports-destinations",mdxType:"Caller"}),Object(r.a)("p",null,"Although we cannot substantiate that it was a new development, the region\u2019s incapacity to handle its own flows towards the end of the Old Regime confirms that it became marginalized. Vessels under foreign flag or vessels from outside the region accounted for 90% of international maritime trade. They were mostly British and North European. La Rochelle was the only port in the region to maintain its position, but as explained further (part 2.1), this was related to the slave and colonial trade. "),Object(r.a)(i.a,{id:"partie-1-ports-dattache-vers-etranger",mdxType:"Caller"}),Object(r.a)("p",null,"The region\u2019s inability to supply international exports was not due to a lack of maritime activity: on the contrary, the total number of ship departures from ports within the region in 1789, all destinations included, reveals that regional vessels accounted for a considerable share of the flows, higher than the share of ships from other French ports, while foreign vessels made up a very small share. However, the share of regional vessels navigating under French flag was lower than in most of the other French provinces: in 1787, the ports of Aunis-Saintonge-Poitou supplied 51.6% of the tonnage shipped, compared to 84.3% for Brittany or 58.7% for Guyenne. "),Object(r.a)(i.a,{id:"partie-1-ports-dattache-vers-etranger",mdxType:"Caller"}),Object(r.a)("p",null,"This shows that by the end of the Old Regime, the region was not very active in terms of equipping ships. This fact must not over-ride the changes that took place in the region during the second half of the 18th century, notably as a result of the development or extension of local production intended for export from ports other than La Rochelle. The next section examines the high diversification of ports in the region."))}c.isMDXComponent=!0;var d=function(){return[]},u={}},221:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return d})),a.d(t,"frontMatter",(function(){return u}));var n=a(20),r=(a(2),a(3)),i=a(22),o=["components"],s={text:"17 min read",minutes:16.015,time:960900,words:3203},l={};function c(e){var t=e.components,a=Object(n.a)(e,o);return Object(r.a)("wrapper",Object.assign({},l,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"partie-2-une-forte-sp\xe9cialisation-portuaire--le-cas-de-la-traite-n\xe9gri\xe8re-du-commerce-du-sel-et-de-leau-de-vie"},"Partie 2. Une forte sp\xe9cialisation portuaire : le cas de la traite n\xe9gri\xe8re, du commerce du sel et de l\u2019eau-de-vie"),Object(r.a)(i.a,{id:"viz-principale-partie-2",step:1,highlight:"toflit18",filter:"aucun",bureaux:"tous,La Rochelle,Rochefort,Saint-Martin-de-R\xe9,Les Sables-d'Olonne,Marennes,Charente,Marans,Tonnay-Charente",mdxType:"Caller"}),Object(r.a)("h2",{id:"introduction"},"Introduction"),Object(r.a)("p",null,"La r\xe9gion PASA se caract\xe9rise par une densit\xe9 importante de ports qui entretiennent des relations plus ou moins \xe9tendues et plus ou moins intenses avec le reste de la France et du monde. L\u2019importance de leurs mouvements maritimes et des tonnages n\u2019est pas directement corr\xe9l\xe9e \xe0 la valeur des marchandises transport\xe9es. Ainsi, les deux bureaux des Fermes qui dominent en valeur des exportations sont ceux de La Rochelle, tr\xe8s li\xe9 au commerce colonial et n\xe9grier, et de Tonnay-Charente, exportateur d\u2019eau-de-vie essentiellement vers la Grande-Bretagne. Par contre, l\u2019activit\xe9 portuaire de Marennes (exportateur du sel vers les ports de la mer du Nord et de la Baltique) est en tonnage la plus importante de la r\xe9gion mais ses exportations sont de faible valeur. Les importations sont domin\xe9es par les ports du bureau des fermes de La Rochelle (c\u2019est \xe0 dire, essentiellement, La Rochelle), en raison de la forte valeur des produits coloniaux. La balance du commerce de Rochefort, qui importe des mati\xe8res premi\xe8res navales, est tr\xe8s d\xe9ficitaire."),Object(r.a)(i.a,{id:"partie-2-part-navigation-francaise",mdxType:"Caller"}),Object(r.a)("p",null,"Nos analyses ont certes montr\xe9 que",Object(r.a)("a",{href:"https://drive.google.com/file/d/1Lr_7vo2oUHvWWWxNPknVtioLepYmIxLn/view",target:"blank",rel:"noopener noreferrer"}," les tonnages enregistr\xe9s \xe0 Marennes semblent "),Object(r.a)("a",{href:"https://drive.google.com/file/d/1Lr_7vo2oUHvWWWxNPknVtioLepYmIxLn/view",target:"blank",rel:"noopener noreferrer"},"surestim\xe9s de 20%"),", et m\xeame de 50% dans 10% des pires cas, mais cela ne remet pas en cause la primaut\xe9 de ce port. La carte, qui repr\xe9sente le tonnage exp\xe9di\xe9 en 1789, \xe0 partir des cong\xe9s d\xe9livr\xe9s aux navires, toutes destinations confondues, met en outre en \xe9vidence le caract\xe8re tr\xe8s internationalis\xe9 des transporteurs dans les ports exportateurs de sel vers l\u2019\xe9tranger (Noirmoutier et l\u2019\xeele de R\xe9) et d\u2019eau-de-vie (Tonnay-Charente), ainsi qu\u2019\xe0 Rochefort, largement approvisionn\xe9 par les marines du Nord qui y apportent les mat\xe9riaux n\xe9cessaires \xe0 l\u2019arsenal. Ce sont ces transporteurs qui assurent la presque totalit\xe9 du commerce avec l\u2019\xe9tranger (hors traite) de la r\xe9gion PASA. Comme nous le verrons ",Object(r.a)("a",{href:"https://medialab.github.io/portic-storymaps-2021/fr/page/partie-3",target:"blank",rel:"noopener noreferrer"},"dans la partie 3"),", La Rochelle n\u2019a plus un r\xf4le structurant pour les ports de cette r\xe9gion: d\u2019autres ports entretiennent des relations avec l\u2019\xe9tranger et avec les march\xe9s fran\xe7ais, en commercialisant les productions locales, sans que la cha\xeene logistique ne passe par La Rochelle."),Object(r.a)("p",null,"Cette section propose une \xe9tude de trois ports de la r\xe9gion \xe0 la fin de l\u2019Ancien R\xe9gime afin de montrer la diversit\xe9 des produits qu\u2019ils commercialisent et de leurs march\xe9s. De par ses relations exclusives avec les colonies et surtout son investissement dans la traite n\xe9gri\xe8re, La Rochelle m\xe9rite une \xe9tude \xe0 part. L\u2019importation de quantit\xe9s consid\xe9rables de denr\xe9es coloniales, majoritairement r\xe9-export\xe9es vers l\u2019Europe du Nord, met ce port dans une situation unique. Pour le commerce des eaux-de-vie, nous \xe9tudierons le cas de Tonnay-Charente. La mention de l\u2019eau-de-vie parmi les cargaisons indiqu\xe9es par les cong\xe9s \xe9tant rare, il faudra se tourner d\u2019abord vers les sources de la Balance du commerce, pour affiner ensuite les donn\xe9es par l\u2019analyse de la navigation. "),Object(r.a)(i.a,{id:"sorties-de-sel",mdxType:"Caller"}),Object(r.a)("p",null,"Plusieurs autres ports de la r\xe9gion, enfin, se consacrent prioritairement \xe0 l\u2019exportation du sel, comme on peut le constater sur le diagramme : Ars-en-R\xe9, Noirmoutier et surtout Marennes mobilisent de flottes d\xe9passant en 1789 les 10000 tonneaux pour sa commercialisation. Nous d\xe9velopperons ici en d\xe9tail le cas de Marennes, principal port exportateur de sel, dont la particularit\xe9 est de miser largement sur l\u2019approvisionnement du march\xe9 national."),Object(r.a)("h2",{id:"21-la-rochelle-et-le-commerce-triangulaire"},"2.1. La Rochelle et le commerce triangulaire"),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"colonial",highlight:"toflit18",bureaux:"tous,La Rochelle",mdxType:"Caller"}),Object(r.a)("p",null,"Au dix-huiti\xe8me si\xe8cle, les colonies antillaises augmentent tr\xe8s consid\xe9rablement leur production de sucre, caf\xe9, indigo et produits tinctoriaux, pour r\xe9pondre \xe0 la hausse de la demande europ\xe9enne. La croissance de la production passe par un nombre de plus en plus \xe9lev\xe9 de plantations, qui ont un recours massif \xe0 une main-d\u2019\u0153uvre d\u2019esclaves, que les Europ\xe9ens d\xe9portent par centaines de milliers depuis l\u2019Afrique dans le cadre de la traite n\xe9gri\xe8re. Ce commerce transatlantique d\u2019\xeatres humains, achet\xe9s sur les c\xf4tes d\u2019Afrique par les n\xe9griers europ\xe9ens, a commenc\xe9 au XVe si\xe8cle, mais il atteint son apog\xe9e au dix-huiti\xe8me si\xe8cle, lorsque 6 millions d\u2019Africains sont d\xe9port\xe9s aux Am\xe9riques. La moiti\xe9 d\u2019entre eux est vendue aux Antilles. On estime \xe0 un million le nombre d\u2019Africains introduits dans les colonies fran\xe7aises au dix-huiti\xe8me si\xe8cle. La principale destination est la colonie de Saint-Domingue (aujourd\u2019hui Ha\xefti) qui compte, \xe0 la veille de la grande r\xe9volte de 1791, un demi-million d\u2019esclaves, dont plus de la moiti\xe9 sont n\xe9s en Afrique. Alors que dans la plupart des ports n\xe9griers fran\xe7ais, la part des armements n\xe9griers est nettement inf\xe9rieure \xe0 celle des armements en droiture vers les Antilles, cela n\u2019est pas le cas \xe0 La Rochelle: sur les 15 d\xe9parts de 1789 depuis ce port destin\xe9s \xe0 approvisionner les Antilles en hommes ou en produits, 12 sont des n\xe9griers qui font voile tout d\u2019abord vers les c\xf4tes africaines dans le cadre d\u2019un circuit triangulaire.. Comme \xe0 Honfleur, il y a donc clairement, en mati\xe8re de trafics transatlantiques, une sp\xe9cialisation n\xe9gri\xe8re rochelaise. En 1789, les 12 n\xe9griers partis de La Rochelle sont tous arm\xe9s par des n\xe9gociants rochelais. Trois autres n\xe9griers partent depuis Rochefort."),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"colonial",highlight:"navigo",bureaux:"tous,La Rochelle",minTonnage:"100",mdxType:"Caller"}),Object(r.a)("p",null,"L\u2019activit\xe9 n\xe9gri\xe8re est aux mains d\u2019armateurs priv\xe9s qui esp\xe8rent r\xe9aliser un profit lors de la revente des captifs aux Antilles. Si Nantes est le principal port n\xe9grier fran\xe7ais, La Rochelle a jou\xe9 un r\xf4le significatif, tout particuli\xe8rement dans les ann\xe9es 1730\u20131740 : entre 1713 et 1744, La Rochelle arme 15% des exp\xe9ditions n\xe9gri\xe8res fran\xe7aises; sa part tombe \xe0 11% apr\xe8s la perte du Canada. Alors que La Rochelle est le deuxi\xe8me port n\xe9grier le plus important en France avant 1763, il passe au quatri\xe8me rang par la suite."),Object(r.a)("p",null,"Malgr\xe9 un d\xe9clin relatif, l\u2019activit\xe9 n\xe9gri\xe8re rochelaise augmente en termes absolus : les armateurs rochelais passent de 4,3 armements n\xe9griers par an pour la p\xe9riode 1713\u20131744 \xe0 12,5 armements par an dans la d\xe9cennie 1783\u20131793. Pendant cette derni\xe8re d\xe9cennie, la traite est v\xe9ritablement l\u2019activit\xe9 principale, voire presque exclusive, des armateurs rochelais : en 1789, sur un total de 200 d\xe9parts depuis le port de La Rochelle de navires arm\xe9s par des Rochelais, un peu plus de la moiti\xe9 des tonnages se dirigent vers l\u2019Afrique (42% du total) ou vers les colonies antillaises ou les Mascareignes, le reste se r\xe9partissant entre Terre-Neuve et Saint-Pierre-et-Miquelon (9.2%) La part des armements vers l\u2019\xe9tranger est insignifiante (0.2%), et celle hors des ports limitrophes (Aunis, Poitou, Saintonge) ne d\xe9passe pas le 5%. Les trois quarts de la trentaine de navires rochelais d\xe9passant le 50 tonneaux (le plus grand faisant 827 tonneaux) sortis du port de La Rochelle en 1789 se consacrent au commerce transatlantique et n\xe9grier. "),Object(r.a)("p",null,"D\xe8s lors qu\u2019on \xe9carte la poussi\xe8re des caboteurs, l\u2019importance des destinations africaines et des colonies est lisible sur ce sch\xe9ma, qui repr\xe9sente les destinations des navires sortis du port de La Rochelle en 1789, tout port d\u2019attache confondu. Tous les navires qui se dirigent vers les Am\xe9riques, les Antilles ou l\u2019oc\xe9an Indien sauf un sont par ailleurs arm\xe9s par des armateurs de La Rochelle. "),Object(r.a)("p",null,"Au total, dans les derni\xe8res ann\xe9es de l\u2019Ancien R\xe9gime, une douzaine de navires reviennent chaque ann\xe9e \xe0 La Rochelle depuis les colonies, soit en droiture, soit (et surtout) de retour d\u2019une exp\xe9dition n\xe9gri\xe8re apr\xe8s une \xe9tape aux Antilles. Les donn\xe9es de la Balance du commerce confirment la centralit\xe9 du commerce colonial et n\xe9grier : en 1789, les exportations vers l\u2019Afrique repr\xe9sentent 23% du total des exportations du bureau des Fermes de La Rochelle, alors que 73% est constitu\xe9 par les r\xe9-exportations des denr\xe9es coloniales. La valeur des produits ramen\xe9s est estim\xe9e, en 1789, \xe0 7,1 millions de livres tournois, dont 5,1 sont r\xe9export\xe9s \xe0 l\u2019\xe9tranger. Les n\xe9gociants rochelais semblent s\u2019\xeatre taill\xe9s une position forte dans le march\xe9 du caf\xe9, ce qui peut s\u2019expliquer par leurs liens quasi-exclusifs avec Saint-Domingue o\xf9 plusieurs grandes familles de la ville (Belin, Garesch\xe9, Poupet Rasteau) sont tr\xe8s bien implant\xe9es. Saint-Domingue fournit en effet la presque totalit\xe9 du caf\xe9 import\xe9 en France depuis les Antilles."),Object(r.a)(i.a,{id:"partie-2-carte-direction-bateaux-de-la-rochelle",mdxType:"Caller"}),Object(r.a)("p",null,"Si les donn\xe9es collect\xe9es par la Balance du commerce ne permettent pas de conna\xeetre les destinations des r\xe9exportations coloniales rochelaises, les destinations des navires qui quittent le port en 1789 nous en donnent une indication approximative. Les Pays-Bas autrichiens (actuelle Belgique), les Provinces-Unies, Br\xeame, Hambourg, les ports de la Baltique re\xe7oivent chacun des navires totalisant entre 500 et 550 tonneaux. Parmi les autres destinations europ\xe9ennes des navires partis de La Rochelle, seule la Grande-Bretagne (1 048 tonneaux) n\u2019est vraisemblablement pas destinataire des produits coloniaux, car elle s\u2019approvisionne dans ses propres colonies. "),Object(r.a)("p",null,"D\xe8s lors, il n\u2019est pas surprenant que le n\xe9goce rochelais porte toute son attention aux questions li\xe9es au commerce colonial et n\xe9grier. Cela appara\xeet clairement parmi les sujets discut\xe9s par la chambre de commerce de La Rochelle. L\u2019indexation faite \xe0 la main, \xe0 l\u2019\xe9poque, sur la marge des registres de d\xe9lib\xe9rations de la Chambre de Commerce de La Rochelle permet de constater que dans la seule ann\xe9e 1789, le commerce d\u2019Afrique est discut\xe9 \xe0 une trentaine de reprises, et les colonies \xe0 une cinquantaine de reprises, le commerce de l\u2019Inde \xe0 9 reprises; \xe0 titre de comparaison, le commerce avec l\u2019\xe9tranger est abord\xe9 11 fois en tout, et la p\xeache (avec notamment la question de la concurrence et de l\u2019admission de la p\xeache \xe9tats-unienne, tr\xe8s d\xe9battue cette ann\xe9e l\xe0 en France), 17 fois. Parmi les produits index\xe9s en marge des registres de d\xe9lib\xe9rations, les comestibles sont mentionn\xe9s 16 fois - ce qui dans la conjoncture c\xe9r\xe9ali\xe8re particuli\xe8re de l\u2019\xe9poque n\u2019est gu\xe8re \xe9tonnant-, l\u2019eau-de-vie et le vin 6, les sucres et les raffineries 8, le charbon de terre 3. On mesure, en d\xe9pit d\u2019un crit\xe8re sans doute grossier, que le regard des membres de la Chambre de commerce est clairement riv\xe9 sur les colonies et la traite. "),Object(r.a)("p",null,"Si la question de la traite semble absente des cahiers de dol\xe9ances de la r\xe9gion (l\u2019analyse porte sur un \xe9chantillon de 163 cahiers sur les 522 r\xe9dig\xe9s dans l\u2019ensemble de la r\xe9gion PASA), la d\xe9fense des int\xe9r\xeats coloniaux appara\xeet, significativement, uniquement dans le cahier de dol\xe9ances du tiers \xe9tat de la ville de La Rochelle, dont les repr\xe9sentants envoy\xe9s \xe0 Versailles \xab\xa0demanderont la r\xe9vocation de l\u2019arr\xeat rendu au conseil du roi, le 30 ao\xfbt 1784, concernant le commerce \xe9tranger dans les colonies, et le r\xe9tablissement des dispositions des lettres patentes de 1717 et 1727, auxquelles on est redevable des progr\xe8s qu\u2019ont faits la navigation fran\xe7oise et la culture des isles fran\xe7oises de l\u2019Am\xe9rique\xa0\xbb. L\u2019arr\xeat en question est celui qui a \xe9largi l\u2019exclusif mitig\xe9, introduit en 1767, en facilitant l\u2019approvisionnement des colonies par les navires \xe9trangers dans des conditions restrictives pr\xe9cises. L\u2019admission de navires \xe9trangers aux colonies a provoqu\xe9 les protestations de toutes les chambres du commerce de France concern\xe9es par le commerce colonial, car le n\xe9goce fran\xe7ais refuse toute concurrence. Ce qui est int\xe9ressant c\u2019est toutefois que nous ne sommes pas ici dans le cadre d\u2019un document qui \xe9mane de la Chambre de commerce ou d\u2019un groupe d\u2019armateurs: le cahier de dol\xe9ances du tiers \xe9tat de La Rochelle se fait donc le porte-parole des int\xe9r\xeats du n\xe9goce colonial fran\xe7ais, et demande \xe9galement des lois interdisant la r\xe9exportation des sucres bruts afin d\u2019encourager les raffineries locales. Enfin \xab\xa0les d\xe9put\xe9s demanderont la r\xe9vocation de l\u2019arr\xeat du 14 avril 1785 , qui a cr\xe9\xe9 une nouvelle compagnie des Indes et de celui pour l\u2019admission des \xe9trangers dans les isles de France et de Bourbon\xa0\xbb (c\u2019est -\xe0-dire \xe0 l\u2019\xeele Maurice et \xe0 la R\xe9union), m\xeame si pendant l\u2019\xe9poque du commerce libre (1769\u20131785), les armements vers l\u2019oc\xe9an Indien ou la Chine depuis La Rochelle (26) ont \xe9t\xe9 inf\xe9rieurs \xe0 ceux de Nantes (44), Bordeaux (41), Marseille (42) ou Saint-Malo (32) et bien s\xfbr de Lorient (120). "),Object(r.a)("p",null,"La participation rocheloise \xe0 la navigation au-del\xe0 du cap de Bonne-Esp\xe9rance \xe0 la fin de l\u2019Ancien R\xe9gime est en effet modeste: l\u2019\xe9tat des exportations de 1789, n\u2019indique que des exportations vers l\u2019Inde d\u2019une valeur de 38 060 livres tournois, et rien vers les Mascareignes. Ces donn\xe9es semblent toutefois incompatibles avec le d\xe9part du navire Henri IV pour l\u2019\xeele de France et l\u2019\xeele Bourbon, le 9 mai 1789, qui arrive \xe0 bon port en f\xe9vrier 1790, et qui n\u2019est pas un n\xe9grier ","[","Toussaint, 1967, p. 291","]"," \xe0 moins que sa cargaison ne vienne enti\xe8rement d\u2019autres directions de Fermes du royaume. En 1787, ce sont trois navires qui partent de La Rochelle vers les Mascareignes : une certaine diversification des armements coloniaux appara\xeet donc, ici comme \xe0 Bordeaux, dans les ann\xe9es 1780, lorsque la baisse des profits du commerce antillais incite \xe0 chercher des investissements plus rentables."),Object(r.a)("h2",{id:"22-le-commerce-de-leau-de-vie"},"2.2. le commerce de l\u2019eau-de-vie"),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"eau-de-vie",bureaux:"Charente, Saint-Martin-de-R\xe9, Rochefort,Tonnay-Charente",mdxType:"Caller"}),Object(r.a)("p",null,"Les cong\xe9s de navigation ne sont malheureusement pas de beaucoup de secours pour identifier les flux d\u2019eau-de-vie. En effet, le greffier du port de Tonnay-Charente ne prend pas le soin d\u2019annoter les cargaisons (il le fait 12 fois sur un total de 601 d\xe9parts): nous avons donc un aper\xe7u global de la navigation, sans pouvoir distinguer la nature des produits. L\u2019analyse men\xe9e sur les sorties de l\u2019ann\xe9e 1787 permet toutefois d\u2019identifier les r\xe9seaux commerciaux. 67 navires de tonnage moyen, proche de 100 tx, quittent alors Tonnay-Charente : 42 se rendent \xe0 l\u2019\xe9tranger (en Angleterre pour les deux tiers, le reste vers les \xeeles anglo-normandes, Ostende et la Baltique) ; les 25 gros caboteurs restants se rendent \xe0 Dunkerque. On identifie ici la flotte europ\xe9enne de l\u2019eau-de-vie, qui repr\xe9sente 22% du tonnage sortant en 1787. Un cran en dessous, on identifie un second groupe, compos\xe9 d\u2019une poussi\xe8re de petits caboteurs (tonnage moyen 35 tx) et qui repr\xe9sente tout de m\xeame 30% du tonnage sortant. Ces navires sont align\xe9s sur une destination unique: La Rochelle. Ils sont pour partie occup\xe9s \xe0 l\u2019approvisionnement de la ville et peut-\xeatre \xe0 un commerce r\xe9gional ou national: en revanche, La Rochelle a perdu le r\xf4le d\u2019entrep\xf4t pour le commerce international de l\u2019eau-de-vie qu\u2019elle avait dans les ann\xe9es 1730. Les principales maisons de n\xe9goce d\u2019eau-de-vie, en particulier Martell, n\u2019ont plus de bureaux \xe0 La Rochelle en 1789: leurs bureaux principaux ont \xe9t\xe9 rapatri\xe9s \xe0 Tonnay-Charente et/ou d\xe9plac\xe9s \xe0 Paris. Enfin, des unit\xe9s plus modestes (25 tx en moyenne) \xe9voluent au sein de la mer des Pertuis (depuis la Seudre sud jusqu\u2019aux Sables d\u2019Olonne) : elles repr\xe9sentent 23% du tonnage \xe0 la sortie du port de Tonnay-Charente. Il faut remarquer que 479 de 743 cong\xe9s d\xe9livr\xe9s en 1787 dans ce port concernent les navires avalant et attach\xe9s \xe0 des ports fluviaux. Venus porter les eaux-de-vie mais aussi les pierres de carri\xe8re et les produits manufactur\xe9s de l\u2019arri\xe8re-pays \xe0 Tonnay-Charente, leurs ma\xeetres quittent ce port soit \xe0 vide, soit avec une cargaison destin\xe9e \xe0 Rochefort, La Rochelle ou bien aux ports de la mer des Pertuis, qui leur fournissent un fret de retour pour leur navigation vers l\u2019amont du fleuve Charente. ","]"),Object(r.a)(i.a,{id:"exports-eau-de-vie-la-rochelle-longitudinal",mdxType:"Caller"}),Object(r.a)("p",null,"Les exportations d\u2019eau-de-vie charentaise en 1789 sont tr\xe8s sup\xe9rieures \xe0 la moyenne s\xe9culaire. L\u2019explication r\xe9side en partie dans les modifications induites par le Trait\xe9 d\u2019Eden de 1786, qui entra\xeene une augmentation extr\xeamement importante des exportations d\u2019eau-de-vie vers l\u2019Angleterre, notamment des eaux-de-vie de qualit\xe9 produites dans la r\xe9gion de Cognac, au d\xe9triment de celles de moindre qualit\xe9. Le total des exportations d\u2019eaux-de-vie fran\xe7aises vers la Grande-Bretagne passe de 10 \xe0 15 millions de livres tournois dans les ann\xe9es 1760\u201370, \xe0 40 millions en 1787\u201389."),Object(r.a)(i.a,{id:"exports-eau-de-vie-comparaison-directions-des-fermes",mdxType:"Caller"}),Object(r.a)("p",null,"La Rochelle domine les exportations d\u2019eaux-de-vie fran\xe7aises en 1750, mais est d\xe9pass\xe9e par Bordeaux en 1770, qui exporte, en concurrence avec la Direction des fermes de la Rochelle, des eaux-de-vie de l\u2019Angoumois. Par contre, l\u2019explosion des exportations vers l\u2019Angleterre permise par le trait\xe9 Eden-Reynald de 1787 b\xe9n\xe9ficie beaucoup plus \xe0 La Rochelle qu\u2019\xe0 Bordeaux. Nantes stagne alors que les exportations depuis Bayonne et Montpellier croissent."),Object(r.a)(i.a,{id:"origines-exports-eau-de-vie-1789-la-rochelle",mdxType:"Caller"}),Object(r.a)("p",null,"Parmis les zones de production, l\u2019Angoumois domine, suivi par l\u2019Aunis. Les valeurs export\xe9es en eaux-de-vie double (ie \xe0 teneur d\u2019alcool plus \xe9lev\xe9) sont comparables \xe0 celles de eaux-de-vie simples. La d\xe9nomination \xab\xa0eaux-de-vie double\xa0\xbb n\u2019existe que dans les chiffres de 1788 et 1789 et que dans les donn\xe9es issues de la r\xe9gion PASA, indiquant peut-\xeatre les progr\xe8s des techniques de distillation dans la r\xe9gion."),Object(r.a)("h2",{id:"23-marennes-et-le-commerce-du-sel"},"2.3. Marennes et le commerce du sel"),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"sel",bureaux:"Saint-Martin-de-R\xe9, Marennes",mdxType:"Caller"}),Object(r.a)("p",null,"Denr\xe9e pond\xe9reuse de faible valeur, le sel voyage d\xe8s que cela est possible par voie maritime. Les c\xf4tes de la r\xe9gion PASA sont, comme celles du sud de la Bretagne, de tr\xe8s grands producteurs de sel. Marennes est un port d\xe9sign\xe9 comme fournisseur par l\u2019administration des gabelle il approvisionne entre autres les greniers \xe0 sel de Libourne, de Honfleur, et de Saint-Val\xe9ry-sur-Somme. Ses march\xe9s sont donc avant tout nationaux - avec une demande soutenue notamment dans les ports de la Manche qui arment \xe0 la grande p\xeache. L\u2019\xe9tranger (pays de la mer du Nord et du pourtour de la Baltique) y est un partenaire moins important que pour Saint-Martin-de-R\xe9 ou Noirmoutier. "),Object(r.a)(i.a,{id:"sorties-de-marennes",mdxType:"Caller"}),Object(r.a)("p",null,"C\u2019est pourquoi, en quantit\xe9, le bureau des fermes de Marennes est le principal exportateur de sel en France, si l\u2019on inclut aussi les livraisons vers les ports francs fran\xe7ais. Il vient en troisi\xe8me position, derri\xe8re les bureaux du Croisic et de Saint-Martin-de-R\xe9, si on se limite aux march\xe9s ext\xe9rieurs au royaume."),Object(r.a)("p",null,"Les valeurs en jeu ne sont pas \xe9lev\xe9es compar\xe9es \xe0 celles des flux commerciaux dont il a \xe9t\xe9 question pour La Rochelle et Tonnay-Charente: le sel export\xe9 depuis Marennes, y compris \xe0 destination des ports francs fran\xe7ais, se chiffre autour de 360,000 livres tournois en 1789 (dont 141,000 vers l\u2019\xe9tranger). En revanche, son commerce alimente un mouvement portuaire extr\xeamement intense, qui fait de Marennes, en termes de nombre de navires sortis et de leur tonnage, le principal port de la r\xe9gion \xe9tudi\xe9e. Son commerce maritime est donc une activit\xe9 importante, tant pour la production locale qu\u2019il soutient, que pour l\u2019activit\xe9 induite li\xe9e \xe0 son transport (construction navale, emploi maritime). Comme on l\u2019a vu plus haut (partie 1), les transporteurs ne sont pas de Marennes m\xeame, et les retomb\xe9es concernent donc aussi bien les ports de cabotage de la r\xe9gion que ceux du littoral atlantique fran\xe7ais."),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"sel",highlight:"navigo",bureaux:"Saint-Martin-de-R\xe9, Marennes",mdxType:"Caller"}),Object(r.a)("p",null,"Les donn\xe9es sur la navigation aident \xe0 pr\xe9ciser la g\xe9ographie commerciale du sel export\xe9, m\xeame si elles n\u2019indiquent pas les quantit\xe9s export\xe9es. \xc0 compter du r\xe8gne de Louis XIV, la l\xe9gislation relative aux gabelles fait obligation au chargeur de naviguer avec une cargaison compl\xe8te. Le tonnage des navires charg\xe9s de sel est donc un assez bon indicateur des quantit\xe9s export\xe9es. Les cong\xe9s confirment que, parmi les ports exportateurs de la r\xe9gion \xe9tudi\xe9e, la primaut\xe9 revient incontestablement \xe0 Marennes: en 1787, le tonnage additionn\xe9 de navires sortis avec du sel y est de plus du double qu\u2019\xe0 Ars-en-R\xe9, le deuxi\xe8me grand exportateur de la r\xe9gion. M\xeame en prenant en compte la sur\xe9valuation des tonnages de navires \xe0 Marennes, que nous avons constat\xe9e en comparant le tonnage d\u2019un m\xeame navire relev\xe9 en plusieurs ports, Marennes demeure le principal fournisseur de sel en France. "),Object(r.a)("p",null,"L\u2019exportation de sel est en outre une activit\xe9 quasi exclusive \xe0 Marennes : sur 1174 d\xe9parts en 1787, 990 ont charg\xe9 du sel. En 1789, ce sont 1301 sur 1481. "))}c.isMDXComponent=!0;var d=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"21-la-rochelle-et-le-commerce-triangulaire",level:2,title:"2.1. La Rochelle et le commerce triangulaire",children:[]},{id:"22-le-commerce-de-leau-de-vie",level:2,title:"2.2. le commerce de l\u2019eau-de-vie",children:[]},{id:"23-marennes-et-le-commerce-du-sel",level:2,title:"2.3. Marennes et le commerce du sel",children:[]}]},u={}},222:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return d})),a.d(t,"frontMatter",(function(){return u}));var n=a(20),r=(a(2),a(3)),i=a(22),o=["components"],s={text:"16 min read",minutes:15.5,time:93e4,words:3100},l={};function c(e){var t=e.components,a=Object(n.a)(e,o);return Object(r.a)("wrapper",Object.assign({},l,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"part-2-highly-specialized-ports-the-trade-in-slaves-salt-and-brandy"},"Part 2 Highly specialized ports: the trade in slaves, salt, and brandy"),Object(r.a)(i.a,{id:"viz-principale-partie-2",step:1,highlight:"toflit18",filter:"aucun",bureaux:"tous,La Rochelle,Rochefort,Saint-Martin-de-R\xe9,Les Sables-d\u2019Olonne,Marennes,Charente,Marans,Tonnay-Charente",mdxType:"Caller"}),Object(r.a)("h2",{id:"introduction"},"Introduction"),Object(r.a)("p",null,"The PASA region contained a high density of ports that maintained fairly extensive and rather frequent trade relations with the rest of France and the world. The number and the aggregated tonnage of ships departing from these ports did not directly correlate with the value of the goods transported. The two dominant custom offices, in terms of export value, were those of La Rochelle, with its strong ties to the colonial and slave trades, and of Tonnay-Charente, which specialized in the export of brandy, mainly to Great Britain. The port of Marennes (a salt exporter to the North Sea and the Baltic), in contrast, represented the region\u2019s highest tonnage levels albeit at low export value. Imports to the region were dominated by the customs region of La Rochelle (namely, La Rochelle itself) due to the high value of colonial products. The deficit of exports versus imports at Rochefort, which imported naval raw materials, was severe and exports were negligible at this port "),Object(r.a)(i.a,{id:"partie-2-part-navigation-francaise",mdxType:"Caller"}),Object(r.a)("p",null,"Even though our analyses have shown that",Object(r.a)("a",{href:"https://drive.google.com/file/d/1Lr_7vo2oUHvWWWxNPknVtioLepYmIxLn/view",target:"blank",rel:"noopener noreferrer"}," the tonnages recorded at Marennes were probably")," ",Object(r.a)("a",{href:"https://drive.google.com/file/d/1Lr_7vo2oUHvWWWxNPknVtioLepYmIxLn/view",target:"blank",rel:"noopener noreferrer"},"overestimated by 20%"),", sometimes even by 50% in 10% of the worst cases, the port\u2019s supremacy remained undisputed. The map, which shows the tonnage shipped in 1789 based on the port\u2019s clearance records, all destinations combined, also highlights the high part of foreign shipping in ports engaged in the international salt (Noirmoutier and the island de R\xe9) and brandy (Tonnay-Charente) trades. Additionally, there was a high proportion of foreign ships in Rochefort, transporting naval stores from the North to the French royal shipyard. These vessels handled almost all foreign trade (excluding the slave trade) in the PASA region. As we will see",Object(r.a)("a",{href:"https://medialab.github.io/portic-storymaps-2021/fr/page/partie-3",target:"blank",rel:"noopener noreferrer"}," "),Object(r.a)("a",{href:"https://medialab.github.io/portic-storymaps-2021/fr/page/partie-3",target:"blank",rel:"noopener noreferrer"},"in part 3"),", La Rochelle no longer played a central role among the region\u2019s ports as other ports engaged in foreign trade as well as with French markets, selling local products without going through La Rochelle."),Object(r.a)("p",null,"This section provides a comparative study of three ports in the region at the end of the Old Regime, showing the variety of products they traded and of their markets. Due to its exclusive relationship with the colonies, and especially its participation in the slave trade, La Rochelle deserves a separate study. Its considerable imports of colonial goods, most of which were re-exported to Northern Europe, gave the port a unique role. As for the brandy trade, the port of Tonnay-Charente serves as a case study. Since brandy was rarely mentioned as a cargo in the clearance records, we first examined the Balance of Trade sources and then refined the data by analyzing ship clearances. "),Object(r.a)(i.a,{id:"sorties-de-sel",mdxType:"Caller"}),Object(r.a)("p",null,"Finally, several other ports in the region dedicated themselves primarily to the export of salt, as can be seen in the diagram. In 1789, the salt trade fleets at Ars-en-R\xe9, Noirmoutier, and especially Marennes, exceeded 10,000 French tonneaux (1 French tonneau = 1.44 cubic meters). Here we will focus in detail on Marennes, the chief salt-exporting port, which mainly concentrated on supplying the national market."),Object(r.a)("h2",{id:"21-la-rochelle-and-the-triangular-trade"},"2.1. La Rochelle and the triangular trade"),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"colonial",highlight:"toflit18",bureaux:"tous,La Rochelle",mdxType:"Caller"}),Object(r.a)("p",null,"In the eighteenth century, the West Indian colonies considerably expanded their production of sugar, coffee, indigo, and dye products to meet the increased European demand. Production growth required ever more plantations, in turn massively reliant on slave labor sourced by the hundreds of thousands from Africa. The transatlantic trade of human beings purchased on the coasts of Africa by European slave traders began in the fifteenth century, and reached its peak in the eighteenth century, when six million Africans were forcibly transported to the Americas. Half of them were sold in the West Indies. It is estimated that one million Africans were shipped to the French colonies in the eighteenth century. Their main destination was the colony of Saint Domingue (now Haiti) which, on the eve of the great revolt of 1791, had a slave population of half a million, more than half of them African-born. Although the share of slave shipping in most French slave-trade ports was significantly lower than direct shipping to the West Indies, this was not the case for La Rochelle: out of 15 departures from its port in 1789 supplying slaves or products to the West Indies, 12 were slave ships headed initially for the African coast in a triangular circuit. The transatlantic traffic of La Rochelle, like that of Honfleur, was clearly specialized in the slave trade. In 1789, all 12 slave ships that departed from La Rochelle were outfitted by La Rochelle merchants. Three additional slave ships left from Rochefort. "),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"colonial",highlight:"navigo",bureaux:"tous,La Rochelle",minTonnage:"100",mdxType:"Caller"}),Object(r.a)("p",null,"The slave trade was handled by private shipowners who expected to make a profit by reselling the captives in the West Indies. Even though Nantes was the main French slave port, La Rochelle still played a significant role, especially during the 1730s and the 1740s. Between 1713 and 1744, La Rochelle supplied 15% of French slaving expeditions. Its share decreased to 11% after Canada was lost. While La Rochelle was the second most important slave port in France before 1763, it later dropped to fourth position."),Object(r.a)("p",null,"Despite a relative decline, La Rochelle\u2019s slave trade increased in absolute terms: 4.3 slave ships per year were outfitted by La Rochelle shipowners in the 1713 to 1744 period, and this number increased to 12.5 ships per year in the decade from 1783 to 1793. During the latter decade, slave trade truly became the main, if not almost exclusive, activity of La Rochelle shipowners: in 1789, out of a total of 200 ship departures from La Rochelle outfitted by local merchants, over half of the tonnage went to Africa, to the West Indian colonies or the Mascarene islands, with Africa accounting for 42% of the total. The rest was divided between Newfoundland and Saint-Pierre-et-Miquelon (9.2%). The share of shipping to foreign countries was insignificant (0.2%), and shipping beyond neighboring ports (Aunis, Poitou, and Saintonge) did not exceed 5%. Three-quarters of the roughly 30 La Rochelle ships with a capacity exceeding 50 tonneaux (the largest holding 827 tonneaux) that left the port of La Rochelle in 1789 were engaged in the transatlantic and slave trade. "),Object(r.a)("p",null,"If we ignore the scattered coastal traffic, the importance of African destinations and colonies becomes clear in this diagram, which shows the destinations of ships departing La Rochelle in 1789, all home ports combined. Further, all the ships heading for the Americas, the West Indies, or the Indian Ocean except one were outfitted by shipowners from La Rochelle. "),Object(r.a)("p",null,"In total, during the final years of the Old Regime, each year a dozen ships returned to La Rochelle from the colonies, either in direct line or (most often) returning from a slaving expedition after a stopover in the West Indies. The Balance of Trade data confirm the centrality of the colonial and slave trade: in 1789, exports to Africa represented 23% of the total exports of the La Rochelle customs office, while 73% were re-exports of colonial goods. The value of the products shipped back to La Rochelle was estimated in 1789 at 7.1 million French livres, of which 5.1 million were re-exported abroad. La Rochelle merchants seem to have carved out a strong position in the coffee market, due to their almost exclusive ties with Saint Domingue where several prominent families of La Rochelle (Belin, Garesch\xe9, and Poupet Rasteau) were very well established. Saint Domingue supplied almost all the coffee imported into France from the West Indies."),Object(r.a)(i.a,{id:"partie-2-carte-direction-bateaux-de-la-rochelle",mdxType:"Caller"}),Object(r.a)("p",null,"Although the Balance of Trade data does not allow us to determine the destinations of La Rochelle colonial re-exports, the destinations of the ships that departed from the port in 1789 do give us an approximate indication. The Austrian Low Countries (now Belgium), the United Provinces (now the Netherlands), Bremen, Hamburg, and the Baltic ports each received ships with a total capacity of 500 to 550 tonneaux from La Rochelle. Of the other European destinations of ships leaving from La Rochelle, it was probably only Great Britain (1,048 tonneaux) that did not take in colonial products, because it was supplied by its own colonies. "),Object(r.a)("p",null,"Unsurprisingly, issues relating to colonial and slave trade were a predominant concern of La Rochelle merchants, as is clearly evident in the topics raised in the La Rochelle Chamber of Commerce. A contemporary hand-written index to these deliberations of the Chamber of Commerce was written in the margins of the registers, revealing that in the year 1789 alone, trade with Africa was discussed some 30 times, the topic of the colonies was raised close to 50 times, and trade with India 9 times. By way of comparison, trade with foreign countries was discussed just 11 times, and fishing (more specifically the question of authorizing American competition, much debated that year in France) 17 times. Among the products indexed in the margins of the registers of deliberations, foodstuffs were mentioned 16 times \u2013 which is hardly surprising considering the importance of cereal crops in these crisis years \u2013 while brandy and wine appear 6 times, sugars and refineries 8, and coal 3 times. Just this rough tabulation is enough to show that the members of the Chamber of Commerce clearly had their eyes glued to the colonies and the slave trade. "),Object(r.a)("p",null,"The issue of the slave trade may be largely absent from the 1789 lists of grievances (cahiers de dol\xe9ances) prepared for the General Estates of the region (we analyzed a sample of 163 cahiers out of the 522 drafted in the entire PASA region), but the defense of colonial interests appears significantly in the lists of grievances of the third estate of the city of La Rochelle only. Its representatives sent to Versailles were asked to seek the revocation of the Act issued at the king\u2019s council of August 30, 1784 which concerned foreign trade in the colonies, and the reestablishment of the provisions of the letters patent of 1717 and 1727 which the third estate of La Rochelle considered as an essential element to the progress made by French navigation and the culture of the French islands of America. The 1784 Act expanded the softened Exclusif mitig\xe9 system introduced in 1767, allowing more foreign ships under specific restrictive conditions to supply the colonies. This authorization of foreign ships in the colonies was met with protest by all the Chambers of Commerce in France involved in colonial trade, because French merchants were opposed to any foreign competition. What is interesting however is that even though this was not a document originating from the Chamber of Commerce or from a group of shipowners, the list of grievances of the third estate of La Rochelle defended French colonial trading interests and also called for laws to prohibit the re-export of raw sugars in order to protect local refineries. Finally, the deputies were to request the revocation of the decree of April 14, 1785, which created a new East India company, and of the decree that allowed foreigners into the Isles of France and Bourbon (i.e., Mauritius and Reunion), even if during the era of free trade (1769\u20131785), ship outfitting to the Indian Ocean or China from La Rochelle (26) was lower than from Nantes (44), Bordeaux (41), Marseille (42) or Saint-Malo (32) and of course Lorient (120). "),Object(r.a)("p",null,"La Rochelle was only modestly involved in navigation beyond the Cape of Good Hope at the end of the Old Regime. Records in 1789 only mention exports to India of a value of 38,060 French livres, and none to the Mascarene Islands. However, on May 9 that year the non-slaving ship Henri IV was recorded as departing for the Isle of France and the Isle of Bourbon, arriving safely in February 1790 ","[","Toussaint, 1967, p. 291","]",". Perhaps its cargo originated entirely from other customs regions. In 1787, three ships left La Rochelle for the Mascarenes, which shows a certain diversification of colonial outfitting here as in Bordeaux in the 1780s when the decline in profits from the West Indian trade encouraged the search for more profitable investments."),Object(r.a)("h2",{id:"22-the-brandy-trade"},"2.2. The brandy trade"),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"eau-de-vie",bureaux:"Charente, Saint-Martin-de-R\xe9, Rochefort,Tonnay-Charente",mdxType:"Caller"}),Object(r.a)("p",null,"The ships\u2019 records we can access are unfortunately of little help in identifying trade flows in brandy. The customs agent of the port of Tonnay-Charente, for example, did not usually bother to identify the cargoes (he did so only 12 times out of a total of 601 departures), which means that we have an overview of navigation but not of the type of products exported. An analysis of departures for the year 1787 nevertheless allowed us to identify the commercial flows. Out of 67 ships of an average tonnage close to 100 tonneaux departing from Tonnay-Charente, 42 went overseas (two-thirds to English ports, the rest to the Channel Islands, Ostend, and the Baltic); the remaining 25 large coasters sailed to Dunkirk. We were able to identify the European brandy fleet, which represented 22% of the outgoing tonnage in 1787. We also identified a second group, composed of a scattering of small coasters (with an average tonnage of 35 tonneaux) which nevertheless represented 30% of the total outgoing tonnage. These ships were all headed to a single destination: La Rochelle. They partly supplied the city and perhaps also the regional or national trade, but it is clear that La Rochelle had lost the role of warehouse for the international trade of brandy that it held in the 1730s. The main brandy trading houses, such as Martell, no longer had offices in La Rochelle in 1789. Their headquarters had been repatriated to Tonnay-Charente or moved to Paris. Finally, more modest vessels (25 tonneaux on average) navigating within the sea of Pertuis (from La Seudre down to Les Sables-d\u2019Olonne) represented 23% of the tonnage shipped out of Tonnay-Charente. It should be noted that 479 of the 743 clearances issued in 1787 in that port concerned ships based in river ports navigating downstream. These ships carried brandy along with quarry stones and manufactured products from the hinterland to Tonnay-Charente, and left the port either empty or with a cargo for Rochefort, La Rochelle or the seaports of Pertuis, which provided them with return freight for their navigation up the Charente river. "),Object(r.a)(i.a,{id:"exports-eau-de-vie-la-rochelle-longitudinal",mdxType:"Caller"}),Object(r.a)("p",null,"Exports of Charente brandy in 1789 were much higher than the average during that century. This was in part due to the changes brought about by the Treaty of Eden of 1786, which led to an extremely large increase in brandy exports to Great Britain, notably quality brandy produced in the Cognac region, and a decrease in lower quality ones. The total exports of French brandy to Great Britain rose from 10\u201315 million French livres in the years 1760\u20131770 to 40 million in 1787\u201389."),Object(r.a)(i.a,{id:"exports-eau-de-vie-comparaison-directions-des-fermes",mdxType:"Caller"}),Object(r.a)("p",null,"La Rochelle dominated exports of French brandy in 1750, but was overtaken by Bordeaux in 1770, which competed with the La Rochelle customs region by exporting brandy from the Angoumois region. However, the aforenoted Eden-Reynald Treaty of 1787 that led to an explosion of exports to Great Britain benefited La Rochelle region much more than Bordeaux. Brandy export from Nantes was stagnating, while exports from Bayonne and Montpellier were growing."),Object(r.a)(i.a,{id:"origines-exports-eau-de-vie-1789-la-rochelle",mdxType:"Caller"}),Object(r.a)("p",null,"The dominant production area was the Angoumois region, followed by the Aunis. The value of exported \xab\xa0double\xa0\xbb brandy (i.e. with a higher alcohol content) was comparable to that of \xab\xa0simple\xa0\xbb brandy. The \xab\xa0double brandy\xa0\xbb designation first appeared in the 1788 and 1789 figures and only in data from the PASA region, perhaps indicating advanced distillation techniques in the region."),Object(r.a)("h2",{id:"23-marennes-and-the-salt-trade"},"2.3. Marennes and the salt trade"),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"sel",bureaux:"Saint-Martin-de-R\xe9, Marennes",mdxType:"Caller"}),Object(r.a)("p",null,"Salt, a heavy commodity of low value, travelled mostly by sea. The coasts of the PASA region were major salt producers, as were those of southern Brittany. And the port of Marennes was designated as a supplier by the salt tax administration (gabelle). It supplied the salt granaries of Libourne, Honfleur, and Saint-Val\xe9ry-sur-Somme, among others. Its markets were therefore mostly national, and its demand was sustained, particularly in the Channel ports specialized in outfitting deep-sea fishing. Foreign countries (on the North Sea and around the Baltic) were less important partners in this case than for Saint-Martin-de-R\xe9 or Noirmoutier. "),Object(r.a)(i.a,{id:"sorties-de-marennes",mdxType:"Caller"}),Object(r.a)("p",null,"The Marennes customs region was then, in terms of quantity, the main French salt exporter, if we also include shipments to French free ports. It comes in third position, behind the regions of Croisic and Saint-Martin-de-R\xe9, if we only consider markets outside the kingdom."),Object(r.a)("p",null,"The values involved were not high compared to the trade flows of La Rochelle and Tonnay-Charente mentioned above. The salt exported from Marennes, including to French free ports, amounted to around 360,000 French livres in 1789 (including 141,000 to foreign countries). Nevertheless, the salt trade contributed to extremely intense port activity, making Marennes the main port in our region of interest in terms of the number of departing ships and their tonnage. Its maritime trade represented an important activity, both because of the local production that it supported, and because of the activity induced by its transportation (shipbuilding and maritime employment). As seen above (part 1), the vessels did not originate from Marennes itself, and the trade therefore benefitted both the coastal ports in the region and those on the French Atlantic coast."),Object(r.a)(i.a,{id:"viz-principale-partie-2",filter:"sel",highlight:"navigo",bureaux:"Saint-Martin-de-R\xe9, Marennes",mdxType:"Caller"}),Object(r.a)("p",null,"Shipping data can be used to understand the commercial geography of exported salt, but it does not reveal the quantities exported. Starting from the reign of Louis XIV, however, salt tax laws required the captain to sail with a full cargo. The tonnage of vessels loaded with salt is therefore a fairly good indication of the quantities exported. The clearance documents confirm that, among the exporting ports of our region of interest, Marennes unquestionably comes in first place. In 1787, the cumulative tonnage of ships transporting salt departing from Marennes was more than twice the tonnage shipped from Ars-en-R\xe9, the second largest exporter in the region. Even after noting the ship tonnage overvaluation in Marennes, which we observed by comparing it with the tonnage of the same ships recorded in other ports, Marennes remains the main salt supplier of France. "),Object(r.a)("p",null,"Salt export is almost the exclusive activity of Marennes: out of 1,174 ship departures in 1787, 990 had a salt load. In 1789, it rose to 1,301 out of 1,481 ships. "))}c.isMDXComponent=!0;var d=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"21-la-rochelle-and-the-triangular-trade",level:2,title:"2.1. La Rochelle and the triangular trade",children:[]},{id:"22-the-brandy-trade",level:2,title:"2.2. The brandy trade",children:[]},{id:"23-marennes-and-the-salt-trade",level:2,title:"2.3. Marennes and the salt trade",children:[]}]},u={}},223:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return d})),a.d(t,"frontMatter",(function(){return u}));var n=a(20),r=(a(2),a(3)),i=a(22),o=["components"],s={text:"9 min read",minutes:8.25,time:495e3,words:1650},l={};function c(e){var t=e.components,a=Object(n.a)(e,o);return Object(r.a)("wrapper",Object.assign({},l,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"partie-3-la-rochelle-port-dominant-mais-pas-structurant"},"Partie 3. La Rochelle, port dominant mais pas structurant"),Object(r.a)(i.a,{id:"viz-principale-partie-3",step:1,mdxType:"Caller"}),Object(r.a)("p",null,"En 1789, les navires qui sortent des ports exportateurs de sels (Marennes, Ars-en-R\xe9) et de Rochefort ont un tonnage moyen plus important que ceux sortant de La Rochelle. De mani\xe8re plus surprenante, la quantit\xe9 de navires qui sortent des ports secondaires - Aligre, Charente, Marennes, Saint-Martin de R\xe9, voire m\xeame Rochefort - t\xe9moigne d\u2019un dynamisme qui \xe9chappe largement au port dominant, La Rochelle. Cette particularit\xe9 s\u2019inscrit dans une histoire maritime longue de la r\xe9gion PASA."),Object(r.a)("p",null,"Jusqu\u2019\xe0 la perte des colonies nord-am\xe9ricaines, le port de La Rochelle a cultiv\xe9 une certaine sp\xe9cificit\xe9 g\xe9ographique. Quoique le port de La Rochelle pratiquait, comme la presque totalit\xe9 des ports atlantiques, le commerce antillais et n\xe9grier, une part importante et qui a progressivement augment\xe9 jusqu\u2019\xe0 repr\xe9senter plus de la moiti\xe9 de ses armements pour les colonies dans les ann\xe9es 1750 \xe9tait constitu\xe9e par le commerce nord-am\xe9ricain - Canada, Louisiane et p\xeacheries de Terre-Neuve. Cette sp\xe9cificit\xe9 g\xe9ographique a \xe9galement influ\xe9 sur sa sp\xe9cialisation par produits. Le commerce des fourrures est ainsi une sp\xe9cialit\xe9 rochelaise jusqu\u2019au d\xe9but des ann\xe9es 1760. Les fourrures \xe9taient import\xe9es non seulement du Canada, mais aussi de la Louisiane, porte de sortie des peaux de l\u2019Ohio. Ces fourrures \xe9taient pour partie r\xe9-export\xe9es en France et en Europe (principalement vers l\u2019espace allemand et en Suisse). Une part importante, les peaux de castors en particulier, n\u2019\xe9tait pas r\xe9export\xe9e, mais alimentait l\u2019industrie de chamoiserie niortaise et d\u2019autres localit\xe9s fran\xe7aises. En retour, les Rochelais approvisionnaient les Canadiens et la Louisiane en vivres, mati\xe8res premi\xe8res et en produits manufactur\xe9s. L\u2019Am\xe9rique du Nord \xe9tait donc un d\xe9bouch\xe9 important et facile pour les c\xe9r\xe9ales de la r\xe9gion, les \xe9toffes locales de basse qualit\xe9 et, dans une moindre mesure, le sel n\xe9cessaire aux p\xeacheries de Terre-Neuve. Ce commerce quoique modeste avant les ann\xe9es 1740 fournissait des volumes importants d\u2019emploi dans ces trois secteurs de l\u2019\xe9conomie r\xe9gionale et contribuait \xe0 faire du port de La Rochelle le centre de gravit\xe9 du complexe portuaire r\xe9gional. Cette domination \xe9tait renforc\xe9e par la pr\xe9pond\xe9rance des capitaux rochelais, investis de mani\xe8re prioritaire dans le commerce Atlantique - nord-am\xe9ricain et antillais. La domination rochelaise se mesurait notamment au d\xe9but du si\xe8cle par la pr\xe9sence des bureaux principaux des maisons de Cognac \xe0 La Rochelle. Mais, d\xe8s la crise qui suivit la chute du syst\xe8me de Law, La Rochelle commen\xe7a \xe0 perdre sa place et Tonnay-Charente \xe0 s\u2019affirmer comme le principal port d\u2019exportation de l\u2019eau-de-vie produite dans la r\xe9gion, et du Cognac en particulier. "),Object(r.a)(i.a,{id:"viz-principale-partie-3",step:2,mdxType:"Caller"}),Object(r.a)("p",null,"Ainsi, m\xeame si le port de la Rochelle a l\u2019ascendant sur les autres ports de la r\xe9gion par la diversit\xe9 des produits qu\u2019il importe et exporte et, surtout, par son activit\xe9 dans le commerce atlantique, les \xe9changes des ports de la r\xe9gion sont largement autonomes comme le montre le r\xe9seau des voyages de la r\xe9gion PASA de 1787 compar\xe9 \xe0 ceux des deux autres r\xe9gions situ\xe9es au nord (la Loire-Atlantique) et au sud (l\u2019Aquitaine). Les indices de centralit\xe9 (la \xab\xa0betweeness centrality\xa0\xbb ou \xab\xa0centralit\xe9 d\u2019interm\xe9diarit\xe9\xa0\xbb compte le nombre de plus courts chemins entre deux ports passant par le port donn\xe9 ; le \xab\xa0pagerank\xa0\xbb mesure la connexion relative \xe0 des ports eux-m\xeames bien connect\xe9s. Voir ",Object(r.a)("a",{href:"https://fr.wikipedia.org/wiki/Centralit%25C3%25A9",target:"blank",rel:"noopener noreferrer"},Object(r.a)("a",{parentName:"p",href:"https://fr.wikipedia.org/wiki/Centralit%C3%A9"},"https://fr.wikipedia.org/wiki/Centralit%C3%A9")),") compar\xe9es \xe0 ceux d\u2019autres r\xe9gions domin\xe9es par un port central (Sud-ouest Atlantique, Normandie, Loire-Atlantique) confirment la relative faiblesse de La Rochelle et son incapacit\xe9 \xe0 structurer les trafics maritimes locaux comme nous l\u2019avons illustr\xe9 dans la partie 2 avec les exemples de la traite, du commerce des eaux-de-vie et du commerce du sel."),Object(r.a)("p",null,"Ce constat peut \xeatre li\xe9 historiquement \xe0 la perte des colonies nord-am\xe9ricaines (Canada et Louisiane) qui a bris\xe9 une dynamique vertueuse qui s\u2019\xe9tait \xe9tablie dans les ann\xe9es suivant la guerre de succession d\u2019Autriche. En effet, avant 1748, le commerce des Antilles en droiture et la traite n\xe9gri\xe8re continuaient \xe0 dominer le commerce de la Direction de la Rochelle en valeur, \xe9tant donn\xe9 le dynamisme limit\xe9 de la demande \xe9manant de l\u2019Am\xe9rique du Nord. Mais, d\xe8s la fin de la guerre de Succession d\u2019Autriche, s\u2019ouvre une p\xe9riode de croissance exceptionnelle pour le commerce avec l\u2019Am\xe9rique du Nord. Sur la p\xe9riode 1748\u20131758, La Rochelle re\xe7oit annuellement plus de 1 300 000 livres de peaux d\u2019Am\xe9rique du Nord, soit presque autant en valeur que de sucre des Antilles (1 450 000 livres). Le nombre d\u2019armements \xe0 destination du Canada est multipli\xe9 par deux alors que celui pour la Louisiane augmente de moiti\xe9. Par rapport aux ann\xe9es pr\xe9c\xe9dant la guerre, le trafic li\xe9 au commerce colonial triangulaire baisse en moyenne d\u2019un quart pour les Antilles et de plus de la moiti\xe9 pour la traite, destinations pour lesquelles les envois rochelais sont directement en concurrence avec des ports comme Bordeaux, Nantes, Rouen et m\xeame Dunkerque et Marseille. A l\u2019inverse, les Rochelais ont un monopole de fait pour la Louisiane qui n\u2019int\xe9resse gu\xe8re les ports plus importants et seul Bordeaux les concurrence pour l\u2019approvisionnement du Canada. Par ailleurs, ces deux destinations offraient des possibilit\xe9s compl\xe9mentaires. D\u2019un c\xf4t\xe9, le commerce \xe0 destination du Canada pouvait se transformer en commerce triangulaire invers\xe9 - La Rochelle-Canada-Antilles - lorsque les capitaines rochelais trouvaient au Canada de quoi ravitailler les \xeeles \xe0 sucre en morue sal\xe9e et, plus rarement, en c\xe9r\xe9ales. La Louisiane permettait \xe9galement de r\xe9aliser des op\xe9rations de contrebande avec les colons espagnols, offrant la possibilit\xe9 de riches retours sous forme de piastres (Augeron : 2004; Mathieu : 1991)."),Object(r.a)(i.a,{id:"viz-principale-partie-3",step:3,mdxType:"Caller"}),Object(r.a)("p",null,"Ce commerce de niche, limit\xe9 en volume, mais cr\xe9ateur d\u2019emplois locaux et, au milieu du si\xe8cle, facteur d\u2019un dynamisme certain, s\u2019\xe9croule avec la perte des colonies fran\xe7aises nord-am\xe9ricaines \xe0 la fin de la guerre de Sept Ans. Cette perte d\xe9structure durablement le commerce rochelais qui perd ses march\xe9s privil\xe9gi\xe9s et sa position dominante au sein du r\xe9seau portuaire r\xe9gional. En 1789, le commerce ext\xe9rieur du port de la Rochelle est quasi exclusivement colonial : pr\xe8s de 90% de ses exportations en valeur sont destin\xe9es \xe0 la traite africaine et aux Antilles. Son impact dans la structuration de la r\xe9gion \xe9tudi\xe9e appara\xeet faible, alors que les autres bureaux de Fermes de la r\xe9gion exportent essentiellement des produits r\xe9gionaux, cela n\u2019est pas le cas dans le bureau de La Rochelle. D\u2019autres ports, par ailleurs, sont nettement plus \xab\xa0extravertis\xa0\xbb en termes de navigation. Le profil de La Rochelle s\u2019apparente \xe0 celui des autres grands ports coloniaux, \xe0 cela pr\xe8s que Bordeaux exporte une partie consistante de produits r\xe9gionaux de son arri\xe8re-pays, qu\u2019il contribue \xe0 structurer. Le Havre et Nantes, comme La Rochelle, n\u2019exportent pas, eux, essentiellement des produits de leur r\xe9gion. La part des voyages internes \xe0 la r\xe9gion est en revanche importante pour La Rochelle, mais cela refl\xe8te plus les n\xe9cessit\xe9s de l\u2019approvisionnement de la ville et de la r\xe9gion qu\u2019un r\xf4le d\u2019entrep\xf4t pour l\u2019exportation. Ainsi, \xe0 titre d\u2019exemple, le total du tonnage exp\xe9di\xe9 du seul port de Rib\xe9rou-Saujon en 1789 vers La Rochelle avec de la chaux est de 1640 tonneaux. Quant \xe0 la quarantaine de navires qui s\u2019y rendent depuis Marennes, ils ont \xe0 bord du vin, des eaux-de-vie, du bois, des f\xe8ves, des hu\xeetres, des meubles, des passagers, ou naviguent \xe0 vide."),Object(r.a)("p",null,"Les graphiques que nous proposons illustrent fid\xe8lement nos propos. Ce d\xe9clin se donne \xe0 voir, \xe0 la veille de la R\xe9volution, sur le graphique en d\xe9but de section, o\xf9 l\u2019infrastructure de la r\xe9gion PASA appara\xeet originale par le faible poids relatif de son port principal - La Rochelle - incapable de freiner le d\xe9veloppement des ports qu\u2019il maintenait dans sa d\xe9pendance avant 1763: Tonnay-Charente, Marennes, Rochefort et Ars-en-R\xe9. Dans la p\xe9riode pr\xe9-r\xe9volutionnaire (1787\u20131789), les flux de navires comme de marchandises t\xe9moignent ainsi de la recomposition de l\u2019\xe9conomie de la fa\xe7ade maritime. D\xe9sormais, la valeur des flux de marchandises au d\xe9part de Tonnay-Charente et \xe0 l\u2019arriv\xe9e de Rochefort, qui entretient directement les productions locales, se rapproche de ceux de La Rochelle."),Object(r.a)("p",null,"Cette \xe9volution est la cons\xe9quence de plusieurs contraintes qui se renforcent: la baisse de la capitalisation des n\xe9gociants rochelais, cons\xe9quence directe de la vague de faillites qui secouent le milieu \xe0 la fin de la guerre de Sept Ans; la fermeture des march\xe9s nord-am\xe9ricains subventionn\xe9s qui auraient permis un rebond rapide; la forte concurrence des autres ports sur la destination antillaise. Il ne restait donc que la traite n\xe9gri\xe8re. Pour l\u2019animer, les n\xe9gociants rochelais se procurent les marchandises n\xe9cessaires \xe0 ce commerce dans toute la France et l\u2019Europe et ne se fournissent que tr\xe8s peu dans l\u2019arri\xe8re-pays rochelais. Le port n\u2019est donc pas le point de passage oblig\xe9 de son arri\xe8re-pays dans les relations avec le grand large, et ce, d\u2019autant plus, que la faiblesse capitalistique de la place \xe9loigne les maisons de commerce sp\xe9cialis\xe9es dans le Cognac; ainsi Martell qui rapatrie leurs bureaux principaux \xe0 Tonnay-Charente ou \xe0 Paris. M\xeame dans le commerce colonial, La Rochelle doit faire une place aux autres ports de la r\xe9gion puisque Rochefort se voit accorder l\u2019autorisation de faire le commerce colonial, t\xe9moignant du d\xe9clin \xe9conomique et politique du port."),Object(r.a)("p",null,"Pour conclure, La Rochelle reste en 1789 un port relativement dominant dans la r\xe9gion, notamment en ce qui concerne le commerce atlantique, mais cette domination a largement diminu\xe9 au cours du si\xe8cle. De plus, la sp\xe9cialisation des ports de la r\xe9gion dans le sel pour les uns (Marennes, Ars-en-R\xe9), dans l\u2019eau-de-vie pour les autres (Tonnay-Charente et, dans une moindre mesure, les ports de l\u2019\xeele de R\xe9), n\u2019est plus articul\xe9e par la place de La Rochelle. Le commerce colonial ne s\u2019appuie plus sur le r\xe9seau des ports et des places manufacturi\xe8res locales, mais survit gr\xe2ce aux capitaux et aux marchandises venus d\u2019ailleurs."),Object(r.a)(i.a,{id:"partie-3-comparaison-exports-coloniaux",mdxType:"Caller"}),Object(r.a)("p",null,"Les guerres de la R\xe9volution et napol\xe9oniennes ont par la suite d\xe9montr\xe9 la fragilit\xe9 et l\u2019artificialit\xe9 d\u2019un tel dispositif. Le blocus anglais et l\u2019interdiction de la traite transatlantique sonnent pour le port de la Rochelle le glas de son destin de grand port commercial. "))}c.isMDXComponent=!0;var d=function(){return[]},u={}},224:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return s})),a.d(t,"default",(function(){return c})),a.d(t,"tableOfContents",(function(){return d})),a.d(t,"frontMatter",(function(){return u}));var n=a(20),r=(a(2),a(3)),i=a(22),o=["components"],s={text:"8 min read",minutes:7.575,time:454500,words:1515},l={};function c(e){var t=e.components,a=Object(n.a)(e,o);return Object(r.a)("wrapper",Object.assign({},l,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"part-3-la-rochelle-a-dominant-port-but-not-a-regional-hub"},"Part 3. La Rochelle, a dominant port but not a regional hub"),Object(r.a)(i.a,{id:"viz-principale-partie-3",step:3,mdxType:"Caller"}),Object(r.a)("p",null,"In 1789, ships departing from salt exporting ports (Marennes and Ars-en-R\xe9) or from Rochefort had a higher average tonnage than those departing from La Rochelle. Surprisingly, an analysis of the number of ships departing from secondary ports (Aligre, Charente, Marennes, Saint-Martin de R\xe9, and even Rochefort) shows that the dynamic activities at these ports were mostly unrelated to those of the dominant port, La Rochelle. This characteristic is a result of the long historical evolution of maritime trade in the PASA region."),Object(r.a)("p",null,"The port of La Rochelle had cultivated a certain geographic distinctiveness until France lost its North American colonies. Like most Atlantic ports La Rochelle was involved in the West Indian and slave trade, but a considerable share of its shipments to the colonies was devoted to trade with North America (Canada, Louisiana, and Newfoundland fisheries), increasingly progressively to represent more than half of its colonial outfitting in the 1750s. This focus also influenced the nature of the products the port specialized in."),Object(r.a)("p",null,"Fur trade was a La Rochelle specialty up to the early 1760s, with furs not only imported from Canada, but also from Louisiana, the main seaport for Ohio animal skins. These were for the most part re-exported in France and in Europe (mainly to the German territories and Switzerland). An important share \u2013 beaver furs notably \u2013 was not re-exported but went to the leather industry of Niort and other French towns. In return, La Rochelle supplied food, raw materials, and manufactured products to Canada and Louisiana. North America was an important and easy market for the region\u2019s grain, low-quality local cloth, and to a lesser extent for the salt used by Newfoundland fisheries. While still modest in the 1740s, this trade provided high levels of employment in all three sectors of the regional economy and turned La Rochelle into the focal point of the regional port complex. This dominant position was compounded by the large share of La Rochelle capital invested in the Atlantic trade with North America and the West Indies. At the turn of the century La Rochelle\u2019s superiority was reflected in the fact that Cognac companies established their headquarters in the town. However, following the crisis brought on by the end of the Law financial system in 1720, La Rochelle progressively lost its leading position and Tonnay-Charentes grew as the main port for the export of brandy produced in the region, and of Cognac more particularly. "),Object(r.a)(i.a,{id:"viz-principale-partie-3",step:2,mdxType:"Caller"}),Object(r.a)("p",null,"La Rochelle overshadowed other ports in the region in the diversity of exported and imported products, and especially in its involvement in the Atlantic trade. The other regional ports largely developed their own economic activities independently, as shown by a comparison of the network of ship routes in the PASA region in 1787 with two other regions in the North (Loire-Atlantique) and South (Aquitaine). The indicators of centrality (ie the \u201cbetweenness centrality\u201c, which is the number of shortest routes between two ports that pass through a given port, or PageRank centrality measuring the connection with other well-connected ports \u2013 see https:// en.wikipedia/wiki/Centrality) confirm La Rochelle\u2019s comparative weakness and inability to centralize local maritime traffic when contrasted against other regions dominated by a central port (such as South-West France, the Loire-Atlantique, or Normandy). This was illustrated in part 2 above in examples relating to the slave trade and the brandy and salt trades."),Object(r.a)("p",null,"La Rochelle\u2019s weaker position within its region is probably a consequence of the loss of the North American colonies (Canada and Louisiana), which broke a positive cycle that had been established in the period after the War of the Austrian Succession. Before 1748, direct trade with the West Indies and the slave trade remained dominant within the La Rochelle customs region in terms of value, because of the limited demand from North America. But, immediately after the War of the Austrian Succession, a period of exceptional growth began in trade with North America. From 1748 to 1758, La Rochelle annually imported more than 1,300,000 French livres of North American skins, almost equal in value to West Indian sugar (1,450,000 French livres). The number of ships outfitted to sail to Canada had doubled, while the number travelling to Louisiana increased by half. Compared to the pre-war years, traffic to the West Indies fell on average by a quarter and slave trade traffic decreased by more than half now that La Rochelle was in direct competition with ports such as Bordeaux, Nantes, Rouen, and even Dunkirk and Marseille. Conversely, La Rochelle had a de facto monopoly over Louisiana, which was of little interest to larger ports, and only competed with Bordeaux in supplying Canada. These two destinations offered complementary possibilities, allowing for other types of triangular trade between La Rochelle, Canada, and West Indies to arise, based on Canadian salted cod and, more rarely, grain that could supply the sugar islands. Trade with Louisiana also provided smuggling possibilities with Spanish settlers, and this could offer rich returns in the form of Spanish silver dollars (Augeron: 2004; Mathieu: 1991)."),Object(r.a)(i.a,{id:"viz-principale-partie-3",step:3,mdxType:"Caller"}),Object(r.a)("p",null,"Although this niche trade was limited in volume, it created local jobs and, in the middle of the century, gave rise to a certain dynamism which collapsed with the loss of the French North American colonies at the end of the Seven Years\u2019 War. This loss permanently disrupted La Rochelle trade, depriving it of its distinctive markets and forcing it to relinquish its dominant position within the regional port network. By 1789, La Rochelle export trade was almost exclusively colonial: the slave trade and trade with the West Indies represented nearly 90% of its export value and the port\u2019s activities no longer no longer framed the regional export economy which fell to neighboring customs offices. La Rochelle\u2019s profile was similar to that of other large colonial ports, except for Bordeaux which consistently exported a share of products originating from its hinterland and became a regional hub for that trade. Le Havre and Nantes, like La Rochelle, did not mainly export products from their region. While the share of maritime traffic between La Rochelle and its region was important, its purpose was mainly to supply the city and the region rather than to serve as a warehouse for export. Thus, for example, in 1789, the port of Rib\xe9rou-Saujon alone shipped lime to La Rochelle on ships totaling 1,640 tonneaux, and the forty or so ships that sailed to La Rochelle from Marennes carried wine, brandy, wood, beans, oysters, furniture, and passengers, or sailed empty."),Object(r.a)("p",null,"This information is accurately illustrated in our charts. La Rochelle\u2019s decline, which set in on the eve of the Revolution, is displayed in the opening chart in this section. La Rochelle \u2013 despite being the PASA region\u2019s main port \u2013 saw comparatively low traffic post-1763, resulting in other regional ports expanding their own trade activities, such as Tonnay-Charente, Marennes, Rochefort, and Ars-en-R\xe9. In the pre-revolutionary period (1787\u20131789), the flow of ships and goods thus reflected this reconfigured seafront trade. The value of the flow of goods leaving Tonnay-Charente or those entering Rochefort, which directly supported local production, now rivaled those from La Rochelle."),Object(r.a)("p",null,"This trend evolved out of several adverse circumstances that compounded each other: the decline in capitalization by La Rochelle merchants, a direct consequence of the wave of bankruptcies that shook the town from the middle to the end of the Seven Years\u2019 War; the loss of subsidized North American markets that would have allowed La Rochelle to rapidly rebound; and strong competition from other ports on West Indian markets. All that remained for La Rochelle was the slave trade. To maintain it, merchants purchased the goods needed from all over France and Europe and were only rarely supplied by their own hinterland. The port no longer served as the hinterland\u2019s main route towards the open sea, particularly after the town\u2019s capital weakness had driven away the trading companies specialized in Cognac: for example, Martell moved its headquarters to Tonnay-Charente and Paris. La Rochelle even faced competition in the colonial trade from other ports in the region. Rochefort gained permission to engage in the colonial trade, confirming the economic and political decline of the port of La Rochelle."),Object(r.a)("p",null,"In conclusion, in 1789, La Rochelle was still a relatively dominant port in the region, particularly as regards the Atlantic trade, but this dominance declined considerably over the course of the century. In addition, the specialization of regional ports in salt (Marennes and Ars-en-R\xe9) and in brandy (Tonnay-Charente and, to a lesser extent, the ports of the island of R\xe9) meant that trade no longer revolved around La Rochelle. Colonial trade no longer relied on local networks of ports and manufacturing centers but survived on capital and goods from elsewhere."),Object(r.a)(i.a,{id:"partie-3-comparaison-exports-coloniaux",mdxType:"Caller"}),Object(r.a)("p",null,"The Revolutionary and Napoleonic wars subsequently demonstrated the fragility and artificiality of this situation. The British blockade and the ban on transatlantic trade put an end to the port of La Rochelle\u2019s status as a major commercial port. "))}c.isMDXComponent=!0;var d=function(){return[]},u={}},225:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return o})),a.d(t,"default",(function(){return l})),a.d(t,"tableOfContents",(function(){return c})),a.d(t,"frontMatter",(function(){return d}));var n=a(20),r=(a(2),a(3)),i=(a(22),["components"]),o={text:"17 min read",minutes:16.105,time:966300,words:3221},s={};function l(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"\xe0-propos"},"\xc0 propos"),Object(r.a)("p",null,"Le pr\xe9sent site a \xe9t\xe9 r\xe9alis\xe9 dans le cadre du ",Object(r.a)("a",{href:"https://anr.portic.fr/",target:"blank",rel:"noopener noreferrer"},"programme de recherche ANR PORTIC"),". Ce programme porte sur les dynamiques de navigation et du commerce ext\xe9rieur au dix-huiti\xe8me si\xe8cle, un commerce qui s\u2019effectue largement par voie maritime. Outre la meilleure compr\xe9hension de ces dynamiques par le croisement de deux jeux de donn\xe9es, un enjeu fondamental du programme est de chercher des m\xe9thodes de qualification et d\u2019appr\xe9hension de l\u2019incertitude des donn\xe9es historiques, en exp\xe9rimentant des modes de visualisation et d\u2019\xe9criture appropri\xe9s."),Object(r.a)("p",null,"Dans ce cadre, le Working Package n\xb05 de ce programme de recherche consiste \xe0 effectuer une s\xe9rie d\u2019\xe9tudes de cas tirant parti de deux corpus existants de sources historiques num\xe9ris\xe9es : ",Object(r.a)("a",{href:"http://navigocorpus.org/",target:"blank",rel:"noopener noreferrer"},"Navigocorpus"),", une base de donn\xe9es portant sur l\u2019histoire de la navigation pilot\xe9e par Silvia Marzagalli et Christine Plumejeaud ; et ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/home",target:"blank",rel:"noopener noreferrer"},"Toflit18"),", une base de donn\xe9es portant sur le commerce ext\xe9rieur de la France, pilot\xe9e par Lo\xefc Charles et Guillaume Daudin."),Object(r.a)("p",null,"Ce site web s\u2019inscrit dans un mouvement second faisant suite aux premi\xe8res entreprises de num\xe9risation pour chacune des deux bases, en tentant de valoriser le travail d\xe9j\xe0 accompli via l\u2019\xe9tude approfondie de sous-ensembles signifiants dans les donn\xe9es. Ces \xe9tudes \xe9clairent des questions disciplinaires existantes sous un nouveau jour gr\xe2ce aux nouveaux mat\xe9riaux et m\xe9thodes offerts par les bases de donn\xe9es mobilis\xe9es par le programme. Les questions soulev\xe9es par une telle initiative sont multiples :"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"Comment mobiliser ensemble deux sources dont certaines dimensions sont incommensurables ou difficiles \xe0 mettre en \xe9quivalence ? Comment croiser les donn\xe9es num\xe9ris\xe9es des deux bases avec des connaissances plus denses et qualitatives sur les ph\xe9nom\xe8nes \xe9tudi\xe9s, apport\xe9es par des historiens sp\xe9cialistes de la r\xe9gion \xe9tudi\xe9e ? "),Object(r.a)("li",{parentName:"ul"},"Comment prendre en compte, au moment de l\u2019enqu\xeate et du raisonnement, l\u2019importante stratification de transformations, de r\xe9ductions et de d\xe9cisions interpr\xe9tatives constituant la cha\xeene qui relie les sources initiales avec les donn\xe9es qui en ont \xe9t\xe9 tir\xe9es ? "),Object(r.a)("li",{parentName:"ul"},"Comment prendre en compte l\u2019incertitude ou l\u2019incompl\xe9tude des donn\xe9es tout en proposant une analyse scientifiquement solide des ph\xe9nom\xe8nes \xe9tudi\xe9s ? "),Object(r.a)("li",{parentName:"ul"},"Comment faire dialoguer les formes classiques de l\u2019\xe9criture historique - le r\xe9cit d\xe9ploy\xe9 phrase apr\xe8s phrase, l\u2019argument d\xe9roul\xe9 paragraphe par paragraphe - avec les formes d\u2019\xe9criture diagrammatique et computationnelle qu\u2019implique la r\xe9alisation d\u2019un site web ? "),Object(r.a)("li",{parentName:"ul"},"Comment g\xe9rer la collaboration interdisciplinaire et la partition d\u2019expertises qu\u2019implique une telle \xe9criture multimodale ?")),Object(r.a)("p",null,"Toutes ces questions ont \xe9t\xe9 travaill\xe9es lors des six mois de collaboration qui ont men\xe9 \xe0 l\u2019\xe9laboration de ce site, dont voici un bref r\xe9cit."),Object(r.a)("h2",{id:"dune-s\xe9rie-de-questionnements-\xe0-une-semaine-denqu\xeate"},"D\u2019une s\xe9rie de questionnements \xe0 une semaine d\u2019enqu\xeate"),Object(r.a)("p",null,"L\u2019\xe9tude de cas dont ce site est l\u2019aboutissement a \xe9t\xe9 articul\xe9e autour d\u2019un format de collaboration intensive que nous appelons datasprint et qui consiste \xe0 faire travailler ensemble des expert.e.s de plusieurs disciplines sur un temps court et avec des questions de recherche d\xe9termin\xe9es \xe0 l\u2019avance, sur la base d\u2019un ou plusieurs jeux de donn\xe9es pr\xe9par\xe9s pour l\u2019occasion."),Object(r.a)("p",null,"En amont du datasprint, nous avons conduit pendant plusieurs mois un double travail de pr\xe9paration des donn\xe9es, et de pr\xe9paration des questions de recherche. Sur le plan des donn\xe9es, les \xe9quipes de Navigocorpus et de Toflit18 donn\xe9es ont d\xfb effectuer un important travail de nettoyage et d\u2019affinement concernant les r\xe9gions et les p\xe9riodes \xe9tudi\xe9es : le fait de projeter une \xe9tude de cas pr\xe9cise a fait \xe9merger des probl\xe8mes qui \xe9taient rest\xe9s dans l\u2019ombre faute de besoin d\u2019un r\xe9examen approfondi. Un travail tr\xe8s important a \xe9galement \xe9t\xe9 effectu\xe9 pour \xab\xa0aligner\xa0\xbb les deux bases, c\u2019est-\xe0-dire pour mettre en correspondance les lieux et les types de produits commerc\xe9s ou transport\xe9s tels qu\u2019ils sont d\xe9crits dans chacune des bases."),Object(r.a)("p",null,"Sur le plan de la pr\xe9paration des questions de recherche de d\xe9part, nous avons conduit une s\xe9rie de r\xe9unions pr\xe9liminaires reli\xe9es par des documents en ligne r\xe9dig\xe9s collaborativement, qui nous ont aid\xe9 \xe0 identifier des questions \xe0 la fois pertinentes en regard de l\u2019histoire de la r\xe9gion et de la litt\xe9rature existante, mais aussi de ce que les donn\xe9es nous permettaient - ou pas - d\u2019explorer et de visualiser. Ce travail d\u2019ajustement et de mise en correspondance entre les questions et les donn\xe9es a ainsi couru d\u2019octobre 2020 \xe0 avril 2021, et nous a permis \xe0 la fois d\u2019identifier les activit\xe9s d\u2019exploration les plus pertinentes \xe0 proposer aux participants durant l\u2019atelier, et d\u2019\xe9viter les chausses-trappes qui nous auraient conduit dans des questionnements impossibles \xe0 r\xe9soudre."),Object(r.a)("p",null,"De ce travail de pr\xe9paration est n\xe9 un document de questionnement scientifique destin\xe9 \xe0 expliciter les questions de recherche \xe0 explorer partag\xe9 \xe0 tous les participant.e.s de la semaine de datasprint. Ainsi, au d\xe9but du datasprint, l\u2019\xe9tude de cas \xe9tait structur\xe9e en deux groupes, correspondant \xe0 deux lignes d\u2019enqu\xeate compl\xe9mentaires mais aussi \xe0 la constitution de deux \xe9quipes \xe9quilibr\xe9es pour la collaboration :"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"la premi\xe8re \xe9quipe devait se consacrer \xe0 \xe9tudier le dynamisme de la r\xe9gion du Poitou par rapport \xe0 la France et au monde en g\xe9n\xe9ral (avec l\u2019hypoth\xe8se d\u2019un d\xe9clin par rapport au reste de la France au cours du dix-huiti\xe8me si\xe8cle)"),Object(r.a)("li",{parentName:"ul"},"la seconde \xe9quipe devait se consacrer \xe0 \xe9tudier les relations de compl\xe9mentarit\xe9 et de domination entre ports de la r\xe9gion, de mani\xe8re notamment \xe0 distinguer les flux et circuits commerciaux qui y sont associ\xe9s")),Object(r.a)("p",null,"Sur cette base, un \xab\xa0kit de bienvenue\xa0\xbb a \xe9t\xe9 con\xe7u pour permettre \xe0 tou.te.s les expert.e.s de rapidement saisir les multiples dimensions de l\u2019atelier, et nous avons conduit quelques enqu\xeates pr\xe9liminaires permettant de r\xe9soudre les questions les plus \xe9videntes pour tirer le meilleur parti possible de la concentration d\u2019expertises multiples sur le temps court et tr\xe8s dense du datasprint."),Object(r.a)("h3",{id:"faire-avec-les-conditions-de-recherche"},"Faire avec les conditions de recherche"),Object(r.a)("p",null,"La semaine du datasprint, qui a eu lieu d\xe9but avril 2021, s\u2019est av\xe9r\xe9e co\xefncider avec un moment de forte reprise de l\u2019\xe9pid\xe9mie de covid-19 en France en g\xe9n\xe9ral et \xe0 Paris en particulier. Cela nous a contraint \xe0 effectuer l\u2019atelier en ligne. Conduire un datasprint en ligne revenait \xe0 se priver de l\u2019incommensurable apport des \xe9changes informels et autres possibilit\xe9s d\u2019affichage, de circulation et de spatialisation offerts par le travail dans un m\xeame lieu physique. \xc0 cette contrainte s\u2019est ajout\xe9e la subite fermeture des \xe9coles maternelles et primaires ladite semaine, qui a occasionn\xe9 une s\xe9rieuse charge extra-professionnelle pour une part substantielle des participant.e.s."),Object(r.a)("p",null,"Le datasprint a n\xe9anmoins eu lieu, et nous avons d\xe9cid\xe9 de consid\xe9rer les conditions particuli\xe8res dans lesquelles il s\u2019est conduit non seulement comme des contraintes demandant de recalibrer drastiquement nos attentes, mais aussi comme des occasions d\u2019invention et d\u2019exp\xe9rimentation appelant \xe0 adapter nos mani\xe8res de proc\xe9der par rapport aux modalit\xe9s initialement planifi\xe9es."),Object(r.a)("h3",{id:"improvisations-et-adaptations"},"Improvisations et adaptations"),Object(r.a)("p",null,"Durant le datasprint, la diversit\xe9 des comp\xe9tences des participant.e.s a impliqu\xe9 de remettre \xe0 plat la r\xe9partition des t\xe2ches. Ainsi, chacun a pu \xeatre amen\xe9 \xe0 sugg\xe9rer des pistes de recherche, manipuler les donn\xe9es, et se pencher sur l\u2019analyse et la mise en forme des r\xe9sultats. Cette semaine a notamment \xe9t\xe9 l\u2019occasion d\u2019exp\xe9rimenter avec un grand nombre de technologies utilis\xe9es durant les activit\xe9s d\u2019enqu\xeate, notamment ",Object(r.a)("a",{href:"https://jupyter.org/",target:"blank",rel:"noopener noreferrer"},"jupyter notebook"),", ",Object(r.a)("a",{href:"https://kepler.gl/",target:"blank",rel:"noopener noreferrer"},"kepler.gl"),", ",Object(r.a)("a",{href:"https://vega.github.io/vega/",target:"blank",rel:"noopener noreferrer"},"vega"),", ou encore ",Object(r.a)("a",{href:"https://matplotlib.org/",target:"blank",rel:"noopener noreferrer"},"matplotlib"),". Nous avons n\xe9anmoins \xe9galement parfois touch\xe9 aux limites de ce principe en condition \xab\xa0zoomifi\xe9e\xa0\xbb, certaines discussions sp\xe9cialis\xe9es (sur le plan technique ou sur le plan historique par exemple) n\xe9cessitant parfois de r\xe9former les corps disciplinaires et de pr\xe9voir des moments d\u2019apart\xe9 transversaux."),Object(r.a)("p",null,"Le format datasprint implique par ailleurs une dimension exp\xe9rimentale, parfois chaotique, et les difficult\xe9s de communications impliqu\xe9es par la conduite en ligne ont amplifi\xe9 cette dimension. Nous avons donc construit nos journ\xe9es de travail sur un canevas all\xe9g\xe9 en terme d\u2019amplitude horaire, et sous une forme tentant de varier les rythmes et les \xe9chelles d\u2019interaction : un point de pl\xe9ni\xe8re en matin\xe9e, suivi de travail en deux groupes, eux-m\xeames rapidement re-divis\xe9s en bin\xf4mes ou en moments de travail individuel. "),Object(r.a)("p",null,"Sur le plan technique, nous avons opt\xe9 pour une salle zoom permanente ouverte durant toute la semaine et divis\xe9e en \xab\xa0breakout rooms\xa0\xbb (salles de travail) permettant de travailler en plus petits ensembles ; nous avons \xe9galement soutenu la semaine avec un dossier google drive tr\xe8s organis\xe9 dans lequel l\u2019ensemble des activit\xe9s ont \xe9t\xe9 archiv\xe9es et consign\xe9es."),Object(r.a)("p",null,"Pour faciliter le processus d\u2019intercompr\xe9hension, des proc\xe9dures m\xe9thodologiques ont \xe9galement \xe9t\xe9 propos\xe9es aux participants. Ainsi, des personnes jouant le r\xf4le de facilitateurs ont fait le lien entre les diff\xe9rents groupes en circulant continuellement entre les diff\xe9rentes salles zoom de travail. Nous avons par ailleurs insist\xe9 sur l\u2019importance de la documentation en structurant les activit\xe9s de chaque jour autour de l\u2019\xe9criture de \xab\xa0rapports\xa0\xbb remplis au fur et \xe0 mesure de la journ\xe9e, dont une personne \xab\xa0scribe\xa0\xbb \xe9tait charg\xe9e de prendre soin afin de garder un maximum de traces et de permettre les \xe9changes d\u2019information asynchrones. Ces rapports ont finalement \xe9t\xe9 progressivement abandonn\xe9s, car trop lourds \xe9tant donn\xe9 le poids des autres activit\xe9s. Nous avons \xe9galement progressivement r\xe9duit les temps de visioconf\xe9rence pour minimiser la fatigue li\xe9e aux \xe9changes en ligne."),Object(r.a)("p",null,"Les s\xe9ances de travail d\u2019un datasprint provoquent parfois un \xab\xa0effet bulle\xa0\xbb dans lequel chaque \xe9quipe peut rapidement se d\xe9connecter du travail effectu\xe9 par les autres, entra\xeenant des blocages, des t\xe2ches effectu\xe9es en doublon ou des \xab\xa0angles morts\xa0\xbb. Ce probl\xe8me est amplifi\xe9 par la conduite en ligne. Pour faire face \xe0 ce d\xe9fi, nous avons rythm\xe9 les journ\xe9es de points d\u2019\xe9tapes effectu\xe9es \xe0 plusieurs \xe9chelles - par petits groupes, par \xe9quipes, ou en pl\xe9ni\xe8re - afin de partager les avanc\xe9es. Par ailleurs, des visites informelles et autres \xab\xa0zoom surfing\xa0\xbb ont permis de favoriser certaines circulations d\u2019id\xe9es et de m\xe9thodes."),Object(r.a)("p",null,"L\u2019un des int\xe9r\xeats du format datasprint est enfin de favoriser une unit\xe9 de temps pour le travail interdisciplinaire. L\u2019intensit\xe9 qu\u2019implique cette unit\xe9 de temps appelle cependant une valorisation \xe0 la hauteur des efforts fournis sur le temps court. Le temps du datasprint est, en temps normal, \xe0 la fois un temps d\u2019exploration et d\u2019enqu\xeate, et un temps de production de r\xe9sultats. Cependant, ce principe a \xe9t\xe9 confront\xe9 \xe0 deux sp\xe9cificit\xe9s dans notre cas : les conditions de travail en ligne ont demand\xe9 de revoir les attentes plus modestement, mais aussi le principe et les objectifs m\xeames des datasprint de PORTIC qui, parce qu\u2019ils visent la publication de sites web finalis\xe9s et contribuant de mani\xe8re relativement pr\xe9cise \xe0 des \xe9tudes de cas tr\xe8s serr\xe9es (et non de rapports d\u2019exploration des donn\xe9es comme c\u2019est souvent le cas pour les autres datasprints). Face \xe0 ces sp\xe9cificit\xe9s, il nous a fallu articuler l\u2019atelier avec un travail post\xe9rieur cadr\xe9 par d\u2019autres temporalit\xe9s pour arriver \xe0 un r\xe9sultat publiable."),Object(r.a)("h2",{id:"la-fabrication-dun-site-web-comme-pivot-pour-l\xe9criture-multimodale--entretenir-une-infrastructure-technique-et-m\xe9thodologique"},"La fabrication d\u2019un site web comme pivot pour l\u2019\xe9criture multimodale : entretenir une infrastructure technique et m\xe9thodologique"),Object(r.a)("p",null,"\xc0 partir du travail effectu\xe9 lors du datasprint, nous avons engag\xe9 une seconde phase d\u2019approfondissement. Sur le fond, les axes de recherche initialement envisag\xe9s ont \xe9t\xe9 progressivement remani\xe9s. Cela a \xe9t\xe9 fait d\xe8s la fin de la semaine de datasprint, au moment de la r\xe9daction d\u2019un document de synth\xe8se mettant en regard les visualisations produites durant la semaine. Ce travail a \xe9t\xe9 ensuite continu\xe9 par C\xe9cile Asselin qui a effectu\xe9 un travail de synth\xe8se et de nettoyage sur les productions de la semaine."),Object(r.a)("h3",{id:"une-\xe9criture-multimodale"},"Une \xe9criture multimodale"),Object(r.a)("p",null,"Afin de construire progressivement, \xe0 partir des explorations du datasprint, un document propre \xe0 \xeatre publi\xe9 et \xe0 transmettre un r\xe9cit et des arguments \xe0 partir des donn\xe9es des deux bases, nous avons tent\xe9 d\u2019utiliser la perspective de la fabrication d\u2019un site pour articuler trois types \xab\xa0d\u2019\xe9criture\xa0\xbb : la confection de nouveaux fichiers de donn\xe9es correspondant aux enqu\xeates soulev\xe9es par les activit\xe9s de la semaine (\xe9criture computationnelle) ; la confection de visualisations d\u2019informations (\xe9criture diagrammatique) ; enfin, bien s\xfbr, la mise en r\xe9cit et en argument historique de l\u2019\xe9tude de cas (\xe9criture en prose)."),Object(r.a)("p",null,"Pour ce faire, nous avons d\xe9cid\xe9 de structurer le site en une s\xe9rie de trois parties \xe0 la structure identique : une \xab\xa0visualisation principale\xa0\xbb constituant l\u2019argument principal de la partie, accompagn\xe9 d\u2019un texte se fondant d\u2019abord sur elle puis suivant ses propres d\xe9veloppements, accompagn\xe9 de \xab\xa0visualisations secondaires\xa0\xbb. Cette organisation visuelle et rh\xe9torique a induit un mode de travail it\xe9ratif sur le registre du \xab\xa0ping pong\xa0\xbb qui s\u2019est d\xe9ploy\xe9 en trois temps : "),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"dans la foul\xe9e du datasprint, les historien.ne.s ont d\u2019abord travaill\xe9 \xe0 pr\xe9ciser les arguments de chacune des trois parties (avril-mai 2021)"),Object(r.a)("li",{parentName:"ul"},"nous avons ensuite organis\xe9 deux jours intensifs de conception avec une \xe9quipe r\xe9duite d\u2019ing\xe9nieur.e.s et de designers (C\xe9cile Asselin, Robin de Mourat, Christine Plumejeaud, Paul Girard, Maxime Zoffoli) durant lesquels nous avons con\xe7u des propositions de visualisations principales (fin mai 2021)"),Object(r.a)("li",{parentName:"ul"},"les historien.es ont, \xe0 la suite de ces deux jours, repris la main sur l\u2019\xe9criture, enrichie et structur\xe9e par les propositions constitu\xe9es par les visualisations, en pr\xe9cisant leurs textes comme leurs besoins pour des visualisations compl\xe9mentaires, qui ont \xe9t\xe9 progressivement produites en fonction du texte (juin-septembre 2021)")),Object(r.a)("p",null,"Dans ce cadre, nous avons progressivement n\xe9goci\xe9 une infrastructure de travail orient\xe9e vers le d\xe9veloppement progressif du pr\xe9sent site web. Ce dernier a tout autant servi d\u2019objectif que de moyen de rencontre entre les diff\xe9rentes activit\xe9s qui ont suivi la semaine d\u2019atelier datasprint."),Object(r.a)("p",null,"La fabrication du site pr\xe9sent\xe9 au public a \xe9t\xe9 articul\xe9e autour d\u2019un protocole automatis\xe9 qui a permis de mettre le site \xe0 jour quotidiennement pendant sa phase d\u2019\xe9criture et de d\xe9veloppement, et ainsi de faire progresser conjointement sa structure, son aspect graphique et les divers contenus qui le peuplent (voir son ",Object(r.a)("a",{href:"https://github.com/medialab/portic-storymaps-2021",target:"blank",rel:"noopener noreferrer"},"r\xe9pertoire github")," pour plus d\u2019informations). Plus pr\xe9cis\xe9ment, ce protocole automatis\xe9 consistait \xe0 r\xe9cup\xe9rer les contenus \xe9crits dans un google documents \xe9crit par les historien.ne.s, les donn\xe9es des bases Navigocorpus et Toflit18 sur leurs espaces num\xe9riques respectifs, et enfin \xe0 produire un ensemble de donn\xe9es optimis\xe9es pour le web avant de refabriquer le site."),Object(r.a)("p",null,"Cette m\xe9thode de travail sur mesure, alternative \xe0 l\u2019utilisation d\u2019un CMS (type wordpress) ou d\u2019une int\xe9gration des contenus enti\xe8rement \xab\xa0artisanale\xa0\xbb, nous a permis de multiplier les it\xe9rations sur les donn\xe9es, les visualisations et les textes, afin de d\xe9velopper it\xe9rativement un document ajust\xe9 et coh\xe9rent pour la lecture. Elle nous a \xe9galement permis d\u2019\xe9chapper \xe0 une approche qui voudrait formater la production du site de mani\xe8re trop s\xe9quentielle, c\u2019est-\xe0-dire faisant suivre un premier temps de \xab\xa0conception\xa0\xbb puis un deuxi\xe8me temps \xab\xa0d\u2019ex\xe9cution\xa0\xbb, pour plut\xf4t faire place \xe0 la d\xe9couverte et au dialogue avec les diff\xe9rents mat\xe9riaux en train de se d\xe9velopper. "),Object(r.a)("p",null,"Ainsi, la m\xe9thode de travail et de montage du site adopt\xe9e ici, outre la dimension d\u2019optimisation qu\u2019implique l\u2019automatisation de certaines t\xe2ches, a \xe9t\xe9 le moyen de favoriser un dialogue plus organique entre les diff\xe9rentes \xe9critures en jeu dans ce document : en r\xe9alisant simultan\xe9ment le design du site, celui des visualisations, et les textes qui les accompagnent, nous avons tent\xe9 de faire profiter chacune de ces activit\xe9s l\u2019une de l\u2019autre, comme des sources d\u2019invention ou de solidification mutuelle, plut\xf4t que de les consid\xe9rer comme des t\xe2ches sp\xe9cialis\xe9es et/ou articul\xe9es selon un r\xe9gime de subordination (de l\u2019histoire \xe0 la technique, ou du visuel au textuel, ou de l\u2019argument \xe0 son illustration, etc.)."),Object(r.a)("h3",{id:"un-site-destin\xe9-\xe0-tisser-des-liens-avec-dautres-activit\xe9s-et-dautres-publics"},"Un site destin\xe9 \xe0 tisser des liens avec d\u2019autres activit\xe9s et d\u2019autres publics"),Object(r.a)("p",null,"Ce site est pens\xe9 \xe0 la fois comme un objet autonome d\xe9roulant le r\xe9cit scientifique de l\u2019histoire de la r\xe9gion de La Rochelle au dix-huiti\xe8me si\xe8cle, et comme la premi\xe8re pi\xe8ce d\u2019assemblages scientifiques et didactiques encore \xe0 venir. Nous l\u2019avons con\xe7u avec le projet de l\u2019adresser \xe0 un public constitu\xe9 d\u2019\xe9tudiant.e.s en histoire, de professeur.e.s d\u2019histoire du secondaire, ou d\u2019amateur.ice.s avanc\xe9s passionn\xe9s par le Poitou et les Charentes. Cependant, le site est \xe9galement pens\xe9 pour pouvoir s\u2019articuler avec deux publics compl\xe9mentaires :"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"les personnes sp\xe9cialis\xe9es dans la m\xe9diation et/ou la vulgarisation pourront utiliser certaines des visualisations pour des initiatives destin\xe9es \xe0 un plus grand public"),Object(r.a)("li",{parentName:"ul"},"les historien.ne.s sp\xe9cialis\xe9s pourront citer ces visualisations dans des publications conventionnelles en revues ou monographies et ainsi s\u2019appuyer sur ces derni\xe8res pour continuer nos enqu\xeates")),Object(r.a)("p",null,"Pour ce faire, nous avons notamment rendu chacune des visualisations \xab\xa0d\xe9tachable\xa0\xbb du r\xe9cit propos\xe9 via la page atlas - et plus techniquement en dotant chacune des visualisations d\u2018une adresse URL propre."),Object(r.a)("p",null,"Par ailleurs, le ",Object(r.a)("a",{href:"https://github.com/medialab/portic-storymaps-2021/",target:"blank",rel:"noopener noreferrer"},"code source du site"),", partag\xe9 sous licence libre, a \xe9t\xe9 construit et document\xe9 de mani\xe8re \xe0 pouvoir \xeatre d\xe9riv\xe9 - en tout ou partie - pour d\u2019autres projets \xe0 venir : il pourra apporter des \xe9l\xe9ments utiles pour les prochaines \xe9tudes de cas du programme PORTIC mais aussi pour d\u2019autres projets similaires. Il est enfin \xe0 noter que toutes les donn\xe9es utilis\xe9es - et les scripts qui les g\xe9n\xe8rent \xe0 partir des donn\xe9es compl\xe8tes de Toflit18 et Navigocorpus, accessibles toutes les deux librement - sont \xe9galement inclus dans le code source du site, rendant nos visualisations et r\xe9sultats enti\xe8rement reproductibles."),Object(r.a)("h2",{id:"une-\xe9criture-collective"},"Une \xe9criture collective"),Object(r.a)("p",null,"Ce site est le r\xe9sultat d\u2019un processus d\u2019enqu\xeate et d\u2019\xe9criture collective qui a mobilis\xe9 des personnes issues de plusieurs disciplines : histoire, \xe9conomie, informatique, g\xe9omatique, design. "),Object(r.a)("p",null,"Les textes de cette publication ont \xe9t\xe9 \xe9crits par ",Object(r.a)("a",{href:"https://cmmc-nice.fr/membres-du-cmmc/silvia-marzagalli/",target:"blank",rel:"noopener noreferrer"},"Silvia Marzagalli")," (professeur d\u2019histoire moderne, Universit\xe9 C\xf4te d\u2019Azur - CMMC, coordinatrice et co-responsable scientifique du programme PORTIC), ",Object(r.a)("a",{href:"https://www.ined.fr/fr/recherche/chercheurs/Charles%2BLo%25C3%25AFc",target:"blank",rel:"noopener noreferrer"},"Lo\xefc Charles")," (professeur d\u2019\xe9conomie, INED, Universit\xe9 Paris 8 Vincennes - LED), ",Object(r.a)("a",{href:"https://leda.dauphine.fr/fr/membre/detail-cv/profile/guillaume-daudin.html",target:"blank",rel:"noopener noreferrer"},"Guillaume Daudin")," (professeur d\u2019\xe9conomie, Universit\xe9 Paris-Dauphine - LEDa-DIAL), et ",Object(r.a)("a",{href:"https://criham.labo.univ-poitiers.fr/membres/thierry-sauzeau/",target:"blank",rel:"noopener noreferrer"},"Thierry Sauzeau")," (professeur d\u2019histoire moderne, Universit\xe9 de Poitiers - Criham)."),Object(r.a)("p",null,"L\u2019ensemble du processus de m\xe9diation et d\u2019articulation de la collaboration a \xe9t\xe9 men\xe9 par l\u2019ing\xe9nieure stagiaire ",Object(r.a)("a",{href:"https://fr.linkedin.com/in/c%25C3%25A9cile-asselin-3659541b7",target:"blank",rel:"noopener noreferrer"},"C\xe9cile Asselin"),", qui s\u2019est consacr\xe9e \xe0 plein temps pendant six mois \xe0 la conduite m\xe9thodologique et technique de l\u2019ensemble de l\u2019\xe9tude de cas, accompagn\xe9e par ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/robin-de-mourat/",target:"blank",rel:"noopener noreferrer"},"Robin de Mourat")," (designer de recherche, m\xe9dialab Sciences Po - co-responsable scientifique du programme PORTIC en charge des \xe9tudes de cas)."),Object(r.a)("p",null,"Les visualisations ont \xe9t\xe9 con\xe7ues et d\xe9velopp\xe9es par ",Object(r.a)("a",{href:"https://fr.linkedin.com/in/c%25C3%25A9cile-asselin-3659541b7",target:"blank",rel:"noopener noreferrer"},"C\xe9cile Asselin"),", ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/robin-de-mourat/",target:"blank",rel:"noopener noreferrer"},"Robin de Mourat"),", ",Object(r.a)("a",{href:"https://lienss.univ-larochelle.fr/Plumejeaud-Christine-954",target:"blank",rel:"noopener noreferrer"},"Christine Plumejeaud")," (g\xe9omaticienne, laboratoire LIENSs - co-responsable scientifique du programme PORTIC), ",Object(r.a)("a",{href:"https://fr.linkedin.com/in/paul-girard-57822118",target:"blank",rel:"noopener noreferrer"},"Paul Girard")," (ing\xe9nieur expert en humanit\xe9s num\xe9riques - entreprise ",Object(r.a)("a",{href:"https://www.ouestware.com/",target:"blank",rel:"noopener noreferrer"},"Ouestware"),"), ",Object(r.a)("a",{href:"https://www.maximezoffoli.com/",target:"blank",rel:"noopener noreferrer"},"Maxime Zoffoli")," (designer expert en visualisation d\u2019information), ",Object(r.a)("a",{href:"https://fr.linkedin.com/in/geraldine-geoffroy-4653ab19b",target:"blank",rel:"noopener noreferrer"},"G\xe9raldine Geoffroy")," (data librarian, Universit\xe9 C\xf4te d\u2019Azur)."),Object(r.a)("p",null,"Les fonds de carte d\u2019\xe9poque ont \xe9t\xe9 constitu\xe9s par ",Object(r.a)("a",{href:"https://lienss.univ-larochelle.fr/Plumejeaud-Christine-954",target:"blank",rel:"noopener noreferrer"},"Christine Plumejeaud"),"."),Object(r.a)("p",null,"La pr\xe9paration et la v\xe9rification des donn\xe9es ont \xe9t\xe9 effectu\xe9e par les \xe9quipes de Navigocorpus (",Object(r.a)("a",{href:"https://lienss.univ-larochelle.fr/Plumejeaud-Christine-954",target:"blank",rel:"noopener noreferrer"},"Christine Plumejeaud"),", ",Object(r.a)("a",{href:"https://cmmc-nice.fr/membres-du-cmmc/silvia-marzagalli/",target:"blank",rel:"noopener noreferrer"},"Silvia Marzagalli"),"), de Toflit18 (",Object(r.a)("a",{href:"https://leda.dauphine.fr/fr/membre/detail-cv/profile/guillaume-daudin.html",target:"blank",rel:"noopener noreferrer"},"Guillaume Daudin"),", ",Object(r.a)("a",{href:"https://www.ined.fr/fr/recherche/chercheurs/Charles%2BLo%25C3%25AFc",target:"blank",rel:"noopener noreferrer"},"Lo\xefc Charles"),") et du m\xe9dialab (",Object(r.a)("a",{href:"https://fr.linkedin.com/in/c%25C3%25A9cile-asselin-3659541b7",target:"blank",rel:"noopener noreferrer"},"C\xe9cile Asselin")," et ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/robin-de-mourat/",target:"blank",rel:"noopener noreferrer"},"Robin de Mourat"),")."),Object(r.a)("p",null,"Le site a \xe9t\xe9 d\xe9velopp\xe9 par ",Object(r.a)("a",{href:"https://fr.linkedin.com/in/c%25C3%25A9cile-asselin-3659541b7",target:"blank",rel:"noopener noreferrer"},"C\xe9cile Asselin")," et ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/robin-de-mourat/",target:"blank",rel:"noopener noreferrer"},"Robin de Mourat"),"."),Object(r.a)("p",null,"\xc0 ces personnes s\u2019ajoutent celles ayant particip\xe9 au datasprint qui a conduit \xe0 cette publication : les ing\xe9nieurs en m\xe9thodes num\xe9riques et designers du laboratoire m\xe9dialab de Sciences Po ",Object(r.a)("a",{href:"https://bmaz.github.io/",target:"blank",rel:"noopener noreferrer"},"B\xe9atrice Mazoyer"),", ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/benjamin-ooghe-tabanou/",target:"blank",rel:"noopener noreferrer"},"Benjamin Ooghe-Tabanou"),", ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/guillaume-plique/",target:"blank",rel:"noopener noreferrer"},"Guillaume Plique"),", ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/heloise-thero/",target:"blank",rel:"noopener noreferrer"},"H\xe9lo\xefse Th\xe9ro"),", et ",Object(r.a)("a",{href:"https://paulinegourlet.com/",target:"blank",rel:"noopener noreferrer"},"Pauline Gourlet")," ; les chercheurs ",Object(r.a)("a",{href:"https://www.univ-brest.fr/crbc/menu/Membres%2Bdu%2Blaboratoire/Enseignants-chercheurs/Pierrick_Pourchasse",target:"blank",rel:"noopener noreferrer"},"Pierrick Pourchasse")," (professeur \xe9m\xe9rite d\u2019histoire moderne, Universit\xe9 de Bretagne Occidentale), et ",Object(r.a)("a",{href:"https://l3i.univ-larochelle.fr/Bouju-Alain-MCF-HDR",target:"blank",rel:"noopener noreferrer"},"Alain Bouju")," (ma\xeetre de conf\xe9rence HDR en informatique, Universit\xe9 de La Rochelle)."))}l.isMDXComponent=!0;var c=function(){return[{id:"dune-s\xe9rie-de-questionnements-\xe0-une-semaine-denqu\xeate",level:2,title:"D\u2019une s\xe9rie de questionnements \xe0 une semaine d\u2019enqu\xeate",children:[{id:"faire-avec-les-conditions-de-recherche",level:3,title:"Faire avec les conditions de recherche",children:[]},{id:"improvisations-et-adaptations",level:3,title:"Improvisations et adaptations",children:[]}]},{id:"la-fabrication-dun-site-web-comme-pivot-pour-l\xe9criture-multimodale--entretenir-une-infrastructure-technique-et-m\xe9thodologique",level:2,title:"La fabrication d\u2019un site web comme pivot pour l\u2019\xe9criture multimodale : entretenir une infrastructure technique et m\xe9thodologique",children:[{id:"une-\xe9criture-multimodale",level:3,title:"Une \xe9criture multimodale",children:[]},{id:"un-site-destin\xe9-\xe0-tisser-des-liens-avec-dautres-activit\xe9s-et-dautres-publics",level:3,title:"Un site destin\xe9 \xe0 tisser des liens avec d\u2019autres activit\xe9s et d\u2019autres publics",children:[]}]},{id:"une-\xe9criture-collective",level:2,title:"Une \xe9criture collective",children:[]}]},d={}},226:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return o})),a.d(t,"default",(function(){return l})),a.d(t,"tableOfContents",(function(){return c})),a.d(t,"frontMatter",(function(){return d}));var n=a(20),r=(a(2),a(3)),i=(a(22),["components"]),o={text:"15 min read",minutes:14.615,time:876900,words:2923},s={};function l(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"about"},"About"),Object(r.a)("p",null,"This website was designed as part of the ",Object(r.a)("a",{href:"https://anr.portic.fr/",target:"blank",rel:"noopener noreferrer"},"ANR PORTIC research program"),". This program studies the navigation and foreign trade flows in the eighteenth century when trade was largely carried out at sea. In addition to gaining a better understanding of these dynamics by cross-referencing two sets of data, a fundamental objective of the program was to find methods to qualify and deal with the uncertainty of the historical data by experimenting with suitable methods of displaying and writing the information."),Object(r.a)("p",null,"In this framework, Working Package 5 of the research program involved a series of case studies based on two existing corpora of digitized historical sources: ",Object(r.a)("a",{href:"http://navigocorpus.org/",target:"blank",rel:"noopener noreferrer"},"Navigocorpus"),", a database covering the history of navigation, supervised by Silvia Marzagalli and Christine Plumejeaud; and ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/home",target:"blank",rel:"noopener noreferrer"},"Toflit18"),", a database covering France\u2019s foreign trade, supervised by Lo\xefc Charles and Guillaume Daudin."),Object(r.a)("p",null,"This website was designed as part of the second phase of the project, following a first phase of digitization to constitute the two databases, intending to take advantage of the work already accomplished and carrying out an in-depth study of significant data subsets. These studies shed new light on themes already studied within the discipline by providing new material and methods by means of the databases developed as part of the program. This initiative raised a number of questions:"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"How can two sources be used together when some of their dimensions cannot be measured or are difficult to compare? How can the digitized data from the two databases be cross-referenced to acquire a deeper and more qualitative knowledge about the phenomena provided by historians specialized in the region studied? "),Object(r.a)("li",{parentName:"ul"},"How can the survey and analysis take into account the considerable stratification of transformations, reductions and interpretative decisions that form the chain that connects the initial sources with the data drawn from them? "),Object(r.a)("li",{parentName:"ul"},"How can the uncertainty or incompleteness of the data be taken into account, while proposing a scientifically sound analysis of the phenomena studied? "),Object(r.a)("li",{parentName:"ul"},"How can the standard forms of historical writing \u2013the narrative formed by consecutive sentences, the argument developed paragraph by paragraph\u2013 effectively serve the forms of diagrammatic and computational writing involved when creating a website? "),Object(r.a)("li",{parentName:"ul"},"How is it possible to manage interdisciplinary collaboration and the division of expertise involved in this kind of multimodal writing?")),Object(r.a)("p",null,"These questions were worked out across a six-month period of collaboration that led to the development of the website and will be briefly recounted below."),Object(r.a)("h2",{id:"from-a-series-of-questions-to-a-week-of-investigation"},"From a series of questions to a week of investigation"),Object(r.a)("p",null,"The case study which led to this website was the outcome of intensive collaboration which we call a data sprint and which consists in gathering experts from several disciplines to work together over a short period of time on pre-determined research questions, based on one or more datasets prepared for the occasion."),Object(r.a)("p",null,"Ahead of the data sprint, several months were devoted to preparing the data and the research questions. As regards data, the major task for the Navigocorpus and Toflit18 data teams was to clean and refine the data for the regions and periods studied, as the simple fact of planning a specific case study revealed new problems that had remained hidden until an in-depth study was implemented. Another major challenge was to align the two databases, i.e. to match the places and types of products traded or transported as described in each of the databases."),Object(r.a)("p",null,"To prepare the initial research questions, we held a series of preliminary meetings based on collaboratively produced online documents that helped us identify pertinent questions with respect to the history of the region and the existing literature, but also with respect to what could or could not be explored and displayed with the data available. This work of adjustment and matching up questions and data ran from October 2020 to April 2021, allowing us to identify the most relevant exploration activities for submission to the workshop participants, and to avoid the pitfalls that would have led us to unsolvable questions"),Object(r.a)("p",null,"Following the preparation work we drafted a scientific questioning document that described the research questions to be examined and was shared with all the participants during a week-long data sprint. At the beginning of the data sprint, the case study was divided into two complementary lines of inquiry and two teams were formed with a balanced composition to allow interdisciplinary collaboration:"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"The first team was appointed to study the dynamism of the Poitou region compared to France and the world in general (with the hypothesis of a decline compared to the rest of France during the eighteenth century)."),Object(r.a)("li",{parentName:"ul"},"The second team was in charge of studying the relationships of complementarity and domination between ports in the region, with the aim, notably, of distinguishing the trade flows and commercial networks associated with them.")),Object(r.a)("p",null,"Background material was then prepared to help the experts quickly grasp the multiple dimensions of the workshop, and preliminary surveys were conducted to solve the most obvious questions and make the most of the wide panel of expertise available during the short and very dense data sprint."),Object(r.a)("h3",{id:"unusual-research-conditions"},"Unusual research conditions"),Object(r.a)("p",null,"The data sprint was scheduled for early April 2021, and this coincided with a strong upsurge in the COVID-19 epidemic in France in general and in Paris in particular, which forced us to hold the workshop online. An online data sprint meant that we were deprived of the invaluable contribution of informal discussions and other possibilities for displaying and circulating information and occupying different spaces when working in the same physical environment. The situation was compounded by the French government\u2019s sudden decision to close kindergartens and primary schools that week, adding a heavy extra-professional burden on a substantial number of participants."),Object(r.a)("p",null,"The data sprint nevertheless took place, and we decided to consider the unusual circumstances not only as constraints requiring a drastic readjustment of our expectations, but also as opportunities for invention and experimentation in finding new ways of proceeding that departed from the methods initially planned."),Object(r.a)("h3",{id:"improvisation-and-adaptation"},"Improvisation and adaptation"),Object(r.a)("p",null,"During the data sprint, the diversity of the participants\u2019 competencies led us to reexamine the division of tasks. As a result, each person was given the opportunity to suggest research topics, manipulate the data, and examine the treatment and formatting of the results. The workshop also provided an opportunity to experiment with a large number of technologies used during the investigation, including ",Object(r.a)("a",{href:"https://jupyter.org/",target:"blank",rel:"noopener noreferrer"},"the Jupyter notebook"),", ",Object(r.a)("a",{href:"https://kepler.gl/",target:"blank",rel:"noopener noreferrer"},"kepler.gl"),", ",Object(r.a)("a",{href:"https://vega.github.io/vega/",target:"blank",rel:"noopener noreferrer"},"vega"),", and ",Object(r.a)("a",{href:"https://matplotlib.org/",target:"blank",rel:"noopener noreferrer"},"matplotlib"),". However, we were occasionally hindered by \xab\xa0Zoom\xa0\xbb conditions, and specialized discussions (from a technical or historical perspective, for example) sometimes required groups to form once again along disciplinary lines with moments of transversal collaboration."),Object(r.a)("p",null,"The data sprint format also implied an experimental, sometimes chaotic dimension, amplified by online communication problems. Our working days were therefore organized around a lighter schedule and in a format that sought to vary the rhythms and scales of interaction: a plenary update in the morning was followed by work in two groups that quickly divided into pairs or even individual work. "),Object(r.a)("p",null,"From a technical point of view, we opted for a permanent Zoom room open throughout the week divided into breakout rooms for work in smaller groups. We also filled a well-organized google drive folder throughout the week, in which all the activities were archived and recorded."),Object(r.a)("p",null,"Methodological procedures were also implemented to facilitate the process of mutual understanding. Some of the participants, for example, acted as facilitators and were in charge of maintaining communication between the different groups by constantly circulating between the different work Zoom rooms. We also stressed the importance of documentation by including daily writing of \xab\xa0reports\xa0\xbb completed as the day progressed, and by appointing \xab\xa0scribes\xa0\xbb who were in charge of these reports and responsible for keeping as many traces as possible to allow asynchronous exchanges of information. These reports were eventually phased out, as they were too burdensome given the weight of the other activities. We also gradually cut down video conferencing time to reduce the fatigue associated with online communication."),Object(r.a)("p",null,"Data sprint work sessions can sometimes cause a \xab\xa0bubble effect\xa0\xbb in which each team can quickly become disconnected from the work accomplished by the others, leading to dead ends, duplicated tasks, and \xab\xa0blind spots\xa0\xbb. This problem is amplified when working online. To meet this challenge, we scheduled progress update meetings at regular times during the day to share information on different scales: in small groups, in teams, and all together. In addition, informal visits and \xab\xa0Zoom surfing\xa0\xbb made it possible to circulate ideas and methods to a certain extent."),Object(r.a)("p",null,"One of the advantages of the data sprint format is that it assigns a specific time for interdisciplinary work. However, because work during this short time is intense, the expectation is that results equal to the efforts invested will be produced. In normal times, the data sprint is a time for exploration and investigation but also a time for generating results. However, in our case this principle was challenged in two ways: by online working conditions, which made us lower our expectations, but also by the very principle and objectives of the PORTIC data sprint which aimed at publication of finalized websites contributing in a relatively precise way to very specific case studies (and not data mining reports as is often the case with other data sprints). Faced with these challenges, we had to prolong our work after the workshop and change the time frame to achieve a publishable result."),Object(r.a)("h2",{id:"the-website-a-pivotal-tool-for-multimodal-writing-and-defining-a-technical-and-methodological-infrastructure"},"The website, a pivotal tool for multimodal writing and defining a technical and methodological infrastructure"),Object(r.a)("p",null,"Based on the work completed during the data sprint, we began a second deeper phase of the project. In terms of content, the research topics initially selected were gradually reformulated. This work started at the end of the data sprint week, following the completion of a summary document based on the visuals produced during the week. C\xe9cile Asselin then carried on summarizing and tidyng up the productions of the week."),Object(r.a)("h3",{id:"multimodal-writing"},"Multimodal writing"),Object(r.a)("p",null,"In order to progressively draft a publishable document from the data sprint explorations, creating a story and arguments based on the two databases, we combined the three types of \xab\xa0writing\xa0\xbb needed to develop the future website: computational writing for the new data files that grew out of data sprint investigations, diagrammatic writing for the visuals, and finally, of course, prose for the narrative and historical argument based on the case study."),Object(r.a)("p",null,"We decided to divide the website into three similarly-structured sections: a \xab\xa0main visual\xa0\xbb presenting the section\u2019s main argument together with text based on the visual and expanding outwards, combined with \xab\xa0secondary visuals\xa0\xbb. This visual and rhetorical organization induced an iterative work method similar to \xab\xa0ping pong\xa0\xbb which was conducted in three stages: "),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"Immediately after the data sprint, historians first worked on clarifying the arguments of each of the three sections (April-May 2021)."),Object(r.a)("li",{parentName:"ul"},"We then organized two intensive days to design the main visual proposals (at the end of May 2021) with a small team of engineers and designers (C\xe9cile Asselin, Robin de Mourat, Christine Plumejeaud, Paul Girard, and Maxime Zoffoli)."),Object(r.a)("li",{parentName:"ul"},"Finally, the historians returned to the text which had been enriched and framed by the information proposed in the visuals. As they clarified the text, the need for additional visuals arose and these were gradually produced to fit the text (June to September 2021).")),Object(r.a)("p",null,"This framework allowed us to progressively develop a work infrastructure adapted to the continuous development of the website. The website thus not only served as the goal but also as the point of contact between the different activities that arose after the data sprint workshop."),Object(r.a)("p",null,"The website presented to the public was created using an automated protocol enabling daily updates as written content and further website developements emerged, which meant that progress was made jointly on its structure, graphics and the various contents (see its ",Object(r.a)("a",{href:"https://github.com/medialab/portic-storymaps-2021/",target:"blank",rel:"noopener noreferrer"},"github")," directory for more information). The automated protocol consisted more specifically in retrieving content written by the historians and stored in a Google document, and data from the Navigocorpus and Toflit 18 databases in their respective digital spaces, and finally producing web-optimized data before updating the website."),Object(r.a)("p",null,"This customized method, instead of using a CMS (such as Wordpress) or totally DIY content integration, allowed us to multiply iterations on the data, visuals, and text and develop a website by iteration with consistent and readable content. It also allowed us to avoid a website production approach that would have been too sequential with a first phase of \xab\xa0design\xa0\xbb followed by a second phase of \xab\xa0development\xa0\xbb, and instead left room for discovery and dialogue with the different materials as they were being developed. "),Object(r.a)("p",null,"Thus, the method of preparing and assembling the website, which nevertheless required some optimization with the automation of certain tasks, enabled a more organic dialogue to develop between the different types of writing in this document: by simultaneously producing the website, the visuals, and the textual content to go with them, we tried to make each of these activities benefit from the others and be the source of mutual invention or confirmation, rather than consider them as specialized or coordinated tasks in a process of subordination (from history to technique, or from visual to text, or from argument to illustration, etc.)."),Object(r.a)("h3",{id:"a-website-designed-to-connect-with-other-activities-and-audiences"},"A website designed to connect with other activities and audiences"),Object(r.a)("p",null,"This website is intended to be both a stand-alone product that presents a scientific narrative of the history of the La Rochelle region in the eighteenth century, and a building stone for a scientific and didactic construction yet to come. Its target audiences include history students, secondary history teachers, and advanced amateurs passionate about the Poitou and Charentes regions. However, the website can also be of interest to two further complementary audiences:"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"Professionals working in historical outreach (for either an expert or general audience) who can use some of the visuals for initiatives aimed at a wider audience."),Object(r.a)("li",{parentName:"ul"},"Specialized historians who can cite these visuals in conventional publications in journals or monographs and use them for future investigations.")),Object(r.a)("p",null,"To this end, we have ensured that each visual can be separated from the narrative and can be accessed via the atlas page, and more technically we have provided each visual with its own URL."),Object(r.a)("p",null,"Furthermore, the ",Object(r.a)("a",{href:"https://github.com/medialab/portic-storymaps-2021/",target:"blank",rel:"noopener noreferrer"},"website source code"),", shared under a free license, was developed and documented to allow it to be used \u2013in whole or in part\u2013 for future projects. Useful elements can serve for the next case studies of the PORTIC program but also for other similar projects. Finally, it should be noted that all the data used and the scripts that generated them from the entire Toflit18 and Navigocorpus databases (both freely accessible) are also included in the website source code, which means that our visuals and results can be fully reproduced."),Object(r.a)("h2",{id:"collective-writing"},"Collective writing"),Object(r.a)("p",null,"This website is the result of a process of collective investigation and writing that brought together people from several disciplines: history, economics, computer science, geomatics, and graphic design. "),Object(r.a)("p",null,"The website texts were written by ",Object(r.a)("a",{href:"https://cmmc-nice.fr/membres-du-cmmc/silvia-marzagalli/",target:"blank",rel:"noopener noreferrer"},"Silvia Marzagalli")," (Professor of Modern History, Universit\xe9 C\xf4te d\u2019Azur - CMMC, Principal Investigator of the PORTIC program), ",Object(r.a)("a",{href:"https://www.ined.fr/fr/recherche/chercheurs/Charles%2BLo%25C3%25AFc",target:"blank",rel:"noopener noreferrer"},"Lo\xefc Charles")," (Professor of Economics, INED, Universit\xe9 Paris 8 Vincennes - LED), ",Object(r.a)("a",{href:"https://leda.dauphine.fr/en/membre/detail-cv/profile/guillaume-daudin.html",target:"blank",rel:"noopener noreferrer"},"Guillaume Daudin")," (Professor of Economics, Universit\xe9 Paris-Dauphine - LEDa-DIAL), and ",Object(r.a)("a",{href:"https://criham.labo.univ-poitiers.fr/membres/thierry-sauzeau/",target:"blank",rel:"noopener noreferrer"},"Thierry Sauzeau")," (Professor of Modern History, Universit\xe9 de Poitiers - Criham)."),Object(r.a)("p",null,"The entire process of collaboration was led and managed by ",Object(r.a)("a",{href:"https://fr.linkedin.com/in/c%25C3%25A9cile-asselin-3659541b7",target:"blank",rel:"noopener noreferrer"},"C\xe9cile Asselin"),", an engineer intern who worked full-time for six months on the methodological and technical supervision of the entire case study, with the assistance of ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/robin-de-mourat/",target:"blank",rel:"noopener noreferrer"},"Robin de Mourat")," (research designer, Sciences Po medialab - scientific co-leader of the PORTIC program in charge of case studies)."),Object(r.a)("p",null,"The visuals were designed and developed by ",Object(r.a)("a",{href:"https://fr.linkedin.com/in/c%25C3%25A9cile-asselin-3659541b7",target:"blank",rel:"noopener noreferrer"},"C\xe9cile Asselin"),", ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/robin-de-mourat/",target:"blank",rel:"noopener noreferrer"},"Robin de Mourat"),", ",Object(r.a)("a",{href:"https://lienss.univ-larochelle.fr/Plumejeaud-Christine-954",target:"blank",rel:"noopener noreferrer"},"Christine Plumejeaud")," (geomatician, LIENSs laboratory - scientific co-leader of the PORTIC program), ",Object(r.a)("a",{href:"https://fr.linkedin.com/in/paul-girard-57822118",target:"blank",rel:"noopener noreferrer"},"Paul Girard")," (engineer specialized in digital humanities - ",Object(r.a)("a",{href:"https://www.ouestware.com/",target:"blank",rel:"noopener noreferrer"},"Ouestware"),"), ",Object(r.a)("a",{href:"https://www.maximezoffoli.com/",target:"blank",rel:"noopener noreferrer"},"Maxime Zoffoli")," (graphic designer specialized in infographics), ",Object(r.a)("a",{href:"https://fr.linkedin.com/in/geraldine-geoffroy-4653ab19b",target:"blank",rel:"noopener noreferrer"},"G\xe9raldine Geoffroy")," (data librarian, Universit\xe9 C\xf4te d\u2019Azur)."),Object(r.a)("p",null,"The basemaps were designed by ",Object(r.a)("a",{href:"https://lienss.univ-larochelle.fr/Plumejeaud-Christine-954",target:"blank",rel:"noopener noreferrer"},"Christine Plumejeaud"),"."),Object(r.a)("p",null,"The data were prepared and checked by the Navigocorpus team (",Object(r.a)("a",{href:"https://lienss.univ-larochelle.fr/Plumejeaud-Christine-954",target:"blank",rel:"noopener noreferrer"},"Christine Plumejeaud"),", ",Object(r.a)("a",{href:"https://cmmc-nice.fr/membres-du-cmmc/silvia-marzagalli/",target:"blank",rel:"noopener noreferrer"},"Silvia Marzagalli"),"), the Toflit18 team (",Object(r.a)("a",{href:"https://leda.dauphine.fr/fr/membre/detail-cv/profile/guillaume-daudin.html",target:"blank",rel:"noopener noreferrer"},"Guillaume Daudin"),", ",Object(r.a)("a",{href:"https://www.ined.fr/fr/recherche/chercheurs/Charles%2BLo%25C3%25AFc",target:"blank",rel:"noopener noreferrer"},"Lo\xefc Charles"),") and the medialab team (",Object(r.a)("a",{href:"https://fr.linkedin.com/in/c%25C3%25A9cile-asselin-3659541b7",target:"blank",rel:"noopener noreferrer"},"C\xe9cile Asselin"),", and ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/robin-de-mourat/",target:"blank",rel:"noopener noreferrer"},"Robin de Mourat"),")."),Object(r.a)("p",null,"The website was developed by ",Object(r.a)("a",{href:"https://fr.linkedin.com/in/c%25C3%25A9cile-asselin-3659541b7",target:"blank",rel:"noopener noreferrer"},"C\xe9cile Asselin")," and ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/robin-de-mourat/",target:"blank",rel:"noopener noreferrer"},"Robin de Mourat"),"."),Object(r.a)("p",null,"The website is also the work of those who took part in the data sprint: the engineers in digital methods and designers of the medialab laboratory of Sciences Po ",Object(r.a)("a",{href:"https://bmaz.github.io/",target:"blank",rel:"noopener noreferrer"},"B\xe9atrice Mazoyer"),", ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/benjamin-ooghe-tabanou/",target:"blank",rel:"noopener noreferrer"},"Benjamin Ooghe-Tabanou"),", ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/guillaume-plique/",target:"blank",rel:"noopener noreferrer"},"Guillaume Plique"),", ",Object(r.a)("a",{href:"https://medialab.sciencespo.fr/equipe/heloise-thero/",target:"blank",rel:"noopener noreferrer"},"H\xe9lo\xefse Th\xe9ro"),", and ",Object(r.a)("a",{href:"https://paulinegourlet.com/",target:"blank",rel:"noopener noreferrer"},"Pauline Gourlet"),"; the researchers ",Object(r.a)("a",{href:"https://www.univ-brest.fr/crbc/menu/Membres%2Bdu%2Blaboratoire/Enseignants-chercheurs/Pierrick_Pourchasse",target:"blank",rel:"noopener noreferrer"},"Pierrick Pourchasse")," (Professor Emeritus of Modern History, Universit\xe9 de Bretagne Occidentale, Brest), and ",Object(r.a)("a",{href:"https://l3i.univ-larochelle.fr/Bouju-Alain-MCF-HDR",target:"blank",rel:"noopener noreferrer"},"Alain Bouju")," (HDR Associate Professor in computer science, Universit\xe9 de La Rochelle)."))}l.isMDXComponent=!0;var c=function(){return[{id:"from-a-series-of-questions-to-a-week-of-investigation",level:2,title:"From a series of questions to a week of investigation",children:[{id:"unusual-research-conditions",level:3,title:"Unusual research conditions",children:[]},{id:"improvisation-and-adaptation",level:3,title:"Improvisation and adaptation",children:[]}]},{id:"the-website-a-pivotal-tool-for-multimodal-writing-and-defining-a-technical-and-methodological-infrastructure",level:2,title:"The website, a pivotal tool for multimodal writing and defining a technical and methodological infrastructure",children:[{id:"multimodal-writing",level:3,title:"Multimodal writing",children:[]},{id:"a-website-designed-to-connect-with-other-activities-and-audiences",level:3,title:"A website designed to connect with other activities and audiences",children:[]}]},{id:"collective-writing",level:2,title:"Collective writing",children:[]}]},d={}},227:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return o})),a.d(t,"default",(function(){return l})),a.d(t,"tableOfContents",(function(){return c})),a.d(t,"frontMatter",(function(){return d}));var n=a(20),r=(a(2),a(3)),i=(a(22),["components"]),o={text:"4 min read",minutes:3.115,time:186900,words:623},s={};function l(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"r\xe9f\xe9rences"},"R\xe9f\xe9rences"),Object(r.a)("h3",{id:"sources-archivistiques"},"Sources archivistiques"),Object(r.a)("p",null,"Les donn\xe9es sur la navigation proviennent de la base de donn\xe9es Navigocorpus. Pour cette enqu\xeate, il s\u2019agit plus particuli\xe8rement des:"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"cong\xe9s issus de la sous-s\xe9rie G5 conserv\xe9s aux Archives Nationales de France"),Object(r.a)("li",{parentName:"ul"},"cong\xe9s de Lorient, Archives d\xe9partementales du Morbihan, 10B-19"),Object(r.a)("li",{parentName:"ul"},"cong\xe9s de Saint-Tropez, Archives d\xe9partementales du Var, 7 B 10"),Object(r.a)("li",{parentName:"ul"},"Registres du Bureau de Sant\xe9 de Marseille, 200 E 543 et 545")),Object(r.a)("p",null,"Les donn\xe9es relatives aux exp\xe9ditions n\xe9gri\xe8res ont \xe9t\xe9 compl\xe9t\xe9es avec la base de donn\xe9es ",Object(r.a)("a",{href:"https://www.slavevoyages.org/voyage/database",target:"blank",rel:"noopener noreferrer"},Object(r.a)("a",{parentName:"p",href:"https://www.slavevoyages.org/voyage/database"},"https://www.slavevoyages.org/voyage/database"))),Object(r.a)("p",null,"Les donn\xe9es relatives au commerce ext\xe9rieur proviennent de la base de donn\xe9es Toflit18 (voir ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/exploration/sources",target:"blank",rel:"noopener noreferrer"},Object(r.a)("a",{parentName:"p",href:"http://toflit18.medialab.sciences-po.fr/#/exploration/sources"},"http://toflit18.medialab.sciences-po.fr/#/exploration/sources")),")."),Object(r.a)("p",null,"Pour cette enqu\xeate, il s\u2019agit plus particuli\xe8rement des : "),Object(r.a)("p",null,"Archives Nationales d\u2019Outre-Mer (pour 1789) : Col. F2 B 14 (pr\xe9sent aussi en AN Marine B 7 514)"),Object(r.a)("p",null,"Archives Nationales de France (pour 1789) : AN F12 1665 et 1666 AN Marine B 7 514 (pr\xe9sent aussi en ANOM Col F2 B 14)"),Object(r.a)("p",null,"Archives d\xe9partementales de la Charente-Maritime : 41 ETP 270 (pour l\u2019historique des exportations de La Rochelle) "),Object(r.a)("p",null,"Biblioth\xe8que municipale de Saint-Brieuc : Fonds Gournay, M84\u201387 (pour 1750)"),Object(r.a)("p",null,"La majeure partie des cahiers de dol\xe9ances \xe9tudi\xe9s sont tir\xe9s des Archives d\xe9partementales de Charente-Maritime (AD17). En effet, les Archives d\xe9partementales de la Vend\xe9e (AD85) ne conservent que de rares cahiers pour littoral du Poitou (Bouin, Noirmoutier, l\u2019Ile d\u2019Elle dans le marais poitevin). La collecte et/ou la transcription ont \xe9t\xe9 r\xe9alis\xe9es selon deux modalit\xe9s. Nous avons tout d\u2019abord r\xe9cup\xe9r\xe9 un ensemble de cahiers charentais transcrits sur le site ",Object(r.a)("a",{href:"http://www.histoirepassion.eu/?-1789-Cahiers-de-doleances-et-Etats-generaux-",target:"blank",rel:"noopener noreferrer"},"Histoire Passion - Saintonge Aunis Angoumois"),". Nous avons ensuite compl\xe9t\xe9 ce corpus gr\xe2ce \xe0 la collaboration des AD17 et des AD85. Ainsi, de nouveaux cahiers ont \xe9t\xe9 r\xe9cup\xe9r\xe9s et transcrits par Thierry Sauzeau et Silvia Marzagalli, le tout permettant d\u2019\xe9valuer l\u2019exhaustivit\xe9 et la teneur de l\u2019\xe9chantillon utilis\xe9. Le corpus de 163 cahiers rec\xe8le 14 cahiers de paroisses que compl\xe8tent 5 cahiers de districts (groupes de paroisses) du littoral. L\u2019ensemble de ce travail de consolidation et de mise en donn\xe9es est disponible et r\xe9utilisable ",Object(r.a)("a",{href:"https://docs.google.com/spreadsheets/d/1A8-OiTSYv7opCcWvF8tsJ0dmEXkHZMgN-7lhj-4hqFw/edit?usp%3Dsharing",target:"blank",rel:"noopener noreferrer"},"\xe0 cette adresse"),"."),Object(r.a)("p",null,"Les registres de d\xe9lib\xe9ration de la Chambre de Commerce de La Rochelle sont conserv\xe9s aux Archives d\xe9partementales de la Charente-Maritime, 41 ETP 8 (accessibles en ligne: ",Object(r.a)("a",{href:"https://archinoe.fr/v2/ad17/visualiseur/ir_ead_visu_lien.html?ir%3D11431%26id%3D490014227",target:"blank",rel:"noopener noreferrer"},Object(r.a)("a",{parentName:"p",href:"https://archinoe.fr/v2/ad17/visualiseur/ir%5C_ead%5C_visu%5C_lien.html?ir=11431&id=490014227"},"https://archinoe.fr/v2/ad17/visualiseur/ir\\_ead\\_visu\\_lien.html?ir=11431","&","id=490014227")),") "),Object(r.a)("h3",{id:"bibliographie"},"Bibliographie"),Object(r.a)("p",null,"Augeron, Micka\xebl et Guillemet, Dominique (dir.), Champlain ou les portes du Nouveau Monde. Cinq si\xe8cles d\u2019\xe9changes entre le Centre-Ouest fran\xe7ais et l\u2019Am\xe9rique du Nord, La Cr\xe8che, Geste \xc9ditions, 2004."),Object(r.a)("p",null,"Clark, John G., La Rochelle and the Atlantic Economy during the Eighteenth Century, Baltimore, Johns Hopkins University Press, 1981."),Object(r.a)("p",null,"Delafosse, Marcel (dir.), Histoire de La Rochelle, Toulouse, Privat, 2002."),Object(r.a)("p",null,"Deveau, Jean-Michel, La traite rochelaise, Paris, Karthala, 1990."),Object(r.a)("p",null,"Hocquet, Jean-Claude, \xab\xa0Navigation et transport du sel atlantique\xa0\xbb, dans M\xe9nanteau, Lo\xefc (dir.), Sel et salines de l\u2019Europe atlantique, Rennes, PUR, 2018, p. 223\u2013234."),Object(r.a)("p",null,"Martinetti, Brice, Les n\xe9gociants de La Rochelle au XVIIIe si\xe8cle, Rennes, PUR, 2013."),Object(r.a)("p",null,"Mathieu, Jacques, La Nouvelle-France. Les Fran\xe7ais en Am\xe9rique du Nord, XVIe-XVIIIe si\xe8cles, Paris, Belin, 1991."),Object(r.a)("p",null,"Robert, Henri, Les trafics coloniaux du port de la Rochelle au XVIIIe si\xe8cle, Poitiers, M\xe9moire de la Soci\xe9t\xe9 des Antiquaires de l\u2019Ouest, 4e s\xe9rie, tome IV, 1960."),Object(r.a)("p",null,"Sauzeau, Thierry et Normand, Eric (dir.), De Tonnay \xe0 Charente : histoire d\u2019une porte maritime des pays charentais, La Cr\xe8che, Geste \xe9ditions, 2013, 203 p."),Object(r.a)("p",null,"Sauzeau, Thierry, \xab Rochefort/Tonnay-Charente (XVIIe-XIXe si\xe8cles) entre concurrence et compl\xe9mentarit\xe9 \xbb, dans Fernandez, Alexandre et Marnot, Bruno (dir.), Les ports du golfe de Gascogne. De Concarneau \xe0 La Corogne (xve-xxie si\xe8cles), Paris, PUPS, 2013, p.109\u2013122."),Object(r.a)("p",null,"Sauzeau, Thierry, Les marins de la Seudre (XVIIIe-XIXe si\xe8cle), \xab\xa0Pays d\u2019histoire\xa0\xbb, La Cr\xe8che, Geste Editions, 2005, 342 p."),Object(r.a)("p",null,"Toussaint, Auguste, La route des Iles. Contribution \xe0 l\u2019histoire maritime des Mascareignes, Paris, SEVPEN, 1967."))}l.isMDXComponent=!0;var c=function(){return[{id:"sources-archivistiques",level:3,title:"Sources archivistiques",children:[]},{id:"bibliographie",level:3,title:"Bibliographie",children:[]}]},d={}},228:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return o})),a.d(t,"default",(function(){return l})),a.d(t,"tableOfContents",(function(){return c})),a.d(t,"frontMatter",(function(){return d}));var n=a(20),r=(a(2),a(3)),i=(a(22),["components"]),o={text:"4 min read",minutes:3.045,time:182700,words:609},s={};function l(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"references"},"References"),Object(r.a)("h3",{id:"archival-sources"},"Archival sources"),Object(r.a)("p",null,"Navigation data was drawn from the Navigocorpus database and for this investigation more particularly from:"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"Clearances from the G5 sub-series kept at the Archives Nationales de France."),Object(r.a)("li",{parentName:"ul"},"Clearances of Lorient, Archives d\xe9partementales du Morbihan (Lorient), 10B-19."),Object(r.a)("li",{parentName:"ul"},"Clearances of Saint-Tropez, Archives d\xe9partementales du Var (Draguignan), 7 B 10."),Object(r.a)("li",{parentName:"ul"},"Records of the Marseille Health Office, Archives d\xe9partementales des Bouches-du-Rh\xf4ne (Marseille), 200 E 543 and 545.")),Object(r.a)("p",null,"Additional data relating to slave shipments were provided by the database ",Object(r.a)("a",{href:"https://www.slavevoyages.org/voyage/database",target:"blank",rel:"noopener noreferrer"},Object(r.a)("a",{parentName:"p",href:"https://www.slavevoyages.org/voyage/database"},"https://www.slavevoyages.org/voyage/database"))),Object(r.a)("p",null,"Data on foreign trade were provided by the Toflit18 database (see ",Object(r.a)("a",{href:"http://toflit18.medialab.sciences-po.fr/%23/exploration/sources",target:"blank",rel:"noopener noreferrer"},Object(r.a)("a",{parentName:"p",href:"http://toflit18.medialab.sciences-po.fr/#/exploration/sources"},"http://toflit18.medialab.sciences-po.fr/#/exploration/sources")),"), and for this investigation more particularly from: "),Object(r.a)("p",null,"Archives nationales d\u2019Outre-Mer (ANOM) (Aix-en-Provence), for 1789: Col. F2 B 14 (also available in AN Marine B 7 514)."),Object(r.a)("p",null,"Archives nationales de France, for 1789: AN F12 1665 and 1666 AN Marine B 7 514 (also available in ANOM Col F2 B 14)."),Object(r.a)("p",null,"Archives d\xe9partementales de Charente-Maritime (La Rochelle): 41 FTE 270 (for the history of La Rochelle exports)."),Object(r.a)("p",null,"Biblioth\xe8que Municipale de Saint-Brieuc: Gournay Archives, M84\u201387 (for 1750)."),Object(r.a)("p",null,"Most of the grievance registers studied were provided by the Archives d\xe9partementales de la Charente-Maritime (AD17) as the Archives d\xe9partementales de Vend\xe9e (AD85) only hold a few registers for the coastal region of Poitou (Bouin, Noirmoutier, and the island of Elle in the Poitevin marsh). Collection and transcription when necessary were carried out in two ways. We first retrieved a set of Charentais registers transcribed on the website ",Object(r.a)("a",{href:"http://www.histoirepassion.eu/?-1789-Cahiers-de-doleances-et-Etats-generaux-",target:"blank",rel:"noopener noreferrer"},"Histoire Passion - Saintonge Aunis Angoumois"),". AD17 and AD85 provided additional data for this corpus: these registers were retrieved and transcribed by Thierry Sauzeau and Silvia Marzagalli, and they served to assess the comprehensiveness and content of the sample used. The corpus of 163 registers includes 14 parish registers and an additional 5 coastal district registers (groups of parishes). The entire process of data preparation and consolidation is available ",Object(r.a)("a",{href:"https://docs.google.com/spreadsheets/d/1A8-OiTSYv7opCcWvF8tsJ0dmEXkHZMgN-7lhj-4hqFw/edit?usp%3Dsharing",target:"blank",rel:"noopener noreferrer"},"here"),"."),Object(r.a)("p",null,"The records of the deliberations of the Chamber of Commerce of La Rochelle are archived at the Archives d\xe9partementales de la Charente-Maritime, 41 FTE 8 (available online: ",Object(r.a)("a",{href:"https://archinoe.fr/v2/ad17/visualiseur/ir_ead_visu_lien.html?ir%3D11431%26id%3D490014227",target:"blank",rel:"noopener noreferrer"},Object(r.a)("a",{parentName:"p",href:"https://archinoe.fr/v2/ad17/visualiseur/ir%5C_ead%5C_visu%5C_lien.html?ir=11431&id=490014227"},"https://archinoe.fr/v2/ad17/visualiseur/ir\\_ead\\_visu\\_lien.html?ir=11431","&","id=490014227")),Object(r.a)("a",{href:"https://archinoe.fr/v2/ad17/visualiseur/ir_ead_visu_lien.html?ir%3D11431%26id%3D490014227",target:"blank",rel:"noopener noreferrer"}," ")," ) "),Object(r.a)("h3",{id:"bibliography"},"Bibliography"),Object(r.a)("p",null,"Augeron, Micka\xebl et Guillemet, Dominique (ed.), Champlain ou les portes du Nouveau Monde. Cinq si\xe8cles d\u2019\xe9changes entre le Centre-Ouest fran\xe7ais et l\u2019Am\xe9rique du Nord, La Cr\xe8che, Geste \xc9ditions, 2004."),Object(r.a)("p",null,"Clark, John G., La Rochelle and the Atlantic Economy during the Eighteenth Century, Baltimore, Johns Hopkins University Press, 1981."),Object(r.a)("p",null,"Delafosse, Marcel (ed.), Histoire de La Rochelle, Toulouse, Privat, 2002."),Object(r.a)("p",null,"Deveau, Jean-Michel, La traite rochelaise, Paris, Karthala, 1990."),Object(r.a)("p",null,"Hocquet, Jean-Claude, \xab Navigation et transport du sel atlantique \xbb, in M\xe9nanteau, Lo\xefc (ed.), Sel et salines de l\u2019Europe atlantique, Rennes, PUR, 2018, p. 223\u2013234."),Object(r.a)("p",null,"Martinetti, Brice, Les n\xe9gociants de La Rochelle au XVIIIe si\xe8cle, Rennes, PUR, 2013."),Object(r.a)("p",null,"Mathieu, Jacques, La Nouvelle-France. Les Fran\xe7ais en Am\xe9rique du Nord, XVIe-XVIIIe si\xe8cles, Paris, Belin, 1991."),Object(r.a)("p",null,"Robert, Henri, Les trafics coloniaux du port de la Rochelle au XVIIIe si\xe8cle, Poitiers, M\xe9moire de la Soci\xe9t\xe9 des Antiquaires de l\u2019Ouest, 4th serie, tome IV, 1960."),Object(r.a)("p",null,"Sauzeau, Thierry and Normand, Eric (eds.), De Tonnay \xe0 Charente : histoire d\u2019une porte maritime des pays charentais, La Cr\xe8che, Geste \xe9ditions, 2013, 203 p."),Object(r.a)("p",null,"Sauzeau, Thierry, \xab Rochefort/Tonnay-Charente (XVIIe-XIXe si\xe8cles) entre concurrence et compl\xe9mentarit\xe9 \xbb, in Fernandez, Alexandre and Marnot, Bruno (eds.), Les ports du golfe de Gascogne. De Concarneau \xe0 La Corogne (xve-xxie si\xe8cles), Paris, PUPS, 2013, p.109\u2013122."),Object(r.a)("p",null,"Sauzeau, Thierry, Les marins de la Seudre (XVIIIe-XIXe si\xe8cle), \xab Pays d\u2019histoire \xbb, La Cr\xe8che, Geste Editions, 2005, 342 p."),Object(r.a)("p",null,"Toussaint, Auguste, La route des Iles. Contribution \xe0 l\u2019histoire maritime des Mascareignes, Paris, SEVPEN,1967."))}l.isMDXComponent=!0;var c=function(){return[{id:"archival-sources",level:3,title:"Archival sources",children:[]},{id:"bibliography",level:3,title:"Bibliography",children:[]}]},d={}},229:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return o})),a.d(t,"default",(function(){return l})),a.d(t,"tableOfContents",(function(){return c})),a.d(t,"frontMatter",(function(){return d}));var n=a(20),r=(a(2),a(3)),i=["components"],o={text:"1 min read",minutes:.01,time:600,words:2},s={};function l(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("p",null,"some tests"))}l.isMDXComponent=!0;var c=function(){return[]},d={}},230:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return o})),a.d(t,"default",(function(){return l})),a.d(t,"tableOfContents",(function(){return c})),a.d(t,"frontMatter",(function(){return d}));var n=a(20),r=(a(2),a(3)),i=["components"],o={text:"1 min read",minutes:.55,time:33e3,words:110},s={};function l(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("div",{className:"column"},Object(r.a)("h2",{id:"le-programme-portic"},"Le programme PORTIC"),Object(r.a)("p",null,"Le programme de recherche PORTIC (ANR-18-CE38\u20130010) se propose de croiser les donn\xe9es sur la navigation et sur la valeur du commerce \xe9tranger de la France \xe0 la veille de la R\xe9volution fran\xe7aise pour mieux saisir les dynamiques commerciales \xe0 l\u2019\u0153uvre. Pour ce faire, il offre des interfaces d\u2019interrogation et de visualisation des donn\xe9es adapt\xe9es \xe0 des publics et des int\xe9r\xeats vari\xe9s."),Object(r.a)("p",null,Object(r.a)("a",{parentName:"p",href:"https://anr.portic.fr/"},"En savoir plus sur le programme PORTIC"))),Object(r.a)("div",{className:"column"},Object(r.a)("p",null,"Les contenus de ce site sont plac\xe9s sous ",Object(r.a)("a",{parentName:"p",href:"https://creativecommons.org/licenses/by-nc-sa/3.0/fr/"},"licence libre creative commons CC-BY-SA-NC"),"."),Object(r.a)("p",null,"Le code source de ce site est plac\xe9 sous licence libre ",Object(r.a)("a",{parentName:"p",href:"https://www.gnu.org/licenses/agpl-3.0.fr.html"},"AGPL-3.0"),"."),Object(r.a)("p",null,Object(r.a)("a",{parentName:"p",href:"https://github.com/medialab/portic-storymaps-2021/"},"Acc\xe9der au code source de ce site"))))}l.isMDXComponent=!0;var c=function(){return[{id:"le-programme-portic",level:2,title:"Le programme PORTIC",children:[]}]},d={}},231:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return o})),a.d(t,"default",(function(){return l})),a.d(t,"tableOfContents",(function(){return c})),a.d(t,"frontMatter",(function(){return d}));var n=a(20),r=(a(2),a(3)),i=["components"],o={text:"1 min read",minutes:.45,time:27e3,words:90},s={};function l(e){var t=e.components,a=Object(n.a)(e,i);return Object(r.a)("wrapper",Object.assign({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.a)("div",{className:"column"},Object(r.a)("h2",{id:"the-portic-program"},"The PORTIC Program"),Object(r.a)("p",null,"The PORTIC research program (ANR-18-CE38\u20130010) aims at crossing french navigation and foreign trade data at the eve of the French Revolution, in order to understand ongoing commercial dynamics. To do so, it offers data visualization and querying interfaces adapted to various audiences and interests."),Object(r.a)("p",null,Object(r.a)("a",{parentName:"p",href:"https://anr.portic.fr/"},"Learn more about the PORTIC program"))),Object(r.a)("div",{className:"column"},Object(r.a)("p",null,"The contents of this website are published under ",Object(r.a)("a",{parentName:"p",href:"https://creativecommons.org/licenses/by-nc-sa/3.0/fr/"},"creative commons license CC-BY-SA-NC"),"."),Object(r.a)("p",null,"The source code of this website is published under ",Object(r.a)("a",{parentName:"p",href:"https://www.gnu.org/licenses/agpl-3.0.fr.html"},"AGPL-3.0 license"),"."),Object(r.a)("p",null,Object(r.a)("a",{parentName:"p",href:"https://github.com/medialab/portic-storymaps-2021/"},"Access the source code of this website"))))}l.isMDXComponent=!0;var c=function(){return[{id:"the-portic-program",level:2,title:"The PORTIC Program",children:[]}]},d={}},232:function(e,t,a){"use strict";a.r(t),a.d(t,"readingTime",(function(){return g})),a.d(t,"default",(function(){return v})),a.d(t,"tableOfContents",(function(){return j})),a.d(t,"frontMatter",(function(){return x}));var n=a(20),r=a(2),i=a(3),o=a(1);a(10);var s=a(8),l=(a(684),a(651)),c=a(76),d=a.n(c),u=(a(108).a,a(44).a),p=(a(173).a,a(234),function(e){var t=e.data,a=e.children,n=Object(r.useState)(null),i=Object(s.a)(n,2),c=i[0],u=i[1],p=Object(r.useState)(!0),h=Object(s.a)(p,2),m=h[0],f=h[1];return Object(r.useEffect)((function(){if(t){var e="".concat("/portic-storymaps-2021","/data/").concat(t);d()(e).then((function(e){var a,n=e.data,r=t.split(".").pop();"csv"===r?a=Object(l.a)(n):"geojson"!==r&&"json"!==r||(a=n),u(a),f(!1)})).catch((function(e){f(!1)}))}}),[t]),m?Object(o.jsx)("div",{children:"Loading"}):a(c)}),h=(a(233),a(58),a(21)),m=a(107),f=["components"],g={text:"8 min read",minutes:7.975,time:478500,words:1595},b={};function v(e){var t=e.components,a=Object(n.a)(e,f);return Object(i.a)("wrapper",Object.assign({},b,a,{components:t,mdxType:"MDXLayout"}),Object(i.a)("p",null,"Test en prod"),Object(i.a)("h2",{id:"carto-en-reactd3svg"},"Carto en react+d3+SVG"),Object(i.a)("p",null,"Ci-dessous un proto/boilerplate pour rendre du svg + donn\xe9es avec la galaxie d3 + du rendu direct en SVG via react."),Object(i.a)("h3",{id:"fond-de-carte---test-custom-layer-avec-config-coast-from-nantes-to-bordeaux"},"Fond de carte - test custom layer avec config \u201ccoast from Nantes to Bordeaux\u201d"),Object(i.a)(p,{data:"cartoweb_france_1789_geojson.geojson",mdxType:"DataProvider"},(function(e){return Object(i.a)(p,{data:"part_3_step3_viz_customs_offices_data.csv",mdxType:"DataProvider"},(function(t){return Object(i.a)(u,{layers:[{type:"choropleth",data:e,color:{field:"shortname"}},{type:"custom",data:t,renderObjects:m.b}],projectionTemplate:"coast from Nantes to Bordeaux",height:800,width:1200,mdxType:"GeographicMapChart"})}))})),Object(i.a)("h3",{id:"fond-de-carte---test-flows-avec-config-world"},"Fond de carte - test flows avec config \u201cWorld\u201d"),Object(i.a)(p,{data:"world_1789_23mars2021_level0.json",mdxType:"DataProvider"},(function(e){return Object(i.a)(p,{data:"aggregated_flows.json",mdxType:"DataProvider"},(function(t){return Object(i.a)(u,{layers:[{type:"choropleth",data:e,color:{field:"shortname",palette:h.a.provinces}},{type:"flows",data:t,size:{field:"tonnages_cumul\xe9s"}}],projectionTemplate:"World",height:800,width:1200,mdxType:"GeographicMapChart"})}))})),Object(i.a)("h3",{id:"fond-de-carte---config-france"},"Fond de carte - config \u201cFrance\u201d"),Object(i.a)(p,{data:"cartoweb_france_1789_geojson.geojson",mdxType:"DataProvider"},(function(e){return Object(i.a)(p,{data:"ports_locations_data.csv",mdxType:"DataProvider"},(function(t){return Object(i.a)(u,{layers:[{type:"choropleth",data:e,color:{field:"shortname",palette:h.a.provinces}},{type:"points",data:t,color:{field:"admiralty",palette:h.a.admiralties},size:{field:"customs_region"},label:{field:"port"}}],projectionTemplate:"France",height:800,width:1200,mdxType:"GeographicMapChart"})}))})),Object(i.a)("h3",{id:"fond-de-carte---config-rotated-poitou"},"Fond de carte - config \u201crotated Poitou\u201d"),Object(i.a)(p,{data:"cartoweb_france_1789_geojson.geojson",mdxType:"DataProvider"},(function(e){return Object(i.a)(p,{data:"part_3_step1_viz_data.csv",mdxType:"DataProvider"},(function(t){return Object(i.a)(u,{layers:[{type:"choropleth",data:e,color:{field:"shortname",palette:h.a.provinces}},{type:"points",data:t,color:{field:"customs_office",palette:h.a.customs_office},size:{field:"mean_tonnage"},label:{field:"port"}}],projectionTemplate:"rotated Poitou",height:800,width:1200,mdxType:"GeographicMapChart"})}))})),Object(i.a)("h3",{id:"fond-de-carte---config-poitou"},"Fond de carte - config \u201cPoitou\u201d"),Object(i.a)("p",null,"Cartographie des destination des bateaux aillant un port d\u2019attache dans la r\xe9gion, par tonnage cumul\xe9 (couleur = amiraut\xe9) :"),Object(i.a)(u,{backgroundFilename:"cartoweb_france_1789_geojson.geojson",dataFilename:"navigo-out-of-ships-from-region.csv",markerColor:"pointcall_admiralty",markerSize:"tonnage",label:"pointcall",showLabels:!0,projectionTemplate:"Poitou",height:800,width:1200,mdxType:"GeographicMapChart"}),Object(i.a)("h2",{id:"fond-de-carte-sans-template-pour-la-config"},"Fond de carte sans template pour la config"),Object(i.a)(u,{backgroundFilename:"cartoweb_france_1789_geojson.geojson",dataFilename:"navigo-out-of-ships-from-region.csv",markerColor:"pointcall_admiralty",markerSize:"tonnage",label:"pointcall",showLabels:!0,mdxType:"GeographicMapChart"}))}v.isMDXComponent=!0;var j=function(){return[{id:"carto-en-reactd3svg",level:2,title:"Carto en react+d3+SVG",children:[{id:"fond-de-carte---test-custom-layer-avec-config-coast-from-nantes-to-bordeaux",level:3,title:"Fond de carte - test custom layer avec config \u201ccoast from Nantes to Bordeaux\u201d",children:[]},{id:"fond-de-carte---test-flows-avec-config-world",level:3,title:"Fond de carte - test flows avec config \u201cWorld\u201d",children:[]},{id:"fond-de-carte---config-france",level:3,title:"Fond de carte - config \u201cFrance\u201d",children:[]},{id:"fond-de-carte---config-rotated-poitou",level:3,title:"Fond de carte - config \u201crotated Poitou\u201d",children:[]},{id:"fond-de-carte---config-poitou",level:3,title:"Fond de carte - config \u201cPoitou\u201d",children:[]}]},{id:"fond-de-carte-sans-template-pour-la-config",level:2,title:"Fond de carte sans template pour la config",children:[]}]},x={}},233:function(e,t,a){"use strict";var n=a(7),r=a(10),i=a(8),o=a(57),s=a(282),l=a(121),c=a(218),d=a(2),u=a(24),p=a(64),h=a(26),m=a(21),f=a(16),g=(a(597),a(31)),b=a(1),v=m.a.generic,j=function(e){var t=e.data,a=e.title,m=e.width,j=void 0===m?1e3:m,x=e.height,O=void 0===x?400:x,y=e.color,w=e.x,_=e.y,L=e.tooltip,k=e.margins,C=void 0===k?{}:k,T=e.annotations,q=void 0===T?[]:T,A=Object(d.useState)(0),R=Object(i.a)(A,2),N=R[0],M=R[1],S=Object(d.useState)(0),P=Object(i.a)(S,2),z=P[0],F=P[1],B=Object(d.useRef)(null),E=Object(d.useRef)(null),D=Object(f.c)(j-z),I=Object(f.c)(O-N);Object(d.useEffect)((function(){setTimeout((function(){var e=E.current?E.current.getBoundingClientRect().height:0,t=B.current?B.current.getBoundingClientRect().width:0;M(e),F(t)}))}),[D,I,y,t]);var H,W=Object(r.a)({left:100,top:30,bottom:20,right:20},C),$=_.tickFormat,G=_.tickSpan,Y=_.domain,X=_.fillGaps,V=w.tickFormat,U=w.tickSpan,J=w.domain;if(y&&y.palette)H=y.palette;else if(y){var Z=Object(u.uniq)(t.map((function(e){return e[y.field]}))),Q=Object(f.e)(y.field,Z.length);H=Z.reduce((function(e,t,a){return Object(r.a)(Object(r.a)({},e),{},Object(n.a)({},t,Q[a]))}),{})}var K=J||Object(s.a)(t.filter((function(e){return+e[_.field]})).map((function(e){return+e[w.field]}))),ee=Y||[0,Object(l.a)(t.map((function(e){return+e[_.field]})))],te=Object(o.a)().domain(K).range([W.left,D-W.right]).nice(),ae=Object(o.a)().domain(ee).range([I-W.bottom,W.top]).nice(),ne=y?Object.entries(Object(u.groupBy)(t,(function(e){return e[y.field]}))):[[void 0,t]],re=Object(p.axisPropsFromTickScale)(te).values,ie=Object(p.axisPropsFromTickScale)(ae,10).values;U&&(K[0]=K[0]-K[0]%U,K[1]=K[1]+(U-K[0]%U),re=Object(c.a)(K[0],K[1],U),te.domain(K)),G&&(ee[0]=ee[0]-ee[0]%G,ee[1]=ee[1]+(G-ee[0]%G),ie=Object(c.a)(ee[0],ee[1],G),ae.domain(ee));var oe="fr"===Object(d.useContext)(g.b).lang?"L\xe9gende":"Legend";return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("figure",{style:{width:j,height:O},className:"LineChart GenericVisualization",children:[Object(b.jsx)("div",{ref:E,className:"row",children:a?Object(b.jsx)("h5",{className:"visualization-title",style:{marginLeft:W.left},children:a}):null}),Object(b.jsxs)("div",{className:"row vis-row",children:[Object(b.jsxs)("svg",{className:"chart",width:D,height:I,children:[Object(b.jsxs)("g",{className:"axis left-axis ticks",children:[Object(b.jsx)("text",{x:W.left-10,y:W.top-10,className:"axis-title",children:_.title||_.field}),ie.map((function(e,t){return Object(b.jsxs)("g",{transform:"translate(0, ".concat(ae(e),")"),children:[Object(b.jsx)("text",{x:W.left-10,y:3,children:"function"===typeof $?$(e,t):e}),Object(b.jsx)("line",{className:"tick-mark",x1:W.left-5,x2:W.left,y1:0,y2:0}),Object(b.jsx)("line",{className:"background-line",x1:W.left,x2:te(re[re.length-1]),y1:0,y2:0})]},e)}))]}),Object(b.jsx)("g",{className:"axis bottom-axis ticks",children:re.map((function(e,t){return Object(b.jsxs)("g",{transform:"translate(".concat(te(e),", 0)"),children:[Object(b.jsx)("text",{x:0,y:I-W.bottom+20,children:"function"===typeof V?V(e,t):e}),Object(b.jsx)("line",{className:"background-line",x1:0,x2:0,y1:ae(ie[ie.length-1]),y2:I-W.bottom}),Object(b.jsx)("line",{className:"tick-mark",x1:0,x2:0,y1:I-W.bottom,y2:I-W.bottom+5})]},e)}))}),Object(b.jsxs)("g",{className:"annotations-container",children:[q.filter((function(e){return"x"===e.axis})).map((function(e,t){var a=e.start,n=e.end,r=e.label,i=e.labelPosition,o=void 0===i?20:i,s=I-ae(ie[ie.length-1])-W.bottom,l=I-W.bottom,c=ae(ie[ie.length-1]);return Object(b.jsxs)("g",{className:"annotation x-axis-annotation",children:[Object(b.jsx)("rect",{x:te(a),width:te(n)-te(a),height:s,y:c,fill:"url(#diagonalHatch)",opacity:.4}),Object(b.jsx)("line",{x1:te(a),x2:te(a),y1:l,y2:c,stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(b.jsx)("line",{x1:te(n),x2:te(n),y1:l,y2:c,stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(b.jsx)("line",{x1:te(n)+20,x2:te(n)+10,y1:c+o-5,y2:c+o-5,stroke:"grey",markerEnd:"url(#arrowhead)"}),Object(b.jsx)("text",{x:te(n)+22,y:c+o,fontSize:".5rem",fill:"grey",children:r}),Object(b.jsx)("defs",{children:Object(b.jsx)("marker",{id:"arrowhead",markerWidth:"5",markerHeight:"5",refX:"0",refY:"2.5",orient:"auto",children:Object(b.jsx)("polygon",{stroke:"grey",fill:"transparent",points:"0 0, 5 2.5, 0 5"})})}),Object(b.jsx)("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:Object(b.jsx)("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"grey",opacity:.5,strokeWidth:1}})})]},t)})),q.filter((function(e){return"y"===e.axis})).map((function(e,t){var a=e.start,n=e.end,r=e.label,i=e.labelPosition,o=void 0===i?20:i,s=W.left,l=te(re[re.length-1]);return Object(b.jsxs)("g",{className:"annotation y-axis-annotation",children:[Object(b.jsx)("rect",{x:s,width:l-s,y:ae(a),height:Math.abs(ae(n)-ae(a)),fill:"url(#diagonalHatch)",opacity:.4}),Object(b.jsx)("line",{x1:s,x2:l,y1:ae(a),y2:ae(a),stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(b.jsx)("line",{x1:s,x2:l,y1:ae(n),y2:ae(n),stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(b.jsx)("line",{x1:s+o-5,x2:s+o-5,y1:ae(a)-15,y2:ae(a)-5,stroke:"grey",markerEnd:"url(#arrowhead)"}),Object(b.jsx)("text",{x:s+o,y:ae(a)-10,fontSize:".5rem",fill:"grey",children:r}),Object(b.jsx)("defs",{children:Object(b.jsx)("marker",{id:"arrowhead",markerWidth:"5",markerHeight:"5",refX:"0",refY:"2.5",orient:"auto",children:Object(b.jsx)("polygon",{stroke:"grey",fill:"transparent",points:"0 0, 5 2.5, 0 5"})})}),Object(b.jsx)("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:Object(b.jsx)("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"grey",opacity:.5,strokeWidth:1}})})]},t)}))]}),Object(b.jsx)("g",{className:"lines-container",children:ne.map((function(e,t){var a=Object(i.a)(e,2),n=a[0],r=a[1],o=H&&n?H[n]:v.dark;return Object(b.jsx)("g",{children:r.map((function(e,t){var a,n,i=t<r.length-1;return i&&(a=r[t+1],n=+e[w.field]+1===+a[w.field]),Object(b.jsxs)(b.Fragment,{children:[i&&X||i&&n&&+e[_.field]&&+a[_.field]?Object(b.jsx)("line",{className:"chart-line",x1:te(+e[w.field]),x2:te(+a[w.field]),y1:ae(+e[_.field]),y2:ae(+a[_.field]),style:{stroke:o}}):null,+e[_.field]>0?Object(b.jsxs)("g",{className:"data-dot-container",children:[Object(b.jsx)("circle",{className:"data-dot",fill:o,r:I/200,cx:te(e[w.field])||0,cy:ae(e[_.field])||0}),Object(b.jsx)("circle",{className:"data-dot-big",fill:o,r:5,cx:te(e[w.field])||0,cy:ae(e[_.field])||0}),Object(b.jsx)("circle",{fill:"transparent",r:5,cx:te(e[w.field])||0,cy:ae(e[_.field])||0,"data-tip":L?L(e):void 0,"data-for":"line-tooltip"})]},t):null]})}))},t)}))})]}),y?Object(b.jsxs)("div",{className:"ColorLegend",ref:B,style:{top:N+W.top},children:[Object(b.jsx)("h5",{children:y.title||oe}),Object(b.jsx)("ul",{className:"color-legend",children:Object.entries(H).map((function(e,t){var a=Object(i.a)(e,2),n=a[0],r=a[1];return Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{className:"color-box",style:{background:r}}),Object(b.jsx)("span",{className:"color-label",children:n})]},n)}))})]}):null]})]}),Object(b.jsx)(h.a,{id:"line-tooltip"})]})};t.a=j},234:function(e,t,a){"use strict";var n=a(7),r=a(10),i=a(9),o=a(8),s=a(2),l=a(23),c=a(160),d=a(70),u=a(16),p=(a(642),a(1)),h=1e5,m=function(e){var t=e.width,a=e.height,n=.7*t,r=.05*t;return Object(p.jsx)("path",{className:"hull",d:"M 0 0 L ".concat(t/3," ",0," L ").concat(t/3," ").concat(a/4," L ").concat(.6*t," ").concat(a/4," L ").concat(.6*t," 0 L ").concat(t," 0 L ").concat(n," ").concat(a," L ").concat(r," ").concat(a," Z")})},f=function(e){var t=e.width,a=e.height,n=e.sailSpeed,r=e.distance,i=void 0===r?1:r,o=Object(s.useMemo)((function(){return.4*Math.random()+1}),[]),c=t,d=5*i,u=t+5*i,h={points:"0,".concat(.1*a," ").concat(t,",",0," ").concat(u,",").concat(a/2," ").concat(t,",").concat(.9*a," 0,").concat(a," ").concat(d," ").concat(a/2)},m={points:"0,".concat(.1*a," ").concat(t,",",0," ").concat(c,",").concat(a/2," ").concat(t,",").concat(.9*a," 0,").concat(a," ").concat(0," ").concat(a/2)},f=Object(l.useSpring)({loop:!0,to:[h,m,h],from:h,config:{duration:500*n*o}}).points;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(l.animated.polygon,{points:f,className:"sail"})})},g=function(e){var t=e.width,a=e.height,n=e.sailSpeed,r=e.distance,i=.7*t;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("g",{transform:"translate(".concat(t/2-i/2,", ").concat(.1*a,")"),children:Object(p.jsx)(f,{sailSpeed:n,distance:r,width:i,height:a/4})}),Object(p.jsx)("g",{transform:"translate(0, ".concat(.4*a,")"),children:Object(p.jsx)(f,{sailSpeed:n,distance:r,width:t,height:.45*a})}),Object(p.jsx)("line",{x1:t/2,x2:t/2,y1:0,y2:1.1*a})]})},b=function(e){e.x;var t=e.height,a=e.distance,n=Object(s.useState)(.2),r=Object(o.a)(n,2),i=r[0],c=r[1],d=Object(s.useState)(1),u=Object(o.a)(d,2),h=u[0],f=u[1],b=Object(s.useMemo)((function(){for(var e=[],t=0;t<h;t++)e.push({heightRatio:1});return e}),[h]),v={transform:"skewX(-3)"},j=Object(l.useSpring)({loop:!0,to:[v,{transform:"skewX(3)"},v],from:v,config:{duration:3e3}}).transform;Object(s.useEffect)((function(){var e=Math.round(2*Math.random())+1,t=.1+.1*Math.random();f(e),c(t)}),[]);var x=Object(s.useMemo)((function(){return Math.random()}),[]),O=t;return Object(p.jsxs)(l.animated.g,{className:"boat",transform:j,children:[b.map((function(e,n){var r=.9*O,o=n/b.length*r,s=O/b.length*.8;return Object(p.jsx)("g",{className:"matt",transform:"translate(".concat(o,", 0)"),children:Object(p.jsx)(g,{width:s,height:t-t*i,sailSpeed:.5*x+1,distance:a})},n)})),Object(p.jsx)("g",{transform:"translate(0, ".concat(t-t*i,")"),children:Object(p.jsx)(m,{width:O,height:t*i})})]})},v=function(e){var t=e.boatHeight,a=e.containerHeight,n=e.distance,r=a/20*(n/2),o={points:"0,".concat(0,", ",r/2,",").concat(r/3," ").concat(r,",",0," ").concat(r/2," ").concat(r/2)},c={points:"0,".concat(r,", ").concat(r/2,",",0," ").concat(r,",").concat(r," ").concat(r/2," ").concat(r/3)},d=Object(s.useMemo)((function(){for(var e=[],n=0;n<30;n++){var r=Math.random()*t*1.3+a-1.5*t,i=Math.random()*t*2-t,o=Math.random()+.5;e.push({transform:"translate(".concat(i,", ").concat(r,")scale(").concat(o,")")})}return e}),[t,a]),u=Object(l.useSpring)({loop:!0,to:[o,c,o],from:o,config:{duration:300}}).points,h=Object(l.useSpring)({loop:!0,to:[].concat(Object(i.a)(d),[d[0]]),from:d[0],config:{duration:900}}).transform;return Object(p.jsx)(l.animated.g,{className:"bird",transform:h,children:Object(p.jsx)(l.animated.polygon,{points:u})})},j=function(e){var t=e.containerHeight,a=e.containerWidth,n=e.rightToLeft,r=e.startAt,i=e.size,o=e.distance,c=void 0===o?1:o,d=Object(s.useMemo)((function(){if(c>.5&&Math.random()>.5){for(var e=1+Math.round(20*Math.random()),t=[],a=0;a<e;a++)t.push(a);return t}return[]}),[c]),u=.3*-a,m=1.3*a,f={transform:"translate(".concat(n?m:u,", 0)")},g={transform:"translate(".concat(n?u:m,", 0)")};r&&(f.transform="translate(".concat(r,", 0)"));var j=Object(s.useMemo)((function(){return Math.random()}),[]),x=Object(l.useSpring)({from:f,to:g,config:{duration:h*(2-c*(1+j/10))}}).transform,O=.2*t*i*c;return Object(p.jsx)(l.animated.g,{transform:x,children:Object(p.jsxs)("g",{style:{opacity:c},transform:n?"scale(-1, 1)":"",children:[Object(p.jsx)("g",{transform:"translate(0, ".concat(t-O,")"),children:Object(p.jsx)(b,{x:0,height:O,distance:c})}),d.map((function(e){return Object(p.jsx)(v,{containerHeight:t,boatHeight:O,distance:c},e)}))]})})},x=function(e){var t=e.width,a=void 0===t?1200:t,i=e.height,l=void 0===i?100:i,h=Object(u.c)(a),m=Object(u.c)(l),f=Object(s.useReducer)((function(e,t){switch(t.type){case"removeBoat":return Object.entries(e).reduce((function(e,a){var i=Object(o.a)(a,2),s=i[0],l=i[1];return s!==t.payload?Object(r.a)(Object(r.a)({},e),{},Object(n.a)({},s,l)):e}),{});case"createBoat":default:var a=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).startAt,t=void 0===e?0:e,a=Object(c.v4)(),n=.8*Math.random()+.2,r=Math.random()>=.5,i=Math.round(3*Math.random())+1;return{id:a,distance:n,rightToLeft:r,size:i,createdAt:(new Date).getTime(),startAt:t}}(t.payload);return Object(r.a)(Object(r.a)({},e),{},Object(n.a)({},a.id,a))}}),{}),g=Object(o.a)(f,2),b=g[0],v=g[1];return Object(s.useEffect)((function(){var e=setTimeout((function(){v({type:"createBoat"})}),1e4);return function(){return clearTimeout(e)}}),[b,v]),Object(d.b)((function(){var e=new Date;Object.entries(b).reduce((function(t,a){var i=Object(o.a)(a,2),s=i[0],l=i[1];return e.getTime()<l.createdAt+13e4?Object(r.a)(Object(r.a)({},t),{},Object(n.a)({},s,l)):(v({type:"removeBoat",payload:s}),t)}),{})}),4e3),Object(s.useEffect)((function(){for(var e=0;e<5;e++)v({type:"createBoat",payload:{startAt:h*Math.random()}})}),[]),Object(p.jsx)("svg",{className:"BoatsIllustration",width:h,height:m,children:Object.entries(b).map((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1],r=n.distance,i=n.rightToLeft,s=n.size,l=n.startAt;return Object(p.jsx)(j,{distance:r,size:s,rightToLeft:i,containerHeight:m,containerWidth:h,startAt:l},a)}))})};t.a=x},31:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s}));var n=a(2),r=a.n(n),i=r.a.createContext({}),o=r.a.createContext({}),s=r.a.createContext({})},390:function(e,t,a){},44:function(e,t,a){"use strict";var n=a(10),r=a(8),i=a(2),o=a(26),s=a(678),l=a(7),c=a(688),d=a(16),u=a(24),p=a(18),h=a.n(p),m=a(23),f=a(1),g=function(e){var t=e.d,a=e.projection,n=e.project,s=e.palette,l=e.layer,d=e.width,u=e.height,p=e.animated,h=Object(c.a)().bounds(t),g=[a(h[0]),a(h[1])],b=Object(r.a)(g[0],2),v=b[0],j=b[1],x=Object(r.a)(g[1],2),O=x[0],y=x[1],w=[v,O].sort((function(e,t){return e>t?1:-1})),_=Object(r.a)(w,2),L=_[0],k=_[1],C=[j,y].sort((function(e,t){return e>t?1:-1})),T=Object(r.a)(C,2),q=T[0],A=T[1],R=!(isNaN(L)||isNaN(k)||isNaN(q)||isNaN(A))&&(L>d||q>u||k<0||A<0),N=Object(i.useState)(!1),M=Object(r.a)(N,2),S=M[0],P=M[1];Object(i.useEffect)((function(){setTimeout((function(){P(!0)}))}),[]);var z=n(t),F=Object(m.useSpring)({to:{d:z},immediate:!S});return Object(i.useEffect)((function(){o.a.rebuild()})),R?null:p?Object(f.jsx)(m.animated.path,{title:t.properties.shortname,d:F.d,className:"geopart","data-tip":l.tooltip?l.tooltip(t):void 0,"data-for":"geo-tooltip",style:{fill:void 0!==l.color&&void 0!==s?s[t.properties[l.color.field]]:"transparent"}}):Object(f.jsx)("path",{title:t.properties.shortname,d:z,className:"geopart","data-tip":l.tooltip?l.tooltip(t):void 0,"data-for":"geo-tooltip",style:{fill:void 0!==l.color&&void 0!==s?s[t.properties[l.color.field]]:"transparent"}})},b=function(e){var t,a=e.layer,r=e.projection,i=e.width,o=e.height,s=e.reverseColors,p=Object(c.a)().projection(r);if(!a.data)return console.info(a),null;if(a.data.features&&a.color&&a.color.field){var m=Object(u.uniq)(a.data.features.map((function(e){return e.properties[a.color.field]})));if(a.color.palette)t=a.color.palette;else if(a.color.generatedPalette){var b=Object(d.e)("map",a.data.features.length);t=m.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(l.a)({},t,b[a]))}),{})}}return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("g",{className:h()("ChoroplethLayer",{"reverse-colors":s}),children:a.data.features.filter((function(e){return e.geometry})).map((function(e,n){return Object(f.jsx)(g,{projection:r,project:p,palette:t,layer:a,d:e,width:i,height:o,animated:a.animated},e.properties.id||e.properties.name||n)}))})})},v=a(57),j=a(282),x=function(e){var t=e.projection,a=e.datum,n=e.layer,o=e.opacity,s=e.onGroupMouseEnter,l=e.onGroupMouseLeave,c=e.displayLabel,d=n.tooltip,u=a.latitude,p=a.longitude,h=a.size,g=a.color,b=a.label,v=a.rawSize,j=a.labelPosition,x=void 0===j?"right":j,O=a.labelSize,y=a.index,w=Math.sqrt(h/Math.PI),_=t([+p,+u]),L=Object(r.a)(_,2),k=L[0],C=L[1],T=Object(i.useState)(!1),q=Object(r.a)(T,2),A=q[0],R=q[1];Object(i.useEffect)((function(){setTimeout((function(){R(!0)}))}),[]);var N=Object(m.useSpring)({to:{transform:"translate(".concat(k,",").concat(C,")")},immediate:!A}).transform;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(m.animated.g,{className:"point-group",transform:N,style:{zIndex:O,opacity:o},onMouseEnter:function(){return s(y)},onMouseMove:function(){return s(y)},onMouseLeave:function(){return l()},"data-for":"geo-tooltip","data-tip":"function"===typeof d?d(a):void 0,children:[Object(f.jsx)("circle",{cx:0,cy:0,r:w,style:{fill:g},className:"marker"}),n.size&&n.size.displayMetric&&O>9?Object(f.jsx)("text",{x:0,y:.8*O*.33,textAnchor:"middle",fontSize:.8*O,fill:"white",children:v}):null,b&&c?Object(f.jsx)("text",{x:"right"===x?w+5:-w-5,y:w/2,fill:n.color&&n.color.labelsColor,textAnchor:"right"===x?"start":"end",fontSize:O,children:b}):null]})})},O=function(e){var t=e.layer,a=e.datum,n=e.thatIndex,o=e.opacity,s=e.stackedRowHeight,l=e.onGroupMouseEnter,c=e.onGroupMouseLeave,d=e.labelFontSize,u=e.projection,p=t.tooltip,h=a.latitude,g=a.longitude,b=a.size,v=a.label,j=Math.sqrt(b/Math.PI),x=u([+g,+h]),O=Object(r.a)(x,2),y=O[0],w=O[1],_=Object(i.useState)(!1),L=Object(r.a)(_,2),k=L[0],C=L[1];Object(i.useEffect)((function(){setTimeout((function(){C(!0)}))}),[]);var T=Object(m.useSpring)({to:{x2:y-j,y2:w,transformLabel:"translate(".concat(.01*window.innerWidth,", ").concat(a.labelY,")")},immediate:!k}),q=T.x2,A=T.y2,R=T.transformLabel;return Object(f.jsxs)(m.animated.g,{style:{opacity:o},onMouseEnter:function(){return l(n)},onMouseMove:function(){return l(n)},onMouseLeave:function(){return c()},"data-for":"geo-tooltip","data-tip":"function"===typeof p?p(a):void 0,children:[Object(f.jsx)(m.animated.g,{className:"label-container",transform:R,children:Object(f.jsx)("text",{style:{fontSize:d},children:v})}),Object(f.jsx)(m.animated.line,{x1:d*v.length*.5+.01*window.innerWidth,y1:a.labelY-.2*s,x2:q,y2:A})]})},y=function(e){var t=e.layer,a=e.projection,s=e.width,c=e.height,p=Object(i.useState)(null),h=Object(r.a)(p,2),g=h[0],b=h[1];Object(i.useEffect)((function(){o.a.rebuild()}));var y=Object(i.useMemo)((function(){if(t.data){var e={};t.data.forEach((function(a){var n=a.latitude+","+a.longitude;e[n]?void 0!==t.size&&(e[n].size+=isNaN(+a[t.size.field])?0:+a[t.size.field]):e[n]={label:t.label?a[t.label.field]:void 0,labelPosition:t.label?t.label.position:void 0,latitude:+a.latitude,longitude:+a.longitude,color:void 0!==t.color?a[t.color.field]:"default",size:void 0!==t.size&&void 0!==t.size.field?isNaN(+a[t.size.field])?0:+a[t.size.field]:0}}));var a,i=Object.entries(e).map((function(e){var t=Object(r.a)(e,2);t[0];return t[1]}));if(void 0!==t.color){var o=Object(u.uniq)(i.map((function(e){return e.color})));if(t.color.palette)a=t.color.palette;else{var p=Object(d.e)("map",o.length);a=o.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(l.a)({},t,p[a]))}),{})}}var h=s/300;void 0!==t.size&&void 0!==t.size.custom&&(h=parseInt(t.size.custom*s/100));var m=Object(j.a)(i.map((function(e){return e.size}))),f=[3,s*c/2e4].map((function(e){return Math.PI*e*e})),g=Object(v.a)().domain(m).range(f),b=Object(v.a)().domain(m).range([8,s/30]);return i=i.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{color:void 0!==t.color?a[e.color]:"grey",size:void 0!==t.size?void 0!==t.size.custom?h:g(e.size):s/100,rawSize:e.size,labelSize:void 0!==t.size?b(e.size):s*c/3e4})}))}}),[a,s,t]).filter((function(e){var t=e.latitude,a=e.longitude;return t&&a&&!isNaN(t)&&!isNaN(a)})).sort((function(e,t){return e.latitude>t.latitude?1:-1})),w=function(e){g!==e&&b(e)},_=function(){setTimeout((function(){null!==g&&b(null)}))},L=.1*c,k=.9*c/y.length,C=.02*window.innerHeight,T=k<C?k:C;return t.stackLabels&&(y=y.sort((function(e,t){return e.latitude>t.latitude?-1:1})).map((function(e,t){return Object(n.a)(Object(n.a)({},e),{},{labelY:k*t+L})}))),y=y.map((function(e,t){return Object(n.a)(Object(n.a)({},e),{},{index:t})})),Object(f.jsxs)("g",{className:"PointsLayer",children:[t.stackLabels?Object(f.jsx)("g",{className:"stacked-labels-container",children:Object(f.jsx)(m.Transition,{items:y,from:{opacity:0},enter:{opacity:1},leave:{opacity:0},children:function(e,n,r){var i=e.opacity;return Object(f.jsx)(O,{projection:a,datum:n,layer:t,opacity:null!==g?g===n.index?1:.1:i,thatIndex:n.index,onGroupMouseEnter:w,onGroupMouseLeave:_,stackedRowHeight:k,labelFontSize:T},n.label)}})}):null,Object(f.jsx)(m.Transition,{items:y,from:{opacity:0},enter:{opacity:1},leave:{opacity:0},children:function(e,n,r){var i=e.opacity;return Object(f.jsx)(x,{projection:a,datum:n,layer:t,opacity:null!==g?g===n.index?1:.1:i,index:n.index,onGroupMouseEnter:w,onGroupMouseLeave:_,displayLabel:!t.stackLabels},n.label)}})]})},w=a(9),_=a(121),L=function(e){var t=e.id,a=e.hovered,n=e.xDep,o=e.yDep,s=e.xDest,l=e.yDest,c=e.strokeWidth,u=e.color,p=void 0===u?"black":u,g=e.path,b=e.actualXDep,v=e.actualYDep,j=e.actualXDest,x=e.actualYDest,O=e.arrowLength,y=e.onMouseEnter,w=e.onMouseLeave,_=Object(i.useState)(!1),L=Object(r.a)(_,2),k=L[0],C=L[1];Object(i.useEffect)((function(){setTimeout((function(){C(!0)}))}),[]);var T=Object(m.useSpring)({to:{xDep:n,yDep:o,xDest:s,yDest:l,d:g,strokeWidth:Object(d.c)(c),arrowPath:"M ".concat(b," ").concat(v," L ").concat(j," ").concat(x)},immediate:!k}),q=T.d,A=T.strokeWidth;return Object(f.jsxs)("g",{onMouseEnter:y,onMouseLeave:w,className:h()("flow-group",{hovered:a}),children:[Object(f.jsx)("defs",{children:Object(f.jsx)("marker",{id:"triangle-".concat(t),viewBox:"0 0 ".concat(O," ").concat(O),refY:O/2,orient:"auto",children:Object(f.jsx)("path",{d:"M 0 0 L ".concat(O," ").concat(O/2," L 0 ").concat(O," Z"),fill:p})})}),Object(f.jsx)(m.animated.path,{d:q,strokeWidth:3*A,fill:"none",stroke:p,opacity:0}),Object(f.jsx)(m.animated.path,{d:q,strokeWidth:A,markerEnd:"url(#triangle-".concat(t,")"),fill:"none",stroke:p})]})},k=function(e){var t=e.layer,a=e.projection,o=e.width,s=e.height,c=e.projectionTemplate,p=Object(i.useMemo)((function(){if(t.data){var e,i=Object(v.a)().domain([0,Object(_.a)(t.data.map((function(e){return+e[t.size.field]})))]).range([1,o*s/2e4]),p=i.copy().range([0,o*s/1e5]),h=t.data.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{strokeWidth:i(+e[t.size.field]),arrowSize:p(t.data.strokeWidth)})}));if(void 0!==t.color){var m=Object(u.uniq)(h.map((function(e){return e[t.color.field]})));if(t.color.palette)e=t.color.palette;else{var f=Object(d.e)("map",m.length);e=m.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(l.a)({},t,f[a]))}),{})}h=h.map((function(a){return Object(n.a)(Object(n.a)({},a),{},{color:void 0!==t.color?e[a[t.color.field]]:"grey"})}))}return h.filter((function(e){var t=e.latitude_dep,a=e.longitude_dep,n=e.latitude_dest,r=e.longitude_dest;return t&&a&&n&&r&&!isNaN(t)&&!isNaN(a)&&!isNaN(n)&&!isNaN(r)})).map((function(e,n){var i=e.latitude_dep,l=e.longitude_dep,u=e.latitude_dest,p=e.longitude_dest,h=e.strokeWidth,m=e.arrowSize,f=e.color,g=a([+l,+i]),b=Object(r.a)(g,2),v=b[0],j=b[1],x=a([+p,+u]),O=Object(r.a)(x,2),y=O[0],w=O[1];if(t.hideOverflowingFlows&&(v<0||v>o||y<0||y>o||j<0||j>s||w<0||w>s))return null;var _="".concat(v,"-").concat(j,"-").concat(y,"-").concat(w),L=3*Object(d.c)(h),k=Object(d.b)(y-v,w-j),C=k.distance,T=k.radians,q=Object(d.f)(C-L,T),A=Object(r.a)(q,2),R=v+A[0],N=j+A[1],M=v,S=j,P="M ".concat(M," ").concat(S," L ").concat(R," ").concat(N),z=R<M?"right":"left",F=R>M?"right":"left";R<.26*o&&(F="right"),R>.75*o&&(F="left");var B=.02*o;return{id:_,arrowSize:m,xDep:v,yDep:j,xDest:y,yDest:w,strokeWidth:h,datum:e,layer:t,width:o,color:f,height:s,projectionTemplate:c,fontSize:B,path:P,actualXDep:M,actualYDep:S,actualXDest:R,actualYDest:N,arrowLength:L,depLabelTextAnchor:"right"===z?"start":"end",depLabelX:"right"===z?10:-10,depLabelY:.3*B,destLabelTextAnchor:"right"===F?"start":"end",destLabelX:"right"===F?10:-10,destLabelY:.3*B}})).filter((function(e){return e}))}return[]}),[a,o,t,s]),m=Object(i.useMemo)((function(){var e=p.reduce((function(e,a){var r=a.id,i=a.xDep,o=a.yDep,s=a.xDest,l=a.yDest,c=a.strokeWidth,d=a.depLabelX,u=a.depLabelY,p=a.depLabelTextAnchor,h=a.destLabelX,m=a.destLabelY,f=a.destLabelTextAnchor,g=a.fontSize,b=a.datum,v=b[t.label.fields[0]];e[v]?(e[v].largerStrokeWidth>c&&(e[v]=Object(n.a)(Object(n.a)({},e[v]),{},{largerStrokeWidth:c,x:i+d,y:o+u,textAnchor:p,fontSize:g})),e[v].flows=[].concat(Object(w.a)(e[v].flows),[r])):e[v]={label:b[t.label.fields[0]],largerStrokeWidth:c,x:i+d,y:o+u,textAnchor:p,fontSize:g,flows:[r]};var j=b[t.label.fields[1]];return e[j]?(e[j].largerStrokeWidth>c&&(e[j]=Object(n.a)(Object(n.a)({},e[j]),{},{largerStrokeWidth:c,x:s+h,y:l+m,textAnchor:f,fontSize:g})),e[j].flows=[].concat(Object(w.a)(e[j].flows),[r])):e[j]={label:b[t.label.fields[1]],largerStrokeWidth:c,x:s+h,y:l+m,textAnchor:f,fontSize:g,flows:[r]},e}),{});e=(e=Object.entries(e).map((function(e){var t=Object(r.a)(e,2),a=t[0],i=t[1];return Object(n.a)(Object(n.a)({id:a},i),{},{width:i.label.length*i.fontSize*.5,actualX:"start"===i.textAnchor?i.x:i.x-i.label.length*i.fontSize*.5,height:i.fontSize})}))).sort((function(e,t){return e.y>t.y?1:-1}));for(var a=0;a<e.length;a++)for(var i=a+1;i<e.length;i++){var o=e[a],s=e[i],l=o.x,c=o.y-o.height,d=o.x+o.width,u=o.y,h=s.x,m=s.y-s.height,f=s.x+s.width,g=c>s.y,b=u<m;if(!(d<h||l>f||g||b)&&(!g||b)){var v=Math.abs(o.y-(s.y-s.height));o.y-=v/2,s.y+=v/2}}return e=e.sort((function(e,t){return e.largerStrokeWidth>t.largerStrokeWidth?-1:1}))}),[p]),g=Object(i.useState)(void 0),b=Object(r.a)(g,2),j=b[0],x=b[1];return Object(f.jsxs)("g",{className:"FlowsLayer",children:[p.map((function(e,t){var a=e.id,n=e.arrowSize,r=e.xDep,i=e.yDep,o=e.xDest,s=e.yDest,l=e.strokeWidth,c=e.datum,d=e.layer,u=e.width,p=e.color,h=e.height,m=e.projectionTemplate,g=e.fontSize,b=e.path,v=e.actualXDep,O=e.actualYDep,y=e.actualXDest,w=e.actualYDest,_=e.arrowLength,k=e.depLabelTextAnchor,C=e.depLabelX,T=e.depLabelY,q=e.destLabelTextAnchor,A=e.destLabelX,R=e.destLabelY,N=j&&j.includes(a);return Object(f.jsx)(L,{hovered:N,id:a,arrowSize:n,xDep:r,yDep:i,xDest:o,yDest:s,strokeWidth:l,datum:c,layer:d,width:u,color:p,height:h,projectionTemplate:m,fontSize:g,path:b,actualXDep:v,actualYDep:O,actualXDest:y,actualYDest:w,arrowLength:_,depLabelTextAnchor:k,depLabelX:C,depLabelY:T,destLabelTextAnchor:q,destLabelX:A,destLabelY:R,onMouseEnter:function(){x([a])},onMouseLeave:function(){x(void 0)}},t)})),m.map((function(e,t){var a=e.id,n=e.label,r=e.textAnchor,i=e.x,o=e.y,s=e.fontSize,l=e.flows,c=!j||j.find((function(e){return l.includes(e)}));return Object(f.jsx)("g",{id:a,onMouseEnter:function(){x(l)},onMouseLeave:function(){x(void 0)},children:Object(f.jsx)("text",{id:a,className:h()("label",{"is-visible":c}),textAnchor:r,x:i,y:o,fontSize:s,children:n})})}))]})},C=function(e){var t=e.layer,a=e.projection,n=e.width,r=e.height,i=e.projectionTemplate;return Object(f.jsx)("g",{className:"CustomObjectsLayer",children:"function"===typeof t.renderObjects?t.renderObjects({data:t.data,projection:a,width:n,height:r,projectionTemplate:i}):t.data.map((function(e,o){return Object(f.jsx)("g",{children:t.renderObject({datum:e,projection:a,width:n,height:r,projectionTemplate:i})},o)}))})},T=a(20),q=["children","onMouseDown"],A=function(e){var t=e.children,a=e.onMouseDown,o=Object(T.a)(e,q),s=Object(i.useState)(!1),l=Object(r.a)(s,2),c=l[0],d=l[1];return Object(i.useEffect)((function(){var e;return c&&(console.log("setInterval"),e=setInterval(a,100)),function(){console.log("clearInterval"),clearInterval(e)}}),[c,a]),Object(f.jsx)("button",Object(n.a)(Object(n.a)({},o),{},{onMouseDown:function(){d(!0)},onMouseUp:function(){d(!1)},style:{background:c?"red":void 0},children:t}))},R=["value","onBlur"],N=function(e){var t=e.value,a=e.onBlur,n=(Object(T.a)(e,R),Object(i.useState)(t)),o=Object(r.a)(n,2),s=o[0],l=o[1];return Object(i.useEffect)((function(){l(t)}),[t]),Object(f.jsx)("input",{value:s,onChange:function(e){l(e.target.value)},onBlur:function(e){a(e.target.value)}})},M=a(685),S=a(31),P=function(e){var t=e.layers,a=e.position,o=e.layerFilter,s="fr"===Object(i.useContext)(S.b).lang?"L\xe9gende":"Legend";return Object(f.jsxs)("div",{className:"Legend ".concat("string"===typeof a?a:""),children:[Object(f.jsx)("h5",{className:"legend-main-title",children:s}),t.filter((function(e){return"function"!==typeof o||o(e)})).map((function(e,t){var a,i,o;if(e.size&&e.size.field&&(a=!0),e.color&&e.color.field){i=!0;var s,c=Object(M.a)(e.data.map((function(t){return t[e.color.field]})));if(e.color.palette)s=e.color.palette;else{var u=Object(d.e)("map",c.length);s=c.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(l.a)({},t,u[a]))}),{})}o=Object.entries(s)}return Object(f.jsxs)(f.Fragment,{children:[a?Object(f.jsx)("div",{className:"size-legend-container",children:Object(f.jsxs)("div",{className:"size-legend-item",children:[Object(f.jsxs)("span",{className:"size-icon-container",children:[Object(f.jsx)("span",{}),Object(f.jsx)("span",{})]}),Object(f.jsx)("span",{className:"label",children:e.size.title||e.size.field})]})},t):null,i?Object(f.jsxs)("div",{className:"color-legend-container",children:[Object(f.jsx)("h6",{className:"legend-title",children:e.color.title||e.color.field}),Object(f.jsx)("ul",{className:"modalities-list",children:o.map((function(e,t){var a=Object(r.a)(e,2),n=a[0],i=a[1];return Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{style:{background:i},className:"color-marker"}),Object(f.jsx)("span",{className:"label",children:n})]},t)}))})]},t+"b"):null]})}))]})};a(543),t.a=function(e){var t=e.width,a=void 0===t?1500:t,l=e.height,c=void 0===l?1500:l,u=e.title,p=e.layers,h=void 0===p?[]:p,m=e.projectionTemplate,g=e.projectionConfig,v=e.debug,j=void 0!==v&&v,x=e.withLegend,O=e.legendLayerFilter,w=Object(d.c)(a),_=Object(d.c)(c),L=Object(i.useState)(200),T=Object(r.a)(L,2),q=T[0],R=T[1],M=Object(i.useState)(0),S=Object(r.a)(M,2),z=S[0],F=S[1],B=Object(i.useState)(w/2),E=Object(r.a)(B,2),D=E[0],I=E[1],H=Object(i.useState)(_/2),W=Object(r.a)(H,2),$=W[0],G=W[1],Y=Object(i.useState)(-1.7475027),X=Object(r.a)(Y,2),V=X[0],U=X[1],J=Object(i.useState)(46.573642),Z=Object(r.a)(J,2),Q=Z[0],K=Z[1],ee=Object(i.useState)(m),te=Object(r.a)(ee,2),ae=te[0],ne=te[1];Object(i.useEffect)((function(){ne(m)}),[m]);var re=Object(i.useMemo)((function(){return{rotationDegree:0,centerX:2.4486203,centerY:46.8576176,scale:5*_}}),[_]),ie=Object(i.useMemo)((function(){var e=Object(n.a)({},re),t=Object(s.a)();switch(ae){case"World":e=Object(n.a)(Object(n.a)({},e),{},{scale:.5*_,centerX:-1,centerY:15});break;case"coast from Nantes to Bordeaux":e=Object(n.a)(Object(n.a)({},e),{},{scale:24*_,centerX:-1.7475027,centerY:46.573642,translationX:.4*w,translationY:.28*_});break;case"Poitou":e=Object(n.a)(Object(n.a)({},e),{},{scale:30*_,centerX:-1.7475927,centerY:47.4,translationX:.45*w,translationY:0});break;case"Poitou zoomed":e=Object(n.a)(Object(n.a)({},e),{},{scale:23*_,centerX:-1.7475927,centerY:47.4,translationX:.45*w,translationY:0});break;case"rotated Poitou":e=Object(n.a)(Object(n.a)({},e),{},{rotationDegree:58,scale:32*_,centerX:-1.7475027,centerY:46.573642,translationX:.29*w,translationY:.25*_})}return void 0!==g&&(e=Object(n.a)(Object(n.a)({},e),g)),R(e.scale),F(e.rotationDegree),U(e.centerX),K(e.centerY),void 0!==e.translationX?(I(e.translationX),G(e.translationY)):(e.translationX=w/2,e.translationY=_/2,I(w/2),G(_/2)),t.scale(e.scale),t.center([e.centerX,e.centerY]),e.rotationDegree&&t.angle(e.rotationDegree),t.translate([e.translationX,e.translationY]),t}),[w,_,re,g,ae]);return Object(f.jsxs)("div",{className:"GeographicMapChartWrapper",children:[u?Object(f.jsx)("h5",{className:"visualization-title",children:u}):null,j?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("h2",{children:["scale: ",q,", rotation: ",z,", translationX: ",D,", translationY: ",$,", centerX: ",V,", centerY: ",Q]}),Object(f.jsx)("div",{className:"table",children:Object(f.jsxs)("ul",{id:"horizontal-list",children:[Object(f.jsx)("li",{children:Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:Object(f.jsx)(A,{onMouseDown:function(){return R(1.6*q)},children:"scale+"})}),Object(f.jsx)("li",{children:Object(f.jsx)(A,{onMouseDown:function(){return R(q/1.6)},children:"scale-"})}),Object(f.jsx)("li",{children:Object(f.jsx)(N,{value:q,placeHolder:"entrez une valeur pour la scale",onBlur:function(e){var t=isNaN(+e)?q:+e;R(t)}})})]})}),Object(f.jsx)("li",{children:Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:Object(f.jsx)(A,{onMouseDown:function(){console.log("DOWN !!"),F(z+2)},children:"rotation+"})}),Object(f.jsx)("li",{children:Object(f.jsx)(A,{onMouseDown:function(){return F(z-2)},children:"rotation-"})})]})}),Object(f.jsx)("li",{children:Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:Object(f.jsx)(A,{onMouseDown:function(){return I(1.2*D)},children:"translationX+"})}),Object(f.jsx)("li",{children:Object(f.jsx)(A,{onMouseDown:function(){return I(.8*D)},children:"translationX-"})}),Object(f.jsxs)("li",{children:["b",Object(f.jsx)(A,{onMouseDown:function(){return G(1.2*$)},children:"translationY+"})]}),Object(f.jsx)("li",{children:Object(f.jsx)(A,{onMouseDown:function(){return G(.8*$)},children:"translationY-"})})]})}),Object(f.jsx)("li",{children:Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:Object(f.jsx)(A,{onMouseDown:function(){return U(V+.3)},children:"centerX+"})}),Object(f.jsx)("li",{children:Object(f.jsx)(A,{onMouseDown:function(){return U(V-.3)},children:"centerX-"})}),Object(f.jsxs)("li",{children:["b",Object(f.jsx)(A,{onMouseDown:function(){return K(Q+.3)},children:"centerY+"})]}),Object(f.jsx)("li",{children:Object(f.jsx)(A,{onMouseDown:function(){return K(Q-.3)},children:"centerY-"})}),Object(f.jsx)("li",{children:Object(f.jsx)(N,{value:V,placeHolder:"entrez une valeur pour la latitude",onBlur:function(e){var t=isNaN(+e)?V:+e;U(t)}})}),Object(f.jsx)("li",{children:Object(f.jsx)(N,{value:Q,placeHolder:"entrez une valeur pour la longitude",onBlur:function(e){var t=isNaN(+e)?Q:+e;K(t)}})})]})})]})})]}):null,Object(f.jsx)("svg",{className:"GeographicMapChart",width:w,height:_,viewBox:"0 0 ".concat(w," ").concat(_),children:h.map((function(e,t){switch(e.type){case"choropleth":return Object(f.jsx)(b,{layer:e,projection:ie,width:w,height:_,reverseColors:e.reverseColors},t);case"points":return Object(f.jsx)(y,{layer:e,projection:ie,width:w,height:_},t);case"flows":return Object(f.jsx)(k,{layer:e,projection:ie,width:w,height:_,projectionTemplate:ae},t);case"custom":return Object(f.jsx)(C,{layer:e,projection:ie,projectionTemplate:ae,width:w,height:_},t);default:return Object(f.jsx)("g",{children:Object(f.jsx)("text",{children:"Unsupported layer type"})},t)}}))}),x?Object(f.jsx)(P,{layerFilter:O,layers:h,position:x}):null,Object(f.jsx)(o.a,{id:"geo-tooltip"})]})}},447:function(e,t,a){},512:function(e,t,a){},538:function(e,t,a){},541:function(e,t,a){},542:function(e,t,a){},543:function(e,t,a){},544:function(e,t,a){},545:function(e,t,a){},55:function(e){e.exports=JSON.parse('[{"id":"intro-provinces","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/intro-provinces","datasets":"map_backgrounds/map_france_1789.geojson","titre_fr":"Carte des provinces \xe9tudi\xe9es : Poitou, Aunis, Saintonge, Angoumois (PASA)","comment_lire_fr":"","comment_cest_fait_fr":"Le fond de carte de cette visualisation a \xe9t\xe9 constitu\xe9 sous licence libre dans le cadre du programme Portic en agr\xe9geant de multiples sources et en les mettant en coh\xe9rence avec des m\xe9thodes de g\xe9omatique. Il est disponible ici : http://maps.portic.fr/","titre_en":"Map of the provinces investigated : Poitou, Aunis, Saintonge, Angoumois (PASA)","comment_lire_en":"","comment_cest_fait_en":"The basemap for this visual was created under free license as part of the PORTIC program by aggregating multiple sources and making them compatible using geomatics methods. It is available here: http://maps.portic.fr/"},{"id":"intro-ports","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/intro-ports","datasets":"map_backgrounds/map_france_1789.geojson,ports_locations_data_intro/ports_locations_data_intro.csv","titre_fr":"Carte des ports de la r\xe9gion PASA","comment_lire_fr":"Les disques repr\xe9sent\xe9s sont dimensionn\xe9s de mani\xe8re \xe0 ce que leur aire soit proportionnelle au nombre de d\xe9parts enregistr\xe9s dans chacun des ports de la r\xe9gion \xe9tudi\xe9e. Chacune des trois couleurs marque l\'appartenance du port \xe0 une province.","comment_cest_fait_fr":"Le fond de carte de cette visualisation a \xe9t\xe9 constitu\xe9 en agr\xe9geant de multiples sources et en les mettant en coh\xe9rence avec des m\xe9thodes de g\xe9omatique. <br/>Les donn\xe9es proviennent de la base de donn\xe9es Navigocorpus, qui comprend entre autres les cong\xe9s d\xe9livr\xe9s aux navires \xe0 leur d\xe9part. Ces donn\xe9es ont \xe9t\xe9 r\xe9\xe9labor\xe9es dans une API. La base est structur\xe9e sur les *pointcalls*, soit les indications d\'un lieu o\xf9 \xe0 une date donn\xe9e un navire est observ\xe9 dans son mouvement. Le filtre a permis de s\xe9lectionner les *pointcalls* o\xf9 les navires ont \xe9t\xe9 observ\xe9s directement \xe0 la sortie du port.","titre_en":"Map of PASA region ports","comment_lire_en":"The dot size is proportional to the number of departures recorded in each port of the region studied. Each of the three colors shows the province to which a port belongs.","comment_cest_fait_en":"The basemap for this visual was created by aggregating multiple sources and making them compatible using geomatics methods.<br/> Data originates from the Navigocorpus database, which among other data comprises the clearance documents issued to ships on departure. These data were re-processed in an API. The database structure is based on *point calls*, which indicate a location where, on a given date, a ship in motion was observed. A filter was used to select the *point calls* where ships were observed immediately after leaving the port."},{"id":"intro-bureaux","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/intro-bureaux","datasets":"map_backgrounds/map_france_1789.geojson,part_3_step3_viz_customs_offices_data/part_3_step3_viz_customs_offices_data.csv","titre_fr":"Carte des bureaux des fermes de la r\xe9gion PASA","comment_lire_fr":"La Direction des Fermes de La Rochelle se compose de sept bureaux. Nous en connaissons le nom et le si\xe8ge, indiqu\xe9 sur la carte, mais pas l\'\xe9tendue de juridiction. Cette incertitude a \xe9t\xe9 signal\xe9e par la couleur diffuse autour du si\xe8ge du bureau.","comment_cest_fait_fr":"Le fond de carte de cette visualisation a \xe9t\xe9 constitu\xe9 en agr\xe9geant de multiples sources et en les mettant en coh\xe9rence avec des m\xe9thodes de g\xe9omatique. Les bureaux de ferme ont \xe9t\xe9 localis\xe9s en fonction de la position de l\'un de leur port, puis d\xe9plac\xe9s arbitrairement pour des besoins de lisibilit\xe9 (ce choix est justifi\xe9 par le fait que leur p\xe9rim\xe8tre d\'action g\xe9ographique est relativement incertain).","titre_en":"Map of customs offices in the PASA region","comment_lire_en":"The La Rochelle customs region consisted of seven offices. We know their names and locations, as indicated on the map, but not the scope of their jurisdiction. This uncertainty is signaled by the diffuse color around the office location.","comment_cest_fait_en":"The basemap for this visual was created by aggregating multiple sources and making them compatible using geomatics methods. The location of each customs office was selected to correspond to the position of one of its ports, then arbitrarily moved for readability (this choice is justified by the fact that their geographical scope is relatively uncertain)."},{"id":"viz-principale-partie-1","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/viz-principale-partie-1","datasets":"decline_LR_partners/decline_LR_partners.csv, decline_longitudinal_data/decline_longitudinal_data.csv, decline_LR_partners/decline_LR_partners.csv,decline_LR_products/decline_LR_products.csv","titre_fr":"Le d\xe9clin de la r\xe9gion de La Rochelle suite \xe0 la perte du Canada","comment_lire_fr":"Le graphique du haut montre l\u2019\xe9volution en livres tournois des exportations fran\xe7aises. Elle est en augmentation nette durant le si\xe8cle. On remarque l\u2019effet n\xe9gatif des guerres maritimes. <br/>Le deuxi\xe8me graphique montre l\u2019\xe9volution en livres tournois des exportations de la direction des Fermes de La Rochelle (en vert). Il indique aussi la part de La Rochelle dans les exportations fran\xe7aises (barres orange). Le maintien de la valeur des exportations s\u2019accompagne d\u2019un d\xe9clin de la part de la direction des Fermes de La Rochelle dans les exportations fran\xe7aises. Le \\"pic\\" de 1747 est expliqu\xe9 par l\u2019organisation de convois au d\xe9part de La Rochelle cette ann\xe9e l\xe0. <br/>Le troisi\xe8me graphique montre l\u2019\xe9volution en livres tournois des exportations de la direction des Fermes de Bordeaux (en vert). Il indique aussi la part de Bordeaux dans les exportations fran\xe7aises (barres orange). Le dynamisme absolu et relatif \xe0 la France de la direction des Fermes de Bordeaux contraste avec la stabilit\xe9 absolue et le d\xe9clin relatif de la direction des Fermes de La Rochelle. <br/>Le quatri\xe8me graphique contraste la composition des exportations de La Rochelle en 1750 et en 1789. La longueur des \\"briques verticales\\" et la taille des polices repr\xe9sente la part de chaque produit. Seuls les produits totalisant ensemble au moins 90% de exportations sont individualis\xe9s. Le commerce de La Rochelle est beaucoup plus diversifi\xe9 en 1750 qu\u2019en 1789. Certaines exportations importantes (indigo, mercerie, \xe9toffes de laine et de soie...) sont devenues marginales. <br/>","comment_cest_fait_fr":"Les donn\xe9es proviennent de la base de donn\xe9es Toflit18, et plus particuli\xe8rement des flux tir\xe9s de son groupe de sources \\"Best Guess customs region prod x partner\\" qui permettent de raisonner au niveau des directions des fermes (et non de l\'ensemble de la France). Pour chacune des parties de la visualisation, seuls les exports sont pris en compte. <br/>La diversit\xe9 du commerce de la r\xe9gion est calcul\xe9e au moyen de l\'indice de Herfindahl-Hirschmann, soit la somme du carr\xe9 des parts du march\xe9 fran\xe7ais par classe de produits export\xe9s (sur la base de la classification \\"R\xe9volution & Empire\\" de Toflit18, visible dans le d\xe9tail de la troisi\xe8me partie). Dans les visualisations en ligne et en histogrammes, les trous indiquent des ann\xe9es pour lesquelles les sources sont manquantes.","titre_en":"The decline of the La Rochelle region following the loss of Canada","comment_lire_en":"The top chart shows the evolution of French exports measured in livres. They clearly increased throughout the century. The negative effect of the maritime wars is shown.<br/>The second chart shows the evolution of exports from the La Rochelle customs region measured in livres (in green). It also shows the share of La Rochelle in French exports (orange bars). The value of exports remained constant while the share of the La Rochelle customs region in French exports dropped. The peak of 1747 can be explained by the organization of convoys leaving La Rochelle that year.<br/>The third chart shows the evolution of exports in livres from the Bordeaux customs region (in green). It also shows Bordeaux\u2019s share of French exports (orange bars). The vitality of the Bordeaux customs region, in absolute terms and relative to France, contrasts with the absolute stability and relative decline of the La Rochelle customs region. <br/>The bottom chart compares the products exported by La Rochelle in 1750 and 1789. The length of the \\"vertical bricks\\" and the font size represent the share of each product. Only products totaling at least 90% of exports are individualized. The trade of La Rochelle was much more diversified in 1750 than in 1789. Several important export products (indigo, haberdashery, wool, and silk fabrics, etc.) became marginal. <br>","comment_cest_fait_en":"Data was drawn from the Toflit18 database, and more particularly from the flows in its \\"Best Guess customs region prod x partner\\" group of sources which provides information by customs region (rather than all of France). For each part of the visual, only exports were taken into account. <br> The diversity of trade in the region was calculated using the Herfindahl-Hirschmann index, i.e., the sum of the square of French market shares by class of exported product (based on the Toflit18 classification \\"Revolution & Empire\\", shown in the detail of the third part). Gaps in online visuals and histograms indicate years for which sources are missing."},{"id":"viz-principale-partie-2","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/viz-principale-partie-2","datasets":"part_2_toflit_viz_data/part_2_toflit_viz_data.csv,part_2_navigo_viz_data/part_2_navigo_viz_data.csv","titre_fr":"Une forte sp\xe9cialisation portuaire : le cas de la traite n\xe9gri\xe8re, du commerce du sel et de l\u2019eau-de-vie","comment_lire_fr":"Lecture du diagramme alluvial : \u202fle diagramme prend en compte toutes les exportations de la r\xe9gion (en haut) et les importations (en bas). La partie de gauche indique la composition par produit (en valeur) des \xe9changes de chaque bureau de Fermes de la r\xe9gion PASA et la partie de gauche par partenaire ext\xe9rieur. Ainsi, La Rochelle exporte surtout des produits coloniaux. La destination des produits coloniaux est ind\xe9termin\xe9e. Tonnay-Charente exporte surtout des eaux-de-vie. Les eaux-de-vie sont surtout export\xe9es en Grande-Bretagne et en Europe. Ce graphique montre bien les sp\xe9cialisations par produits des bureaux de Fermes de la r\xe9gion PASA et les destinations ou origines privil\xe9gi\xe9es pour chaque produit.   <br/>Lecture du radarplot : le diagramme prend en compte l\'ensemble des navires sortis des ports de la r\xe9gion \xe9tudi\xe9e. La jauge de ces navires est exprim\xe9e en tonneaux (soit 1.44 m\xe8tres cubes de volume). Gr\xe2ce au curseur, il est possible de s\xe9lectionner une fourchette plus r\xe9duite de tonnages, pour ce concentrer, par exemple, uniquement sur les unit\xe9s d\xe9passant 100 tx. De m\xeame, on peut visualiser, en cochant la ou les cases souhait\xe9es, uniquement les sous-ensembles des ports appartenant \xe0 un ou plusieurs bureaux des fermes de la r\xe9gion \xe9tudi\xe9e. Le radaplot se reconfigure alors en indiquant uniquement les groupes de destinations des navires du tonnage et au d\xe9part des ports du ou des bureaux s\xe9lectionn\xe9s. En survolant le radarplot, un encadr\xe9 appara\xeet qui fournit les pourcentage de chaque groupe de destinations. Les ports de destinations ont \xe9t\xe9 ici regroup\xe9s en reprenant les cat\xe9gories de la Balance du commerce de la base Toflit18 pour faciliter la comparaison entre la base sur la navigation et celle sur la valeur du commerce ext\xe9rieur.","comment_cest_fait_fr":"Les donn\xe9es du diagramme alluvial sont tir\xe9es de la base Toflit18 et concernent tous les \xe9changes avec l\'\xe9tranger (ports francs non pris en compte). Les flux sont tir\xe9s des sources \\"Best Guess customs region prod x partner\\" qui permettent de raisonner au niveau des directions des fermes (et non de l\'ensemble de la France). Les produits et les partenaires affich\xe9s sur la visualisation correspondent \xe0 des agr\xe9gations \xe9labor\xe9es sp\xe9cifiquement pour mettre en lumi\xe8re des circuits sp\xe9cialis\xe9s (faisant correspondre de mani\xe8re relativement identifiable : un ou plusieurs bureaux de ferme, un type de produit et un groupe de partenaires). <br/>Les donn\xe9es du second diagramme (diagramme dit \\"radar\\") sont issues de la base de donn\xe9es Navigocorpus. Sont pris en compte les flux en provenance des ports attach\xe9s \xe0 la direction des fermes de La Rochelle. Les destinations sont regroup\xe9es selon la m\xeame classification que la premi\xe8re visualisation afin de permettre la comparaison (agr\xe9gation it\xe9rative \xe0 partir des ports de destination).","titre_en":"Highly specialized ports: the slave trade, the salt trade, and the brandy trade","comment_lire_en":"How to read the alluvial chart: the chart presents all exports from the region (top) and imports to the region (bottom). The left side shows the distribution by product (in value) of the trade of each customs office in the PASA region and the right side shows the distribution by external partner. It shows that La Rochelle mainly exported colonial products. The destination of colonial products is undetermined. Tonnay-Charente mainly exported brandy. Brandy was mainly exported to Great Britain and Europe. This chart shows the products in which each PASA customs office specialized and the preferred destination and origin of each product. <br>How to read the radar plot: the chart presents all the ships leaving the ports of the region studied. Their tonnage is expressed in tonneaux (i.e., a volume of 1.44 cubic meters). Using the slider, you can select a smaller tonnage range and only focus, for example, on vessels of more than 100 tonneaux. Similarly, by checking the different boxes, you can view information limited to subsets of ports belonging to one or more customs offices of the region examined. The radar plot then changes to only show the groups of destinations of vessels with the selected tonnage leaving from ports in the selected customs office. When hovering over the radar plot, a box appears with the share of each group of destinations. Destination ports were grouped here using the Toflit18 Balance of Trade categories to make it easier to compare the navigation database with the foreign trade value database.","comment_cest_fait_en":"Alluvial plot data was drawn from the Toflit18 database and concern all trade with foreign countries (free ports were not included). The flows were drawn from the \\"Best Guess customs region prod x partner\\" sources which provide information for each customs region (rather than all of France). The products and partners displayed in the chart were aggregated to highlight specialized circuits (and to match in a relatively identifiable way one or several customs offices with a type of product and a group of partners).<br/> Data for the second chart (radar plot) was drawn from the Navigocorpus database. The flows originating from ports attached to the La Rochelle customs region were included. Destinations were grouped using the same classification as the first chart to allow a comparison between the two (iterative aggregation starting from the ports of destination)."},{"id":"viz-principale-partie-3","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/viz-principale-partie-3","datasets":"part_3_centralite_comparaison/part_3_centralite_comparaison.csv,map_backgrounds/map_france_1789.geojson,part_3_step1_viz_data/part_3_step1_viz_data.csv,flows_1787_around_La Rochelle/flows_1787_around_La Rochelle.gexf,flows_1787_around_Bordeaux/flows_1787_around_Bordeaux.gexf,flows_1787_around_Nantes/flows_1787_around_Nantes.gexf,part_3_step3_viz_customs_offices_data/part_3_step3_viz_customs_offices_data.csv,part_3_step3_viz_ports_data/part_3_step3_viz_ports_data.csv","titre_fr":"La Rochelle, port dominant mais pas structurant","comment_lire_fr":"La partie sup\xe9rieure de la visualisation permet de constater les diff\xe9rences entre les ports de de la r\xe9gion PASA sur deux dimensions : plus le c\xf4t\xe9 sup\xe9rieur du triangle est large, plus il y a eu de d\xe9parts en 1789 depuis le port; plus le triangle est haut, plus le tonnage moyen est \xe9lev\xe9. Le tonnage est exprim\xe9 en tonneaux de jauge (1 tx est approximativement 1.44 m\xe8tres cubes). En se pla\xe7ant avec la souris sur un port au choix, les donn\xe9es correspondantes s\'affichent. On distingue ainsi assez clairement les ports qui se limitent \xe0 une navigation locale (petit nombre de d\xe9parts, petit tonnage moyen), des grands ports de la r\xe9gion (grand nombre de d\xe9parts, et pr\xe9sence de gros tonnages). <br/>La deuxi\xe8me visualisation indique les r\xe9seaux des voyages dans trois amiraut\xe9s (La Rochelle, Bordeaux et Nantes). La taille des points repr\xe9sente le nombre de voyages. La couleur le fait que les ports sont dans l\u2019amiraut\xe9 (vert) ou non (orange). En cliquant sur les points, on peut obtenir le nom de chaque point. Le point \\"Charente\\" correspond au port \\"Tonnay-Charente\\". On constate que l\u2019amiraut\xe9 de La Rochelle a de nombreux ports importants reli\xe9s entre eux et \xe0 l\u2019ext\xe9rieur. Bordeaux et Nantes dominent beaucoup plus nettement leurs amiraut\xe9s et assurent une plus grande partie des liaisons ext\xe9rieures. <br/>La faible importance du port de La Rochelle est confirm\xe9e pour le troisi\xe8me graphique, qui indique la centralit\xe9 de chaque port dans son amiraut\xe9. Les deux mesures propos\xe9es (PageRank et betweeness centrality) ne donnent pas exactement les m\xeames r\xe9sultats. La \u201cbetweeness centrality\u201d ou \u201ccentralit\xe9 d\u2019interm\xe9diarit\xe9\u201d compte le nombre de plus courts chemins entre deux ports passant par le port donn\xe9 ; le \u201cpagerank\u201d mesure la connection relative \xe0 des ports eux-m\xeames bien connect\xe9s (voir https://fr.wikipedia.org/wiki/Centralit%C3%A9). Toutes les deux indiquent une moindre centralit\xe9 de La Rochelle. <br/>La derni\xe8re visualisation montre le manque de centralit\xe9 de La Rochelle. Ce bureau de Fermes n\u2019exporte presque pas de produits tir\xe9s de la r\xe9gion PASA (partie verte du cercle). Les six autres bureaux des Fermes, eux, exportent des produits de la r\xe9gion. La Rochelle se consacre aussi relativement moins aux exportations hors de la direction que Les Sables-d\u2019Olonne, Saint-Martin-de-R\xe9 ou Marennes (tailles des triangles orange par rapport aux triangles verts). Les autres ports dominants (Bordeaux, Nantes) exportent plus de produits de leurs r\xe9gions vers l\u2019ext\xe9rieur et ont une navigation plus tourn\xe9e vers l\u2019ext\xe9rieur.<br/>En survolant avec la souris les cercles (ou leur contenu) on obtient l\'information d\xe9taill\xe9 des pourcentages des donn\xe9es repr\xe9sent\xe9es. En cliquant sur chacun de sept bureaux, on peut appr\xe9cier le d\xe9tail des tonnages exp\xe9di\xe9s dans les ports rattach\xe9s \xe0 chaque bureau. Ce tonnage a \xe9t\xe9 agr\xe9g\xe9 \xe0 l\'int\xe9rieur des cercles indiquant la typologie r\xe9gionale des produits export\xe9s.","comment_cest_fait_fr":"Le fond de carte des visualisations a \xe9t\xe9 constitu\xe9 en agr\xe9geant de multiples sources et en les mettant en coh\xe9rence avec des m\xe9thodes de g\xe9omatique. <br/>Les donn\xe9es de la base Navigocorpus sont utilis\xe9es pour toutes les parties li\xe9es \xe0 la navigation.<br/>La premi\xe8re partie est constitu\xe9e \xe0 partir des cong\xe9s d\xe9livr\xe9s aux navires sortant d\'un port (*pointcalls*) de la r\xe9gion \xe9tudi\xe9e en 1789, puis transcrite \xe0 travers des objets graphiques dont la hauteur et la largeur repr\xe9sente respectivement le tonnage moyen (jauge) des navires parti du port, et le nombre total de sorties, permettant de distinguer diff\xe9rents types de ports dans la r\xe9gion.<br/>La seconde partie (graphes) est fond\xe9e sur les flux pr\xe9sents dans la base Navigocorpus pour l\'ann\xe9e 1787 (la compl\xe9tude des donn\xe9es de 1789 n\'\xe9tant pas suffisante pour effectuer des comparaisons valides). \xc0 partir des flux enregistr\xe9s dans les ports, nous avons isol\xe9 trois corpus: les ports de l\'amiraut\xe9 de Bordeaux, ceux de l\'amiraut\xe9 de Nantes, et celui des trois amiraut\xe9s de La Rochelle, Marennes et Les Sables-d\'Olonne, correspondants \xe0 la r\xe9gion Poitou-Aunis-Saintonge objet de notre \xe9tude de cas. Apr\xe8s exp\xe9rimentation, cette diff\xe9rence (une versus trois amiraut\xe9s) n\'occasionne pas de changement important dans les visualisations et les m\xe9triques. Nous avons ensuite regroup\xe9 pour chaque corpus les voyages par ports. <br/>Les n\u0153uds affich\xe9s sur la visualisation repr\xe9sentent donc un port, et les liens un ou plusieurs voyages r\xe9alis\xe9s entre deux ports en 1787. La taille des n\u0153uds correspond \xe0 leur degr\xe9 dans le r\xe9seau, c\'est-\xe0-dire dans ce cas au nombre de ports avec lesquels ils ont \xe9t\xe9 mis en relation par des voyages en 1787.<br/>La troisi\xe8me partie de la visualisation m\xe9lange des donn\xe9es de Navigocorpus et de Toflit18.<br/>Pour ce qui est des objets visuels de la carte, les portions de cercle sont tir\xe9es des \xe9tats d\'export enregistr\xe9s dans Toflit18, divis\xe9s suivant l\'origine des produits commercialis\xe9s (dans la r\xe9gion ou hors de la r\xe9gion) et agr\xe9g\xe9s par leur valeur commerciale en livres tournois. Les triangles correspondent aux \xe9tats de sortie de port enregistr\xe9s dans Navigocorpus, divis\xe9s suivant la destination des navires (dans la r\xe9gion ou hors de la r\xe9gion) et agr\xe9g\xe9s  par part du tonnage cumul\xe9 des navires partis des ports rattach\xe9s \xe0 chaque bureau de ferme (les ports de l\'\xeele de Bouin et de Beauvoir-sur-mer sont exclus car non rattach\xe9s aux bureaux de la direction des fermes, bien que situ\xe9s dans l\'amiraut\xe9 des Sables-d\'Olonne). En cliquant sur les objets visuels des bureaux des fermes, on obtient une visualisation du d\xe9tail des ports pour chaque bureau : ces derniers sont dimensionn\xe9s en deux classes de taille (plus ou moins de mille tonneaux cumul\xe9s pour 1789), et les triangles sont \xe9galement proportionn\xe9s en fonction de la part des voyages vers l\u2019ext\xe9rieur et vers l\'int\xe9rieur de la r\xe9gion PASA. Les deux cong\xe9s d\'Esnandes (bureau de La Rochelle) ne sont pas pris en compte car leur destination n\'est pas indiqu\xe9e.<br/>Dans l\'encart intitul\xe9 \\"Comparaison avec les bureaux de fermes et ports dominants d\'autres directions en 1787\\", les objets visuels permettant de faire la comparaison sont similaires \xe0 deux nuances pr\xe8s : ils sont construits avec les donn\xe9es de la Ferme g\xe9n\xe9rale de 1787, et les donn\xe9es de navigation concernent le port dominant de chaque direction des fermes, et non l\'ensemble des ports.","titre_en":"La Rochelle, a dominating port but not a regional hub","comment_lire_en":"The top part of the chart displays the differences between the PASA region ports according to varying triangle dimensions: the wider the top of the triangle, the more ships departed from the port in 1789; the higher the triangle, the higher their average tonnage. The tonnage is expressed in tonneaux (1 tx is approximately 1.44 cubic meters). By hovering over a port, the data relevant to the port is displayed. A fairly clear difference can be observed between ports restricted to local navigation (small number of departures and small average tonnage) and the major ports of the region (high number of departures and high tonnage).<br/>The second chart shows the network of flows in three Amiraut\xe9s (La Rochelle, Bordeaux, and Nantes). The size of the points represents the number of journeys. The color indicates whether the ports belong to the Amiraut\xe9 (green) or not (orange). The name of each port appears when you click on the point. The \\"Charente\\" point corresponds to the \\"Tonnay-Charente\\" port. The La Rochelle Amiraut\xe9 clearly has many important ports connected to each other and to the outside. Bordeaux and Nantes dominate their Amiraut\xe9 much more clearly and account for a greater share of external flows.<br/>The weakness of the port of La Rochelle is confirmed in the third chart, which shows how central each port was within its Amiraut\xe9. The two measures proposed (PageRank and betweenness centrality) do not give exactly the same results. \u201cBetweenness centrality\u201d counts the number of shortest routes between two ports passing through a given port; \u201cPageRank\u201d measures the connection with other well-connected ports (see https://en.wikipedia.org/wiki/Centralit %C3%A9). Both show that La Rochelle was less central. <br/>The last chart shows the low centrality of La Rochelle. Its customs office exported almost no products from the PASA region (green part of the circle). The other six customs offices exported regional products. La Rochelle also exported somewhat less to destinations outside its customs region than Les Sables-d\'Olonne, Saint-Martin-de-R\xe9, or Marennes (size of orange triangles compared to green triangles). The other dominant ports (Bordeaux and Nantes) exported more products from their region to the outside and were more outward-looking in terms of navigation.<br/>When hovering over the dots (or their content), detailed information appears on the proportion of the data represented. By clicking on each of the seven customs offices, the detailed tonnage shipped to and from the ports attached to it appears. This tonnage was aggregated inside the dots and indicates the regional typology of the exported products.","comment_cest_fait_en":"Le fond de carte des visualisations a \xe9t\xe9 constitu\xe9 en agr\xe9geant de multiples sources et en les mettant en coh\xe9rence avec des m\xe9thodes de g\xe9omatique. <br/>Les donn\xe9es de la base Navigocorpus sont utilis\xe9es pour toutes les parties li\xe9es \xe0 la navigation.<br/>La premi\xe8re partie est constitu\xe9e \xe0 partir des cong\xe9s d\xe9livr\xe9s aux navires sortant d\'un port (*pointcalls*) de la r\xe9gion \xe9tudi\xe9e en 1789, puis transcrite \xe0 travers des objets graphiques dont la hauteur et la largeur repr\xe9sente respectivement le tonnage moyen (jauge) des navires parti du port, et le nombre total de sorties, permettant de distinguer diff\xe9rents types de ports dans la r\xe9gion.<br/>La seconde partie (graphes) est fond\xe9e sur les flux pr\xe9sents dans la base Navigocorpus pour l\'ann\xe9e 1787 (la compl\xe9tude des donn\xe9es de 1789 n\'\xe9tant pas suffisante pour effectuer des comparaisons valides). \xc0 partir des flux enregistr\xe9s dans les ports, nous avons isol\xe9 trois corpus: les ports de l\'amiraut\xe9 de Bordeaux, ceux de l\'amiraut\xe9 de Nantes, et celui des trois amiraut\xe9s de La Rochelle, Marennes et Les Sables-d\'Olonne, correspondants \xe0 la r\xe9gion Poitou-Aunis-Saintonge objet de notre \xe9tude de cas. Apr\xe8s exp\xe9rimentation, cette diff\xe9rence (une versus trois amiraut\xe9s) n\'occasionne pas de changement important dans les visualisations et les m\xe9triques. Nous avons ensuite regroup\xe9 pour chaque corpus les voyages par ports. <br/>Les n\u0153uds affich\xe9s sur la visualisation repr\xe9sentent donc un port, et les liens un ou plusieurs voyages r\xe9alis\xe9s entre deux ports en 1787. La taille des n\u0153uds correspond \xe0 leur degr\xe9 dans le r\xe9seau, c\'est-\xe0-dire dans ce cas au nombre de ports avec lesquels ils ont \xe9t\xe9 mis en relation par des voyages en 1787.<br/>La troisi\xe8me partie de la visualisation m\xe9lange des donn\xe9es de Navigocorpus et de Toflit18.<br/>Pour ce qui est des objets visuels de la carte, les portions de cercle sont tir\xe9s des \xe9tats d\'export enregistr\xe9s dans Toflit18, divis\xe9s suivant l\'origine des produits commerc\xe9s (dans la r\xe9gion ou hors de la r\xe9gion) et agr\xe9g\xe9s par leur valeur commerciale en livres tournois. Les triangles correspondent aux \xe9tats de sortie de port enregistr\xe9s dans Navigocorpus, divis\xe9s suivant la destination des navires (dans la r\xe9gion ou hors de la r\xe9gion) et agr\xe9g\xe9s par part du tonnage cumul\xe9 des navires partis des ports rattach\xe9s \xe0 chaque bureau de ferme. En cliquant sur les objets visuels des bureaux des fermes, on obtient une visualisation du d\xe9tail des ports pour chaque bureau : ces derniers sont dimensionn\xe9s en deux classes de taille (plus ou moins de mille tonneaux cumul\xe9s pour 1789), et les triangles sont \xe9galement proportionn\xe9s en fonction de la part des voyages vers l\u2019ext\xe9rieur de la r\xe9gion PASA.<br/>Dans l\'encart intitul\xe9 \\"Comparaison avec les bureaux de fermes et ports dominants d\'autres directions en 1787\\", les objets visuels permettant de faire la comparaison sont similaires \xe0 deux nuances pr\xe8s : ils sont construits avec les donn\xe9es de la Ferme g\xe9n\xe9rale de 1787, et les donn\xe9es de navigation concernent le port dominant de chaque direction des fermes, et non l\'ensemble des ports."},{"id":"partie-1-produits-importants-pour-la-rochelle","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/partie-1-produits-importants-pour-la-rochelle","datasets":"comparison_products_exports_part_la_rochelle/comparison_products_exports_part_la_rochelle.csv","titre_fr":"Produits dont les valeurs d\'exports sont les plus importantes en 1789 : comparaison de direction des fermes de La Rochelle \xe0 la moyenne fran\xe7aise","comment_lire_fr":"La visualisation permet de comparer la part des principales cat\xe9gories de produits export\xe9s depuis la direction des Fermes de La Rochelle vers l\'\xe9tranger avec la moyenne nationale. On constate l\'importance des exportations des eaux-de-vie et du sel pour la direction des Fermes de la Rochelle ; qu\'elle se situe dans la moyenne nationale pour ce qui est des exportations des produits coloniaux (sucre, indigo, caf\xe9: pour ce dernier produit elle d\xe9passe un peu la moyenne) et des toiles de coton (essentiellement pour la traite). Par contre, elle n\u2019exporte pas beaucoup de toiles de chanvre et de lin. Parmi les biens importants dans les exportations fran\xe7aises qu\u2019on ne retrouve pas dans ce graphique, se trouvent les soieries et les draps de laine. Les exportations de la direction des Fermes de La Rochelle sont moins riches en produits manufactur\xe9s que celles de la France en g\xe9n\xe9ral. Les \\"Objets d\u2019art et d\u2019histoire naturelle\\" sont ici des cauris, soit des coquillages destin\xe9s \xe0 la traite n\xe9gri\xe8re.","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base Toflit18. Apr\xe8s avoir isol\xe9 les flux appropri\xe9s au niveau national et local, les produits ont \xe9t\xe9 agr\xe9g\xe9s au moyen de la classification \\"R\xe9volution & Empire\\" de Toflit18, puis rapport\xe9s \xe0 leur part vis-\xe0-vis des exportations totales de la direction des fermes de la Rochelle, d\u2019une part, et de la France enti\xe8re d\u2019autre part.<br/>Les exportations vers les ports francs ne sont pas incluses dans les comptages de cette visualisation.","titre_en":"Products with the highest export value in 1789: comparison between the La Rochelle customs region and the French average","comment_lire_en":"This chart compares the share of the main categories of products exported from the La Rochelle customs region with the national average. We note the importance of brandy and salt exports from the la Rochelle customs region. We also note that this region was close to the national average as regards exports of colonial products (sugar, indigo, and coffee: for coffee, it was a little above average) and cotton fabric (mainly for trade). However, the region did not export much hemp or linen fabric. Other goods that held a large share in French exports but do not appear in this chart are silks and wool fabric. The exports from the La Rochelle customs offices included less manufactured products than those of France in general. The \\"Art and natural history objects\\" mentioned here are cowries or shells used for the slave trade.","comment_cest_fait_en":"Data for this chart was drawn from the Toflit18 database. After isolating the relevant flows at national and local level, the products were aggregated using the Toflit18 \\"Revolution & Empire\\" classification, and their share was calculated in the total exports of the La Rochelle customs region on the one hand, and of France as a whole on the other.<br> Exports to free ports were not included in the calculations for this visual."},{"id":"partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie","datasets":"global_evolution_la_rochelle_imports_exports/global_evolution_la_rochelle_imports_exports.csv","titre_fr":"\xc9volution globale de la part des \xe9changes de La Rochelle par rapport \xe0 l\'ensemble de la France","comment_lire_fr":"Ce graphique permet de visualiser le pourcentage des exportations (en orange) et des importations (en bleu-vert) assur\xe9es par la direction des Fermes de La Rochelle par rapport au total des exportations et des importations de la France. En survolant les barres de chaque ann\xe9e, les donn\xe9es s\'affichent. L\'ensemble permet de constater un d\xe9clin progressif au cours du XVIIIe si\xe8cle, en d\xe9pit d\'un sursaut sans lendemain \xe0 l\'occasion des exp\xe9ditions sous convoi en 1747.","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base Toflit18. Les flux nationaux ont \xe9t\xe9 calcul\xe9s en se fondant sur les enregistrements au niveau national (sources \\"Best Guess National partner\\") et les flux de La Rochelle avec ceux enregistr\xe9s au niveau local (sources \\"Best Guess region prod x part\\"). Les ports francs sont exclus des comptages.","titre_en":"Evolution of the share of La Rochelle trade in relation to France as a whole","comment_lire_en":"This chart shows the percentage of exports (in orange) and imports (in blue-green) of the La Rochelle customs region in relation to France\'s total exports and imports. Specific data can be seen by hovering over the bars for each year. The chart as a whole shows a gradual decline during the eighteenth century, despite an exceptional peak due to the expeditions under convoy in 1747.","comment_cest_fait_en":"Data for this chart was drawn from the Toflit18 database. Calculations of national flows were based on national records (sources: \\"Best Guess National partner\\") and flows from La Rochelle were based on local records (sources: \\"Best Guess region prod x part\\"). Free ports were excluded from the calculations."},{"id":"partie-1-pays-port-d-attache","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/partie-1-pays-port-d-attache","datasets":"origines_bateaux_etrangers_partant_de_la_region/origines_bateaux_etrangers_partant_de_la_region.csv","titre_fr":"Pays d\'attache des navires partant de la r\xe9gion en 1789","comment_lire_fr":"Le graphique permet de visualiser l\'importance des diff\xe9rents pavillons \xe9trangers sortis des ports de la r\xe9gion PASA. Cette importance se mesure par la somme des tonnages des navires sortis de ces ports, exprim\xe9e en tonneaux (1 tx fait approximativement 1.44 m\xe8tres cubes). La primaut\xe9 de la navigation britannique et des Provinces-Unies \xe9merge ainsi avec force. ","comment_cest_fait_fr":"Les donn\xe9es sont tir\xe9es de la base Navigocorpus. Nous avons d\xe9limit\xe9 les navires partis de la r\xe9gion PASA en 1789. Nous avons ensuite agr\xe9g\xe9 les ports d\'attache des navires \xe9trangers par pays, et calcul\xe9 leur tonnage cumul\xe9.","titre_en":"Home country of ships departing from the region in 1789","comment_lire_en":"The chart shows the share of departing ships sailing under different foreign flags from the ports of the PASA region. This share is measured by adding up the tonnages of ships leaving the ports, expressed in tonneaux (1 tx is approximately 1.44 cubic meters). The primacy of Great Britain and the United Provinces in navigation is clear. ","comment_cest_fait_en":"Data was drawn from the Navigocorpus database. We identified the ships that left the PASA region in 1789. We then aggregated the home ports of foreign ships by country and calculated their cumulative tonnage."},{"id":"partie-1-ports-dattache","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/partie-1-ports-dattache","datasets":"hierarchie_ports_dattache_des_navires_partant_de_la_region/hierarchie_ports_dattache_des_navires_partant_de_la_region.csv","titre_fr":"Ports d\'attache des navires partant de la r\xe9gion PASA en 1789","comment_lire_fr":"Le diagramme permet de visualiser l\'importance respective des diff\xe9rents ports d\'attache des navires dans la navigation \xe0 la sortie des ports de la direction des Fermes de La Rochelle en 1789. Nous avons additionn\xe9 le tonnage lors de chaque sortie (pour un m\xeame navire sortant plusieurs fois, son tonnage a \xe9t\xe9 donc multipli\xe9 par le nombre de sorties). Les rectangles indiquent le toponyme de chaque port avec le tonnage d\u2019attache, exprim\xe9 en tonneaux de mer (1 tx fait approximativement 1.44 m\xe8tres cubes). La r\xe9gion PASA n\u2019est un port d\u2019attache que pour moins de la moiti\xe9 des tonnages sortant: les navires de la r\xe9gion (repr\xe9sent\xe9s sous fond vert) ont un tonnage \xe0 peine sup\xe9rieur \xe0 celui des navires des autres ports fran\xe7ais ext\xe9rieurs \xe0 la r\xe9gion \xe9tudi\xe9e. L\'importance des ports fluviaux, comme Port-d\u2019Envaux, est remarquable. La Rochelle n\u2019est qu\u2019un port d\u2019attache parmi d\u2019autres. Le diagramme permet \xe9galement de relativiser la part de la navigation \xe9trang\xe8re: ici les couleurs d\xe9signent chaque pays de l\'\xe9poque.","comment_cest_fait_fr":"Les donn\xe9es sont tir\xe9es de la base Navigocorpus. Nous avons s\xe9lectionn\xe9 les navires partis de la r\xe9gion PASA en 1789. Nous avons ensuite agr\xe9g\xe9 les navires par port d\'attache (fran\xe7ais ou \xe9tranger), et repr\xe9sent\xe9 sur le diagramme leur tonnage cumul\xe9.","titre_en":"Home ports of ships departing from the PASA region in 1789","comment_lire_en":"The chart shows the relative importance of the different home ports of ships departing from the ports of the La Rochelle customs region in 1789. We added up the tonnage of each departure (for the same ship leaving several times, its tonnage was multiplied by the number of departures). The rectangles contain the name of each port and the associated tonnage expressed in tonneaux (1 tx is approximately 1.44 cubic meters). The PASA region was only a home port for less than half of the outgoing tonnage: the vessels of the region (represented by a green background) had a tonnage slightly higher than the tonnage of vessels from French ports outside the region. The importance of river ports, such as Port-d\'Envaux, is noteworthy. La Rochelle was just one of many home ports. The chart also puts the share of foreign navigation into perspective: here the colors designate each country at the time.","comment_cest_fait_en":"Data was drawn from the Navigocorpus database. We selected the ships that left the PASA region in 1789. We then aggregated the vessels by home port (French or foreign) and represented their cumulative tonnage in the chart."},{"id":"partie-1-ports-destinations","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/partie-1-ports-destinations","datasets":"hierarchie_destinations_des_navires_partant_de_la_region/hierarchie_destinations_des_navires_partant_de_la_region.csv","titre_fr":"Destinations des navires partant depuis la r\xe9gion PASA vers l\'\xe9tranger en 1789","comment_lire_fr":"Le diagramme permet de visualiser l\'importance respective des diff\xe9rentes destinations \xe9trang\xe8res des navires sortis des ports de la direction des Fermes de La Rochelle en 1789. Chaque rectangle indique le tonnage cumul\xe9 par destination. La surface des rectangles est proportionnelle au tonnage, exprim\xe9 en tonneaux de mer (1 tx fait approximativement 1.44 m\xe8tres cubes). La couleur de fond permet de visualiser les ports appartenant au m\xeame \xe9tat de l\'\xe9poque. Il est \xe0 remarquer que parfois la destination est vague: \\"mer Baltique\\". Le diagramme permet de constater le poids des destinations britanniques et des pays de la mer du Nord et de la Baltique. L\'activit\xe9 n\xe9gri\xe8re ressort aussi clairement par les destinations en Afrique (C\xf4te d\'Or et C\xf4te d\'Ang\xf4le).","comment_cest_fait_fr":"Les donn\xe9es sont tir\xe9es de la base Navigocorpus. Nous avons s\xe9lectionn\xe9 les navires partis de la r\xe9gion PASA en 1789 en direction de l\'\xe9tranger. Nous avons ensuite agr\xe9g\xe9 les donn\xe9es par port d\xe9clar\xe9 comme destination et repr\xe9sent\xe9 leur tonnage cumul\xe9.","titre_en":"Destinations of ships sailing from the PASA region to another country in 1789","comment_lire_en":"The chart shows the relative importance of the different foreign destinations of ships departing from the ports of the La Rochelle customs region in 1789. Each rectangle shows the cumulative tonnage by destination. The size of the rectangles is proportional to the tonnage expressed in tonneaux (1 tx is approximately 1.44 cubic meters). The background color shows the ports belonging to the same country at the time. It should be noted that sometimes the destination is vague, such as \\"Baltic Sea\\". The chart shows the weight of British destinations and of North Sea and Baltic countries. Destinations in Africa (C\xf4te d\'Or and C\xf4te d \'Angole) clearly confirm the slave trade.","comment_cest_fait_en":"Data was drawn from the Navigocorpus database. We selected the ships that sailed from the PASA region to a foreign country in 1789. We then aggregated the data by port reported as destination and represented their cumulative tonnage."},{"id":"partie-1-ports-dattache-vers-etranger","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/partie-1-ports-dattache-vers-etranger","datasets":"hierarchie_destinations_des_navires_partant_de_la_region_vers_letranger/hierarchie_destinations_des_navires_partant_de_la_region_vers_letranger.csv","titre_fr":"Ports d\u2019attache des navires en direction de l\u2019\xe9tranger en 1789","comment_lire_fr":"Le diagramme permet de visualiser l\'importance respective des diff\xe9rents ports d\'attache des navires dans la navigation \xe0 la sortie des ports de la direction des Fermes de La Rochelle en 1789 en direction de l\u2019\xe9tranger. Nous avons additionn\xe9 le tonnage lors de chaque sortie (pour un m\xeame navire sortant plusieurs fois, son tonnage a \xe9t\xe9 donc multipli\xe9 par le nombre de sorties). Les rectangles indiquent le toponyme de chaque port avec le tonnage d\u2019attache, exprim\xe9 en tonneaux de mer (1 tx fait approximativement 1.44 m\xe8tres cubes). Le couleur de fond d\xe9signe chaque pays de l\'\xe9poque. Le diagramme permet d\'abord de constater que le commerce en direction de l\u2019\xe9tranger est domin\xe9 par des navires \xe9trangers, et surtout par les Britanniques. Amsterdam est toutefois le principal port d\u2019attache, La Rochelle n\u2019est qu\u2019en deuxi\xe8me place, suivi par Londres. ","comment_cest_fait_fr":"Les donn\xe9es sont tir\xe9es de la base Navigo.  Nous avons s\xe9lectionn\xe9 les navires partis de la r\xe9gion PASA en 1789 en direction de l\'\xe9tranger. Nous avons ensuite agr\xe9g\xe9 les donn\xe9es par port d\'attache et repr\xe9sent\xe9 leur tonnage cumul\xe9.","titre_en":"Home port of ships sailing to another country in 1789","comment_lire_en":"The chart shows the relative importance of the different home ports of ships sailing from the ports of the La Rochelle customs region to another country in 1789. We added up the tonnage of each trip (for the same ship leaving several times, its tonnage was multiplied by the number of trips). The rectangles contain the name of each port and the associated tonnage expressed in tonneaux (1 tx is approximately 1.44 cubic meters). The background color refers to each country at the time. The chart mainly shows that trade to foreign countries was dominated by foreign vessels, and especially by the British. Amsterdam, however, was the main home port. La Rochelle was only in second position, followed by London.\xa0","comment_cest_fait_en":"Data was drawn from the Navigo database. We selected the ships that sailed from the PASA region to a foreign country in 1789. We then aggregated the data by home port and represented their cumulative tonnage."},{"id":"partie-2-part-navigation-francaise","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/partie-2-part-navigation-francaise","datasets":"part_navigation_fr/part_navigation_fr.csv","titre_fr":"Part de la navigation fran\xe7aise dans la r\xe9gion","comment_lire_fr":"Cette visualisation permet de diff\xe9rencier les ports de la r\xe9gion en fonction de l\'ampleur de leurs trafics et de leur capacit\xe9 d\'attirer les flottes \xe9trang\xe8res. L\'aire des disques correspond au tonnage cumul\xe9 des navires sortis de chaque port en 1789, tout pavillon confondu. Le tonnage est exprim\xe9 en tonneaux de mer (1 tx fait approximativement 1.44 m\xe8tres cubes). La couleur permet de distinguer l\'importance de la navigation assur\xe9e par de navires \xe9trangers, d\xe9termin\xe9s \xe0 partir de l\'indication de leur port d\'attache: on constate que seuls quelques tr\xe8s petits ports (en violet) ne sont pas fr\xe9quent\xe9s par de navires \xe9trangers. Les ports les plus ouverts \xe0 la navigation \xe9trang\xe8re (en orange) ne sont toutefois pas forc\xe9ment les plus importants par tonnage total : on distingue ainsi Rochefort, dont l\'arsenal est approvisionn\xe9 par les navires du Nord de l\'Europe, le port de Tonnay-Charente, grand exportateur d\'eau-de-vie, et certains ports du sel (\xeele de R\xe9 et Noirmoutier)","comment_cest_fait_fr":"Les donn\xe9es proviennent de la base Navigocorpus, et concernent les d\xe9parts de navires en 1789 depuis les ports de la r\xe9gion Poitou-Aunis-Saintonge \xe9tudi\xe9e (*pointcalls* observ\xe9s).L\'aire des disques correspond au tonnage cumul\xe9 des navires sortis de chaque port en 1789. Leur couleur correspond \xe0 la part de la navigation fran\xe7aise pour les d\xe9parts qui les concerne, d\xe9termin\xe9e \xe0 partir du port d\'attache des navires.","titre_en":"Share of French navigation in the region","comment_lire_en":"This chart differentiates the ports of the region by the number of their flows and their ability to attract foreign fleets. The size of each dot corresponds to the cumulative tonnage of ships leaving the port in 1789, all flags combined. The tonnage is expressed in tonneaux (1 tx is approximately 1.44 cubic meters). The color shows the importance of foreign vessels in local navigation based on the reported home port: only a few very small ports (in purple) were not served by foreign ships. However, the ports most open to foreign navigation (in orange) were not necessarily the most important in terms of total tonnage. This was the case of Rochefort, for instance, whose arsenal was supplied by ships from northern Europe, of the port of Tonnay-Charente, a major brandy exporter, and of some salt ports (\xcele de R\xe9 and Noirmoutier).","comment_cest_fait_en":"Data was drawn from the Navigocorpus database, and concern ship departures in 1789 from the ports of the Poitou-Aunis-Saintonge region studied (*point calls* observed).The size of each dot corresponds to the cumulative tonnage of ships leaving the port in 1789. The color corresponds to the share of French navigation in departures from these ports based on the home port of the vessels."},{"id":"partie-3-comparaison-exports-coloniaux","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/partie-3-comparaison-exports-coloniaux","datasets":"comparaison_exports_coloniaux/comparaison_exports_coloniaux.csv","titre_fr":"Comparaison des exports de produits coloniaux, locaux et autres par bureaux des fermes","comment_lire_fr":"Ce graphique montre bien que La Rochelle exporte peu de produits de la r\xe9gion PASA. La couleur des barres correspond \xe0 l\u2019origine des produits. La taille des barres est proportionnelle aux valeurs export\xe9es pour chaque origine par chaque port en 1789. Alors que Tonnay-Charente exporte pour plus de 5 millions de livres tournois de produits de la r\xe9gion (essentiellement des eaux-de-vie), la Rochelle n\u2019en exporte que moins de 250 000 livres tournois, ce qui est moins que Marennes, Saint-Martin-de-R\xe9 ou Rochefort. Par contre, La Rochelle exporte beaucoup de produits coloniaux et d\u2019autres produits issus du reste de la France et de l\u2019Europe (essentiellement pour la traite n\xe9gri\xe8re).","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base Toflit18, et plus sp\xe9cifiquement des \xe9tats d\'exports vers l\'\xe9tranger (ports francs non pris en compte). Les flux ont \xe9t\xe9 class\xe9s en trois cat\xe9gories en fonction du type de produits commerc\xe9s. <br/>Un produit marqu\xe9 comme originaire de l\'une des provinces de la r\xe9gion PASA a \xe9t\xe9 class\xe9 \\"produit local\\", un produit tombant dans les cat\xe9gories \'Caf\xe9\', \'Sucre\', \'Indigo\', ou \'Coton non transform\xe9\' de la classification \\"R\xe9volution & Empire\\" de Toflit18 a \xe9t\xe9 class\xe9 comme \\"produit colonial\\". Les produits restants ont \xe9t\xe9 regroup\xe9s dans une classe \\"autres produits\\".","titre_en":"Comparison of colonial, local, and other exports by customs office","comment_lire_en":"This chart shows that La Rochelle exported few products from the PASA region. The bar color corresponds to the origin of the products. The size of the bars is proportional to the values exported in each category by each port in 1789. While Tonnay-Charente exported more than 5 million livres worth of products from the region (mainly brandy), La Rochelle only exported at a value under 250,000 livres, which was less than Marennes, Saint-Martin-de-R\xe9, or Rochefort. La Rochelle exported a lot of colonial and other products originating from the rest of France and Europe (mainly for the slave trade).","comment_cest_fait_en":"Data in this chart was drawn from the Toflit18 database, and more specifically from the records of foreign exports (free ports not included). The flows were classified into three categories based on the type of products traded.<br/> A product marked as originating from one of the provinces of the PASA region was classified as \\"local product\\", a product falling into the categories \\"Coffee\\", \\"Sugar\\", \\"Indigo\\", or \\"Unprocessed cotton\\" of the Toflit18 \\"Revolution & Empire\\" category was classified as \\"colonial product\\". The remaining products were grouped under \\"other products\\"."},{"id":"partie-2-carte-direction-bateaux-de-la-rochelle","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/partie-2-carte-direction-bateaux-de-la-rochelle","datasets":"map_backgrounds/map_world_1789.geojson,voyages-bateaux-homeport-larochelle-1787/voyages-bateaux-homeport-larochelle-1787.csv","titre_fr":"Voyages des navires rattach\xe9s au port de La Rochelle en 1787","comment_lire_fr":"Ce graphique montre les voyages des navires appartenant aux n\xe9gociants de La Rochelle en 1787 tels que relev\xe9s dans les cong\xe9s conserv\xe9s de l\'ensemble des ports de France. En vert sont indiqu\xe9s les voyages de ces navires au d\xe9part des ports de la r\xe9gion PASA. En jaune, les trajets des navires rochelais au d\xe9part des ports fran\xe7ais ext\xe9rieurs \xe0 la r\xe9gion. La taille des fl\xe8ches est proportionnelle au tonnage cumul\xe9. Passer le pointeur sur une fl\xe8che r\xe9v\xe8le le point de d\xe9part et de destination.<br/>Attention au possible biais de source: les lacunes dans les sources (notamment aux Antilles) nous emp\xeachent de repr\xe9senter tous les flux de navires rochelais. En revanche, on voit bien que l\'essentiel des tonnages des navires de La Rochelle part en direction de l\'Afrique. ","comment_cest_fait_fr":"Le fond de carte de la visualisation a \xe9t\xe9 constitu\xe9 en agr\xe9geant de multiples sources et en les mettant en coh\xe9rence avec des m\xe9thodes de g\xe9omatique.<br/> Les donn\xe9es visualis\xe9es sont tir\xe9es des flux enregistr\xe9s dans Navigo pour 1787 et concernant uniquement les navires dont le port d\'attache est La Rochelle.","titre_en":"Flows of ships outfitted by the port of La Rochelle in 1787","comment_lire_en":"","comment_cest_fait_en":"The basemap for this chart was created by aggregating multiple sources and making them compatible using geomatics methods.<br/>The data displayed was drawn from 1787 flows recorded in Navigo for ships whose home port is La Rochelle."},{"id":"sorties-de-sel","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/sorties-de-sel","datasets":"out_with_salt_by_port/out_with_salt_by_port.csv","titre_fr":"Ports de d\xe9part des navires transportant du sel en 1789 depuis la r\xe9gion PASA, agr\xe9g\xe9s par tonnage cumul\xe9","comment_lire_fr":"Ce graphique montre le tonnage des navires transportant du sel sortant de chaque port de la r\xe9gion PASA. La domination de Marennes (plus 80 000\u202ftonneaux) (1 tx est approximativement \xe9gal \xe0 1,44 m\xe8tres cubes) est tr\xe8s nette. Les navires charg\xe9s de sel sont oblig\xe9s \xe0 partir les cales pleines, ce qui fait que le tonnage du navire est un assez bon indicateur des quantit\xe9s transport\xe9es.","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base de donn\xe9es Navigo. Plus pr\xe9cis\xe9ment, il s\'agit des indications de d\xe9parts de port (*pointcalls* de sortie de port) mentionnant du sel en cargaison principale ou secondaire. <br/>La quantification est r\xe9alis\xe9e en fonction du tonnage cumul\xe9 des navires. <br/>Note : les navires pouvant transporter plusieurs marchandises diff\xe9rentes, le tonnage des navires ne doit pas \xeatre confondu avec la quantit\xe9 de sel transport\xe9e, qui reste inconnue.","titre_en":"Ports of departure of vessels transporting salt in 1789 from the PASA region, aggregated by cumulative tonnage","comment_lire_en":"This chart shows the tonnage of vessels transporting salt from each port in the PASA region. The dominant position of Marennes (over 80,000\u202f tonneaux) (1 tx is approximately equal to 1.44 cubic meters) is very clear. Vessels loaded with salt were required to leave with a full hold, which means that vessel tonnage is a fairly good indication of the quantity carried.","comment_cest_fait_en":"Data in this chart was drawn from the Navigo database. More specifically, the information concerns departures (port exit *point calls*) from the port of Marennes in 1789. Quantification was based on the cumulative tonnage of the vessels."},{"id":"sorties-de-marennes","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/sorties-de-marennes","datasets":"sorties-de-marennes/sorties-de-marennes.csv","titre_fr":"Destination des navires partant de Marennes en 1789, agr\xe9g\xe9es par pays et par tonnage cumul\xe9","comment_lire_fr":"Ce graphique montre o\xf9 vont les tonnages sortant de Marennes (essentiellement charg\xe9s de sel). Un tonneau est approximativement \xe9gal \xe0 1,44\u202fm\xe8tres cubes. La France est la destination principale, avec une part importante destin\xe9e \xe0 la r\xe9gion PASA","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base de donn\xe9es Navigo. Plus pr\xe9cis\xe9ment, il s\'agit des indications de d\xe9parts (*pointcalls* de sortie de port) du port de Marennes en 1789. La quantification est r\xe9alis\xe9e en fonction du tonnage cumul\xe9 des navires.","titre_en":"Destination of ships departing from Marennes in 1789, aggregated by country and by cumulative tonnage","comment_lire_en":"This graph shows the destination of tonnage leaving Marennes (mainly comprising salt). One tonneaux is approximately equal to 1.44 cubic meters. France was the main destination, with an important share going to the PASA region.","comment_cest_fait_en":"Data in this chart was drawn from the Navigo database. More specifically, the information concerns departures (port exit *point calls*) from the port of Marennes in 1789. Quantification was based on the cumulative tonnage of the vessels."},{"id":"exports-eau-de-vie-la-rochelle-longitudinal","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/exports-eau-de-vie-la-rochelle-longitudinal","datasets":"exports_eau_de_vie_la_rochelle_longitudinal/exports_eau_de_vie_la_rochelle_longitudinal.csv","titre_fr":"\xc9volution des exports d\'eau-de-vie et liqueurs par la direction de La Rochelle (ports francs non pris en compte)","comment_lire_fr":"Ce graphique montre la valeur des exportations d\u2019eaux-de-vie de la direction de La Rochelle (hors celles vers les ports francs). Le trend s\xe9culaire est faiblement d\xe9croissant (peut-\xeatre au profit de Bordeaux qui exporte aussi des eaux-de-vie de l\u2019Angoumois). Par contre, l\u2019ann\xe9e 1789 est exceptionnelle dans le si\xe8cle, sans doute \xe0 cause des exportations vers l\u2019Angleterre autoris\xe9es par le trait\xe9 Eden-Rayneval de 1787.","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base de donn\xe9es toflit18, et plus pr\xe9cis\xe9ment des mentions d\'exports vers l\'\xe9tranger (ports francs non pris en compte) de produits tombant dans la cat\xe9gorie \\"eaux-de-vie et liqueurs\\" de la classification \\"r\xe9volution & empire\\" de toflit18, pour la direction de La Rochelle. Les flux tir\xe9s de son groupe de sources \\"Best Guess customs region prod x partner\\" qui permettent de raisonner au niveau des directions des fermes (et non de l\'ensemble de la France). La quantification est r\xe9alis\xe9e en fonction de la valeur des exports en livres tournois.","titre_en":"Evolution of brandy exports from the La Rochelle customs region (free ports not included)","comment_lire_en":"This chart shows the value of brandy exports from the La Rochelle customs region (excluding exports to free ports). The trend over the century was a slight decrease (perhaps to the benefit of Bordeaux, which also exported brandy from the Angoumois region). The year 1789 was exceptional for that century, probably because exports to England had been authorized by the Eden-Rayneval Treaty of 1787.","comment_cest_fait_en":"Data for this chart was drawn from the Toflit18 database, and more specifically from the references to exports to foreign countries (free ports not included) of products falling within the \\"brandy\\" category of the Toflit18 \\"Revolution & Empire\\" classification, for the La Rochelle customs region. The flows were drawn from the \\"Best Guess customs region prod x partner\\" group of sources which provide information for each customs region (rather than all of France). Quantification was based on the value of exports in livres."},{"id":"exports-eau-de-vie-comparaison-directions-des-fermes","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/exports-eau-de-vie-comparaison-directions-des-fermes","datasets":"exports_eau_de_vie_comparaison_directions_des_fermes/exports_eau_de_vie_comparaison_directions_des_fermes.csv","titre_fr":"Comparaison des exports d\'eau-de-vie et liqueurs par diff\xe9rentes directions des fermes (ports francs non pris en compte - pas de donn\xe9es pour Montpellier en 1770)","comment_lire_fr":"Ce graphique montre la valeur des exportations d\u2019eaux-de-vie de la direction de La Rochelle, Bordeaux, Montpellier (essentiellement par le port de S\xe8te), Nantes et Bayonne. Les exportations vers les ports francs fran\xe7ais n\'ont pas \xe9t\xe9 prises en compte. Les donn\xe9es de Montpellier manquent pour 1770. La Rochelle domine les exportations en 1750, mais est d\xe9pass\xe9e par Bordeaux en 1770. Par contre, l\u2019explosion des exportations vers l\u2019Angleterre permise par le trait\xe9 Eden-Reynald de 1787 b\xe9n\xe9ficie essentiellement \xe0 La Rochelle. Nantes stagne alors que les exportations depuis Bayonne et Montpellier croissent.","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base de donn\xe9es toflit18, et plus pr\xe9cis\xe9ment des mentions d\'exports vers l\'\xe9tranger (ports francs non pris en compte) de produits tombant dans la cat\xe9gorie \\"eaux-de-vie et liqueurs\\" de la classification \\"r\xe9volution & empire\\" de toflit18, pour la direction de La Rochelle. Les flux tir\xe9s de son groupe de sources \\"Best Guess customs region prod x partner\\" qui permettent de raisonner au niveau des directions des fermes (et non de l\'ensemble de la France). La quantification est r\xe9alis\xe9e en fonction de la valeur des exports en livres tournois.","titre_en":"Comparison of brandy exports from different customs regions (free ports not included - no data for Montpellier in 1770)","comment_lire_en":"This chart shows the value of brandy exports from the customs regions of La Rochelle, Bordeaux, Montpellier (mainly via the port of S\xe8te), Nantes and Bayonne. Exports to French free ports were not included. Data for Montpellier is missing for 1770. La Rochelle dominated exports in 1750 but was overtaken by Bordeaux in 1770. However, the Eden-Reynald Treaty of 1787 that led to an explosion of exports to England mostly benefited La Rochelle. Nantes was stagnating while exports from Bayonne and Montpellier were growing.","comment_cest_fait_en":"Data for this chart was drawn from the Toflit18 database, and more specifically from the references to exports to foreign countries (free ports not included) of products falling within the \\"brandy\\" category of the Toflit18 \\"Revolution & Empire\\" classification, for the La Rochelle customs region. The flows were drawn from the \\"Best Guess customs region prod x partner\\" group of sources which provide information for each customs region (rather than all of France). Quantification was based on the value of exports in livres."},{"id":"origines-exports-eau-de-vie-1789-la-rochelle","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/origines-exports-eau-de-vie-1789-la-rochelle","datasets":"origines_exports_eau_de_vie_1789_la_rochelle/origines_exports_eau_de_vie_1789_la_rochelle.csv","titre_fr":"Origine des exports d\'eau-de-vie de la direction des fermes de La Rochelle en 1789 (ports francs non pris en compte)","comment_lire_fr":"Ce graphique montre l\u2019origine des eaux-de-vie export\xe9es par la direction de La Rochelle en valeur. Les exportations vers les ports francs fran\xe7ais n\'ont pas \xe9t\xe9 prises en compte.  L\u2019Angoumois domine, suivi par l\u2019Aunis. Les valeurs export\xe9es en eaux-de-vie double (c\'est-\xe0-dire \xe0 teneur d\u2019alcool plus \xe9lev\xe9e) sont comparables \xe0 celles de eaux-de-vie simples. La d\xe9nomination \\"eaux-de-vie double\\" n\u2019existe que dans les chiffres de 1788 et 1789, indiquant peut-\xeatre les progr\xe8s des techniques de distillation dans la r\xe9gion.","comment_cest_fait_fr":"Les donn\xe9es de cette visualisation sont tir\xe9es de la base de donn\xe9es toflit18, et plus pr\xe9cis\xe9ment des mentions d\'exports vers l\'\xe9tranger (ports francs non pris en compte) de produits tombant dans la cat\xe9gorie \\"eaux-de-vie et liqueurs\\" de la classification \\"r\xe9volution & empire\\" de toflit18, pour la direction de La Rochelle. Les flux tir\xe9s de son groupe de sources \\"Best Guess customs region prod x partner\\" qui permettent de raisonner au niveau des directions des fermes (et non de l\'ensemble de la France). La quantification est r\xe9alis\xe9e en fonction de la valeur des exports en livres tournois.","titre_en":"Origin of brandy exports from the La Rochelle customs region in 1789 (free ports not included)","comment_lire_en":"This chart shows the origin of brandy exported by the La Rochelle customs region in value. Exports to French free ports were not included. The Angoumois region dominated, followed by the Aunis. The value of exported \\"double\\" brandy (i.e., with a higher alcohol content) was comparable to that of \\"simple\\" brandy. The \\"double brandy\\" designation first appeared in the 1788 and 1789 figures and only in data from the PASA region, perhaps indicating advanced distillation techniques in the region.","comment_cest_fait_en":"Data for this chart was drawn from the Toflit18 database, and more specifically from the references to exports to foreign countries (free ports not included) of products falling within the \\"brandy\\" category of the Toflit18 \\"Revolution & Empire\\" classification, for the La Rochelle customs region. The flows were drawn from the \\"Best Guess customs region prod x partner\\" group of sources which provide information for each customs region (rather than all of France). Quantification was based on the value of exports in livres."},{"id":"sorties-de-marennes-avec-sel-destinations","lien_visualisation_seule":"https://medialab.github.io/portic-storymaps-2021/fr/atlas/sorties-de-marennes-avec-sel-destinations","datasets":"sorties-de-marennes-avec-sel-destinations/sorties-de-marennes-avec-sel-destinations.csv","titre_fr":"Cartes des navires sortis de Marennes avec du sel en 1789, dimensionn\xe9s par tonnage cumul\xe9","comment_lire_fr":"Cette carte montre les destinations de navires sortis de Marennes avec du sel \xe0 bord. L\'aire du cercle est proportionnelle au tonnage cumul\xe9 par destination.","comment_cest_fait_fr":"","titre_en":"Maps of ships leaving Marennes with salt in 1789, sized by cumulative tonnage","comment_lire_en":"","comment_cest_fait_en":""}]')},58:function(e,t,a){"use strict";var n=a(10),r=a(20),i=a(7),o=a(8),s=a(673),l=a(57),c=a(218),d=a(282),u=a(121),p=a(2),h=a(24),m=a(64),f=a(26),g=a(21),b=a(16),v=a(31),j=a(1),x=g.a.generic,O=function(e){var t=e.data,a=e.title,r=(e.orientation,e.layout),g=void 0===r?"stack":r,O=e.width,y=void 0===O?1e3:O,w=e.height,_=void 0===w?400:w,L=e.color,k=e.x,C=e.y,T=e.tooltip,q=e.margins,A=void 0===q?{}:q,R=e.annotations,N=void 0===R?[]:R,M=Object(p.useState)(0),S=Object(o.a)(M,2),P=S[0],z=S[1],F=Object(p.useRef)(null),B=Object(p.useRef)(null),E=Object(b.c)(y),D=Object(b.c)(_-P);Object(p.useEffect)((function(){f.a.rebuild()})),Object(p.useEffect)((function(){setTimeout((function(){var e=B.current?B.current.getBoundingClientRect().height:0;z(e)}))}),[E,D,L,t]);var I,H,W=Object(n.a)({left:100,top:30,bottom:20,right:20},A),$=C.tickFormat,G=C.tickSpan,Y=C.domain,X=C.field,V=C.sort,U=void 0===V?{}:V,J=k.tickFormat,Z=k.tickSpan,Q=k.domain,K=k.fillGaps,ee=k.field,te=k.sort,ae=void 0===te?{}:te,ne=U.field,re=void 0===ne?X:ne,ie=U.ascending,oe=void 0===ie||ie,se=U.type,le=void 0===se?"number":se,ce=U.autoSort,de=void 0!==ce&&ce,ue=ae.field,pe=void 0===ue?ee:ue,he=ae.ascending,me=void 0===he||he,fe=ae.type;if(L&&(H=Object(h.uniq)(t.map((function(e){return e[L.field]})))),L&&L.palette)I=L.palette;else if(L){var ge=Object(b.e)(L.field,H.length);I=H.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(i.a)({},t,ge[a]))}),{})}var be=Object(h.uniq)(t.filter((function(e){return+e[C.field]})).map((function(e){return e[k.field]}))),ve=E-W.left-W.right,je=be,xe=be.length,Oe=ve/xe,ye=Object(s.a)().domain(je).range([W.left+Oe/2,E-W.right-Oe/2]);if(Q)xe=(be=je=Object(c.a)(Q)).length,Oe=ve/xe,ye=Object(l.a)().domain(Object(d.a)(je)).range([W.left+Oe/2,E-W.right-Oe/2]).nice();else if(K){var we=Object(d.a)(be.filter((function(e){return+e})).map((function(e){return+e})));Z&&(we[0]=we[0]-we[0]%Z,we[1]=we[1]+we[1]%Z),xe=(be=je=Object(c.a)(we[0],we[1])).length,Oe=ve/xe,ye=Object(l.a)().domain(Object(d.a)(je)).range([W.left+Oe/2,E-W.right-Oe/2]).nice()}var _e=Object.entries(Object(h.groupBy)(t,(function(e){return e[k.field]}))),Le=Y||"stack"===g?[0,Object(u.a)(_e.map((function(e){var t=Object(o.a)(e,2);t[0];return t[1].reduce((function(e,t){return e+ +t[C.field]}),0)})))]:[0,Object(u.a)(t.map((function(e){return+e[C.field]})))],ke="stack"===g?Oe/2:Oe/H.length*.5,Ce=Object(l.a)().domain(Le).range([D-W.bottom,W.top]).nice(),Te=Ce.copy().range([0,D-W.bottom-W.top]),qe=Z?Object(c.a)(je[0],je[je.length-1],Z):be,Ae=Object(m.axisPropsFromTickScale)(Ce,10).values;G&&(Le[0]=Le[0]-Le[0]%G,Le[1]=Le[1]+(G-Le[0]%G),Ae=Object(c.a)(Le[0],Le[1],G),Ce.domain(Le));var Re="fr"===Object(p.useContext)(v.b).lang?"L\xe9gende":"Legend";return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("figure",{style:{width:y,height:_},className:"BarChart is-horizontal GenericVisualization",children:[Object(j.jsx)("div",{ref:B,className:"row",children:a?Object(j.jsx)("h5",{className:"visualization-title",style:{marginLeft:W.left},children:a}):null}),Object(j.jsxs)("div",{className:"row vis-row",children:[Object(j.jsxs)("svg",{className:"chart",width:E,height:D,children:[Object(j.jsxs)("g",{className:"axis left-axis ticks",children:[Object(j.jsx)("text",{x:W.left-10,y:W.top-15,className:"axis-title",children:C.title||C.field}),Ae.map((function(e,t){return Object(j.jsxs)("g",{transform:"translate(0, ".concat(Ce(e),")"),children:[Object(j.jsx)("text",{x:W.left-10,y:3,children:"function"===typeof $?$(e,t):e}),Object(j.jsx)("line",{className:"tick-mark",x1:W.left-5,x2:W.left,y1:0,y2:0}),Object(j.jsx)("line",{className:"background-line",x1:W.left,x2:ye(qe[qe.length-1]),y1:0,y2:0})]},e)}))]}),Object(j.jsx)("g",{className:"axis bottom-axis ticks",children:qe.map((function(e,t){return Object(j.jsxs)("g",{transform:"translate(".concat(ye(e),", 0)"),children:[Object(j.jsx)("text",{x:0,y:D-W.bottom+20,children:"function"===typeof J?J(e,t):e}),Object(j.jsx)("line",{className:"background-line",x1:0,x2:0,y1:Ce(Ae[Ae.length-1]),y2:D-W.bottom}),Object(j.jsx)("line",{className:"tick-mark",x1:0,x2:0,y1:D-W.bottom,y2:D-W.bottom+5})]},e)}))}),Object(j.jsxs)("g",{className:"annotations-container",children:[N.filter((function(e){return"x"===e.axis})).map((function(e,t){var a=e.start,n=e.end,r=e.label,i=e.labelPosition,o=void 0===i?20:i,s=Object(b.c)(D-Ce(Ae[Ae.length-1])-W.bottom),l=D-W.bottom,c=Ce(Ae[Ae.length-1]);return Object(j.jsxs)("g",{className:"annotation x-axis-annotation",children:[Object(j.jsx)("rect",{x:ye(a),width:Object(b.c)(ye(n)-ye(a)),height:s,y:c,fill:"url(#diagonalHatch)",opacity:.4}),Object(j.jsx)("line",{x1:ye(a),x2:ye(a),y1:l,y2:c,stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(j.jsx)("line",{x1:ye(n),x2:ye(n),y1:l,y2:c,stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(j.jsx)("line",{x1:ye(n)+20,x2:ye(n)+10,y1:c+o-5,y2:c+o-5,stroke:"grey",markerEnd:"url(#arrowhead)"}),Object(j.jsx)("text",{x:ye(n)+22,y:c+o,fontSize:".5rem",fill:"grey",children:r}),Object(j.jsx)("defs",{children:Object(j.jsx)("marker",{id:"arrowhead",markerWidth:"5",markerHeight:"5",refX:"0",refY:"2.5",orient:"auto",children:Object(j.jsx)("polygon",{stroke:"grey",fill:"transparent",points:"0 0, 5 2.5, 0 5"})})}),Object(j.jsx)("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:Object(j.jsx)("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"grey",opacity:.5,strokeWidth:1}})})]},t)})),N.filter((function(e){return"y"===e.axis})).map((function(e,t){var a=e.start,n=e.end,r=e.label,i=e.labelPosition,o=void 0===i?20:i,s=W.left,l=ye(qe[qe.length-1]);return Object(j.jsxs)("g",{className:"annotation y-axis-annotation",children:[Object(j.jsx)("rect",{x:s,width:Object(b.c)(l-s),y:Ce(a),height:Object(b.c)(Ce(n)-Ce(a)),fill:"url(#diagonalHatch)",opacity:.4}),Object(j.jsx)("line",{x1:s,x2:l,y1:Ce(a),y2:Ce(a),stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(j.jsx)("line",{x1:s,x2:l,y1:Ce(n),y2:Ce(n),stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(j.jsx)("line",{x1:s+o-5,x2:s+o-5,y1:Ce(a)-15,y2:Ce(a)-5,stroke:"grey",markerEnd:"url(#arrowhead)"}),Object(j.jsx)("text",{x:s+o,y:Ce(a)-10,fontSize:".5rem",fill:"grey",children:r}),Object(j.jsx)("defs",{children:Object(j.jsx)("marker",{id:"arrowhead",markerWidth:"5",markerHeight:"5",refX:"0",refY:"2.5",orient:"auto",children:Object(j.jsx)("polygon",{stroke:"grey",fill:"transparent",points:"0 0, 5 2.5, 0 5"})})}),Object(j.jsx)("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:Object(j.jsx)("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"grey",opacity:.5,strokeWidth:1}})})]},t)}))]}),Object(j.jsx)("g",{className:"bars-container",children:_e.sort((function(e,t){var a=me?1:-1;return pe===k.field?("number"===fe?+e[0]:e[0])<("number"===fe?+t[0]:t[0])?-1*a:1*a:("number"===fe?+e[1].reduce((function(e,t){return e+ +t[pe]}),0):e[1][pe])<("number"===fe?+t[1].reduce((function(e,t){return e+ +t[pe]}),0):t[1][pe])?-1*a:1*a})).map((function(e,t){var a=Object(o.a)(e,2),n=(a[0],a[1]),r=D-W.bottom;return Object(j.jsx)("g",{transform:"translate(".concat(ye(n[0][k.field]),", 0)"),children:n.sort((function(e,t){if(!de)return 0;var a=oe?1:-1;return("number"===le?+e[re]:e[re])>+("number"===le?+t[re]:t[re])?-1*a:1*a})).map((function(e,a){var i="stack"===g?-ke/2:a*(.5*Oe/n.length)-Oe/4,o="stack"===g?Te(e[C.field]):D-W.bottom-Ce(e[C.field])||0,s="stack"===g?r-o:Ce(e[C.field]);"stack"===g&&(r-=o);var l=I?I[e[L.field]]:x.dark;return Object(j.jsx)(j.Fragment,{children:+e[C.field]>0?Object(j.jsx)("rect",{fill:l,width:Object(b.c)(ke),x:i,y:s,height:Object(b.c)(o),"data-for":"bar-tooltip","data-tip":"function"===typeof T?T(e,a,t):void 0},a):null})}))},t)}))})]}),L?Object(j.jsxs)("div",{className:"ColorLegend",ref:F,style:{top:P},children:[Object(j.jsx)("h5",{children:L.title||Re}),Object(j.jsx)("ul",{className:"color-legend",children:Object.entries(I).map((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{className:"color-box",style:{background:n}}),Object(j.jsx)("span",{className:"color-label",children:a})]},a)}))})]}):null]})]}),Object(j.jsx)(f.a,{id:"bar-tooltip"})]})},y=g.a.generic,w=function(e){var t=e.data,a=e.title,r=e.layout,s=void 0===r?"stack":r,d=e.width,g=void 0===d?1200:d,x=e.height,O=void 0===x?1200:x,w=e.color,_=e.y,L=e.x,k=e.tooltip,C=e.margins,T=void 0===C?{}:C,q=Object(p.useState)(0),A=Object(o.a)(q,2),R=A[0],N=A[1],M=Object(p.useState)(0),S=Object(o.a)(M,2),P=S[0],z=S[1],F=Object(p.useRef)(null),B=Object(p.useRef)(null),E=Object(b.c)(g-P),D=Object(b.c)(O-R);Object(p.useEffect)((function(){f.a.rebuild()})),Object(p.useEffect)((function(){setTimeout((function(){var e=B.current?B.current.getBoundingClientRect().height:0,t=F.current?F.current.getBoundingClientRect().width:0;N(e),z(t)}))}),[E,D,w,t]);var I,H,W=Object(n.a)({left:100,top:30,bottom:20,right:30},T),$=L.tickFormat,G=L.tickSpan,Y=L.domain,X=L.field,V=L.sort,U=void 0===V?{}:V,J=_.rowHeight,Z=_.formatLabel,Q=_.field,K=_.sort,ee=void 0===K?{}:K,te=ee.field,ae=void 0===te?Q:te,ne=ee.autoSort,re=void 0!==ne&&ne,ie=ee.ascending,oe=void 0===ie||ie,se=ee.type,le=U.field,ce=void 0===le?X:le,de=U.ascending,ue=void 0===de||de,pe=U.type,he=void 0===pe?"number":pe;if(w&&(H=Object(h.uniq)(t.map((function(e){return e[w.field]})))),w&&w.palette)I=w.palette,H=Object.entries(I).map((function(e){return Object(o.a)(e,1)[0]}));else if(w){var me=Object(b.e)(w.field,H.length);I=H.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(i.a)({},t,me[a]))}),{})}var fe=Object(h.uniq)(t.map((function(e){return e[_.field]}))).length,ge=J?J*fe:D-R,be=Object(b.c)(J||ge/fe),ve=Object(p.useMemo)((function(){return Object.entries(Object(h.groupBy)(t,(function(e){return e[_.field]}))).sort((function(e,t){if(!re)return 0;var a=oe?1:-1;return ae===_.field?("number"===se?+e[0]:e[0])<("number"===se?+t[0]:t[0])?-1*a:1*a:("number"===se?+e[1].reduce((function(e,t){return e+ +t[ae]}),0):e[1][ae])<("number"===se?+t[1].reduce((function(e,t){return e+ +t[ae]}),0):t[1][ae])?-1*a:1*a})).map((function(e){var t=Object(o.a)(e,2);return[t[0],t[1].sort((function(e,t){if(!re)return H.indexOf(e[w.field])>H.indexOf(t[w.field])?1:-1;var a=ue?1:-1;return("number"===he?+e[ce]:e[ce])>+("number"===he?+t[ce]:t[ce])?-1*a:1*a}))]}))}),[t,_,re,oe,ae,se,ue,ce,he,w,H]),je=Y||"stack"===s?[0,Object(u.a)(ve.map((function(e){var t=Object(o.a)(e,2);t[0];return t[1].reduce((function(e,t){return e+ +t[L.field]}),0)})))]:[0,Object(u.a)(t.map((function(e){return+e[L.field]})))],xe="stack"===s?be/2:be/H.length*.5,Oe=Object(l.a)().domain(je).range([0,E-W.left-W.right]).nice(),ye=Oe.copy().range([0,E-W.left-W.right]),we=Object(m.axisPropsFromTickScale)(Oe,10).values;G&&(je[0]=je[0]-je[0]%G,je[1]=je[1]+je[1]%G,we=Object(c.a)(je[0],je[1],G),Oe.domain(je));var _e=ge+W.top+W.bottom,Le=O>_e+R?O:_e+R,ke="fr"===Object(p.useContext)(v.b).lang?"L\xe9gende":"Legend";return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("figure",{style:{width:g,height:Le},className:"BarChart is-vertical GenericVisualization",children:[Object(j.jsx)("div",{ref:B,className:"row",children:a?Object(j.jsx)("h5",{className:"visualization-title",style:{marginLeft:W.left},children:a}):null}),Object(j.jsxs)("div",{className:"row vis-row",children:[Object(j.jsxs)("svg",{className:"chart",width:E,height:_e,children:[Object(j.jsx)("g",{className:"axis top-axis ticks",children:we.map((function(e,t){return Object(j.jsxs)("g",{transform:"translate(".concat(W.left+Oe(e),", 0)"),children:[Object(j.jsx)("text",{x:0,y:W.top-5,children:"function"===typeof $?$(e,t):e}),Object(j.jsx)("line",{className:"background-line",x1:0,x2:0,y1:W.top,y2:ge+W.top}),Object(j.jsx)("text",{x:0,y:_e-W.bottom+10,children:"function"===typeof $?$(e,t):e})]},t)}))}),Object(j.jsx)("g",{className:"bars-container",children:ve.map((function(e,t){var a=Object(o.a)(e,2),n=a[0],r=a[1],i=W.left;return Object(j.jsxs)("g",{transform:"translate(0, ".concat(W.top+be*t,")"),children:[Object(j.jsx)("foreignObject",{x:0,y:"stack"===s?xe/4:xe*r.length/2,width:W.left,height:2*be,children:Object(j.jsx)("div",{className:"vertical-bar-label",children:Object(j.jsx)("div",{children:"function"===typeof Z?Z(n,t):n})})}),r.map((function(e,a){var n="stack"===s?xe/2:a*(.5*be/r.length)+be/4,o="stack"===s?ye(+e[L.field]):Oe(e[L.field]),l="stack"===s?i:W.left;"stack"===s&&(i+=o);var c=I?I[e[w.field]]:y.dark;return Object(j.jsx)(j.Fragment,{children:+e[L.field]>0?Object(j.jsx)("rect",{fill:c,width:Object(b.c)(o),x:l,y:n,height:Object(b.c)(xe-1),"data-for":"bar-tooltip","data-tip":"function"===typeof k?k(e,a,t):void 0},a):null})}))]},t)}))})]}),w?Object(j.jsxs)("div",{className:"ColorLegend",ref:F,style:{top:R},children:[Object(j.jsx)("h5",{children:w.title||ke}),Object(j.jsx)("ul",{className:"color-legend",children:Object.entries(I).map((function(e,t){var a=Object(o.a)(e,2),n=a[0],r=a[1];return Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{className:"color-box",style:{background:r}}),Object(j.jsx)("span",{className:"color-label",children:n})]},t)}))})]}):null]})]}),Object(j.jsx)(f.a,{id:"bar-tooltip"})]})},_=(a(596),["orientation"]),L=function(e){var t=e.orientation,a=void 0===t?"horizontal":t,i=Object(r.a)(e,_);return"horizontal"===a?Object(j.jsx)(O,Object(n.a)({},i)):Object(j.jsx)(w,Object(n.a)({},i))};t.a=L},595:function(e,t,a){},596:function(e,t,a){},597:function(e,t,a){},598:function(e,t,a){},599:function(e,t,a){},601:function(e,t,a){},604:function(e,t,a){},642:function(e,t,a){},644:function(e,t,a){},645:function(e,t,a){},646:function(e,t,a){},647:function(e,t,a){},648:function(e,t,a){},649:function(e,t,a){var n={"./en/a-propos.mdx":[226],"./en/footer.mdx":[231],"./en/introduction.mdx":[217],"./en/metadata":[341,0],"./en/metadata.js":[341,0],"./en/part-1.mdx":[220],"./en/part-2-1.mdx":[656,5],"./en/part-2-2.mdx":[657,6],"./en/part-2-3.mdx":[658,7],"./en/part-2-intro.mdx":[659,8],"./en/part-2.mdx":[222],"./en/part-3.mdx":[224],"./en/references.mdx":[228],"./en/test-scrolly.mdx":[660,9],"./en/tests.mdx":[229],"./fr/a-propos.mdx":[225],"./fr/footer.mdx":[230],"./fr/introduction.mdx":[216],"./fr/metadata":[342,1],"./fr/metadata.js":[342,1],"./fr/partie-1.mdx":[219],"./fr/partie-2.mdx":[221],"./fr/partie-3.mdx":[223],"./fr/references.mdx":[227],"./fr/test-scrolly.mdx":[661,10],"./fr/tests.mdx":[232]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a(r)}))}r.keys=function(){return Object.keys(n)},r.id=649,e.exports=r},650:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),i=a(45),o=(a(390),a(7)),s=a(10),l=a(9),c=a(8),d=a(39),u=a(42),p=a(314),h=a.n(p),m=a(651),f=a(683),g=a(76),b=a.n(g),v=a(77),j=a(18),x=a.n(j),O=a(26),y=a(80),w=a(97),_=a(216),L=a(217),k=a(98),C=a(20),T=a(3),q=["components"],A={};function R(e){var t=e.components,a=Object(C.a)(e,q);return Object(T.a)("wrapper",Object.assign({},A,a,{components:t,mdxType:"MDXLayout"}),Object(T.a)("p",null,"Marzagalli, Silvia, et al. Commerce multi-\xe9chelles autour du port de La Rochelle au XVIIIe si\xe8cle. 2021, ",Object(T.a)("a",{parentName:"p",href:"https://medialab.github.io/portic-storymaps-2021"},"https://medialab.github.io/portic-storymaps-2021"),"."))}R.isMDXComponent=!0;var N=["components"],M={};function S(e){var t=e.components,a=Object(C.a)(e,N);return Object(T.a)("wrapper",Object.assign({},M,a,{components:t,mdxType:"MDXLayout"}),Object(T.a)("p",null,"MARZAGALLI, Silvia, ASSELIN, C\xe9cile, BOUJU, Alain, CHARLES, Lo\xefc, DAUDIN, Guillaume, GEOFFROY, G\xe9raldine, GIRARD, Paul, GOURLET, Pauline, MAZOYER, B\xe9atrice, de MOURAT, Robin, OOGHE-TABANOU, Benjamin, PLIQUE, Guillaume, PLUMEJEAUD, Christine, POURCHASSE, Pierrick, SAUZEAU, Thierry, TH\xc9RO, H\xe9lo\xefse et ZOFFOLI, Maxime, 2021. Commerce multi-\xe9chelles autour du port de La Rochelle au XVIIIe si\xe8cle. ","[en\xa0ligne]",". Octobre 2021. Disponible \xe0 l\u2019adresse\xa0: ",Object(T.a)("a",{parentName:"p",href:"https://medialab.github.io/portic-storymaps-2021"},"https://medialab.github.io/portic-storymaps-2021")))}S.isMDXComponent=!0;var P=["components"],z={};function F(e){var t=e.components,a=Object(C.a)(e,P);return Object(T.a)("wrapper",Object.assign({},z,a,{components:t,mdxType:"MDXLayout"}),Object(T.a)("p",null,"Marzagalli, S., Asselin, C., Bouju, A., Charles, L., Daudin, G., Geoffroy, G., \u2026 Zoffoli, M. (2021). Commerce multi-\xe9chelles autour du port de La Rochelle au XVIIIe si\xe8cle. Rep\xe9r\xe9 \xe0 ",Object(T.a)("a",{parentName:"p",href:"https://medialab.github.io/portic-storymaps-2021"},"https://medialab.github.io/portic-storymaps-2021")))}F.isMDXComponent=!0;var B=["components"],E={};function D(e){var t=e.components,a=Object(C.a)(e,B);return Object(T.a)("wrapper",Object.assign({},E,a,{components:t,mdxType:"MDXLayout"}),Object(T.a)("a",{href:"https://doi.org/10.5281/zenodo.5717883",target:"blank"},"10.5281/zenodo.5717883"))}D.isMDXComponent=!0;a(447);var I=a(1),H={fr:{MLA:R,"ISO 690":S,APA:F,DOI:D},en:{MLA:R,DOI:D}},W=function(e){var t=e.lang,a=void 0===t?"fr":t,r=Object(n.useRef)(null),i=Object(n.useState)(!0),o=Object(c.a)(i,2),s=o[0],l=o[1],d=Object(n.useState)(null),u=Object(c.a)(d,2),p=u[0],h=u[1];Object(n.useEffect)((function(){"fr"!==a&&"en"!==a||h(Object.keys(H[a])[0])}),[a]);var m=p?H[a][p]:void 0;return["fr","en"].includes(a)?Object(I.jsxs)("div",{className:x()("CitationWidget",{"is-collapsed":s}),children:[Object(I.jsx)("button",{className:x()("collapse-toggler",{"is-active":!s}),onClick:function(){return l(!s)},children:{fr:"Citer cette publication",en:"Cite this publication"}[a]}),Object(I.jsxs)("div",{className:x()("collapsible-contents"),children:[Object(I.jsx)("blockquote",{ref:r,children:p?Object(I.jsx)(m,{}):null}),Object(I.jsx)("div",{className:"widget-footer",children:Object.entries(H[a]).length>1?Object(I.jsx)("ul",{className:"styles-list",children:a&&p?Object.entries(H[a]).map((function(e){var t=Object(c.a)(e,2),a=t[0];t[1];return Object(I.jsx)("li",{onClick:function(){return h(a)},className:x()("list-item",{"is-active":p===a}),children:Object(I.jsx)("span",{children:a})},a)})):null}):null})]})]}):null},$=a(317),G=a.n($),Y=a(161),X=function(e){var t=e.datasets,a=void 0===t?{}:t;return Object(I.jsxs)("div",{className:"Test",children:[Object(I.jsx)("div",{children:"Ceci est un appel pour une visualisation qui n'a pas encore \xe9t\xe9 d\xe9velopp\xe9e"}),Object.keys(a).length?Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{children:"Datasets de la visualisation :"}),Object.entries(a).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{children:a}),Object(I.jsx)("pre",{children:Object(I.jsx)("code",{children:JSON.stringify(n,null,2)})})]},a)}))]}):null]})},V=a(673),U=a(165),J=a(57),Z=a(24),Q=a.n(Z),K=a(282),ee=a(121),te=a(64),ae=a(21),ne=a(16),re=function(e){for(var t=Math.round(+e)+"",a="",n=0,r=t.length-1;r>=0;r--){a=t[r]+a,3===++n&&(n=0,a=" "+a)}return","===a[0]&&(a=a.slice(1)),a},ie=function(e){var t=e.data,a=e.absoluteField,r=e.shareField,i=e.herfindhalField,o=e.width,s=e.height,d=e.axisLeftTitle,u=e.axisRightTitle,p=e.startYear,h=e.endYear,m=e.fillGaps,f=e.barTooltipFn,g=e.cityName,b=e.highlightYears,v=e.title,j=e.colorScaleMessages,y=e.annotations,w=void 0===y?[]:y,_=e.margins,L=Object(n.useMemo)((function(){return t.filter((function(e){return+e.year>=p&+e.year<=h}))}),[p,h,t]),k=Object(n.useRef)(null),C=Object(n.useRef)(null),T=Object(n.useState)(s),q=Object(c.a)(T,2),A=q[0],R=q[1];Object(n.useEffect)((function(){setTimeout((function(){var e=s;k&&k.current&&(e=s-k.current.offsetHeight,C&&C.current&&(e-=C.current.offsetHeight)),R(e),O.a.rebuild()}))}),[s]);var N=Object(K.a)(L.map((function(e){return+e.year}))),M=Z.range.apply(void 0,Object(l.a)(N)),S=Object(V.a)().domain([].concat(Object(l.a)(M),[h,h+1])).range([_.left,o-_.right]).padding(.1),P=Object(U.a)().domain(Object(K.a)(L,(function(e){return+e[i]}))).range([ae.a.generic.accent2,"grey"]),z=S.domain().map((function(e){return+e})).filter((function(e){return e%5===0})),F=Object(J.a)().domain([0,Object(ee.a)(L,(function(e){return+e[a]}))]).nice().range([A-_.bottom,_.top]),B=Object(J.a)().domain([0,Object(ee.a)(L,(function(e){return+e[r]}))]).nice().range([A-_.bottom,_.top]),E=Object(te.axisPropsFromTickScale)(F,Math.round(A/20)).values,D=Object(te.axisPropsFromTickScale)(B,Math.round(A/20)).values;return B.domain()[1]-B.domain()[0]<=5&&(D=Object(te.axisPropsFromTickScale)(B,5).values),Object(I.jsxs)("div",{className:x()("LongitudinalTradeChart",{"has-highlights":void 0!==b}),children:[Object(I.jsxs)("div",{className:"chart-header",ref:k,children:[Object(I.jsx)("h3",{className:"visualization-title",style:{marginLeft:_.left},children:v}),Object(I.jsxs)("div",{className:"axis-headers-container",children:[Object(I.jsx)("div",{style:{background:d&&d.length?ae.a.generic.accent2:void 0,marginLeft:_.left},className:"axis-header axis-header-left",children:d}),j?Object(I.jsx)("div",{className:"color-scale-container",children:Object(I.jsxs)("div",{className:"color-scale-detail",children:[Object(I.jsx)("div",{className:"bar",style:{background:"linear-gradient(to right, ".concat(P(P.domain()[0]),", ").concat(P(P.domain()[1]),")")}}),Object(I.jsxs)("div",{className:"labels",children:[Object(I.jsx)("span",{children:j.maximum}),Object(I.jsx)("span",{children:j.minimum})]})]})}):null,Object(I.jsx)("div",{style:{background:u&&u.length?ae.a.generic.accent1:void 0,marginRight:_.right},className:"axis-header axis-header-right",children:u})]})]}),Object(I.jsxs)("svg",{width:o,height:A,children:[Object(I.jsx)("g",{className:"axis axis-left",children:D.map((function(e){return Object(I.jsxs)("g",{className:"axis-group",children:[Object(I.jsx)("line",{x1:.8*_.left,x2:_.left,y1:B(e),y2:B(e),stroke:ae.a.generic.accent2}),Object(I.jsx)("line",{x1:_.left,x2:o-_.right,y1:B(e),y2:B(e),stroke:ae.a.generic.accent2,strokeDasharray:"2, 2",opacity:.2}),Object(I.jsx)("text",{x:.7*_.left,y:B(e)+A/100,fill:ae.a.generic.accent2,children:Math.round(100*+e)+"%"})]},e)}))}),Object(I.jsx)("g",{className:"axis axis-right",children:E.map((function(e){return Object(I.jsxs)("g",{className:"axis-group",children:[Object(I.jsx)("line",{x1:S(z[0])+S.bandwidth()/2,x2:S(z[z.length-1]),y1:F(e),y2:F(e),stroke:ae.a.generic.accent1,strokeDasharray:"4, 2",opacity:.5}),Object(I.jsx)("text",{x:o-_.right+2,y:F(e)+A/100,fill:ae.a.generic.accent1,children:e>0?Math.round(e/1e6)+"m livres t.":0})]},e)}))}),Object(I.jsxs)("g",{className:"axis axis-bottom",children:[Object(I.jsx)("line",{y1:A-_.bottom,y2:A-_.bottom,x1:S(z[0])+S.bandwidth()/2,x2:S(z[z.length-1])+S.bandwidth()/2,stroke:"lightgrey"}),z.map((function(e,t){var a=S(e)+S.bandwidth()/2,n=A-_.bottom;return Object(I.jsxs)("g",{className:"axis-group",transform:"translate(".concat(a,", ").concat(n,")"),children:[Object(I.jsx)("line",{x1:0,x2:0,y1:0,y2:_.bottom/6,stroke:"grey"}),Object(I.jsx)("g",{transform:"translate(".concat(.5*S.bandwidth(),", ").concat(_.bottom/2,")"),children:Object(I.jsx)("text",{fill:"grey",children:e})})]},t)}))]}),Object(I.jsx)("g",{className:"annotations-container",children:w.filter((function(e){var t=e.startYear,a=e.endYear;return t>=p&&a<=h})).map((function(e,t){var a=e.startYear,n=e.endYear+1;return Object(I.jsxs)("g",{className:"annotation",children:[Object(I.jsx)("rect",{x:S(a),width:S(n)-S(a),height:Object(ne.c)(A-_.top-_.bottom),y:_.top,fill:"url(#diagonalHatch)",opacity:.4}),Object(I.jsx)("line",{x1:S(a),x2:S(a),y1:_.top,y2:A-_.bottom,stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(I.jsx)("line",{x1:S(n),x2:S(n),y1:_.top,y2:A-_.bottom,stroke:"grey",opacity:.4,strokeDasharray:"4,2"}),Object(I.jsx)("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:Object(I.jsx)("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"grey",opacity:.5,strokeWidth:1}})})]},t)}))}),Object(I.jsx)("g",{className:"bars-container",children:L.map((function(e){return Object(I.jsx)("rect",{x:S(+e.year),y:B(e[r]),width:S.bandwidth(),height:Object(ne.c)(B(0)-B(e[r])),fill:i&&e[i]?P(+e[i]):ae.a.generic.dark,"data-tip":f?f(e.year,(100*e[r]).toFixed(2),g,e[i]&&(+e[i]||0).toFixed(2)).replace("[colorBox]",'<span style="display:inline-block;width: .8em;height:.8em;background:'.concat(P(+e[i]||0),'"></span>')):void 0,"data-for":g,"data-effect":"solid","data-html":!0,"data-class":"bar-tooltip","data-place":"left",className:x()("graph-bar",{"is-highlighted":b&&b.includes(+e.year)})},e.year)}))}),Object(I.jsxs)("g",{className:"lines-container",children:[L.sort((function(e,t){return+e.year>+t.year?1:-1})).filter((function(e){return+e[a]})).map((function(e,t){var n=S(+e.year)+S.bandwidth()/2,r=F(+e[a]);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("circle",{cx:n,cy:r,r:.005*o,fill:"transparent","data-tip":"".concat(e.year," : export de <strong>").concat(re(+e[a]),"</strong> livres tournois."),"data-for":g,"data-class":"bar-tooltip","data-html":!0},t),Object(I.jsx)("circle",{cx:n,cy:r,r:1.5,fill:ae.a.generic.accent1},t+"a")]})})),L.sort((function(e,t){return+e.year>+t.year?1:-1})).map((function(e,t){var n=L[t+1];if(t!==L.length-1&&!m&&+n.year!==+e.year+1)return null;if(!n)return null;var r=S(+e.year)+S.bandwidth()/2,i=S(+n.year)+S.bandwidth()/2,o=F(+e[a]),s=F(+n[a]);if(!+e[a]||!+n[a])return null;var l=+n[a]>+e[a]?+n[a]/+e[a]-1:-(1-+n[a]/+e[a]);return Object(I.jsx)("line",{x1:r,x2:i,y1:o,y2:s,stroke:ae.a.generic.accent1,title:"".concat(e.year,"-").concat(n.year),strokeWidth:2,"data-tip":"".concat(e.year," \u2192 <strong>").concat(re(+e[a]),"</strong> livres tournois <br/>").concat(n.year," \u2192 <strong>").concat(re(+n[a]),"</strong> livres tournois<br/><i>(").concat(l>0?"+":"").concat(Math.round(100*l),"%)</i>"),"data-for":g,"data-class":"bar-tooltip","data-html":!0},e.year)}))]}),Object(I.jsx)("g",{className:"annotations-container",children:w.filter((function(e){var t=e.startYear,a=e.endYear;return t>=p&&a<=h})).map((function(e,t){var a=e.startYear,n=e.endYear,r=e.label,i=e.row,o=void 0===i?0:i,s=e.labelPosition,l=void 0===s?"right":s,c=n+1;return Object(I.jsxs)("g",{className:"annotation",children:["right"===l?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("line",{x1:S(c)+20,x2:S(c)+10,y1:_.top+7.5+20*o,y2:_.top+7.5+20*o,stroke:"grey",markerEnd:"url(#arrowhead)"}),Object(I.jsx)("text",{x:S(c)+22,y:_.top+10+20*o,fontSize:".5rem",fill:"grey",children:r})]}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("line",{x1:S(a)-20,x2:S(a)-10,y1:_.top+7.5+20*o,y2:_.top+7.5+20*o,stroke:"grey",markerEnd:"url(#arrowhead)"}),Object(I.jsx)("text",{x:S(a)-22,y:_.top+10+20*o,fontSize:".5rem",textAnchor:"end",fill:"grey",children:r})]}),Object(I.jsx)("defs",{children:Object(I.jsx)("marker",{id:"arrowhead",markerWidth:"5",markerHeight:"5",refX:"0",refY:"2.5",orient:"auto",children:Object(I.jsx)("polygon",{stroke:"grey",fill:"transparent",points:"0 0, 5 2.5, 0 5"})})}),Object(I.jsx)("pattern",{id:"diagonalHatch",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:Object(I.jsx)("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"grey",opacity:.5,strokeWidth:1}})})]},t)}))})]}),Object(I.jsx)(O.a,{id:g})]})},oe=a(31),se=a(13),le=function(e){var t=e.data,a=e.tradeData,r=void 0===a?[]:a,i=e.field,d=e.partTreshold,u=e.height,p=e.barWidth,h=e.herfindhalField,m=e.years,f=e.width,g=e.title,b=e.margins,v=e.productTooltipFn,j=e.compareFrom,y=Object(n.useRef)(null),w=Object(n.useRef)(null),_=Object(n.useRef)(new Array(m.length)),L=Object(n.useContext)(oe.b).lang;Object(n.useEffect)((function(){setTimeout((function(){O.a.rebuild()}))}),[u]);var k=Object(n.useState)(void 0),C=Object(c.a)(k,2),T=C[0],q=C[1],A=Object(ne.c)(u),R=A/20+10;y&&y.current&&(A=u-y.current.getBoundingClientRect().height-R);var N=Object(n.useMemo)((function(){if(j){var e,a=m[m.length-1],n=t.filter((function(e){return e.year+""===a+""})),r=Object(Z.sum)(n.map((function(e){return+e[i]}))),l=0,c=Object(Z.sortBy)(n,(function(e){return-e[i]})).filter((function(e){return(l+=+e[i])<=d*r})),u=c.map((function(e){return e.product})),p=(e={},Object(o.a)(e,i,r-Object(Z.sum)(c.map((function(e){return+e[i]})))),Object(o.a)(e,"product","".concat(n.length-c.length," autres types de produits")),e);return c.push(p),m.reduce((function(e,n){var r;if(n===a)return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},n,c));var l=t.filter((function(e){return e.year+""===n+""})),d=Object(Z.sum)(l.map((function(e){return+e[i]}))),p=l.filter((function(e){return u.includes(e.product)})).sort((function(e,t){return+e[i]>+t[i]?-1:1}));return p.push((r={},Object(o.a)(r,i,d-Object(Z.sum)(p.map((function(e){return+e[i]})))),Object(o.a)(r,"product","".concat(l.length-p.length," autres types de produits")),r)),Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},n,p))}))}return m.reduce((function(e,a){var n,r=t.filter((function(e){return e.year+""===a+""})),l=Object(Z.sum)(r.map((function(e){return+e[i]}))),c=0,u=Object(Z.sortBy)(r,(function(e){return-e[i]})).filter((function(e){return(c+=+e[i])<=d*l})),p=(n={},Object(o.a)(n,i,l-Object(Z.sum)(u.map((function(e){return+e[i]})))),Object(o.a)(n,"product",Object(se.a)("viz-principale-partie-1","other_product",L,{number:r.length-u.length})),n);return u.push(p),Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},a,u))}),{})}),[m,JSON.stringify(t)]),M=Object(n.useMemo)((function(){return m.filter((function(e,t){return t<m.length-1})).map((function(e,t){var a=m[t+1],n=N[e+""],r=N[a+""];if(!r)return null;var o=Object(Z.sum)(n.map((function(e){return+e[i]}))),s=Object(Z.sum)(r.map((function(e){return+e[i]}))),c=0;return n.reduce((function(e,t,a){var n,d=0,u=t[i]/o*A;return c+=u,r.find((function(e){return n=function(e){return e/s*A}(e[i]),d+=n,e.product===t.product}))?[].concat(Object(l.a)(e),[{product:t.product,y1:c,height1:u,y2:d-n,height2:n}]):e}),[])}))}),[N,m,A]),S=Object(U.a)().domain(Object(K.a)(r,(function(e){return+e[h]}))).range([ae.a.generic.accent2,"grey"]),P=_.current&&_.current.length&&_.current[0]?_.current[0].parentNode.offsetTop:void 0;return Object(I.jsxs)("div",{className:"ProductsDistributionChart",children:[Object(I.jsx)("h3",{className:"visualization-title",style:{marginLeft:b.left},ref:y,children:g}),Object(I.jsxs)("div",{className:x()("years-container",{"has-highlights":void 0!==T}),style:{marginLeft:b.left+5,marginRight:b.right+.002*f},children:[Object(I.jsx)("svg",{ref:w,className:x()("links-container",{"has-highlights":T}),style:{top:P},width:f,height:A,children:M.map((function(e,t){var a=_.current&&_.current.length>=t&&_.current[t]&&_.current[t],n=_.current&&_.current.length>=t+1&&_.current[t+1]&&_.current[t+1],r=a?_.current[t].getBoundingClientRect().width:0,i=n&&w.current?_.current[t+1].getBoundingClientRect().x-w.current.getBoundingClientRect().x:f;return Object(I.jsx)("g",{className:"year-links",children:e.map((function(e,t){var a=e.product,n=e.y1-e.height1/2,o=e.y2+e.height2/2,s=T===a;return Object(I.jsx)("path",{d:"M ".concat(r," ").concat(n," C ").concat(r+.5*(i-r)," ").concat(n," ").concat(r+.5*(i-r)," ").concat(o," ").concat(i," ").concat(o),className:x()("link",{"is-highlighted":s})},t)}))},t)}))}),m.map((function(e,a){var n=t.filter((function(t){return t.year+""===e+""})),o=r.filter((function(t){return t.year===e+""})),s=o&&+o[0][h],l=s?S(+s):"lightgrey",c=Object(Z.sum)(n.map((function(e){return+e[i]}))),d=N[e+""],u=Object(J.a)().domain(Object(K.a)(n,(function(e){return+e[i]}))).range([A/100,A/10]);return Object(I.jsxs)("div",{className:"year-column",children:[Object(I.jsx)("h4",{className:"year-label",children:Object(I.jsx)("span",{children:e})}),Object(I.jsxs)("div",{className:"year-items",children:[Object(I.jsx)("div",{className:"dimensions-placeholder",ref:function(e){_.current[a]=e},style:{width:"".concat(p,"px"),height:0,position:"absolute",top:0,left:a===m.length-1?void 0:0,right:a===m.length-1?0:void 0}}),d&&d.map((function(t,n){var r,o=T===t.product,s=n===d.length-1?10:u(+t[i]);return o&&s<10&&(s=10),Object(I.jsxs)("div",{style:{height:"".concat((r=t[i],r/c*A),"px")},className:x()("product-group",{"is-highlighted":o}),onClick:function(){T!==t.product&&n!==d.length-1?q(t.product):q(void 0)},"data-tip":v&&n!==d.length-1?v(e,t.product,(t[i]/c*100).toFixed(2)):void 0,"data-for":"product-tooltip","data-html":!0,"data-class":"bar-tooltip","data-place":0===a?"right":"left","data-effect":"solid",children:[Object(I.jsx)("div",{style:{height:"100%",width:"".concat(p,"px"),maxWidth:"".concat(p,"px"),minWidth:"".concat(p,"px"),backgroundColor:l},className:"bar"}),Object(I.jsx)("span",{className:"label",style:{fontSize:s},children:t.product})]},t.product)}))]})]},a)}))]}),Object(I.jsx)(O.a,{id:"product-tooltip"})]})},ce=(a(512),function(e){var t=e.width,a=e.height,n=e.lang,r=void 0===n?"fr":n,i=e.startYear,o=void 0===i?1720:i,s=e.endYear,l=void 0===s?1789:s,d=e.productTradePartThreshold,u=void 0===d?.9:d,p=e.rows,h=e.datasets,m=void 0===h?{}:h,f=e.atlasMode,g=f?1200:Object(ne.c)(a),b=Object(ne.c)(t),v={franceOverviewTitle:function(e,t){return Object(se.a)("viz-principale-partie-1","franceOverviewTitle",r,{start:e,end:t})},tradeEvolutionTitle:function(e,t,a){return Object(se.a)("viz-principale-partie-1","tradeEvolutionTitle",r,{cityName:e,start:t,end:a})},top90PctTitle:function(e,t,a){return Object(se.a)("viz-principale-partie-1","top90PctTitle",r,{cityName:e,start:t,end:a})},partInPct:function(){return Object(se.a)("viz-principale-partie-1","partInPct",r)},absoluteValue:function(){return Object(se.a)("viz-principale-partie-1","absoluteValue",r)},herfindalLegendTitle:function(){return Object(se.a)("viz-principale-partie-1","herfindalLegendTitle",r)},herfindal0:function(){return Object(se.a)("viz-principale-partie-1","herfindal0",r)},herfindal1:function(){return Object(se.a)("viz-principale-partie-1","herfindal1",r)},barTooltip:function(e,t,a,n){return Object(se.a)("viz-principale-partie-1","barTooltip",r,{year:e,pct:t,city:a,herfindal:n})},productTooltip:function(e,t,a){return Object(se.a)("viz-principale-partie-1","productTooltip",r,{year:e,product:t,pct:a})},sevenYearsWar:function(e,t,a){return Object(se.a)("viz-principale-partie-1","sevenYearsWar",r,{year:e,product:t,pct:a})},austriaWar:function(){return Object(se.a)("viz-principale-partie-1","austriaWar",r)},usIndependance:function(){return Object(se.a)("viz-principale-partie-1","usIndependance",r)},laRochelleDiaspora:function(){return Object(se.a)("viz-principale-partie-1","laRochelleDiaspora",r)}},j={top:10,right:50,bottom:30,left:50},O=Object.entries(p).reduce((function(e,t){var a=Object(c.a)(t,2);a[0];return e+a[1]}),0),y=function(e,t,a){switch(e){case"France":return m["decline_longitudinal_data/decline_longitudinal_data.csv"]?Object(I.jsx)(ie,{width:b,height:Object(ne.c)(g/O*t),data:m["decline_longitudinal_data/decline_longitudinal_data.csv"].filter((function(e){return"France"===e.region})),absoluteField:"Exports",title:v.franceOverviewTitle(o,l),axisLeftTitle:"",axisRightTitle:v.absoluteValue(),margins:j,annotations:[{type:"span",startYear:1756,endYear:1763,label:v.sevenYearsWar()},{type:"span",startYear:1744,endYear:1748,row:.5,label:v.austriaWar()},{type:"span",startYear:1778,endYear:1781,labelPosition:"left",row:3,label:v.usIndependance()}],startYear:o,endYear:l}):null;case"La Rochelle":return m["decline_longitudinal_data/decline_longitudinal_data.csv"]?Object(I.jsx)(ie,{width:b,height:Object(ne.c)(g/O*t),data:m["decline_longitudinal_data/decline_longitudinal_data.csv"].filter((function(e){return"La Rochelle"===e.region})),absoluteField:"Exports",shareField:"Exports_share",herfindhalField:"product_revolutionempire_exports_herfindahl",title:v.tradeEvolutionTitle("La Rochelle",o,l),axisLeftTitle:v.partInPct(),axisRightTitle:v.absoluteValue(),margins:j,barTooltipFn:v.barTooltip,cityName:"La Rochelle",highlightYears:p.comparison>0?[o,l]:void 0,annotations:[{type:"span",startYear:1756,endYear:1763,label:v.sevenYearsWar()},{type:"span",startYear:1744,endYear:1748,row:1,label:v.austriaWar()},{type:"span",startYear:1747,endYear:1747,row:2,label:v.laRochelleDiaspora()},{type:"span",startYear:1778,endYear:1781,labelPosition:"left",row:3,label:v.usIndependance()}],colorScaleMessages:{title:v.herfindalLegendTitle(),minimum:v.herfindal0(),maximum:v.herfindal1()},startYear:o,endYear:l}):null;case"Bordeaux":return m["decline_longitudinal_data/decline_longitudinal_data.csv"]?Object(I.jsx)(ie,{width:b,height:Object(ne.c)(g/O*t),data:m["decline_longitudinal_data/decline_longitudinal_data.csv"].filter((function(e){return"Bordeaux"===e.region})),absoluteField:"Exports",shareField:"Exports_share",herfindhalField:"product_revolutionempire_exports_herfindahl",title:v.tradeEvolutionTitle("Bordeaux",o,l),axisLeftTitle:v.partInPct(),axisRightTitle:v.absoluteValue(),barTooltipFn:v.barTooltip,cityName:"Bordeaux",annotations:[{type:"span",startYear:1756,endYear:1763,row:.5,label:v.sevenYearsWar()},{type:"span",startYear:1744,endYear:1748,row:0,label:v.austriaWar()},{type:"span",startYear:1778,endYear:1781,labelPosition:"left",row:1,label:v.usIndependance()}],margins:j,colorScaleMessages:{title:v.herfindalLegendTitle(),minimum:v.herfindal0(),maximum:v.herfindal1()},startYear:o,endYear:l}):null;case"comparison":return m["decline_LR_products/decline_LR_products.csv"]&&m["decline_longitudinal_data/decline_longitudinal_data.csv"]?Object(I.jsx)(le,{data:m["decline_LR_products/decline_LR_products.csv"],tradeData:m["decline_longitudinal_data/decline_longitudinal_data.csv"],field:"Exports",partTreshold:u,height:Object(ne.c)(g/O*t),barWidth:.02*b,years:[f?1750:o,f?1789:l],margins:j,herfindhalField:"product_revolutionempire_exports_herfindahl",title:v.top90PctTitle("La Rochelle",f?1750:o,f?1789:l),productTooltipFn:v.productTooltip,width:b},a):null;default:return Object(I.jsx)("div",{children:e})}};return Object(I.jsx)("div",{className:"DeclineChart",children:Object.entries(p).map((function(e,t){var a=Object(c.a)(e,2),n=a[0],r=a[1];return Object(I.jsx)("div",{className:x()("row",{"is-visible":p[n]}),children:y(n,r,t)})}))})}),de=["width","height","step"],ue=function(e){var t=e.width,a=e.height,n=e.step,r=Object(C.a)(e,de);if(r.atlasMode)return Object(I.jsx)(ce,Object(s.a)({startYear:1720,endYear:1789,rows:{France:1,"La Rochelle":1,Bordeaux:1,comparison:1}},Object(s.a)({width:t,height:a},r)));switch(n+""){case"1":return Object(I.jsx)(ce,Object(s.a)({startYear:1720,endYear:1789,rows:{France:2,"La Rochelle":3,Bordeaux:3,comparison:0}},Object(s.a)({width:t,height:a},r)));case"2":return Object(I.jsx)(ce,Object(s.a)({startYear:1720,endYear:1789,rows:{France:0,"La Rochelle":1,Bordeaux:1,comparison:0}},Object(s.a)({width:t,height:a},r)));case"3":return Object(I.jsx)(ce,Object(s.a)({startYear:1750,endYear:1789,rows:{France:0,"La Rochelle":1,Bordeaux:0,comparison:2}},Object(s.a)({width:t,height:a},r)));case"4":default:return Object(I.jsx)(ce,Object(s.a)({startYear:1750,endYear:1789,rows:{France:1,"La Rochelle":1,Bordeaux:0,comparison:1}},Object(s.a)({width:t,height:a},r)))}},pe=a(674),he=a(675),me=a(676),fe=a(321),ge=a.n(fe),be=(a(538),a(122)),ve=a(685),je=a(23),xe=["children","className","onClick"],Oe=["children","onClick","className","style"],ye=["style","className","onClick"],we=["style","className","onClick"],_e=["style","className","onClick"],Le=["style","className","onClick"],ke=function(e){var t=e.children,a=e.className,n=e.onClick,r=Object(C.a)(e,xe),i=Object(je.useSpring)(r);return Object(I.jsx)(je.animated.g,Object(s.a)(Object(s.a)({className:a,onClick:n},i),{},{children:t}))},Ce=function(e){var t=e.children,a=e.onClick,n=e.className,r=e.style,i=Object(C.a)(e,Oe),o=Object(je.useSpring)(i);return Object(I.jsx)(je.animated.text,Object(s.a)(Object(s.a)({className:n,onClick:a,style:r},o),{},{children:t}))},Te=function(e){var t=e.style,a=e.className,n=e.onClick,r=Object(C.a)(e,ye),i=Object(je.useSpring)(r);return Object(I.jsx)(je.animated.line,Object(s.a)({className:a,onClick:n,style:t},i))},qe=function(e){var t=e.style,a=e.className,n=e.onClick,r=Object(C.a)(e,we),i=Object(je.useSpring)(r);return Object(I.jsx)(je.animated.circle,Object(s.a)({className:a,onClick:n,style:t},i))},Ae=function(e){var t=e.style,a=e.className,n=e.onClick,r=Object(C.a)(e,_e),i=Object(je.useSpring)(r);return Object(I.jsx)(je.animated.rect,Object(s.a)({className:a,onClick:n,style:t},i))},Re=function(e){var t=e.style,a=e.className,n=e.onClick,r=Object(C.a)(e,Le),i=Object(je.useSpring)(r);return Object(I.jsx)(je.animated.path,Object(s.a)({className:a,onClick:n,style:t},i))},Ne=[pe.a,he.a,me.a],Me=function(e){var t=e.data,a=void 0===t?[]:t,r=e.sumBy,i=e.steps,d=e.width,u=void 0===d?1200:d,p=e.height,h=void 0===p?800:p,m=e.filters,f=void 0===m?[]:m,g=e.debug,b=void 0!==g&&g,v=e.title,j=e.colorsPalettes,y=e.centerHorizontalLabels,w=void 0===y||y,_=e.displaceHorizontalLabels,L=void 0===_||_,k=e.tooltips,C=e.lang,T=e.align,q=void 0===T?"left":T,A=Object(n.useRef)(null),R=A.current?h-A.current.getBoundingClientRect().height:h;R=Object(ne.c)(R);var N=Object(ne.c)(u),M=Object(n.useState)(void 0),S=Object(c.a)(M,2),P=S[0],z=S[1],F=Object(n.useState)(void 0),B=Object(c.a)(F,2),E=B[0],D=B[1],H=Object(n.useMemo)((function(){return function(e,t){var a=t.sumBy,n=t.steps,r=e.map((function(e,t){return Object(s.a)(Object(s.a)({},e),{},{_id:t})})),i=n.map((function(e,t){var n=e.filters,i=r;n&&n.length&&(i=n.reduce((function(e,t){var a=t.key,n=t.value;return e.filter((function(e){return e[a]===n}))}),i));var o=ge()(i,(function(t){return t[e.field]})),l=(o=Object.entries(o).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1].map((function(e){var t;if(a){var n=e[a];t=+(n=""===n?0:n)}else t=1;return Object(s.a)(Object(s.a)({},e),{},{valueAbs:t})}));return{id:n,valueAbs:r.reduce((function(e,t){return e+t.valueAbs}),0),flows:r}}))).reduce((function(e,t){return e+t.valueAbs}),0);return o=o.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{valuePart:e.valueAbs/l,flows:e.flows.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{valuePart:e.valueAbs/l})})).sort((function(e,a){var n=t>=2&&t<=4?-1:1;return e.valuePart<a.valuePart?n:-n}))})})),Object(s.a)(Object(s.a)({},e),{},{totalValue:l,nodes:o.sort((function(e,a){var n=t>=2&&t<=4?-1:1;return e.valuePart<a.valuePart?n:-n}))})}));return(i=i.map((function(e,t){var a=0,n=0,r=e.nodes.map((function(e){var t=a,r=n,i=Object(s.a)(Object(s.a)({},e),{},{displaceAbs:a,displacePart:n,flows:e.flows.map((function(e){var i=Object(s.a)(Object(s.a)({},e),{},{displaceAbs:t,displacePart:r,relativeDisplaceAbs:t-a,relativeDisplacePart:r-n});return t+=e.valueAbs,r+=e.valuePart,i}))});return a+=e.valueAbs,n+=e.valuePart,i}));return Object(s.a)(Object(s.a)({},e),{},{nodes:r})}))).map((function(e,t){if(t<i.length-1){var a=i[t+1],n=a.field,r=e.nodes.map((function(e,t){var r=e.flows.map((function(e,t){var r=e[n],i=a.nodes.find((function(e){return e.id===r}));if(i){var o=i.flows.find((function(t){return e._id===t._id}));if(o){var l={displaceAbs:o.displaceAbs,displacePart:o.displacePart,relativeDisplaceAbs:o.relativeDisplaceAbs,relativeDisplacePart:o.relativeDisplacePart};return Object(s.a)(Object(s.a)({},e),{},{nextPosition:l})}}return e}));return Object(s.a)(Object(s.a)({},e),{},{flows:r})}));return Object(s.a)(Object(s.a)({},e),{},{nodes:r})}return e}))}(a,{sumBy:r,steps:i})}),[a,r,i]),W=Object(n.useMemo)((function(){return f&&f.length?a.filter((function(e){return f.find((function(t){var a=t.key,n=t.value;return e[a]===n}))})).reduce((function(e,t){return e+ +t[r]}),0):a.reduce((function(e,t){return e+ +t[r]}),0)}),[a,r,f]);Object(n.useEffect)((function(){O.a.rebuild()})),Object(n.useEffect)((function(){z(void 0),D(void 0)}),[f]);var $=Object(n.useMemo)((function(){var e=H.reduce((function(e,t){var a=Object(ve.a)(t.nodes.map((function(e){return e.id})));return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},t.field,e[t.field]?Object(ve.a)([].concat(Object(l.a)(e[t.field]),Object(l.a)(a))):a))}),{});return Object.entries(e).reduce((function(e,t,a){var n=Object(c.a)(t,2),r=n[0],i=n[1],l=0;return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},r,i.reduce((function(e,t){return l++,Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},t,Ne[a][l-1]))}),{})))}),{})}),[H]),G=Object(n.useMemo)((function(){return Object(be.a)([N,R])}),[N,R]),Y=.3*G,X=G/50,V=.2*G,U=Object(J.a)().range([G/120,G/50]).domain([0,1]),Z=Object(ne.b)(-G/2+Y,-V/2).distance,Q=Object(ne.b)(-G/2,-V/2+X).distance,K=Math.abs(G/2-Q),ee=G/2-Z,te={0:{orientation:"horizontal",direction:"top",displaceX:K,displaceY:G/2-V/2,displaceText:.2*V+5},1:{orientation:"vertical",displaceX:G/2,displaceY:0},2:{orientation:"horizontal",displaceX:G-Y-K,displaceY:G/2-V/2,displaceText:.2*V+5,direction:"top"},3:{orientation:"horizontal",displaceX:G-Y-K,displaceY:G/2+V/2,displaceText:-5,direction:"bottom"},4:{orientation:"vertical",displaceX:G/2,displaceY:G-Y},5:{orientation:"horizontal",displaceY:G/2+V/2,displaceX:K,displaceText:-5,direction:"bottom"}},ae=E?H.find((function(e){return e.field===E.key})).nodes.find((function(e){return e.id===E.value})):void 0,re=ae?ae.flows.reduce((function(e,t){return e+ +t[r]}),0):0,ie=.4*G,oe=.6*G,se=G/2-.5*V+X,le=G/2-V+X,ce=G/2+.5*V+X,de=G/2+V;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("h5",{ref:A,className:"visualization-title",children:v}),Object(I.jsx)("svg",{"data-for":"alluvial-tooltip","data-tip":undefined,width:N,height:R,className:x()("CircularAlluvialChart",{"has-filters":f.length,"has-highlight":P||E}),children:Object(I.jsxs)(ke,{transform:"translate(".concat(.05*N,", ").concat(.05*R,")scale(.9)"),children:[Object(I.jsxs)(ke,{className:"background-marks",transform:"translate(".concat("left"===q?0:N/2-G/2,", 0)"),children:[Object(I.jsx)(Te,{x1:0,x2:G,y1:G/2,y2:G/2}),b?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(qe,{cx:G/2,cy:G/2,r:.5*G}),Object(I.jsx)(qe,{cx:G/2,cy:G/2,r:Q}),Object(I.jsx)(qe,{cx:G/2,cy:G/2,r:Z})]}):null,Object(I.jsx)(Ce,{x:G/2,y:G/2-.5*V+X,style:{fontSize:U(1),fontWeight:E&&E.index<=2||P&&P.stepIndex<=2?800:void 0},children:"EXPORTS"}),Object(I.jsx)(Ce,{x:G/2,y:G/2+.5*V+X,style:{fontSize:U(1),fontWeight:E&&E.index>2||P&&P.stepIndex>2?800:void 0},children:"IMPORTS"}),Object(I.jsx)(Re,{d:"M ".concat(ie," ").concat(se," \n            Q ").concat(ie," ").concat(le,", ").concat(G/2," ").concat(le," \n            Q ").concat(oe," ").concat(le,", ").concat(oe," ").concat(se),stroke:"grey",strokeWidth:.5,fill:"none",markerEnd:"url(#arrowhead)",style:{opacity:E&&E.index<=2||P&&P.stepIndex<=2?1:.5}}),Object(I.jsx)(Ce,{x:ie-5,y:G/2-.5*V+X,style:{fontSize:U(.5),fontStyle:"italic",textAnchor:"end",opacity:E&&E.index<=2||P&&P.stepIndex<=2?1:.5},children:i[0].name}),Object(I.jsx)(Ce,{x:G/2,y:le-5,style:{fontSize:U(.5),fontStyle:"italic",textAnchor:"middle",opacity:E&&E.index<=2||P&&P.stepIndex<=2?1:.5},children:i[1].name}),Object(I.jsx)(Ce,{x:oe+5,y:G/2-.5*V+X,style:{fontSize:U(.5),fontStyle:"italic",textAnchor:"start",opacity:E&&E.index<=2||P&&P.stepIndex<=2?1:.5},children:i[2].name}),Object(I.jsx)(Re,{d:"M ".concat(oe," ").concat(ce," \n            Q ").concat(oe," ").concat(de,", ").concat(G/2," ").concat(de," \n            Q ").concat(ie," ").concat(de,", ").concat(ie," ").concat(ce),stroke:"grey",strokeWidth:.5,fill:"none",markerEnd:"url(#arrowhead)",style:{opacity:E&&E.index<=2||P&&P.stepIndex<=2?1:.5}}),Object(I.jsx)(Ce,{x:ie-5,y:G/2+.5*V+X,style:{fontSize:U(.5),fontStyle:"italic",textAnchor:"end",opacity:E&&E.index>2||P&&P.stepIndex>2?1:.5},children:i[5].name}),Object(I.jsx)(Ce,{x:G/2,y:de+10,style:{fontSize:U(.5),fontStyle:"italic",textAnchor:"middle",opacity:E&&E.index>2||P&&P.stepIndex>2?1:.5},children:i[4].name}),Object(I.jsx)(Ce,{x:oe+5,y:G/2+.5*V+X,style:{fontSize:U(.5),fontStyle:"italic",textAnchor:"start",opacity:E&&E.index>2||P&&P.stepIndex>2?1:.5},children:i[3].name}),Object(I.jsx)("defs",{children:Object(I.jsx)("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",orient:"auto",children:Object(I.jsx)("polygon",{stroke:"grey",strokeWidth:1,fill:"grey",points:"0 0, 10 5, 0 10"})})})]}),Object(I.jsx)(ke,{transform:"translate(".concat("left"===q?0:N/2-G/2,", 0)"),children:H.map((function(e,t){var a=te[t],n=a.orientation,i=a.direction,o=a.displaceX,l=a.displaceY,d=a.displaceText,u=l,p=Object(J.a)().domain([0,1]).range([0,"vertical"===n?ee:Y-K]),h=0;return Object(I.jsxs)(ke,{className:x()("step-container","is-oriented-"+n),children:[Object(I.jsx)(Ae,{x:o,y:u,width:"vertical"===n?X:Y,height:"vertical"===n?Y:X,fill:"white",className:"step-bar-background"}),e.nodes.map((function(a,l){return Object(I.jsx)(ke,{className:x()("links-group"),children:a.flows.filter((function(e){return e.nextPosition})).map((function(l,c){var d=te[t+1],h=Object(J.a)().domain([0,1]).range([0,"vertical"===d.orientation?ee:Y-X/3]),m=o+X,g=u+p(l.displacePart),v=d.displaceX,O=d.displaceY+h(l.nextPosition.displacePart),y=d.displaceX,w=d.displaceY+h(l.nextPosition.displacePart)+h(l.valuePart),_=u+p(l.displacePart)+p(l.valuePart),L=o+X;"horizontal"===n&&(m=o+p(l.displacePart),g=u+("bottom"===i?X:0),_=u+("bottom"===i?X:0),L=o+p(l.displacePart)+p(l.valuePart)),"horizontal"===d.orientation&&(v=d.displaceX+h(l.nextPosition.displacePart)+h(l.valuePart),O=d.displaceY+("bottom"===d.direction?X:0),y=d.displaceX+h(l.nextPosition.displacePart),w=d.displaceY+("bottom"===d.direction?X:0)),3===t&&(v+=X,y+=X,O+=2*X,w+=2*X),4===t&&(m-=X,L-=X,g+=2*X,_+=2*X);var T=m,q=O,A=m,R=O,N=L,M=w,S=L,F=w;1!==t&&4!==t||(T=v,q=g,A=v,R=g,N=y,M=_,S=y,F=_),0===t?(q=g-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(O-g),A=v-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(v-m),F=_-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(_-w),N=y-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(y-L)):1===t?(T=m+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(v-m),R=O-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(O-g),M=w-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(w-_),S=L+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(L-y)):3===t?(q=g+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(O-g),A=v+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(v-m),N=y+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(L-y),F=_+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(w-_)):4===t&&(T=m-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(v-m),R=O+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(O-g),S=L-4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(L-y),M=w+4/3*(1-Math.cos(45)/Math.sin(45))*Math.abs(w-_));var B=l.flow_type,H=l.customs_office,W=l.product,G=l.partner,V=l[r],U=k.flow[C]({flow_type:B,customs_office:H,product:W,sumBy:r,value:V,partner:G});return Object(I.jsxs)(ke,{onClick:function(){P&&P._id===l._id?(D(void 0),z(void 0)):(E&&D(void 0),z(Object(s.a)(Object(s.a)({},l),{},{stepIndex:t})))},className:x()("flow-link",{"is-filtered-in":f&&f.find((function(e){var t=e.key,a=e.value;return l[t]===a})),"is-highlighted":P&&P._id===l._id||E&&l[E.key]===E.value}),"data-for":"alluvial-tooltip","data-tip":U,children:[Object(I.jsx)(Re,{d:"\n                                    M ".concat(m," ").concat(g," \n                                    C ").concat(T,",").concat(q," ").concat(A,",").concat(R," ").concat(v," ").concat(O," \n                                    L ").concat(y," ").concat(w,"\n                                    C ").concat(N,",").concat(M," ").concat(S,",").concat(F," ").concat(L," ").concat(_," \n                                    Z\n                                    ").trim().replace(/\n/g," "),style:{fill:j?j[e.field][a.id]:$[e.field][a.id]}}),b?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Te,{stroke:"red",x1:m,y1:g,x2:T,y2:q}),Object(I.jsx)(qe,{cx:T,cy:q,r:2,fill:"red"}),Object(I.jsx)(Te,{stroke:"blue",x1:v,y1:O,x2:A,y2:R}),Object(I.jsx)(qe,{cx:A,cy:R,r:2,fill:"blue"}),Object(I.jsx)(Te,{stroke:"green",x1:y,y1:w,x2:N,y2:M}),Object(I.jsx)(qe,{cx:N,cy:M,r:2,fill:"green"}),Object(I.jsx)(Te,{stroke:"lightblue",x1:L,y1:_,x2:S,y2:F}),Object(I.jsx)(qe,{cx:S,cy:F,r:2,fill:"lightblue"})]}):null]},c)}))},l)})),e.nodes.map((function(a,i){var s=p(a.valuePart),l=p(a.displacePart),m=s-2,g=u+l,b=o,v=X,O=m;"horizontal"===n&&(v=m,O=X,b=o+l,g=u),4===t&&(g+=2*X);var y=E&&a.id===E.value&&t===E.index,_=0;E?_=a.flows.filter((function(e){return e[E.key]===E.value})).reduce((function(e,t){return e+ +t[r]}),0)/re:f&&f.length&&(_=a.flows.filter((function(e){return f.find((function(t){var a=t.key,n=t.value;return e[a]===n}))})).reduce((function(e,t){return e+ +t[r]}),0)/W),_>1&&(_=1);var C=f&&f.find((function(e){var t=e.key,n=e.value;return a.flows.find((function(e){return e[t]===n}))})),T=0;0===t||2===t?T=30:3!==t&&5!==t||(T=-30);var q="vertical"===n?b+2*X:b+(w?v/2:0),A=q;if("horizontal"===n){L&&h&&A<h+20&&(A=h+20),h=A}var R="vertical"===n?g+O/2:g+d,N=Object(ne.g)(a.id,20),M=Object(c.a)(N,2),S=M[0],F=M[1],B=P&&a.flows.find((function(e){return e._id===P._id}))||E&&e.id===E.key&&a.id===E.value,H=E&&e.field===E.key&&a.id===E.value,G=U(E||ae?_>0?_:a.valuePart:1),Y=k.node(a,t);return Object(I.jsxs)(ke,{className:x()("step-node-container",{"has-highlights":B,"is-filtered-in":C,"is-highlighted":H}),onClick:function(){E&&E.value===a.id?(z(void 0),D(void 0)):(P&&z(void 0),D({key:e.field,value:a.id,index:t}))},"data-for":"alluvial-tooltip","data-tip":Y,children:[Object(I.jsx)(Ae,{x:b,y:g,width:v,height:O,className:"node-level-node"}),Object(I.jsx)(ke,{transform:"\n                            translate(".concat(A,", ").concat(R,")\n                            rotate(").concat(T,")\n                          "),className:x()("node-level-label",{"is-filtered-in":C,"is-highlighted":y,"is-secondary-highlighted":!y&&_>0}),children:Object(I.jsx)(Ce,{style:{fontSize:0===t||[2,3,5].find((function(e){return e===t}))?.75*G:G},children:C||y?S+" "+(F||""):"".concat(F?S+"...":S)})}),L&&q!==A?Object(I.jsx)(Te,{x1:b+s/2,y1:0===t||2===t?g+X:g,x2:A,y2:R,className:x()("label-line",{"is-filtered-in":C,"is-highlighted":y,"is-secondary-highlighted":!y&&_>0})}):null,a.flows.map((function(r,i){var s=b,l=u+p(r.displacePart);4===t&&(l+=2*X);var c=X,d=p(r.valuePart);return"horizontal"===n&&(c=p(r.valuePart),d=X,s=o+p(r.displacePart),l=u),Object(I.jsx)(Ae,{x:s,y:l,width:c,height:d,className:x()("flow-level-node",{"is-filtered-in":f&&f.find((function(e){var t=e.key,a=e.value;return r[t]===a})),"is-highlighted":P&&P._id===r._id||E&&r[E.key]===E.value}),style:{fill:j?j[e.field][a.id]:$[e.field][a.id]},title:a.id},i)}))]},a.id)}))]},t)}))})]})}),Object(I.jsx)(O.a,{id:"alluvial-tooltip"})]})},Se=a(243),Pe=(a(540),(0,Se.a.createSliderWithTooltip)(Se.a.Range)),ze=function(e){var t=e.title,a=e.min,n=e.max,r=e.value,i=e.onChange;return Object(I.jsxs)("div",{style:{width:300,margin:50},children:[Object(I.jsx)("p",{children:t}),Object(I.jsx)(Pe,{allowCross:!1,min:a,max:n,value:r,onChange:i})]})},Fe=function(e){var t=e.size,a=e.MARGIN,n=e.axisIndex,r=e.axisRankScale,i=e.axis,o=e.label,s=t/2+a/2,l=t/2+a/2,d=Object(ne.f)(t/2,r(n)),u=Object(c.a)(d,2),p=s+u[0],h=l+u[1],m=-a/8,f=15;n>0&&(f=-10,n===i.length/2?(f=-20,m=-a/6):m=n<i.length/2?-a/2:5,3!==n&&5!==n||(f=-30),7===n&&(f=5),1===n&&(f=5,m=-a/3));var g=Object(je.useSpring)({x1:s,y1:l,x2:p,y2:h,labelX:p+m,labelY:h+f}),b=g.x1,v=g.y1,j=g.x2,x=g.y2,O=g.labelX,y=g.labelY;return Object(I.jsxs)("g",{className:"AxisObject",children:[Object(I.jsx)(je.animated.line,{x1:b,y1:v,x2:j,y2:x}),Object(I.jsx)(je.animated.foreignObject,{x:O,y:y,width:.7*a,height:a,children:Object(I.jsx)("div",{className:"label",children:o})})]},n)},Be=["cx","cy","r"],Ee=function(e){var t=e.cx,a=e.cy,n=e.r,r=Object(C.a)(e,Be),i=Object(je.useSpring)({cx:Object(ne.c)(t),cy:Object(ne.c)(a),r:n}),o=i.cx,l=i.cy,c=i.r;return Object(I.jsx)(je.animated.circle,Object(s.a)({cx:o,cy:l,r:c},r))},De=function(e){var t=e.lang,a=e.color,n=e.data,r=e.axisIndexMap,i=e.axisRankScale,o=e.center,s=e.name,l=e.radiusScale,d=Object.entries(r).map((function(e){var t=Object(c.a)(e,2),a=t[0],r=t[1],s=n[a]||0,d=l(s),u=i(+r),p=Object(ne.f)(d,u),h=Object(c.a)(p,2),m=h[0],f=h[1];return[Object(ne.c)(m+o[0]),Object(ne.c)(f+o[1])]})),u=Object(je.useSpring)({joinedPoints:d.map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return"".concat(a,",").concat(n)})).join(" ")}).joinedPoints,p=Object.entries(n),h=Object(Z.sum)(p.map((function(e){return e[1]})));return p=p.map((function(e){var t=Object(c.a)(e,2);return[t[0],t[1]/h]})),Object(I.jsxs)("g",{className:"VisObject","data-for":"radar-tooltip","data-html":!0,"data-place":"left","data-tip":"\n      <p>\n      ".concat("Tous les bureaux"===s?Object(se.a)("viz-principale-partie-2","radar_tip_region",t):Object(se.a)("viz-principale-partie-2","radar_tip_office",t,{name:s})," :\n      </p>\n      <ol>\n        ").concat(p.sort((function(e,t){var a=Object(c.a)(e,2),n=(a[0],a[1]),r=Object(c.a)(t,2);r[0];return n>r[1]?-1:1})).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return"\n            <li>\n              <strong>".concat(a,"</strong> : <strong>").concat((100*n).toFixed(2),"%</strong>\n            </li>\n          ")})).join("\n"),"\n      </ol>\n  "),children:[Object(I.jsx)(je.animated.polygon,{points:u,fill:a,fillOpacity:.5}),d.map((function(e,t){var n=Object(c.a)(e,2),r=n[0],i=n[1];return Object(I.jsx)(Ee,{cx:r,cy:i,r:1,fill:a},t)}))]})},Ie=(a(541),function(e){var t=e.lang,a=e.data,r=e.size,i=void 0===r?100:r,l=e.axis;Object(n.useEffect)((function(){O.a.rebuild()}));var c=Object(n.useMemo)((function(){return l.reduce((function(e,t,a){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},t,a))}),{})}),[l]),d=100,u=i-d,p=Object(je.useSpring)({visCenter:u/2+50,visSize:u/2}),h=p.visCenter,m=p.visSize,f=Object(J.a)().domain([0,l.length]).range([Math.PI/2,2.5*Math.PI]),g=Object(J.a)().domain([0,1]).range([0,u/2]);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("svg",{className:"RadarPlot",width:i,height:i,children:[Object(I.jsx)(je.animated.circle,{cx:h,cy:h,r:m,strokeWidth:.5,stroke:"grey",fill:"none"}),Object(I.jsx)("g",{className:"background-container",children:l.map((function(e,t){return Object(I.jsx)(Fe,{size:u,MARGIN:d,axisIndex:t,axisRankScale:f,axis:l,label:e},t)}))}),Object(I.jsx)("g",{className:"objects-container",children:a.map((function(e,a){return Object(I.jsx)(De,{lang:t,color:e.meta.color,name:e.meta.name,data:e.data,axisIndexMap:c,axisRankScale:f,center:[u/2+50,u/2+50],radiusScale:g},e.meta.name)}))})]}),Object(I.jsx)(O.a,{id:"radar-tooltip"})]})}),He=function(e,t){var a=Object(Z.maxBy)(Object(Z.values)(e),(function(e){return e})),n=Object(J.a)().domain([0,a]).range([0,1]);for(var r in e)e.hasOwnProperty(r)&&(e[r]=n(e[r]));for(var i in t)e.hasOwnProperty(i)||(e[i]=0);return e},We=function(e){var t=e.data,a=e.globalWidth,r=void 0===a?500:a,i=e.minified,o=e.title,s=e.bureaux,d=void 0===s?"tous":s,u=e.navigoAgregation,p=void 0===u?"tonnage":u,h=e.minTonnage,m=e.maxTonnage,f=e.lang,g=e.axis,b=void 0===g?[]:g,v=e.colorPalette,j=Object(n.useState)(new Set(["Tous les bureaux"])),O=Object(c.a)(j,2),y=O[0],w=O[1],_=Object(n.useState)("tonnage"),L=Object(c.a)(_,2),k=L[0],C=L[1],T=Object(n.useState)([]),q=Object(c.a)(T,2),A=q[0],R=q[1],N=Object(n.useState)(),M=Object(c.a)(N,2),S=M[0],P=M[1],z=Object(n.useMemo)((function(){if(t){var e=t.map((function(e){if(""!==e.destination_radar&""!==e.ferme_bureau)return{ferme_bureau:e.ferme_bureau,destination_radar:e.destination_radar.replace(/['"]+/g,""),tonnage:+e.tonnage}})).filter((function(e){return e})),a=Object(Z.maxBy)(e,"tonnage").tonnage;P(a),m&&(a=+m);var n=0;return h&&(n=+h),R([n,a]),e}return t}),[t]),F=Object(n.useMemo)((function(){return["Tous les bureaux"].concat(Object(l.a)(Object(Z.uniqBy)(z,"ferme_bureau").map((function(e){return e.ferme_bureau}))))}),[z]),B=Object(n.useMemo)((function(){var e=Array.from(y);return z.filter((function(t){return!!e.includes("Tous les bureaux")||e.includes(t.ferme_bureau)})).filter((function(e){return"tonnage"!==k||!A||!A.length||e.tonnage>=A[0]&&e.tonnage<=A[1]}))}),[z,y,A]);Object(n.useEffect)((function(){C(p)}),[p]),Object(n.useEffect)((function(){if(d){var e=d.split(",").map((function(e){return e.trim()})).map((function(e){return"tous"===e?"Tous les bureaux":e}));w(new Set(e))}}),[d]),Object(n.useEffect)((function(){m&&(A&&A.length?R([A[0],+m]):R([0,+m]))}),[m]),Object(n.useEffect)((function(){if(h)if(A&&A.length)R([+h,A[1]]);else{var e=Object(Z.maxBy)(z,"tonnage").tonnage;R([+h,e])}}),[h]);var E=Object(n.useMemo)((function(){return Array.from(y).map((function(e){var t,a="Tous les bureaux"===e?B:B.filter((function(t){return t.ferme_bureau===e})),n="tonnage"===k?(t=a,Q()(t).groupBy("destination_radar").map((function(e,t){var a={};return a[t]=Object(Z.sumBy)(e,"tonnage"),a})).value()):function(e){return Q()(e).groupBy("destination_radar").map((function(e,t){var a={};return a[t]=e.length,a})).value()}(a);return{data:He(Object.assign.apply(Object,[{}].concat(Object(l.a)(n)))),meta:{color:v[e],name:e}}}))}),[y,A,k]);return z&&E?Object(I.jsxs)("div",{className:x()("RadarWrapper",{"is-minified":i}),children:[Object(I.jsx)("h5",{className:"visualization-title",children:o}),Object(I.jsx)(Ie,{lang:f,data:E.reverse(),size:i?.4*r:.7*r,axis:b}),Object(I.jsx)("div",{className:x()("controls-container",{"is-minified":i}),children:Object(I.jsxs)("div",{className:"controls-contents",children:[Object(I.jsx)("strong",{children:B.length})," ",Object(se.a)("viz-principale-partie-2","travel_aggregate",f)," ",Object(I.jsxs)("span",{className:"aggregation-controls-container",children:[Object(I.jsxs)("select",{value:k,onChange:function(e){return C(e.target.value)},children:[Object(I.jsx)("option",{id:"tonnage",value:"tonnage",children:"fr"===f&&Object(se.a)("viz-principale-partie-2","radar_tonnage","fr",{method:"tonnage"===k?" (navires de ".concat(A[0]," \xe0 ").concat(A[1]," tonneaux)"):""})||Object(se.a)("viz-principale-partie-2","radar_tonnage","en",{method:"tonnage"===k?" (ships of ".concat(A[0]," to ").concat(A[1]," tonnage)"):""})},"tonnage"),Object(I.jsx)("option",{id:"voyages",value:"voyages",children:Object(se.a)("viz-principale-partie-2","radar_flows",f)},"voyages")]}),k&&"tonnage"===k&&Object(I.jsx)("span",{className:"slider-container",children:Object(I.jsx)(ze,{min:0,max:S,value:A,onChange:function(e){return[R(e)]}})})]}),Object(I.jsxs)("p",{className:"legend-explanation",children:[Object(se.a)("viz-principale-partie-2","radar_legend",f),"\xa0:"]}),Object(I.jsx)("ul",{className:"bureaux-list",children:F.map((function(e,t){return Object(I.jsxs)("li",{onClick:function(){var t=new Set(y);y.has(e)&&Array.from(y).length>1?t.delete(e):t.add(e),w(t)},className:x()("bureau-item",{"is-active":y.has(e)}),children:[Object(I.jsx)("span",{className:"color-marker",style:{background:v[e]}}),Object(I.jsx)("span",{className:"bureau-label",children:"Tous les bureaux"===e?"Ensemble des ports":e})]},t)}))})]})})]}):null},$e=(a(542),["id"]),Ge=function(e){var t=e.width,a=e.height,r=e.datasets,i=(e.showOnlyToflit,e.atlasMode),o=e.screenshotMode,s=e.highlight,l=void 0===s?"toflit18":s,c=e.lang,d=void 0===c?"fr":c,u=e.filter,p=void 0===u?"aucun":u,h=e.bureaux,m=void 0===h?"tous":h,f=e.navigoAgregation,g=void 0===f?"tonnage":f,b=e.minTonnage,v=e.maxTonnage,j=Object(ne.c)(t),O=i?1200:Object(ne.c)(a),y=Object(n.useMemo)((function(){var e="value",t=[];switch(p){case"colonial":t=[{key:"product",value:"produits coloniaux"},{key:"partner",value:"Afrique"},{key:"partner",value:"Colonies"}];break;case"eau-de-vie":t=[{key:"product",value:"eau-de-vie et vins divers"}];break;case"sel":t=[{key:"product",value:"sel"}],e="product_weight_kg"}return{sumToflitBy:e,alluvialFilters:t}}),[p]),w=y.sumToflitBy,_=y.alluvialFilters,L="fr"===d?Object(se.a)("viz-principale-partie-2","toflit18titles",d,{sumToflitBy:"value"===w?"valeur commerciale":"poids de marchandises"}):Object(se.a)("viz-principale-partie-2","toflit18titles",d,{sumToflitBy:"value"===w?"commercial value":"weight of goods"}),k=Object(se.a)("viz-principale-partie-2","navigoTitles",d);return Object(I.jsxs)("div",{className:x()("PrincipalVisualizationPart2","highlight-"+l,{"is-atlas-mode":i,"is-screenshot-mode":o}),children:[Object(I.jsx)("div",{className:"circular-alluvial-container",style:{width:i?.5*window.innerWidth:"toflit18"===l?.6*j:.5*j,height:i?.5*window.innerWidth:"toflit18"===l?O:.5*O},children:Object(I.jsx)(Me,{data:r["part_2_toflit_viz_data/part_2_toflit_viz_data.csv"],width:i?.5*window.innerWidth:"toflit18"===l?.6*j:.45*j,height:i?.5*window.innerWidth:"toflit18"===l?O:.45*O,sumBy:w,filters:_,colorsPalettes:ae.a,lang:d,title:L,displaceHorizontalLabels:"toflit18"===l,centerHorizontalLabels:"toflit18"===l,tooltips:{node:function(e,t){var a=e.id,n=Object(C.a)(e,$e),r="fr"===d?"import\xe9":"imported",i="fr"===d?"export\xe9":"exported";return 0===t||5===t?Object(se.a)("viz-principale-partie-2","node_0_5",d,{id:a,step:t<3?i:r,number:Object(ne.d)(parseInt(n.valueAbs)),sumBy:"value"===w?"livres tournoi":"kg"}):1===t||4===t?Object(se.a)("viz-principale-partie-2","node_1_4",d,{id:a,step:t<3?i:r,number:Object(ne.d)(parseInt(n.valueAbs)),sumBy:"value"===w?"livres tournoi":"kg"}):Object(se.a)("viz-principale-partie-2","node_other",d,{id:a,step:t<3?i:r,number:Object(ne.d)(parseInt(n.valueAbs)),sumBy:"value"===w?"livres tournoi":"kg"})},flow:{fr:function(e){var t=e.flow_type,a=e.customs_office,n=e.product,r=e.sumBy,i=e.value,o=e.partner;return Object(se.a)("viz-principale-partie-2","flow",d,{customs_office:a,flow_type:"import"===t?"import\xe9":"export\xe9",value:Object(ne.d)(parseInt(i)),sumBy:"value"===r?"livres tournois":"kg",product:n,flow_direction:"import"===t?"depuis":"vers",partner:o})},en:function(e){var t=e.flow_type,a=e.customs_office,n=e.product,r=e.sumBy,i=e.value,o=e.partner;return Object(se.a)("viz-principale-partie-2","flow",d,{customs_office:a,flow_type:"import"===t?"imported":"exported",value:Object(ne.d)(parseInt(i),"en"),sumBy:"value"===r?"livres tournois":"kg",product:n,flow_direction:"import"===t?"from":"to",partner:o})}}},steps:[{field:"customs_office",labels:Object(se.a)("viz-principale-partie-2","customs_office",d),filters:[{key:"flow_type",value:"export"}],name:"fr"===d?"bureau":"office"},{field:"product",labels:Object(se.a)("viz-principale-partie-2","product",d),filters:[{key:"flow_type",value:"export"}],name:"fr"===d?"produit":"product"},{field:"partner",labels:Object(se.a)("viz-principale-partie-2","partner",d),filters:[{key:"flow_type",value:"export"}],name:"fr"===d?"partenaire":"partner"},{field:"partner",labels:Object(se.a)("viz-principale-partie-2","partner",d),filters:[{key:"flow_type",value:"import"}],name:"fr"===d?"partenaire":"partner"},{field:"product",labels:Object(se.a)("viz-principale-partie-2","product",d),filters:[{key:"flow_type",value:"import"}],name:"fr"===d?"produit":"product"},{field:"customs_office",labels:Object(se.a)("viz-principale-partie-2","customs_office",d),filters:[{key:"flow_type",value:"import"}],name:"fr"===d?"bureau":"office"}]})}),Object(I.jsx)("div",{className:"radar-container",style:{width:i?.5*window.innerWidth:"navigo"===l?.7*j:.4*j},children:Object(I.jsx)(We,{data:r["part_2_navigo_viz_data/part_2_navigo_viz_data.csv"],minified:!i&&"navigo"!==l,globalWidth:i?.5*window.innerWidth:j,bureaux:m,navigoAgregation:g,minTonnage:b,maxTonnage:v,title:k,lang:d,axis:["Local","Afrique","Colonies","Grande-Bretagne","Europe","Ports francs et petites \xeeles","France","Reste du monde"],colorPalette:ae.a.customs_office})})]})},Ye=a(44),Xe=a(107),Ve=(a(545),a(108)),Ue=a(58),Je=function(e){var t=e.width,a=e.height,n=e.datasets,r=e.lang,i=Object(ne.c)(t),o=Object(ne.c)(a);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"graphs-container",style:{position:"relative",height:.6*o},children:[Object(I.jsx)("div",{className:"graph-container",style:{width:.6*i,height:.6*o,position:"absolute"},children:Object(I.jsx)(Ve.a,{data:n["flows_1787_around_La Rochelle/flows_1787_around_La Rochelle.gexf"],nodeSize:"degree",labelDensity:1,nodeColor:{field:"internal",palette:{"interne \xe0 la r\xe9gion":ae.a.generic.dark,"externe \xe0 la r\xe9gion":ae.a.generic.accent2}},spatialize:!0,ratio:1.1,title:Object(se.a)("viz-principale-partie-3","network_1_title",r)})}),Object(I.jsx)("div",{className:"graph-container",style:{width:.4*i,height:.3*o,position:"absolute",right:0,top:0},children:Object(I.jsx)(Ve.a,{data:n["flows_1787_around_Bordeaux/flows_1787_around_Bordeaux.gexf"],nodeSize:"degree",labelDensity:1,nodeColor:{field:"internal",palette:{"interne \xe0 la r\xe9gion":ae.a.generic.dark,"externe \xe0 la r\xe9gion":ae.a.generic.accent2}},spatialize:!0,title:Object(se.a)("viz-principale-partie-3","network_2_title",r),ratio:1})}),Object(I.jsx)("div",{className:"graph-container",style:{width:.4*i,height:.3*o,position:"absolute",right:0,bottom:0},children:Object(I.jsx)(Ve.a,{data:n["flows_1787_around_Nantes/flows_1787_around_Nantes.gexf"],nodeSize:"degree",labelDensity:1,nodeColor:{field:"internal",palette:{"interne \xe0 la r\xe9gion":ae.a.generic.dark,"externe \xe0 la r\xe9gion":ae.a.generic.accent2}},title:Object(se.a)("viz-principale-partie-3","network_3_title",r),ratio:.7,spatialize:!0})})]}),Object(I.jsxs)("div",{style:{position:"absolute",bottom:"1rem",left:0,width:.3*i,height:.3*o,paddingLeft:0},className:"ColorLegend",children:[Object(I.jsx)("h5",{children:Object(se.a)("viz-principale-partie-3","network_legend_title",r)}),Object(I.jsxs)("ul",{className:"color-legend",children:[Object(I.jsx)("li",{children:Object(se.a)("viz-principale-partie-3","network_legend_color_title",r)}),Object(I.jsxs)("li",{children:[Object(I.jsx)("span",{style:{background:ae.a.generic.dark},className:"color-box"}),Object(I.jsx)("span",{className:"color-label",children:Object(se.a)("viz-principale-partie-3","network_legend_color_1",r)})]}),Object(I.jsxs)("li",{children:[Object(I.jsx)("span",{style:{background:ae.a.generic.accent2},className:"color-box"}),Object(I.jsx)("span",{className:"color-label",children:Object(se.a)("viz-principale-partie-3","network_legend_color_2",r)})]})]})]}),Object(I.jsx)("div",{style:{position:"absolute",bottom:0,right:0,width:.7*i,height:.3*o},children:Object(I.jsx)(Ue.a,{data:n["part_3_centralite_comparaison/part_3_centralite_comparaison.csv"],title:Object(se.a)("viz-principale-partie-3","barchart_title",r),width:.7*i,height:.3*o,orientation:"vertical",layout:"groups",y:{field:"port",title:Object(se.a)("viz-principale-partie-3","barchart_y",r)},x:{field:"score",title:Object(se.a)("viz-principale-partie-3","barchart_x",r)},color:{field:"metrics_type",title:Object(se.a)("viz-principale-partie-3","barchart_color",r),palette:{PageRank:ae.a.generic.dark,"betweenness centrality":ae.a.generic.accent1}},margins:{bottom:40},tooltip:function(e){return"PageRank"===e.metrics_type?Object(se.a)("viz-principale-partie-3","barchart_toolip_pagerank",r):Object(se.a)("viz-principale-partie-3","barchart_toolip_nopagerank",r)}})})]})},Ze=function(e){var t=e.datasets,a=e.step,r=e.width,i=e.height,o=e.atlasMode,l=e.lang,d=Object(ne.c)(r),u=o?window.innerHeight:Object(ne.c)(i),p=Object(n.useState)("France"),h=Object(c.a)(p,2),m=h[0],f=h[1];return Object(n.useEffect)((function(){setTimeout((function(){switch(a){case 1:f("rotated Poitou");break;case 3:f("Poitou zoomed")}}))}),[a]),Object(I.jsxs)("div",{className:x()("PrincipalVisualizationPart3",{"is-atlas-mode":o}),style:{height:o?void 0:u},children:[Object(I.jsx)("div",{className:x()("step",{"is-visible":1===a}),children:Object(I.jsx)(Ye.a,{title:Object(se.a)("viz-principale-partie-3","GeographicMapChart_title",l),layers:[{type:"choropleth",data:t["map_backgrounds/map_france_1789.geojson"],animated:!0},{type:"custom",data:t["part_3_step1_viz_data/part_3_step1_viz_data.csv"],renderObjects:function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("rect",{x:0,y:0,width:d,height:u/8,fill:"url(#radial-bg-".concat(o,")")}),Object(I.jsx)("defs",{children:Object(I.jsxs)("linearGradient",{id:"radial-bg-".concat(o),gradientTransform:"rotate(90)",children:[Object(I.jsx)("stop",{offset:"10%",stopColor:o?"white":ae.a.ui.colorBackgroundBlue}),Object(I.jsx)("stop",{offset:"100%",stopColor:o?"white":ae.a.ui.colorBackgroundBlue,stopOpacity:0})]})})]})}},{type:"custom",data:t["part_3_step1_viz_data/part_3_step1_viz_data.csv"],renderObjects:function(e){return Object(Xe.c)(Object(s.a)(Object(s.a)({},e),{},{atlasMode:o,lang:l}))}}],projectionTemplate:o?"rotated Poitou":m,height:o?.9*window.innerHeight:u,width:d})}),Object(I.jsx)("div",{className:x()("step",{"is-visible":2===a}),style:{height:u},children:Object(I.jsx)(Je,{lang:l,width:d,height:u,datasets:t})}),Object(I.jsx)("div",{className:x()("step",{"is-visible":3===a}),height:u,children:Object(I.jsx)(Ye.a,{layers:[{type:"choropleth",data:t["map_backgrounds/map_france_1789.geojson"],color:{field:"shortname"},animated:!0},{type:"custom",data:{customsOffices:t["part_3_step3_viz_customs_offices_data/part_3_step3_viz_customs_offices_data.csv"].filter((function(e){return"La Rochelle"===e.customs_region&&"undefined customs office"!==e.name&&!e.name.includes("Bouin")})),ports:t["part_3_step3_viz_ports_data/part_3_step3_viz_ports_data.csv"]},renderObjects:Xe.b},{type:"custom",data:t["part_3_step3_viz_customs_offices_data/part_3_step3_viz_customs_offices_data.csv"],renderObjects:Xe.a}],projectionTemplate:o?"Poitou zoomed":m,height:u,width:d,title:Object(se.a)("viz-principale-partie-3","GeographicMapChart_second_title",l)})})]})},Qe=a(233),Ke=a(55),et=(a(598),function(e){var t=e.projection,a=e.atlasMode,r=(e.height,e.datum),i=(e.width,e.index),o=e.radius,s=t([+r.longitude,+r.latitude]),l=Object(c.a)(s,2),d=l[0],u=l[1],p=Object(n.useState)(!1),h=Object(c.a)(p,2),m=h[0],f=h[1];Object(n.useEffect)((function(){setTimeout((function(){f(!0)}))}),[]);var g=Object(je.useSpring)({to:{transform:"translate(".concat(d,", ").concat(u,")")},immediate:!m}).transform;return Object(I.jsxs)(je.animated.g,{transform:g,children:[Object(I.jsx)(je.animated.circle,{r:2*o,cx:0,cy:0,fill:"url(#bureau-".concat(i,")")}),Object(I.jsxs)("radialGradient",{id:"bureau-".concat(i),children:[Object(I.jsx)("stop",{offset:a?"0%":"20%",stopColor:ae.a.customs_office[r.name]}),Object(I.jsx)("stop",{offset:"100%",stopColor:a?"rgba(255,255,255,0)":"rgba(51,109,124,0)"})]})]})}),tt=function(e){var t=e.projection,a=e.height,r=e.datum,i=e.width,o=(e.index,e.radius),s=t([+r.longitude,+r.latitude]),l=Object(c.a)(s,2),d=l[0],u=l[1],p=["La Rochelle","Tonnay-Charente"].includes(r.name),h=Object(ne.c)(r.name.length*i*a*5e-4),m=Object(n.useState)(!1),f=Object(c.a)(m,2),g=f[0],b=f[1];Object(n.useEffect)((function(){setTimeout((function(){b(!0)}))}),[]);var v=Object(je.useSpring)({to:{transform:"translate(".concat(d,", ").concat(u,")")},immediate:!g}).transform;return Object(I.jsxs)(je.animated.g,{transform:v,children:[Object(I.jsx)("circle",{r:2,cx:0,cy:0,fill:"white"}),Object(I.jsx)("foreignObject",{x:p?o/2:-o/2-h,y:-a/70,fill:"white",width:h,height:a/20,className:x()("bureau-label",{"is-reversed":!p}),children:Object(I.jsx)("span",{xmlns:"http://www.w3.org/1999/xhtml",children:r.name})})]})},at=function(e){var t=e.datasets,a=e.atlasMode,n=e.dimensions,r=e.lang;return Object(I.jsx)(Ye.a,{title:Object(se.a)("intro-bureaux","title",r),layers:[{type:"choropleth",data:t["map_backgrounds/map_france_1789.geojson"],reverseColors:!a},{type:"custom",data:t["part_3_step3_viz_customs_offices_data/part_3_step3_viz_customs_offices_data.csv"],renderObjects:function(e){return function(e){var t=e.data,a=e.projection,n=e.width,r=e.height,i=e.atlasMode,o=n*r*6e-5;return Object(I.jsxs)("g",{className:x()("IntroBureaux",{"is-atlas-mode":i}),children:[t.filter((function(e){return!isNaN(+e.latitude)&&ae.a.customs_office[e.name]})).map((function(e,t){return Object(I.jsx)(et,{projection:a,atlasMode:i,height:r,datum:e,width:n,index:t,radius:o},t)})),t.filter((function(e){return!isNaN(+e.latitude)&&ae.a.customs_office[e.name]})).map((function(e,t){return Object(I.jsx)(tt,{projection:a,height:r,datum:e,width:n,index:t,radius:o},t)}))]})}(Object(s.a)(Object(s.a)({},e),{},{atlasMode:a}))}}],projectionTemplate:"Poitou",width:Object(ne.c)(n.width),height:a?.9*window.innerHeight:Object(ne.c)(n.height)})},nt=(a(599),function(e){var t=e.datasets,a=e.atlasMode,n=e.dimensions,r=e.lang,i={"r\xe9gion PASA":"PASA region",France:"France"},o=a?.9*window.innerHeight:Object(ne.c)(n.height),l=t["voyages-bateaux-homeport-larochelle-1787/voyages-bateaux-homeport-larochelle-1787.csv"].map((function(e){return e.port_dest.includes("C\xf4te d'Or")?Object(s.a)(Object(s.a)({},e),{},{latitude_dest:5,longitude_dest:-.6107851}):e})).map((function(e){return"fr"===r?e:Object(s.a)(Object(s.a)({},e),{},{category:i[e.category]||e.category})}));return Object(I.jsxs)("div",{className:"HomeportFlows",children:[Object(I.jsx)("div",{className:"column",children:Object(I.jsx)(Ye.a,{title:Object(se.a)("partie-2-carte-direction-bateaux-de-la-rochelle","title",r),layers:[{type:"choropleth",data:t["map_backgrounds/map_france_1789.geojson"],reverseColors:!a||void 0},{type:"flows",data:l,size:{field:"tonnages_cumul\xe9s",title:Object(se.a)("partie-2-carte-direction-bateaux-de-la-rochelle","size",r)},label:{fields:["port_dep","port_dest"]},color:{field:"category",title:Object(se.a)("partie-2-carte-direction-bateaux-de-la-rochelle","color",r)},hideOverflowingFlows:!0}],projectionTemplate:"coast from Nantes to Bordeaux",width:Object(ne.c)(n.width/2),withLegend:"bottom left",legendLayerFilter:function(e){return"flows"===e.type},height:o})}),Object(I.jsxs)("div",{className:"column",children:[Object(I.jsx)(Ye.a,{layers:[{type:"choropleth",data:t["map_backgrounds/map_france_1789.geojson"],reverseColors:!a||void 0},{type:"flows",data:l.filter((function(e){return"pasa"!==e.port_dest_category})),hideOverflowingFlows:!0,size:{field:"tonnages_cumul\xe9s",title:Object(se.a)("partie-2-carte-direction-bateaux-de-la-rochelle","size",r)},label:{fields:["port_dep","port_dest"]},color:{field:"category",title:Object(se.a)("partie-2-carte-direction-bateaux-de-la-rochelle","color",r)}}],projectionTemplate:"France",width:Object(ne.c)(n.width/2),height:o/2}),Object(I.jsx)(Ye.a,{layers:[{type:"choropleth",data:t["map_backgrounds/map_world_1789.geojson"],reverseColors:!a||void 0},{type:"flows",data:l.filter((function(e){return"\xe9tranger"===e.port_dest_category})),size:{field:"tonnages_cumul\xe9s",title:Object(se.a)("partie-2-carte-direction-bateaux-de-la-rochelle","size",r)},label:{fields:["port_dep","port_dest"]},color:{field:"category",title:Object(se.a)("partie-2-carte-direction-bateaux-de-la-rochelle","color",r)}}],projectionTemplate:"World",width:Object(ne.c)(n.width/2),height:o/2})]})]})}),rt=a(339),it=a(686),ot=a(687),st=a(681),lt=function e(t){return Array.isArray(t)?{name:"root",children:t.map(e)}:t.key&&t.values?{name:t.key,children:t.values.map(e)}:t},ct=function(e){var t,a=e.data,r=e.fieldsHierarchy,i=void 0===r?[]:r,l=e.title,d=e.width,u=void 0===d?1e3:d,p=e.height,h=void 0===p?400:p,m=e.leaf,f=m.labelField,g=m.countField,b=e.color,v=e.tooltip,j=e.margins,x=void 0===j?{}:j,y=Object(n.useState)(0),w=Object(c.a)(y,2),_=w[0],L=w[1],k=Object(n.useState)(0),C=Object(c.a)(k,2),T=C[0],q=C[1],A=Object(n.useRef)(null),R=Object(n.useRef)(null),N=Object(ne.c)(u-T-10),M=Object(ne.c)(h-_),S=Object(s.a)({left:100,top:30,bottom:20,right:20},x),P=Object(n.useMemo)((function(){var e=Object(rt.a)();i.forEach((function(t){e.key((function(e){return e[t]}))}));var t=lt(e.entries(a)),n=Object(it.a)(t).sum((function(e){return+e[g]}));return Object(ot.a)().size([N,M]).tile(st.a).round(!0)(n),n}),[a,i,N,M,g]);if(Object(n.useEffect)((function(){setTimeout((function(){var e=R.current?R.current.getBoundingClientRect().height:0,t=A.current?A.current.getBoundingClientRect().width:0;L(e),q(t)}))}),[N,M,b,a]),Object(n.useEffect)((function(){O.a.rebuild()})),b&&b.palette)t=b.palette;else if(b){var z=Object(Z.uniq)(a.map((function(e){return e[b.field]}))),F=Object(ne.e)(b.field,z.length);t=z.reduce((function(e,t,a){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},t,F[a]))}),{})}var B="fr"===Object(n.useContext)(oe.b).lang?"L\xe9gende":"Legend";return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("figure",{style:{width:u,height:h},className:"TreemapChart GenericVisualization",children:[Object(I.jsx)("div",{ref:R,className:"row",children:l?Object(I.jsx)("h5",{className:"visualization-title",children:l}):null}),Object(I.jsxs)("div",{className:"row vis-row",children:[Object(I.jsx)("svg",{className:"chart",width:N,height:M,children:P.leaves().map((function(e,a){var n=e.x0,r=e.y0,i=e.x1-n,o=e.y1-r,s="".concat(e.data[f]," (").concat(e.data[g],")"),l=i/s.length*1.5;return Object(I.jsxs)("g",{transform:"translate(".concat(n,",").concat(r,")"),"data-for":"treemap-tooltip","data-tip":v?v(e.data):void 0,children:[Object(I.jsx)("rect",{stroke:"white",x:0,y:0,width:i,height:o,fill:t[e.data[b.field]]}),o>l?Object(I.jsx)("text",{x:i/2,y:o/2+5,style:{fontSize:l},textAnchor:"middle",children:s}):null]},"".concat(n,"-").concat(r))}))}),b?Object(I.jsxs)("div",{className:"ColorLegend",ref:A,style:{top:_+S.top},children:[Object(I.jsx)("h5",{children:b.title||B}),Object(I.jsx)("ul",{className:"color-legend",children:Object.entries(t).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return Object(I.jsxs)("li",{children:[Object(I.jsx)("span",{className:"color-box",style:{background:n}}),Object(I.jsx)("span",{className:"color-label",children:a})]},a)}))})]}):null]})]}),Object(I.jsx)(O.a,{id:"treemap-tooltip"})]})},dt=["id","dimensions"],ut=function(e){var t=e.id,a=e.dimensions,r=Object(C.a)(e,dt),i=Object(s.a)({},a),l=Object(n.useContext)(oe.a),d=Object(n.useMemo)((function(){var e=Ke.find((function(e){return e.id===t}));if(e){var a=e.datasets&&e.datasets.split(",").map((function(e){return e.trim()}));if(a.length&&l)return a.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},t,l[t]))}),{})}}),[t,l]);if(!(Object.keys(d||{}).length&&!Object.entries(d).find((function(e){var t=Object(c.a)(e,2);t[0];return!t[1]}))))return null;switch(t){case"viz-principale-partie-1":return Object(I.jsx)(ue,Object(s.a)(Object(s.a)({},r),{},{datasets:d||{}},i));case"viz-principale-partie-2":return Object(I.jsx)(Ge,Object(s.a)(Object(s.a)({},r),{},{datasets:d||{}},i));case"viz-principale-partie-3":return Object(I.jsx)(oe.b.Provider,{value:{lang:r.lang},children:Object(I.jsx)(Ze,Object(s.a)(Object(s.a)({},r),{},{datasets:d||{}},i))});case"partie-1-produits-importants-pour-la-rochelle":return Object(I.jsx)(Ue.a,{data:d[Object.keys(d)[0]].sort((function(e,t){return+e.order>+t.order?1:-1})).slice(0,20),title:Object(se.a)("partie-1-produits-importants-pour-la-rochelle","title",r.lang),width:i.width,height:r.atlasMode?window.innerHeight/2:i.height,orientation:"vertical",layout:"groups",y:{field:"product",title:Object(se.a)("partie-1-produits-importants-pour-la-rochelle","y",r.lang)},x:{field:"value_rel_per_direction",title:Object(se.a)("partie-1-produits-importants-pour-la-rochelle","x",r.lang),tickSpan:.1,tickFormat:function(e,t){return parseInt(100*e)+"%"}},color:{field:"entity",title:Object(se.a)("partie-1-produits-importants-pour-la-rochelle","color",r.lang),palette:{"direction des fermes de La Rochelle":"#00C4AF","France (moyenne)":"#FEA43B"}},margins:{left:140},tooltip:function(e){return Object(se.a)("partie-1-produits-importants-pour-la-rochelle","tooltip",r.lang,{product:e.product,value:(100*e.value_rel_per_direction).toFixed(2),entite:e.entity.includes("France")?"la France":"la direction des fermes de La Rochelle"})}});case"partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie":return Object(I.jsx)(Ue.a,{data:d[Object.keys(d)[0]],title:Object(se.a)("partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie","title",r.lang),width:i.width,height:r.atlasMode?window.innerHeight/2:.5*i.height,orientation:"horizontal",layout:"stack",y:{field:"portion",title:Object(se.a)("partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie","y",r.lang),tickFormat:function(e){return parseInt(100*e)+"%"}},x:{field:"year",title:Object(se.a)("partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie","x",r.lang),fillGaps:!0,tickSpan:5},color:{field:"type",title:Object(se.a)("partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie","color",r.lang)},margins:{left:140,right:20,bottom:30},tooltip:function(e){return Object(se.a)("partie-1-evolution-de-la-part-des-echanges-de-la-rochelle-au-xviiie","tooltip",r.lang,{year:e.year,direction:"import"===e.type?"import\xe9":"export\xe9",value:(100*+e.portion).toFixed(2),type:"import"===e.type?"imports":"exports"})}});case"sorties-de-sel":return console.log(d[Object.keys(d)[0]]),Object(I.jsx)(Ue.a,{data:d[Object.keys(d)[0]],title:Object(se.a)("sorties-de-sel","title",r.lang),width:i.width,height:r.atlasMode?.8*window.innerHeight:i.height,orientation:"vertical",y:{field:"port",title:Object(se.a)("sorties-de-sel","y",r.lang),sort:{field:"tonnage",autoSort:!0,ascending:!1,type:"number"}},x:{title:Object(se.a)("sorties-de-sel","x",r.lang),field:"tonnage",tickFormat:function(e,t){return"".concat(Object(ne.d)(e)," tx")}},margins:{right:60},tooltip:function(e){return Object(se.a)("sorties-de-sel","y",r.lang,{tonnage:e.tonnage,number:e.nb_pointcalls})}});case"sorties-de-marennes":return Object(I.jsx)(Ue.a,{data:d[Object.keys(d)[0]],title:Object(se.a)("sorties-de-marennes","title",r.lang),width:i.width,height:r.atlasMode?.8*window.innerHeight:i.height/2,orientation:"vertical",y:{field:"country",title:Object(se.a)("sorties-de-marennes","y",r.lang),sort:{field:"tonnage",autoSort:!0,ascending:!1,type:"number"}},x:{field:"tonnage",title:Object(se.a)("sorties-de-marennes","x",r.lang),tickFormat:function(e,t){return"".concat(Object(ne.d)(e)," tx")}},margins:{right:60},tooltip:function(e){return Object(se.a)("sorties-de-marennes","tooltip",r.lang,{tonnage:e.tonnage,number:e.nb_pointcalls,country:e.country})}});case"partie-1-pays-port-d-attache":return Object(I.jsx)(Ue.a,{data:d[Object.keys(d)[0]],title:Object(se.a)("partie-1-pays-port-d-attache","title",r.lang),width:i.width,height:r.atlasMode?.8*window.innerHeight:i.height,orientation:"vertical",y:{field:"country",title:Object(se.a)("partie-1-pays-port-d-attache","y",r.lang),sort:{field:"tonnage",autoSort:!0,ascending:!1,type:"number"}},x:{field:"tonnage",title:Object(se.a)("partie-1-pays-port-d-attache","x",r.lang),tickFormat:function(e,t){return"".concat(Object(ne.d)(e)," tx")}},margins:{right:60},tooltip:function(e){return Object(se.a)("partie-1-pays-port-d-attache","tooltip",r.lang,{tonnage:e.tonnage,number:e.nb_pointcalls})}});case"partie-3-comparaison-exports-coloniaux":var u={"produits de la r\xe9gion PASA":"PASA region products","produits coloniaux":"colonial products","autres produits":"other products"};return Object(I.jsx)(Ue.a,{data:d[Object.keys(d)[0]].map((function(e){return"fr"===r.lang?e:Object(s.a)(Object(s.a)({},e),{},{type:u[e.type]})})),title:Object(se.a)("partie-3-comparaison-exports-coloniaux","title",r.lang),width:i.width,height:r.atlasMode?.8*window.innerHeight:.5*i.height,orientation:"vertical",layout:"grouped",y:{field:"customs_office",title:Object(se.a)("partie-3-comparaison-exports-coloniaux","y",r.lang)},x:{field:"value",title:Object(se.a)("partie-3-comparaison-exports-coloniaux","x",r.lang),tickSpan:1e6,domain:[0,6e6],tickFormat:function(e){return Object(ne.d)(e)+" lt"}},color:{field:"type",title:Object(se.a)("partie-3-comparaison-exports-coloniaux","color",r.lang)},margins:{left:140,right:50},tooltip:function(e){return Object(se.a)("partie-3-comparaison-exports-coloniaux","tooltip",r.lang,{customs_office:e.customs_office,value:e.value,type:e.type})}});case"intro-provinces":return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(Ye.a,{title:Object(se.a)("intro-provinces","title",r.lang),layers:[{type:"choropleth",data:l["map_backgrounds/map_france_1789.geojson"],reverseColors:!r.atlasMode||void 0,color:{field:"shortname",palette:ae.a.provinces},tooltip:function(e){return e.properties.shortname}}],projectionTemplate:"France",width:i.width,height:r.atlasMode?.9*window.innerHeight:i.height})});case"sorties-de-marennes-avec-sel-destinations":return Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{style:{borderBottom:"2px solid #333"},children:Object(I.jsx)(Ye.a,{title:Object(se.a)("sorties-de-marennes-avec-sel-destinations","title",r.lang),layers:[{type:"choropleth",data:l["map_backgrounds/map_france_1789.geojson"]},{type:"points",data:l["sorties-de-marennes-avec-sel-destinations/sorties-de-marennes-avec-sel-destinations.csv"].filter((function(e){return"France"===e.country})),size:{field:"tonnage",title:Object(se.a)("sorties-de-marennes-avec-sel-destinations","size",r.lang)},tooltip:function(e){return Object(se.a)("sorties-de-marennes-avec-sel-destinations","tooltip",r.lang,{raw_size:e.rawSize,label:e.label})},label:{field:"port",position:"left"},stackLabels:!0}],projectionTemplate:"France",width:i.width,height:r.atlasMode?.4*window.innerHeight:i.height/2})}),Object(I.jsx)(Ye.a,{layers:[{type:"choropleth",data:l["map_backgrounds/map_world_1789.geojson"]},{type:"points",data:l["sorties-de-marennes-avec-sel-destinations/sorties-de-marennes-avec-sel-destinations.csv"].filter((function(e){return"France"!==e.country})),size:{field:"tonnage",title:Object(se.a)("sorties-de-marennes-avec-sel-destinations","size",r.lang)},tooltip:function(e){return Object(se.a)("sorties-de-marennes-avec-sel-destinations","tooltip",r.lang,{rawSize:e.rawSize,label:e.label})},label:{field:"port"},stackLabels:!0}],projectionTemplate:"World",projectionConfig:{scale:.8*(r.atlasMode?window.innerHeight:i.height),centerY:45,centerX:-30},width:i.width,withLegend:"bottom right",height:r.atlasMode?.4*window.innerHeight:i.height/2})]});case"intro-ports":return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(Ye.a,{title:Object(se.a)("intro-ports","title",r.lang),layers:[{type:"choropleth",data:l["map_backgrounds/map_france_1789.geojson"],reverseColors:!r.atlasMode||void 0},{type:"points",data:l["ports_locations_data_intro/ports_locations_data_intro.csv"],color:{field:"province",title:Object(se.a)("intro-ports","color",r.lang),palette:Object(Z.omit)(ae.a.provinces,["Angoumois"]),labelsColor:r.atlasMode?void 0:"white"},size:{field:"nb_pointcalls",title:Object(se.a)("intro-ports","size",r.lang)},tooltip:function(e){return Object(se.a)("intro-ports","tooltip",r.lang,{rawSize:e.rawSize,label:e.label})},label:{field:"port",position:"left"},stackLabels:!0}],projectionTemplate:"Poitou",width:i.width,height:r.atlasMode?.9*window.innerHeight:i.height,withLegend:"top right"})});case"intro-bureaux":return Object(I.jsx)(at,{lang:r.lang,datasets:l,atlasMode:r.atlasMode,dimensions:i});case"partie-2-part-navigation-francaise":return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(Ye.a,{title:Object(se.a)("partie-2-part-navigation-francaise","title",r.lang),layers:[{type:"choropleth",data:l["map_backgrounds/map_france_1789.geojson"],reverseColors:!r.atlasMode||void 0},{type:"points",data:l["part_navigation_fr/part_navigation_fr.csv"],color:{field:"tonnage_part_of_french",title:Object(se.a)("partie-2-part-navigation-francaise","color",r.lang),palette:ae.a.tonnageClasses,labelsColor:r.atlasMode?void 0:"white"},size:{field:"tonnage",title:Object(se.a)("partie-2-part-navigation-francaise","size",r.lang),displayMetric:!0},label:{field:"port",position:"left"},stackLabels:!0}],projectionTemplate:"Poitou",width:i.width,height:r.atlasMode?.9*window.innerHeight:i.height,withLegend:"top right"})});case"partie-2-carte-direction-bateaux-de-la-rochelle":return Object(I.jsx)(nt,{lang:r.lang,datasets:l,atlasMode:r.atlasMode,dimensions:i});case"partie-1-ports-dattache":return Object(I.jsx)(ct,{data:l["hierarchie_ports_dattache_des_navires_partant_de_la_region/hierarchie_ports_dattache_des_navires_partant_de_la_region.csv"],title:Object(se.a)("partie-1-ports-dattache","title",r.lang),width:i.width,height:r.atlasMode?.8*window.innerHeight:.8*i.height,tooltip:function(e){return Object(se.a)("partie-1-ports-dattache","tooltip",r.lang,{tonnage:e.tonnage,homeport:e.homeport,category:e.category_2})},fieldsHierarchy:["country_group","category_1","category_2","ports"],color:{field:"category_2",palette:ae.a.portsTreemaps},leaf:{labelField:"homeport",countField:"tonnage"}});case"partie-1-ports-destinations":var p=Object(s.a)({},ae.a.portsTreemaps);return delete p["France (r\xe9gion PASA)"],delete p["France (hors r\xe9gion PASA)"],Object(I.jsx)(ct,{data:l["hierarchie_destinations_des_navires_partant_de_la_region/hierarchie_destinations_des_navires_partant_de_la_region.csv"],title:Object(se.a)("partie-1-ports-destinations","title",r.lang),width:i.width,height:r.atlasMode?.8*window.innerHeight:.8*i.height,tooltip:function(e){return Object(se.a)("partie-1-ports-destinations","tooltip",r.lang,{tonnage:e.tonnage,homeport:e.homeport,category:e.category_2})},fieldsHierarchy:["country_group","category_1","category_2","ports"],color:{field:"category_2",palette:p},leaf:{labelField:"port",countField:"tonnage"}});case"exports-eau-de-vie-la-rochelle-longitudinal":return Object(I.jsx)(Qe.a,{data:d[Object.keys(d)[0]],title:Object(se.a)("exports-eau-de-vie-la-rochelle-longitudinal","title",r.lang),width:i.width,height:r.atlasMode?window.innerHeight/2:i.height/2,orientation:"horizontal",y:{field:"value",title:Object(se.a)("exports-eau-de-vie-la-rochelle-longitudinal","y",r.lang),tickFormat:function(e){return Object(ne.d)(e)+" lt"}},x:{field:"year",title:Object(se.a)("exports-eau-de-vie-la-rochelle-longitudinal","x",r.lang)},margins:{left:140},tooltip:function(e){return Object(se.a)("exports-eau-de-vie-la-rochelle-longitudinal","y",r.lang,{year:e.year,value:e.value})}});case"exports-eau-de-vie-comparaison-directions-des-fermes":return Object(I.jsx)(Ue.a,{data:d[Object.keys(d)[0]],title:Object(se.a)("exports-eau-de-vie-comparaison-directions-des-fermes","title",r.lang),width:i.width,height:r.atlasMode?window.innerHeight/2:i.height/2,orientation:"vertical",layout:"groups",y:{field:"year",title:Object(se.a)("exports-eau-de-vie-comparaison-directions-des-fermes","y",r.lang)},x:{field:"value",title:Object(se.a)("exports-eau-de-vie-comparaison-directions-des-fermes","x",r.lang),tickSpan:1e6,tickFormat:function(e){return Object(ne.d)(e)+" lt"}},color:{field:"customs_region",title:Object(se.a)("exports-eau-de-vie-comparaison-directions-des-fermes","color",r.lang)},margins:{left:140,right:50},tooltip:function(e){return Object(se.a)("exports-eau-de-vie-comparaison-directions-des-fermes","tooltip",r.lang,{year:e.year,customsRegion:e.customs_region,value:parseInt(e.value)})}});case"origines-exports-eau-de-vie-1789-la-rochelle":return Object(I.jsx)(Ue.a,{data:d[Object.keys(d)[0]],title:Object(se.a)("origines-exports-eau-de-vie-1789-la-rochelle","title",r.lang),width:i.width,height:r.atlasMode?window.innerHeight/2:i.height/2,orientation:"vertical",layout:"groups",y:{field:"origin",title:Object(se.a)("origines-exports-eau-de-vie-1789-la-rochelle","y",r.lang)},x:{field:"value",title:Object(se.a)("origines-exports-eau-de-vie-1789-la-rochelle","x",r.lang),tickFormat:function(e){return Object(ne.d)(e/100)+" lt"}},color:{field:"type",title:Object(se.a)("origines-exports-eau-de-vie-1789-la-rochelle","color",r.lang)},margins:{left:140,right:50},tooltip:function(e){return Object(se.a)("origines-exports-eau-de-vie-1789-la-rochelle","tooltip",r.lang,{value:parseInt(e.value),type:e.type,origin:e.origin})}});case"partie-1-ports-dattache-vers-etranger":return Object(I.jsx)(ct,{data:l["hierarchie_destinations_des_navires_partant_de_la_region_vers_letranger/hierarchie_destinations_des_navires_partant_de_la_region_vers_letranger.csv"],title:Object(se.a)("partie-1-ports-dattache-vers-etranger","title",r.lang),width:i.width,height:r.atlasMode?.8*window.innerHeight:.8*i.height,tooltip:function(e){return Object(se.a)("partie-1-ports-dattache-vers-etranger","tooltip",r.lang,{tonnage:e.tonnage,homeport:e.homeport,category:e.category_2})},fieldsHierarchy:["country_group","category_1","category_2","homeport"],color:{field:"category_2",palette:ae.a.portsTreemaps},leaf:{labelField:"homeport",countField:"tonnage"}});case"test":default:return Object(I.jsx)(X,Object(s.a)(Object(s.a)({},r),{},{datasets:d||{}}))}},pt=function(e){var t=e.activeVisualization,a=e.lang,r=e.atlasMode,i=e.screenshotMode,o=Object(n.useState)({width:1e3,height:1e3}),l=Object(c.a)(o,2),d=l[0],u=l[1],p=t&&G()(t,["id","ref","visualizationId"]);return Object(I.jsx)(Y.a,{bounds:!0,onResize:function(e){u(e.bounds)},children:function(e){var n=e.measureRef;return Object(I.jsx)("div",{ref:n,className:x()("VisualizationController",{"is-empty":!t}),children:t?Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(ut,Object(s.a)(Object(s.a)({lang:a,screenshotMode:i,atlasMode:r,id:r?t.id:t.visualizationId},p),{},{dimensions:d}))}):null})}})},ht=pt,mt=a(170),ft=a(331),gt=a.n(ft),bt=a(242),vt=(a(601),function(e){var t,a,r=e.visualization,i=e.lang,o=e.onClose,s=Object(n.useState)(!1),l=Object(c.a)(s,2),d=l[0],u=l[1],p=Object(n.useRef)(null);Object(n.useEffect)((function(){p&&p.current&&p.current.focus()}),[r]),r&&(t=r["comment_cest_fait_".concat(i)],a=r["comment_lire_".concat(i)]);var h={howDone:{fr:"Comment les donn\xe9es et la visualisation ont-elles \xe9t\xe9 produites ?",en:"How were the data and visualization produced ?"},howRead:{fr:"Comment lire la visualisation ?",en:"How to read the visualization?"},copyLink:{fr:"copier le lien de cette visualisation",en:"copy this visualization link"},linkCopied:{fr:"lien copi\xe9 dans le presse-papier !",en:"link copied in the clipboard !"}};return Object(I.jsxs)("div",{className:"VisualizationFocus ".concat(r?"is-visible":"is-hidden"),children:[Object(I.jsx)("input",{style:{opacity:0,zIndex:-10,pointerEvents:"none"},type:"text",onKeyUp:function(e){27===e.keyCode&&r&&o()},ref:p}),Object(I.jsx)("div",{onClick:o,className:"lightbox-background"}),r?Object(I.jsx)("div",{className:"lightbox-contents-container",children:Object(I.jsxs)("div",{className:"lightbox-contents",children:[Object(I.jsxs)("div",{className:"visualization-details",children:[Object(I.jsxs)("div",{className:"details-header",children:[Object(I.jsx)("h2",{children:r["titre_".concat(i)]}),Object(I.jsx)("button",{className:"close-btn",onClick:o,children:"\u2715"})]}),Object(I.jsx)("div",{className:"copy-link-container",children:Object(I.jsx)("button",{onClick:function(e){e.stopPropagation();var t="".concat(mt.a,"/").concat(i,"/atlas/").concat(r.id);u(!0),gt()(t),setTimeout((function(){return u(!1)}),5e3)},children:d?h.linkCopied[i]:h.copyLink[i]})}),Object(I.jsxs)("div",{className:"details-contents",children:[t&&t.length?Object(I.jsxs)("section",{className:"details-contents-section",children:[Object(I.jsx)("h3",{children:h.howDone[i]}),Object(I.jsx)(bt.a,{children:t.replace(/<br\/>/g,"\n\n")})]}):null,a&&a.length?Object(I.jsxs)("section",{className:"details-contents-section",children:[Object(I.jsx)("h3",{children:h.howRead[i]}),Object(I.jsx)(bt.a,{children:a.replace(/<br\/>/g,"\n\n")})]}):null]})]}),Object(I.jsx)("div",{className:"visualization-wrapper",onClick:function(e){"visualization-wrapper"===e.target.className&&o()},children:Object(I.jsx)(pt,{lang:i,atlasMode:!0,activeVisualization:r})})]})}):null]})}),jt=vt,xt=(a(604),Ke.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},t.id,t))}),{})),Ot=function(e){var t=e.ContentSync,a=e.title,r=e.lang,i=Object(n.useRef)(null),l=Object(n.useState)(!1),d=Object(c.a)(l,2),u=d[0],p=d[1],h=Object(n.useState)(!1),m=Object(c.a)(h,2),f=m[0],g=m[1],b=Object(n.useState)(!1),j=Object(c.a)(b,2),y=j[0],w=j[1],_=Object(n.useState)(void 0),L=Object(c.a)(_,2),C=L[0],T=L[1],q=Object(n.useReducer)((function(e,t){return Object(s.a)(Object(s.a)({},e),t)}),{}),A=Object(c.a)(q,2),R=A[0],N=A[1],M=Object(k.useScrollYPosition)();Object(n.useEffect)((function(){!C&&u&&p(!1)}),[C]);Object(n.useEffect)((function(){window.scrollTo(0,0)}),[t]),Object(n.useEffect)((function(){if(!f){var e,t=.6*window.innerHeight,a=M+t,n=Object.entries(R),r=i.current&&i.current.getBoundingClientRect();if(a>r.y+window.scrollY+r.height)C&&T(void 0);else{for(var o=n.length-1;o>=0;o--){var s=Object(c.a)(n[o],2),l=(s[0],s[1]),d=l.ref;if(d.current){var u=d.current.getBoundingClientRect().y+window.scrollY;if("centered-part-contents"===d.current.parentNode.className&&(u+=d.current.parentNode.parentNode.getBoundingClientRect().y),!l.visualizationId&&M+.8*window.innerHeight>u){e=!0,T(void 0);break}if(a>u){e=!0,l.visualizationId?T(l):T(void 0);break}}}0===M&&n.length?T(n[0][1]):!e&&C&&T(void 0)}}}),[M,R]);return Object(I.jsxs)(oe.c.Provider,{value:{activeVisualization:C,onBlockClick:function(e,t){var a=t.current.getBoundingClientRect().y+window.scrollY-.9*(.6*window.innerHeight);window.scrollTo({top:a,behavior:"smooth"})},onRegisterVisualization:function(e){var t=Object(s.a)({},e);N(Object(s.a)(Object(s.a)({},R),{},Object(o.a)({},e.id,t)))},onUnregisterVisualization:function(e){var t=Object.entries(R).reduce((function(t,a){var n=Object(c.a)(a,2),r=n[0],i=n[1];return r===e?t:Object(s.a)(Object(s.a)({},t),{},Object(o.a)({},r,i))}),{});N(t)}},children:[Object(I.jsx)(v.a,{children:Object(I.jsx)("title",{children:Object(ne.a)(a,r)})}),Object(I.jsxs)("div",{className:"ScrollyPage",children:[Object(I.jsx)("section",{ref:i,className:x()({"is-focused":!u}),children:Object(I.jsx)(t,{})}),Object(I.jsxs)("aside",{className:x()({"is-focused":u}),children:[Object(I.jsx)(ht,{lang:r,activeVisualization:C}),C?Object(I.jsx)("div",{className:"fullscreen-viz-toggle-container",children:Object(I.jsx)("button",{"data-for":"contents-tooltip","data-tip":"fr"===r?"plus d'informations sur cette visualisation":"More information about this visualization",onClick:function(){w(!0),setTimeout((function(){g(!0),w(!1)}),100)},children:Object(I.jsx)("span",{children:"+"})})}):null]}),Object(I.jsx)(jt,{visualization:f&&C?xt[C.visualizationId]:void 0,lang:r,onClose:function(){g(!1)}}),Object(I.jsx)("div",{className:x()("vis-focus-container",{"is-active":u,"is-visible":C}),children:Object(I.jsx)("button",{"data-for":"contents-tooltip","data-effect":"solid","data-tip":"fr"===r?"voir la visualisation associ\xe9e":"see associated visualization",onClick:function(){p(!u)},children:Object(I.jsx)("span",{children:"\u02c3"})})}),Object(I.jsx)(O.a,{id:"contents-tooltip"}),Object(I.jsx)("div",{className:x()("loader-indication-wrapper",{"is-loading":y}),children:Object(I.jsx)("div",{className:"loader-indication-container",children:"fr"===r?"Chargement de la visualisation":"Loading visualization"})})]})]})},yt=a(219),wt=a(220),_t=a(221),Lt=a(222),kt=a(223),Ct=a(224),Tt=a(225),qt=a(226),At=a(227),Rt=a(228),Nt=a(232),Mt=a(229),St=[{routes:{fr:"partie-1",en:"part-1"},titles:{fr:"Le d\xe9clin de la r\xe9gion de La Rochelle suite \xe0 la perte du Canada",en:"The decline of La Rochelle region after Canada's loss"},shortTitles:{fr:"le d\xe9clin de la r\xe9gion de La Rochelle",en:"the decline of La Rochelle region"},contents:{fr:"fr/partie-1.mdx",en:"en/part-1.mdx"},contentsProcessed:{fr:yt.default,en:wt.default},Component:Ot,routeGroup:"primary"},{routes:{fr:"partie-2",en:"part-2"},titles:{fr:"Une forte sp\xe9cialisation portuaire: le cas de la traite n\xe9gri\xe8re, du commerce du sel et de l'eau-de-vie",en:"A strong portual specialization"},shortTitles:{fr:"une forte sp\xe9cialisation portuaire",en:"a strong portual specialization"},contents:{fr:"fr/partie-2.mdx",en:"en/part-2.mdx"},contentsProcessed:{fr:_t.default,en:Lt.default},Component:Ot,routeGroup:"primary"},{routes:{fr:"partie-3",en:"part-3"},titles:{fr:"La Rochelle, port dominant mais pas structurant",en:"La Rochelle port, dominating but not structuring"},shortTitles:{fr:"un port dominant mais pas structurant",en:"a dominating but not structuring port"},contents:{fr:"fr/partie-3.mdx",en:"en/part-3.mdx"},contentsProcessed:{fr:kt.default,en:Ct.default},Component:Ot,routeGroup:"primary"},{routes:{fr:"references",en:"references"},titles:{fr:"R\xe9f\xe9rences",en:"References"},shortTitles:{fr:"r\xe9f\xe9rences",en:"references"},contents:{fr:"fr/references.mdx",en:"en/references.mdx"},contentsProcessed:{fr:At.default,en:Rt.default},routeGroup:"secondary"},{routes:{fr:"a-propos",en:"about"},titles:{fr:"\xc0 propos",en:"About"},shortTitles:{fr:"\xe0 propos",en:"about"},contents:{fr:"fr/a-propos.mdx",en:"en/about.mdx"},contentsProcessed:{fr:Tt.default,en:qt.default},routeGroup:"secondary"},{routes:{fr:"tests",en:"tests"},titles:{fr:"Tests",en:"Tests"},shortTitles:{fr:"tests",en:"tests"},contents:{fr:"fr/tests.mdx",en:"fr/tests.mdx"},contentsProcessed:{fr:Nt.default,en:Mt.default},routeGroup:"secondary",hide:!0}],Pt=a(234),zt=function(){var e=Object(n.useState)({}),t=Object(c.a)(e,2),a=t[0],r=t[1];return Object(I.jsx)(Y.a,{bounds:!0,onResize:function(e){r(e.bounds)},children:function(e){var t=e.measureRef;return Object(I.jsx)("div",{ref:t,className:"boats-container",children:Object(I.jsx)(Pt.a,Object(s.a)({},Object(s.a)({},a)))})}})};var Ft=function(e){var t=e.lang,a=void 0===t?"fr":t,n=e.summary,r={intro:{fr:"d\xe9couvrir les 3 chapitres de l\u2019\xe9tude de cas",en:"discover the 3 chapters of the case study"},atlas:{fr:"Acc\xe9der \xe0 l'atlas de toutes les visualisations",en:"Access all visualizations' atlas"},chapter:{fr:"Chapitre",en:"Chapter"}};return Object(I.jsx)("div",{className:"HomeSummary",children:Object(I.jsxs)("div",{className:"contents",children:[Object(I.jsx)("div",{className:"intro",children:r.intro[a]}),Object(I.jsx)("ul",{className:"chapters-links-container",children:n.filter((function(e){return"primary"===e.routeGroup})).filter((function(e){return e.routes[a]})).map((function(e,t){var n=e.titles[a],i="/".concat(a,"/page/").concat(e.routes[a]);return Object(I.jsx)("li",{children:Object(I.jsxs)(u.c,{to:i,children:[Object(I.jsxs)("h4",{className:"pretitle",children:[r.chapter[a]," ",t+1]}),Object(I.jsx)("h3",{className:"title",children:n})]})},t)}))}),Object(I.jsx)("div",{className:"atlas-link-container",children:Object(I.jsx)(u.c,{to:"ReactSnap"===navigator.userAgent?"/fr/atlas":"/".concat(a,"/atlas"),children:Object(I.jsx)("h3",{className:"title",children:r.atlas[a]})})})]})})},Bt=(a(644),{fr:y.a,en:w.a});var Et=function(e){var t=e.match.params.lang,a=void 0===t?"fr":t,r=Object(n.useRef)(null),i=Object(n.useState)(!1),l=Object(c.a)(i,2),d=l[0],u=l[1],p=Object(n.useState)(!1),h=Object(c.a)(p,2),m=h[0],f=h[1],g=Bt[a]||y.a,b=g.title,j=g.titleHTML,w=g.subtitle,C=Object(n.useState)(void 0),T=Object(c.a)(C,2),q=T[0],A=T[1],R=Object(n.useReducer)((function(e,t){return Object(s.a)(Object(s.a)({},e),t)}),{}),N=Object(c.a)(R,2),M=N[0],S=N[1],P=Object(k.useScrollYPosition)();return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.useEffect)((function(){for(var e,t,a=.5*window.innerHeight,n=Object.entries(M),r=1/0,i=n.length-1;i>=0;i--){var o=0===i?P+.2*window.innerHeight:P+a,s=Object(c.a)(n[i],2),l=(s[0],s[1]),d=l.ref;if(d.current){var u=d.current.getBoundingClientRect().y+window.scrollY;if("centered-part-contents"===d.current.parentNode.className&&(u+=d.current.parentNode.parentNode.getBoundingClientRect().y),u<r&&(r=u),0===i&&o<u)e=!0,t=l;else if(o>u){e=!0,t=l.visualizationId?l:void 0;break}}}P>.9*window.innerHeight&&!m?f(!0):P<.9*window.innerHeight&&m&&f(!1),!e&&P<r&&n.length&&(t=n[0][1]),!e&&q&&(t=void 0),(q!==!t||!q&&t||q.id!==t.id)&&A(t)}),[P,M]),Object(n.useEffect)((function(){!q&&d&&u(!1)}),[q]),Object(I.jsxs)("div",{className:"Home",children:[Object(I.jsx)(v.a,{children:Object(I.jsx)("title",{children:b})}),Object(I.jsxs)("div",{className:"header",children:[Object(I.jsxs)("div",{className:"titles-container",children:[Object(I.jsx)("h1",{dangerouslySetInnerHTML:{__html:j}}),Object(I.jsx)("h2",{children:w}),Object(I.jsx)(W,{lang:a}),Object(I.jsx)("button",{onClick:function(){if(r&&r.current){var e=r.current.offsetTop-window.innerHeight/15;window.scrollTo({top:e,behavior:"smooth"})}},className:"go-to-start",children:Object(I.jsx)("span",{children:"\u2304"})})]}),Object(I.jsx)(zt,{})]}),Object(I.jsxs)("main",{ref:r,className:"intro-container",children:[Object(I.jsx)(oe.c.Provider,{value:{activeVisualization:q,onBlockClick:function(e,t){var a=t.current.getBoundingClientRect().y+window.scrollY-.9*(.5*window.innerHeight);window.scrollTo({top:a,behavior:"smooth"})},onRegisterVisualization:function(e){var t=Object(s.a)({},e);S(Object(s.a)(Object(s.a)({},M),{},Object(o.a)({},e.id,t)))},onUnregisterVisualization:function(e){var t=Object.entries(M).reduce((function(t,a){var n=Object(c.a)(a,2),r=n[0],i=n[1];return r===e?t:Object(s.a)(Object(s.a)({},t),{},Object(o.a)({},r,i))}),{});S(t)}},children:Object(I.jsxs)("div",{className:"Contents",children:[Object(I.jsx)("section",{className:x()({"is-focused":!d}),children:"fr"===a?Object(I.jsx)(_.default,{}):Object(I.jsx)(L.default,{})}),Object(I.jsx)("aside",{className:x()({"is-focused":d,"is-fixed":m}),children:Object(I.jsx)(ht,{lang:a,activeVisualization:q})})]})}),Object(I.jsx)(Ft,{lang:a,summary:St}),Object(I.jsx)("div",{className:x()("vis-focus-container",{"is-active":d,"is-visible":q}),children:Object(I.jsx)("button",{"data-for":"contents-tooltip","data-effect":"solid","data-tip":"fr"===a?"voir la visualisation associ\xe9e":"see associated visualization",onClick:function(){return u(!d)},children:Object(I.jsx)("span",{children:"\u02c3"})})})]}),Object(I.jsx)(O.a,{id:"contents-tooltip"})]})},Dt=(a(645),Ke.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},t.id,t))}),{}));var It=function(e){var t=e.match.params,a=t.visualizationId,r=t.lang,i=void 0===r?"fr":r;Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var o=Object(n.useState)(!1),s=Object(c.a)(o,2),l=s[0],u=s[1],p=Object(d.g)(),h=a&&Dt[a];return Object(I.jsxs)("div",{className:x()("Atlas secondary-page",{"has-focus":h}),children:[Object(I.jsx)(v.a,{children:Object(I.jsx)("title",{children:Object(ne.a)("Atlas",i)})}),Object(I.jsxs)("div",{className:"centered-contents",children:[Object(I.jsx)("h1",{children:"fr"===i?"Atlas des visualisations":"Visualizations atlas"}),Object(I.jsx)("ul",{className:"visualizations-list",children:Ke.map((function(e,t){return Object(I.jsxs)("li",{className:x()("visualization-item",{"is-active":h&&h.id===e.id}),onClick:function(){u(!0),setTimeout((function(){p.push({pathname:"/".concat(i,"/atlas/").concat(e.id)}),u(!1)}),100)},children:[Object(I.jsx)("figure",{className:"thumbnail-container",children:Object(I.jsx)("img",{src:"".concat("/portic-storymaps-2021","/thumbnails/").concat(i,"/").concat(e.id,".png"),alt:e["titre_".concat(i)]})}),Object(I.jsx)("h5",{className:"visualization-title",children:e["titre_".concat(i)]})]},t)}))})]}),Object(I.jsx)(vt,{visualization:h,lang:i,onClose:function(){p.push({pathname:"/".concat(i,"/atlas/")})}}),Object(I.jsx)("div",{className:x()("loader-indication-wrapper",{"is-loading":l}),children:Object(I.jsx)("div",{className:"loader-indication-container",children:"fr"===i?"Chargement de la visualisation":"Loading visualization"})})]})},Ht=function(e){var t=e.id,a=e.lang,n=Ke.find((function(e){return e.id===t}));return Object(I.jsx)("div",{className:"StandaloneVisualization",children:Object(I.jsx)(pt,{lang:a,atlasMode:!0,screenshotMode:!0,activeVisualization:n})})},Wt=(a(646),function(e){var t=e.Content,a=e.ContentSync,r=e.title,i=e.lang,o=void 0===i?"fr":i;return Object(I.jsxs)("div",{className:"PlainPage secondary-page",children:[Object(I.jsx)(v.a,{children:Object(I.jsx)("title",{children:Object(ne.a)(r,o)})}),Object(I.jsx)("div",{className:"centered-contents",children:a?Object(I.jsx)(a,{}):Object(I.jsx)(n.Suspense,{fallback:Object(I.jsx)("div",{children:"Chargement"}),children:Object(I.jsx)(t,{})})})]})}),$t=a(70),Gt={fr:y.a,en:w.a},Yt=ae.a.ui,Xt=Yt.colorText,Vt=Yt.colorAccentBackground,Ut=Yt.colorBackgroundBlue,Jt=Yt.colorBackground,Zt=function(e){var t=e.routes,a=e.onLangChange,r=Object(n.useState)(!1),i=Object(c.a)(r,2),o=i[0],s=i[1],l=Object(d.h)(),p=Object(n.useMemo)((function(){return l.pathname.includes("/page/part")?"page":"/fr/"===l.pathname||"/en/"===l.pathname?"home":"other-page"}),[l]),h=l&&l.match&&l.match.params&&l.match.params.lang,m="fr";h?m=h:l.pathname.includes("/en/")&&(m="en");var f=Object(k.useScrollYPosition)(),g=Object($t.a)(f,50),b=Object(J.a)().range([Ut,Jt]).domain([0,1]),v=Object(n.useMemo)((function(){var e=window.innerHeight;switch(p){case"page":return g<e?{fontColor:Xt,backgroundColor:b(g/(e/2))}:{backgroundColor:Jt};case"home":return g<.8*e?{fontColor:Xt,backgroundColor:Ut}:{fontColor:"white",backgroundColor:Vt};case"other-page":default:return{fontColor:void 0,backgroundColor:Jt}}}),[g,b,p]),j=v.fontColor,O=v.backgroundColor,y=Gt[m].titleHTML;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("nav",{style:{background:O,color:j},className:"nav nav-large",children:[Object(I.jsxs)("ul",{className:"primary-nav-container",children:[Object(I.jsx)("li",{className:"navitem-container",children:Object(I.jsx)(u.c,{exact:!0,to:"/".concat(m,"/"),children:"white"===j?Object(I.jsx)("img",{src:"".concat("/portic-storymaps-2021","/rose_des_vents_white.svg"),alt:"logo"}):Object(I.jsx)("img",{src:"".concat("/portic-storymaps-2021","/rose_des_vents.svg"),alt:"logo"})})}),t.filter((function(e){var t=e.routeGroup,a=void 0===t?"primary":t,n=e.hide;return"primary"===a&&!n})).map((function(e,t){var a=e.shortTitles,n=e.routes,r="/".concat(m,"/page/").concat(n[m]);return Object(I.jsx)("li",{className:"navitem-container",children:Object(I.jsx)(u.c,{to:r,children:a[m]})},t)}))]}),Object(I.jsxs)("ul",{className:"secondary-nav-container",children:[Object(I.jsx)("li",{className:"navitem-container",children:Object(I.jsx)(u.c,{to:"/".concat(m,"/atlas"),children:"fr"===m?"atlas des visualisations":"visualizations atlas"})}),t.filter((function(e){var t=e.routeGroup,a=void 0===t?"primary":t,n=e.hide;return"secondary"===a&&!n})).map((function(e,t){var a=e.shortTitles,n=e.routes,r="/".concat(m,"/page/").concat(n[m]);return Object(I.jsx)("li",{className:"navitem-container",children:Object(I.jsx)(u.c,{to:r,children:a[m]})},t)})),Object(I.jsx)("li",{className:"navitem-container lang-toggle",children:Object(I.jsx)("button",{className:"fr"===m?"is-active":"",onClick:function(){return a("fr")},children:"fr"})}),Object(I.jsx)("li",{className:"navitem-container lang-toggle",children:Object(I.jsx)("button",{className:"en"===m?"is-active":"",onClick:function(){return a("en")},children:"en"})})]})]}),Object(I.jsxs)("nav",{style:{},className:x()("nav nav-drawer",{"is-open":o}),children:[Object(I.jsx)("div",{className:"drawer-background",onClick:function(){return s(!o)}}),Object(I.jsxs)("div",{className:"drawer-body",children:[Object(I.jsxs)("ul",{className:"primary-nav-container",children:[Object(I.jsx)("li",{onClick:function(){return s(!1)},className:"navitem-container",children:Object(I.jsx)(u.c,{exact:!0,to:"/".concat(m,"/"),children:"fr"===m?"accueil":"home"})}),t.filter((function(e){var t=e.routeGroup,a=void 0===t?"primary":t,n=e.hide;return"primary"===a&&!n})).map((function(e,t){var a=e.shortTitles,n=e.routes,r="/".concat(m,"/page/").concat(n[m]);return Object(I.jsx)("li",{onClick:function(){return s(!1)},className:"navitem-container",children:Object(I.jsx)(u.c,{to:r,children:a[m]})},t)}))]}),Object(I.jsxs)("ul",{className:"secondary-nav-container",children:[t.filter((function(e){var t=e.routeGroup,a=void 0===t?"primary":t,n=e.hide;return"secondary"===a&&!n})).map((function(e,t){var a=e.shortTitles,n=e.routes,r="/".concat(m,"/page/").concat(n[m]);return Object(I.jsx)("li",{onClick:function(){return s(!1)},className:"navitem-container",children:Object(I.jsx)(u.c,{to:r,children:a[m]})},t)})),Object(I.jsx)("li",{onClick:function(){return s(!1)},className:"navitem-container",children:Object(I.jsx)(u.c,{to:"/".concat(m,"/atlas"),children:"fr"===m?"atlas des visualisations":"visualizations atlas"})}),null]})]}),Object(I.jsxs)("div",{className:"drawer-header",children:[Object(I.jsx)("button",{onClick:function(){return s(!o)},className:x()("drawer-button"),children:"white"===j||o?Object(I.jsx)("img",{style:{background:o?void 0:O},src:"".concat("/portic-storymaps-2021","/rose_des_vents_white.svg"),alt:"logo"}):Object(I.jsx)("img",{style:{background:o?void 0:O},src:"".concat("/portic-storymaps-2021","/rose_des_vents.svg"),alt:"logo"})}),Object(I.jsx)(u.c,{exact:!0,to:"/".concat(m,"/"),children:Object(I.jsx)("h1",{style:{color:o?void 0:j,background:o?void 0:O},dangerouslySetInnerHTML:{__html:y}})})]})]})]})},Qt=(a(647),function(e){var t=e.percentsLoaded,a=void 0===t?0:t;return Object(I.jsx)("div",{className:x()("Loader",{"is-complete":100===a}),children:Object(I.jsx)("div",{className:"loader-container",children:Object(I.jsx)("div",{className:"loading-bar",style:{width:a+"%"}})})})}),Kt=a(230),ea=a(231),ta=function(e){var t=e.lang;return Object(I.jsx)("footer",{className:"Footer",children:Object(I.jsx)("div",{className:"footer-contents",children:"fr"===t?Object(I.jsx)(Kt.default,{}):Object(I.jsx)(ea.default,{})})})},aa=(a(648),["fr","en"]);function na(){var e=Object(d.g)(),t=Object(d.h)(),i=Object(n.useState)({}),p=Object(c.a)(i,2),g=p[0],v=p[1],j=Object(n.useState)(0),x=Object(c.a)(j,2),O=x[0],y=x[1];Object(n.useEffect)((function(){var e=h()(Ke.filter((function(e){return e.datasets})).reduce((function(e,t){return[].concat(Object(l.a)(e),Object(l.a)(t.datasets.split(",").map((function(e){return e.trim()}))))}),[]));e.reduce((function(t,a,n){return t.then((function(t){return new Promise((function(r,i){var l=a?"".concat("/portic-storymaps-2021","/data/").concat(a):void 0;if(!l)return r(t);b.a.get(l,{onDownloadProgress:function(t){var a=t.loaded/t.total;a=a>1?1:a;var r=n/e.length;y(r+a/e.length)}}).then((function(e){var n=e.data;setTimeout((function(){var e=n;"csv"===l.split(".").pop()?e=Object(m.a)(n):"tsv"===l.split(".").pop()&&(e=Object(f.a)(n)),r(Object(s.a)(Object(s.a)({},t),{},Object(o.a)({},a,e)))}))})).catch((function(e){return console.error(e),r(t)}))}))}))}),Promise.resolve({})).then((function(e){y(1),v(e)})).catch(console.error)}),[]);var w=function(e){var t=e.Content,a=e.ContentSync,n=e.ThatComponent,r=void 0===n?Wt:n,i=e.title,o=e.lang;return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(r,{Content:t,ContentSync:a,title:i,lang:o})})},_=t.pathname.includes("/en/")?"en":"fr";return Object(I.jsxs)(oe.a.Provider,{value:g,children:[Object(I.jsxs)("div",{id:"wrapper",children:[t.pathname.includes("/visualization/")?null:Object(I.jsx)("header",{children:Object(I.jsx)(Zt,{onLangChange:function(a){var n="fr"===a?"en":"fr",r=t.pathname;if(r.includes("atlas")){var i=r.split("/atlas/").pop();e.push("/".concat(a,"/atlas/").concat(i||""))}else{var o=e.location.pathname.split("/").pop(),s=St.find((function(e){return e.routes[n]===o}));s?e.push("/".concat(a,"/page/").concat(s.routes[a])):e.push("/".concat(a,"/"))}},routes:St})}),Object(I.jsxs)("main",{children:[Object(I.jsxs)(d.d,{children:[aa.map((function(e){return St.map((function(t,n){var i=t.titles,o=t.routes,s=t.contents,l=t.Component,c=t.contentsProcessed,u="/".concat(e,"/page/").concat(o[e]),p=i[e],h=r.a.lazy((function(){return a(649)("./".concat(s[e]))})),m=c[e];return Object(I.jsx)(d.b,{path:u,exact:!0,children:w({Content:h,ThatComponent:l,title:p,ContentSync:m,lang:e})},n)}))})),aa.map((function(e){return Ke.map((function(t,a){var n=t.id,r="/".concat(e,"/visualization/").concat(n);return Object(I.jsx)(d.b,{path:r,exact:!0,component:function(){return Object(I.jsx)(Ht,{id:n,lang:e})}},a)}))})),Object(I.jsx)(d.b,{path:"/:lang/atlas/:visualizationId?",component:It}),Object(I.jsx)(d.b,{path:"/:lang",exact:!0,component:Et}),Object(I.jsx)(d.a,{to:"/".concat(_,"/")})]}),Object(I.jsx)(Qt,{percentsLoaded:100*O})]}),t.pathname.includes("/visualization/")?null:Object(I.jsx)(ta,{lang:_})]}),Object(I.jsxs)(r.a.Fragment,{children:[aa.map((function(e){return St.filter((function(t){var a=t.routes;return a[e]&&!a[e].includes("test")})).map((function(t,a){var n=t.routes,r="/".concat(e,"/page/").concat(n[e]);return Object(I.jsx)(u.b,{to:r,exact:!0})}))})),aa.map((function(e){return Ke.map((function(t,a){var n=t.id,r="/".concat(e,"/atlas/").concat(n);return Object(I.jsx)(u.b,{to:r,exact:!0})}))}))]})]})}var ra="/".concat(mt.a.split("/").pop());function ia(){return Object(I.jsx)(u.a,{basename:ra,children:Object(I.jsx)(na,{})})}var oa=function(e){e&&e instanceof Function&&a.e(11).then(a.bind(null,689)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),i(e),o(e)}))},sa=document.getElementById("root");sa.hasChildNodes()?Object(i.hydrate)(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(ia,{})}),sa):Object(i.render)(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(ia,{})}),sa),oa()},70:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return s}));var n=a(8),r=a(2);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=Object(r.useRef)();Object(r.useEffect)((function(){a.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=Object(r.useState)(e),i=Object(n.a)(a,2),o=i[0],s=i[1];return Object(r.useEffect)((function(){var a=setTimeout((function(){s(e)}),t);return function(){clearTimeout(a)}}),[e,t]),o}function s(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}},80:function(e,t,a){"use strict";t.a={title:"Commerce multi-\xe9chelles autour du port de La Rochelle au XVIII\xe8me si\xe8cle",titleHTML:"Commerce multi-\xe9chelles autour du port de La Rochelle au <span>XVIII</span><sup>e</sup> si\xe8cle",subtitle:"Une \xe9tude de cas du programme de recherche interdisciplinaire PORTIC"}},97:function(e,t,a){"use strict";t.a={title:"Multiscale trade in eighteenth-century La Rochelle region",titleHTML:"Multiscale trade in eighteenth-century La Rochelle region",subtitle:"A case study from the PORTIC interdisciplinary research program"}}},[[650,3,4]]]);
//# sourceMappingURL=main.23db9576.chunk.js.map