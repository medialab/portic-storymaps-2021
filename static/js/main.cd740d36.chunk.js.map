{"version":3,"sources":["contents/fr/partie-1.mdx","contents/en/part-1.mdx","contents/fr/partie-2.mdx","contents/en/part-2-intro.mdx","contents/fr/partie-3.mdx","contents/en/part-3.mdx","contents/fr/a-propos.mdx","contents/en/about.mdx","contents/fr/test-scrolly.mdx","contents/en/test-scrolly.mdx","components/Caller/Caller.js","components/Caller/index.js","../ /^/.//.*$/ groupOptions: {} namespace object","components/SvgComponent/SvgComponent.js","components/SvgComponent/index.js","components/VegaComponent/index.js","components/VegaComponent/VegaComponent.js","components/SigmaComponent/reducers.js","helpers/misc.js","components/SigmaComponent/GraphControls.js","components/SigmaComponent/GraphContainer.js","components/SigmaComponent/index.js","components/GeoComponent/index.js","components/GeoComponent/GeoComponent.js","components/TriangleComponent/index.js","components/TriangleComponent/TriangleComponent.js","pages/Home/ports-region-1789.svg","pages/Home/content.mdx","pages/Home/Home.js","pages/Home/index.js","visualizations/Test.js","components/Loader/Loader.js","components/DeclineComponent/ProductsDistributionChart.js","components/DeclineComponent/LongitudinalTradeChart.js","components/DeclineComponent/index.js","components/DeclineComponent/DeclineComponent.js","visualizations/PrincipalVisualizationPart1.js","components/CircularAlluvialComponent/CircularAlluvialComponent.js","components/CircularAlluvialComponent/utils.js","visualizations/PrincipalVisualizationPart2/index.js","visualizations/PrincipalVisualizationPart2/PrincipalVisualizationPart2.js","visualizations/PrincipalVisualizationPart3.js","visualizations/index.js","pages/Atlas/Atlas.js","pages/Atlas/index.js","components/HeaderNav/index.js","components/HeaderNav/HeaderNav.js","pages/PlainPage/index.js","pages/PlainPage/PlainPage.js","components/VisualizationController/index.js","components/VisualizationController/VisualizationController.js","pages/ScrollyPage/index.js","pages/ScrollyPage/ScrollyPage.js","summary.js","App.js","reportWebVitals.js","index.js","helpers/contexts.js"],"names":["readingTime","layoutProps","MDXContent","components","props","mdxType","id","step","name","parentName","isMDXComponent","tableOfContents","frontMatter","level","title","children","href","rel","target","testParam","coucou","Caller","visualizationId","ref","useRef","useState","genId","useContext","VisualizationControlContext","activeVisualization","onBlockClick","onRegisterVisualization","onUnregisterVisualization","useEffect","setTimeout","payload","onClick","e","className","cx","Object","keys","length","JSON","stringify","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","Error","code","ids","all","slice","module","exports","SvgComponent","path","alt","src","process","VegaComponent","filename","data","spec","setData","loading","setLoading","URL","get","csvString","newData","csvParse","catch","err","VegaLite","DEFAULT_NODE_COLOR","DEFAULT_NODE_SIZE_RANGE","DEFAULT_COLOR_SPACE","cmin","cmax","lmin","lmax","SINGLE_COLOR_PALETTE","usePrevious","value","current","generatePalette","count","iwanthue","colorSpace","seed","clustering","GraphControls","rescale","zoomIn","zoomOut","CELL_HEIGHT_SCALE","scaleLinear","domain","range","CELL_WIDTH_SCALE","renderer","getCamera","animatedReset","animatedZoom","animatedUnzoom","GraphContainer","graph","nodeColorVariable","nodeColor","nodeSizeVariable","nodeSize","labelDensity","nodeLabel","onCameraUpdate","cameraPosition","updateTimestamp","sizes","useMemo","res","forEachNode","_node","attributes","push","size","sizeExtent","extent","extents","min","max","values","attr","uniq","colors","palette","i","forEach","option","edgesMap","m","Map","_source","_target","sourceAttributes","targetAttributes","edge","_edgeAttributes","set","sourceNode","targetNode","previousNodeColor","previousNodeSize","previousNodeLabel","previousLabelDensity","nodeReducer","nodeSizeFactor","nodeSizeScale","key","renderedNode","x","isNaN","undefined","y","color","v","createNodeReducer","edgeReducer","dontColorEdges","el1","el2","renderedEdge","biggerNode","Color","lighten","rgb","string","createEdgeReducer","container","setRenderer","animate","needToRefresh","settings","labelGrid","cell","width","height","displayedLabels","Set","refresh","setContainer","useCallback","node","kill","newRenderer","Renderer","camera","getState","on","state","style","bind","inputCameraPosition","angle","ratio","setGraph","setCameraPosition","find","prop","gexfString","gexf","parse","Graph","updateNode","_err","cam","GeoComponent","dataFilename","backgroundFilename","label","markerSize","markerColor","showLabels","centerOnRegion","backgroundData","setBackgroundData","colorsMap","setColorsMap","loadingData","setLoadingData","loadingBackground","setLoadingBackground","dataURL","markerData","coordsMap","datum","mark","latitude","longitude","grouped","entries","colorValues","g","thatColorsMap","reduce","index","sizeScale","backgroundURL","bgData","projection","geoEqualEarth","scale","center","fitSize","translate","viewBox","border","features","d","geoPath","fill","stroke","strokeWidth","filter","transform","cy","r","fontWeight","TriangleComponent","port","test","Home","lang","match","params","Helmet","Test","datasets","datasetName","Loader","percentsLoaded","ProductsDistributionChart","field","partTreshold","barWidth","labelFirst","totalValue","sum","partAcc","dataTillTreshold","sortBy","aggregatedMiscProducts","maxValue","display","flexDirection","justifyItems","paddingBottom","boxSizing","alignItems","backgroundColor","float","fontSize","margin","product","LongitudinalTradeChart","productsData","absoluteField","shareField","herfindhalField","absoluteLabel","shareLabel","productsHeight","showProducts","xBand","d3","year","padding","herfindhalScale","svgNode","svgPath","selectAll","remove","yearTicks","concat","append","call","tickValues","tickSizeOuter","yAbsolute","nice","select","clone","text","yShare","join","bandwidth","line","defined","productVizHeight","her1750","her1789","position","textAlign","right","left","PRODUCT_TRADE_PART_TRESHOLD","DeclineComponent","longitudinalData","setLongitudinalData","setProductsData","loadingLR","setLoadingLR","error","setError","axios","response","toString","thirdHeight","halfHeight","message","region","PrincipalVisualizationPart1","colorSchemes","colorScheme1","colorScheme2","colorScheme3","CircularAlluvialComponent","inputData","sumBy","steps","filters","highlightedFlow","setHighlightedFlow","highlightedFilter","setHighlightedFilter","stepsSpec","_id","stepIndex","stepData","groups","groupBy","flows","flow","valueAbs","actualValue","valuePart","sort","a","b","nodes","displaceAbs","displacePart","newNodes","localDisplaceAbs","localDisplacePart","newNode","newFlow","relativeDisplaceAbs","relativeDisplacePart","nextStep","nextKey","nodeIndex","newFlows","flowIndex","nextVal","nextStepGroup","nextFlow","flow2","nextPosition","prepareAlluvialData","colorScales","modalitiesMap","cur","fieldIndex","counter","smallestDimension","BAR_SIZE","BAR_WIDTH","HORIZONTAL_MARGIN","textScale","stepScales","0","orientation","direction","displaceX","displaceY","displaceText","1","2","3","4","5","x1","x2","y1","y2","onMouseOut","nodesSizeScale","f","linkIndex","nextStepScales","x3","y3","y4","x4","controlPoint1X","controlPoint1Y","controlPoint2X","controlPoint2Y","onMouseOver","trim","replace","nodeHeight","initialY","initialHeight","nodeWidth","actualHeight","split","flowX","flowY","flowWidth","flowHeight","top","maxWidth","flow_type","partner","PrincipalVisualizationPart2","alluvialFilters","labels","fr","en","PrincipalVisualizationPart3","VisualizationContainer","dimensions","DatasetsContext","relevantDatasets","viz","visualizationsList","datasetsIds","VisualizationFocus","visualization","visualizationsMap","visualizations","Atlas","history","useHistory","shownVisualization","visualizationIndex","pathname","HeaderNav","routes","onLangChange","location","useLocation","paramsLang","includes","to","titles","inputRoute","route","PlainPage","Content","contentsURL","fallback","VisualizationController","setDimensions","visProps","omit","bounds","onResize","contentRect","measureRef","ScrollyPage","ContentSync","setActiveVisualization","useReducer","newState","setVisualizations","scrollY","useScrollYPosition","found","DISPLACE_Y","window","innerHeight","visualizationEntries","getBoundingClientRect","Provider","console","log","finalParams","newVis","thatId","summary","contents","contentsProcessed","Part1Fr","Part1En","Component","Part2IntroFr","Part2IntroEn","Part3Fr","Part3En","AboutFr","AboutEn","LANGUAGES","App","setDatasets","loadingFraction","setLoadingFraction","datasetsNames","datasetIndex","reject","url","onDownloadProgress","progressEvent","status","loaded","total","globalFraction","loadedData","pop","tsvParse","newDatasets","renderRoute","ThatComponent","ln","otherLang","pathOtherLang","routeItem","React","lazy","exact","component","Wrapper","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","createContext"],"mappings":"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","file":"static/js/main.cd740d36.chunk.js","sourcesContent":["\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"7 min read\",\"minutes\":6.615,\"time\":396900,\"words\":1323}\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport Caller from '../../components/Caller'\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"partie-1---le-dclin-de-la-rgion-de-la-rochelle-suite--la-perte-du-canada\"\n    }}>{`Partie 1 - Le dclin de la rgion de La Rochelle suite  la perte du Canada`}</h1>\n    <Caller id=\"viz-principale-partie-1\" step={1} mdxType=\"Caller\" />\n    <p>{`Au dix-huitime sicle, la France a pleinement profit du dveloppement des relations conomiques entre lAfrique, lAmrique et lEurope. L Atlantique Franais reposant sur la traite des Africains et leur exploitation dans les les franaises (Antilles et Mascareignes) a connu son apoge juste avant la rvolte de Saint-Domingue en 1791 et le dbut de la guerre maritime avec lAngleterre en 1793. Lancienne rgion Poitou-Charente, correspondant approximativement aux gnralits de Poitou, Aunis, Saintonge et Angoumois (PASA), avait une tradition maritime ancienne et tait bien situe pour bnficier de cet pisode de prosprit. `}</p>\n    <Caller id=\"viz-principale-partie-1\" step={2} mdxType=\"Caller\" />\n    <p>{`Lexamen du commerce avec les pays trangers et les colonies de la direction des Fermes de La Rochelle, qui tait leur faade maritime, montre toutefois un dynamisme limit. Il y a bien eu croissance du commerce. Mais cette croissance a t plus lente que celle du reste du Royaume. Cela sexplique en grande partie par les relations privilgies de la direction de la Rochelle avec le Canada. Dune part, celui-ci se dveloppe beaucoup moins vite que les Antilles, et la rgion souffre de ce manque de dynamisme durant la premire moiti du sicle. Les fourrures et pelleteries mises  part, le Canada noffre pas de productions trs diffrentes de celles du royaume : il nest pas le support dchanges spculatifs. Dautre part, le Canada est cd aux Anglais lors du trait de Paris qui clt la guerre de Sept Ans en 1763. Qubec avait dj t pris en 1759. Cette perte est svre pour la rgion dont le commerce entame alors un recul relatif trs net. La direction de La Rochelle effectue 4,8% du commerce extrieur franais en 1750. En 1789 elle nen reprsente plus que 2,7%.`}</p>\n    <Caller id=\"viz-principale-partie-1\" step={3} mdxType=\"Caller\" />\n    <p>{`Ce rsultat contraste avec les rsultats quobtiennent les gnralits de Bordeaux et de Nantes, Bordeaux, notamment, est beaucoup plus dynamique que La Rochelle et son commerce dpasse celui de Nantes dans les annes 1740.`}</p>\n    <p>{`Le recul de La Rochelle nest pas que quantitatif. En 1750, la direction de La Rochelle commerce 21% des types de biens changs par la France (645 sur 3055) au niveau product`}{`_`}{`simplification) de la France. En 1789, elle nen commerce plus que 7% (248/3565). Cela sobserve  la fois pour les exportations et pour les importations. Parmi les 150 secteurs de la classification Rvolution et Empire de Toflit18, La Rochelle en commerce 121 en 1750, mais seulement 88 en 1789.`}</p>\n    <p>{`Les exportations sont donc beaucoup plus diverses en 1750 quen 1789. Lindice de concentration (Herfindhal) est de 0,1 en 1750 et 0,24 en 1789. Deux biens pour lesquels il ny a pas beaucoup de concurrence nationale (le sel et les eaux-de-vie) et deux rexportations coloniales (le caf et le sucre) dominent en 1789 les exportations, avec le bl. En 1750, la mercerie et les toffes de laine font partie des cinq principales exportations (avec lindigo, les eaux-de-vie et le sucre : le sel est en 14e position). La Rochelle sest spcialis dans les produits agricoles et les rexportations au dpens des biens manufacturs. Ce jugement ngatif est toutefois nuanc par lintensit capitalistique de la production deaux-de-vie qui la rapproche des biens manufacturs.`}</p>\n    <p>{`Nous ne connaissons pas la destination des rexportations coloniales en 1789. En les excluant, on constate que la concentration des marchs de La Rochelle est la mme en 1750 et en 1789 (entre 0,41 et 0,44), mais que lAngleterre a pris la place de lAmrique. La Rochelle nexporte plus des biens diffrencis vers le Canada, mais essentiellement des eaux-de-vie vers lAngleterre.`}</p>\n    <p>{`Les donnes de la navigation pour 1789 ne nous permettent pas daller beaucoup plus loin, car les congs du port de La Rochelle ne mentionnent pas en dtail la cargaison exporte. Ils nous indiquent, toutefois, les destinations de navires. On constate dj quen 1789 le tonnage ncessaire aux exportations vers ltranger du port de La Rochelle - do les rexportations coloniales seffectuent - nest pas le plus important dans la rgion (mme si le tonnage indiqu  Marennes semble surestim  40%). Comme nous le verrons dans la partie 23 `}{`[`}{`lien`}{`]`}{`, La Rochelle na pas un rle central dans les relations que les ports de cette rgion ont avec ltranger. Pour linstant, la carte permet de constater que les exportations de lAunis se dirigent pour lessentiel vers lEurope du Nord.`}</p>\n    <p>{` Si lon exclut la Grande-Bretagne et les Etats-Unis - qui absorbent des quantits insignifiantes de produits coloniaux franais, les rexportations de produits coloniaux rochelais se rpartissent pour lessentiel entre les marchs traditionnels: Provinces-Unies, villes hansatiques, Baltique. Compar  Bordeaux, qui entretient des relations particulirement intenses avec Hambourg, il se peut que dans le cas rochelais lmigration huguenote rende compte du lien bien plus fort avec la Hollande.`}</p>\n    <a name=\"t.928a9ccfd983b0ae11008783a6d410a3f516a7f7\"></a><a name=\"t.0\"></a>\n    <p>{`Destinations des navires vers ltranger (Afrique exclue) au dpart du port de La Rochelle, 1789`}</p>\n    <p>{`pays`}</p>\n    <p>{`tx total`}</p>\n    <p>{`Pays bas autrichiens`}</p>\n    <p>{`512`}</p>\n    <p>{`Provinces-Unies`}</p>\n    <p>{`550`}</p>\n    <p>{`Brme`}</p>\n    <p>{`520`}</p>\n    <p>{`Hambourg`}</p>\n    <p>{`530`}</p>\n    <p>{`Norvge`}</p>\n    <p>{`150`}</p>\n    <p>{`Prusse (partie en Baltique)`}</p>\n    <p>{`370`}</p>\n    <p>{`Baltique (indertermin)`}</p>\n    <p>{`200`}</p>\n    <p>{`Grande-Bretagne`}</p>\n    <p>{`1048`}</p>\n    <p>{`Etats-Unis dAmrique`}</p>\n    <p>{`160`}</p>\n    <p>{`tranger inconnu`}</p>\n    <p>{`104`}</p>\n    <p>{`Enfin, la perte de vitesse de la rgion vers la fin de lAncien Rgime semble atteste aussi pour ce qui concerne sa capacit  assurer ses propres trafics. Si on prend en compte la part de navigation sous pavillon franais assure par des navires de la rgion tudie, elle est en effet infrieure  celle de la plupart des autres provinces franaises: en 1787, les ports de lAunis-Saintonge-Poitou assurent 51.6% du tonnage quils expdient, contre 84.3% pour la Bretagne ou 58,7% pour la Guyenne. En affinant, on peut voir si la rgion tudie assure plus ou moins que dautres ses trafics extrieurs. `}</p>\n    <p>{`La navigation avec ltranger est assure,  90%, par de pavillons trangers ou extrieur  la rgion tudie. Il sagit, pour lessentiel, des pavillons britannique et des pays de lEurope du Nord.`}</p>\n    <p>{`Si on regarde les dparts depuis la rgion tudie vers de ports franais, calculer la part de la navigation assure par homeport locaux en 1787 dans ports de la direction de la Rochelle vers intrieur direction / reste France / international / hors Europe et comparer avec idem pour Bordeaux et pour Nantes par ex. (en tonnage)`}</p>\n    <p>{`NB (Silvia): on avait suggr de faire jouer aussi la population des gnralits pour conforter ces analyses. `}</p>\n    <p>{`lments venant de Guillaume sur ce sujet:`}</p>\n    <p>{`Cest compliqu de trouver la population au bon niveau de gnralit.`}</p>\n    <p>{`Population des villes (ce serait bien davoir 17891792, mais, bon) : `}</p>\n    <p>{`Population des intendances (Dupquier) : celle de La Rochelle est petite par rapport  celles de Rennes et Bordeaux+Bayonne. Faut-il rajouter le Poitou ? En tous les cas, celle de Bordeaux+Bayonne se caractrise par son faible dynamisme. Je propose donc de laisser tomber le rapprochement.`}</p>\n    <p>{`Enfin, si la rgion tudie participe  la croissance gnrale de la population de la France, la croissance urbaine de La Rochelle et de Rochefort, les deux seules villes portuaires dans la rgion qui dpassent les 10000 habitants en 1789, nest pas comparable  celle de Bordeaux et Nantes, dont la population double, voire triple, entre 1700 et la Rvolution (Bordeaux 45-`}{`>`}{` 111 000 entre 1700 et 1790; Nantes 42.5-`}{`>`}{` 80; S; Beauvalet-Boutouyrie, La dmographie de lpoque moderne, cit par G. Saupin, Les villes en France  lpoque moderne, Belin SUP, p. 17), celle de La Rochelle stagne tout au long du sicle.`}</p>\n    <p>{`NB (Silvia) suis assez surprise par lvolution de Nantes, merci de vrifier que les donnes soient comparables danne en annes (colonies? reexportations ? Indes orientales?)`}</p>\n    <p>{`GD : Quest-ce qui te surprend, Silvia ? Je crois que cest bon ?`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=http://toflit18.medialab.sciences-po.fr/%23/exploration/indicators?lines%3D%255B%257B%2522color%2522%253A%2522%2523C14F4C%2522%252C%2522region%2522%253A%2522Bordeaux%2522%252C%2522kind%2522%253A%2522export%2522%252C%2522sourceType%2522%253A%2522Best%2520Guess%2520customs%2520region%2520product%2520x%2520partner%2522%257D%252C%257B%2522color%2522%253A%2522%2523504342%2522%252C%2522region%2522%253A%2522Nantes%2522%252C%2522kind%2522%253A%2522export%2522%252C%2522sourceType%2522%253A%2522Best%2520Guess%2520customs%2520region%2520product%2520x%2520partner%2522%257D%252C%257B%2522color%2522%253A%2522%2523A563B7%2522%252C%2522region%2522%253A%2522La_Rochelle%2522%252C%2522kind%2522%253A%2522export%2522%252C%2522sourceType%2522%253A%2522Best%2520Guess%2520customs%2520region%2520product%2520x%2520partner%2522%257D%255D&sa=D&source=editors&ust=1623357316833000&usg=AOvVaw0A0XCWhtK5hJa56ZWaGkHn\"\n      }}>{`http://toflit18.medialab.sciences-po.fr/`}{`#`}{`/exploration/indicators?lines=%5B%7B%22color%22%3A%22%23C14F4C%22%2C%22region%22%3A%22Bordeaux%22%2C%22kind%22%3A%22export%22%2C%22sourceType%22%3A%22Best%20Guess%20customs%20region%20product%20x%20partner%22%7D%2C%7B%22color%22%3A%22%23504342%22%2C%22region%22%3A%22Nantes%22%2C%22kind%22%3A%22export%22%2C%22sourceType%22%3A%22Best%20Guess%20customs%20region%20product%20x%20partner%22%7D%2C%7B%22color%22%3A%22%23A563B7%22%2C%22region%22%3A%22La`}{`_`}{`Rochelle%22%2C%22kind%22%3A%22export%22%2C%22sourceType%22%3A%22Best%20Guess%20customs%20region%20product%20x%20partner%22%7D%5D`}</a></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"http://toflit18.medialab.sciences-po.fr/%5C#/exploration/indicators?lines=%5B%7B%22color%22%3A%22%23C14F4C%22%2C%22region%22%3A%22Bordeaux%22%2C%22kind%22%3A%22import%22%2C%22sourceType%22%3A%22Best%20Guess%20customs%20region%20product%20x%20partner%22%7D%2C%7B%22color%22%3A%22%23504342%22%2C%22region%22%3A%22Nantes%22%2C%22kind%22%3A%22import%22%2C%22sourceType%22%3A%22Best%20Guess%20customs%20region%20product%20x%20partner%22%7D%2C%7B%22color%22%3A%22%23A563B7%22%2C%22region%22%3A%22La%5C_Rochelle%22%2C%22kind%22%3A%22import%22%2C%22sourceType%22%3A%22Best%20Guess%20customs%20region%20product%20x%20partner%22%7D%5D\"\n      }}>{`http://toflit18.medialab.sciences-po.fr/\\\\#/exploration/indicators?lines=%5B%7B%22color%22%3A%22%23C14F4C%22%2C%22region%22%3A%22Bordeaux%22%2C%22kind%22%3A%22import%22%2C%22sourceType%22%3A%22Best%20Guess%20customs%20region%20product%20x%20partner%22%7D%2C%7B%22color%22%3A%22%23504342%22%2C%22region%22%3A%22Nantes%22%2C%22kind%22%3A%22import%22%2C%22sourceType%22%3A%22Best%20Guess%20customs%20region%20product%20x%20partner%22%7D%2C%7B%22color%22%3A%22%23A563B7%22%2C%22region%22%3A%22La\\\\_Rochelle%22%2C%22kind%22%3A%22import%22%2C%22sourceType%22%3A%22Best%20Guess%20customs%20region%20product%20x%20partner%22%7D%5D`}</a></p>\n    <p>{`| import `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=https://drive.google.com/drive/u/0/folders/1_TyzR__lYt7OCHwjNKsUcPxWmzLSykhj&sa=D&source=editors&ust=1623357316834000&usg=AOvVaw33nUU4jGqvSrfQ17M0L0ur\"\n      }}>{`https://drive.google.com/drive/u/0/folders/1`}{`_`}{`TyzR`}{`_`}{`_`}{`lYt7OCHwjNKsUcPxWmzLSykhj`}</a>{`; `}</p>\n    <p>{`ou export, `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=https://drive.google.com/drive/u/0/folders/1_TyzR__lYt7OCHwjNKsUcPxWmzLSykhj&sa=D&source=editors&ust=1623357316835000&usg=AOvVaw1AnND2MLoJ94VIBygONVs5\"\n      }}>{`https://drive.google.com/drive/u/0/folders/1`}{`_`}{`TyzR`}{`_`}{`_`}{`lYt7OCHwjNKsUcPxWmzLSykhj`}</a>{`.`}</p>\n    <p>{` (`}<a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=https://drive.google.com/drive/u/0/folders/1_TyzR__lYt7OCHwjNKsUcPxWmzLSykhj&sa=D&source=editors&ust=1623357316835000&usg=AOvVaw1AnND2MLoJ94VIBygONVs5\"\n      }}>{`https://drive.google.com/drive/u/0/folders/1`}{`_`}{`TyzR`}{`_`}{`_`}{`lYt7OCHwjNKsUcPxWmzLSykhj`}</a>{`) `}</p>\n    <p>{`| import et export ici -`}{`>`}{`  nettoyer car il y a de trous dans les importations de Nantes: prendre plutt: total / Bordeaux et La Rochelle`}</p>\n    <p>{`(`}<a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=https://drive.google.com/drive/u/0/folders/1_TyzR__lYt7OCHwjNKsUcPxWmzLSykhj&sa=D&source=editors&ust=1623357316837000&usg=AOvVaw3H4oMVKrqNx_pcZZOWGLfi\"\n      }}>{`https://drive.google.com/drive/u/0/folders/1`}{`_`}{`TyzR`}{`_`}{`_`}{`lYt7OCHwjNKsUcPxWmzLSykhj`}</a>{`)`}</p>\n    <p>{`De toutes les manires, plutt des camemberts ?`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.015,\"time\":900,\"words\":3}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`Part 1 intro`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"15 min read\",\"minutes\":14.475,\"time\":868500,\"words\":2895}\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport Caller from '../../components/Caller'\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"partie-2---une-forte-spcialisation-portuaire-le-cas-de-la-traite-ngrire-du-commerce-du-sel-et-de-leau-de-vie\"\n    }}>{`Partie 2 - Une forte spcialisation portuaire: le cas de la traite ngrire, du commerce du sel et de leau-de-vie`}</h1>\n    <Caller id=\"viz-principale-partie-2\" step={1} mdxType=\"Caller\" />\n    <h2 {...{\n      \"id\": \"introduction\"\n    }}>{`Introduction`}</h2>\n    <p>{`La rgion tudie se caractrise par une densit importante de ports. La carte reprsente le tonnage expdi en 1787,  partir des congs dlivrs aux navires. Les 8 ports dpassant les 10 000 tonneaux entretiennent tous, sauf Marans, un commerce avec ltranger. `}</p>\n    <p>{`De par ses relations exclusives avec les colonies et surtout son investissement dans la traite ngrire, La Rochelle mrite une tude  part. Pour ce qui des relations avec ltranger (hors colonies), on constate des circuits relativement distincts: le sel export par Noirmoutier, Ars-en-R et Marennes - qui exportent pour lessentiel du sel, ont comme principales dbouches extrieures la Baltique et les pays scandinaves. Nous dvelopperons ici en dtail le cas de Marennes, principal port exportateur franais de sel. `}</p>\n    <p>{`Pour les eaux-de-vie, dont la mention est rare dans les sources de la navigation, il faut se tourner vers la Balance du commerce, pour affiner ensuite les donnes par lanalyse de la navigation (choix de ports  justifier)`}</p>\n    <p>{`Limportance des tonnages impliqus nest pas directement corrle  la valeur des marchandises transportes. En effet, les donnes de la Ferme donnent les valeurs suivantes:`}</p>\n    <p>{`Bureaux de Ferme de la direction de La Rochelle, exportations en 1789`}</p>\n    <a name=\"t.f271f803a2027ad5854321e7817f569fb280399d\"></a><a name=\"t.1\"></a>\n    <p>{`Bureau de Ferme`}</p>\n    <p>{`Valeur des exportations en livres tournois`}</p>\n    <p>{`Aligre`}</p>\n    <p>{`1 302 594,57`}</p>\n    <p>{`Charente`}</p>\n    <p>{`6 194 522,97`}</p>\n    <p>{`La Rochelle`}</p>\n    <p>{`7 698 983,18`}</p>\n    <p>{`Les Sables dOlonne`}</p>\n    <p>{`110 527,00`}</p>\n    <p>{`Marennes`}</p>\n    <p>{`1 921 839,39`}</p>\n    <p>{`Rochefort`}</p>\n    <p>{`274 173,22`}</p>\n    <p>{`Saint-Martin-de-R`}</p>\n    <p>{`1 209 320,67`}</p>\n    <p>{`(vide)`}</p>\n    <p>{`1 662 254,00`}</p>\n    <p>{`Total gnral`}</p>\n    <p>{`20 374 214,99`}</p>\n    <p>{`Exports : `}</p>\n    <p>{`Total : `}</p>\n    <h2 {...{\n      \"id\": \"21---la-rochelle-et-le-commerce-triangulaire\"\n    }}>{`2.1 - La Rochelle et le commerce triangulaire`}</h2>\n    <Caller id=\"viz-principale-partie-2\" step={2} mdxType=\"Caller\" />\n    <p>{`Au XVIIIe sicle, les colonies antillaises augmentent trs considrablement leur production de sucre, caf, indigo et produits tinctoriaux, pour rpondre  une demande europenne fortement oriente  la hausse. La croissance de la production passe par un nombre de plus en plus lev dunits de production, appeles plantations, qui font un recours massif  une main-duvre desclaves. Si une partie significative de ceux-ci sont ns aux Amriques, les Europens les dportent aussi par centaines de milliers depuis lAfrique dans le cadre de la traite ngrire. Ce commerce transatlantique dtres humains, achets sur les ctes dAfrique par les ngriers europens, a commenc au XVIe sicle, mais il atteint son apoge au XVIIIe sicle, lorsque 6 millions dAfricains sont apports aux Amriques. La moiti dentre eux est vendue aux Antilles. On estime  1.25 millions `}{`[`}{`Silvia:  vrifier`}{`]`}{` le nombre dAfricains introduits dans les colonies franaises au XVIIIe sicle. La principale destination est la colonie de Saint-Domingue (aujourdhui Hati) qui compte,  la veille de la grande rvolte desclaves de 1791, un demi-million desclaves, dont plus de la moiti sont ns en Afrique.`}</p>\n    <p>{`Lactivit ngrire est aux mains de linitiative prive darmateurs privs qui esprent raliser un profit lors de la revente des esclaves. Si Nantes est le principal port ngrier en France, La Rochelle a jou un rle significatif, tout particulirement dans les annes 17301740 : entre 1713 et 1744, La Rochelle arme 15% des expditions ngrires, sa part tombe  11% aprs la perte du Canada, en sorte que si La Rochelle est le deuxime port ngrier le plus important en France avant 1763, il passe au 4e rang par la suite. Ce dclin sinscrit dans la perspective plus large du dclin relatif de La Rochelle au sein de lespace Atlantique franais. Port de premier plan au XVIIe sicle, il connat un dclin relatif dans la premire moiti du XVIIIe sicle, qui devient absolu avec la perte du Canada. Ds lors et aprs une priode de flottement, le port de la Rochelle se tourne rsolument vers la traite ngrire pour conserver une place secondaire, mais importante jusqu la Rvolution. `}</p>\n    <p>{`Aussi, les armateurs rochelais passent de 4,.3 armements ngriers par an pour la priode 17131744  12,.5 armements par an dans la dcennie 17831793. Pendant cette dernire, la traite est vritablement de lactivit principale, voire presque exclusive, des armateurs rochealais: sur un total de 200 dparts depuis La Rochelle de navires rochelais, un peu plus de la moiti des tonnages se dirigent vers lAfrique (42% du total) ou vers les colonies antillaises ou les Mascareignes, le reste se rpartissant entre Terre-Neuve et Saint-Pierre-et-Miquelon (9.2%) La part des armements vers ltranger est insignifiante (0.2%), et celle hors des ports limitrophes (Aunis, Poitou, Saintonge ne dpasse pas le 5%. Les trois quarts de la trentaine de navires rochelais dpassant le 50 tx `}{`[`}{`le plus grand faisant 50827 tonneaux`}{`]`}{` sortise du port de La Rochelle en 1789 se consacrent au commerce transatlantique et ngrier.`}</p>\n    <p>{`Les donnes de la Balance du commerce confirment la centralit du commerce colonial et ngrier : en 1789, les exports vers les colonies reprsentent environ 85% du total (en valeur) des exports du bureau de La Rochelle, les 15% restants pour ltranger et les ports francs. `}</p>\n    <p>{`Alors que dans la plupart des ports ngriers franais, la part des armements ngriers est nettement infrieure  celle des armements en droiture vers les Antilles, cela nest pas le cas  La Rochelle, o les trois quarts des expditions de 1787 destines  approvisionner les Antilles en hommes ou en produits sont des ngriers. Comme  Honfleur, il y a donc clairement, en matire de trafics transatlantiques, une spcialisation ngrire de larmement rochelais. Par ailleurs, et contrairement aux autres ports franais (Marseille, Bordeaux, Nantes, Rouen/Le Havre) qui font le commerce avec les Amriques, La Rochelle a une prfrence quasi-exclusive pour Saint-Domingue o plusieurs grandes familles de la ville (Belin, Garesch, Poupet Rasteau) sont trs bien implantes.`}</p>\n    <p>{`En 1789, les 12 ngriers partis de La Rochelle sont tous rochelais. Rochefort arme pour sa part 3 autres ngriers.`}</p>\n    <p>{`Au total, donc une XXXaine de navires reviennent  La Rochelle depuis les colonies, soit en droiture, soit de retour dune expdition ngrire (Tarrade complter). `}</p>\n    <p>{`Les ngociants rochelais semblent stre taills une position forte dans le march du caf.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=https://drive.google.com/drive/folders/1vv6zi6QJVN203lZPTkRjLrgupEvzNW21&sa=D&source=editors&ust=1623357316848000&usg=AOvVaw2SAF6Mi6_yI3-RxHxNl8XY\"\n      }}>{`https://drive.google.com/drive/folders/1vv6zi6QJVN203lZPTkRjLrgupEvzNW21`}</a></p>\n    <p>{`Prendre top 10 produits valeur imports par direction La Rochelle et voir si La Rochelle a spcialit la dessus`}</p>\n    <p>{`ides pour suite`}</p>\n    <ul>\n      <li parentName=\"ul\">{`discuter investissement/ investisseurs et impact pour la rgion`}</li>\n      <li parentName=\"ul\">{`discours Chambre de commerce`}</li>\n    </ul>\n    <p>{`Lintrt du ngoce rochelais pour les questions lies au commerce colonial et ngrier apparat aussi par lindexation faite au marges des registres de la Chambre de commerce de La Rochelle. Dans la seule anne 1789, le commerce dAfrique est discut  une trentaine de reprises, les colonies reviennent  une 50 des reprises, le commerce de lInde  9;  titre de comparaison, le commerce avec ltranger est abord 11 fois, et la pche (avec notamment la question de la concurrence et de ladmission de la pche tats-unienne, 17 fois. Parmi les produits indexs au marge des registres de dlibrations, les comestibles sont mentionns 16 fois, leau-de-vie et le vin 6, les sucres et les raffineries 8, le charbon de terre 3. On mesure clairement, en dpit dun critre peu dgrossi, que le regard des membres de la Chambre de commerce est clairement riv sur les colonies et  la traite. (AdCharenteMaritime, 41 ETP 8: sujet = terme marqu en marge des dlibrations) `}{`[`}{`NB: il faudra affiner en regardant le contenu.) `}</p>\n    <p>{`Si la question de la traite est absente des cahiers de dolances de la rgion `}{`[`}{`prciser leur nombre et fournir un % approximatif de leur compltude par rapport  tous ceux rdigs?`}{`]`}{`, la dfense des intrts coloniaux apparat, significativement, uniquement dans le cahier de dolances du Tiers-tat de la ville de La Rochelle, dont les reprsentants envoys  Versailles demanderont la rvocation de larrt rendu au conseil du roi, le 30 aot 1784, concernant le commerce tranger dans les colonies, et le rtablissement des dispositions des lettres patentes de 1717 et 1727, auxquelles on est redevable des progrs quont faits la navigation franoise et la culture des isles franoises de lAmrique; par ailleurs, ils demanderont la suppression de lentrept et des droits actuels de consommation sur les sucres, cafs et lindigo venant des colonies, et quil soit substitu,  lentre de la totalit de ces denres dans tous les ports du roaume, un droit uniforme `}{`[`}{``}{`]`}{` : que le terrage des sucres tant dfavorable  la navigation, sil nest pas possible de linterdire entirement dans nos colonies, comme il lest dans les colonies anglaises, il soit au moins dfendu de `}{`[`}{`vrifier jonction des 2 extraits.`}{`]`}{` ltendre davantage par de nouveaux tablissemens, et que, les sucres bruts devant tre, ainsi que le coton, considrs comme matire premire, il soit mis un droit  la sortie du roaume des sucres bruts, assez sensible pour que la plus grande quantit de cette matire soit conserve en France et serve  relever et  soutenir les raffineries et  procurer du travail, puisque cest dans ces vues que le gouvernement dAngleterre interdit rigoureusement la sortie en nature des sucres bruts imports de ses colonies. Enfin Les dputs demanderont la rvocation de larrt du 14 avril 1785 , qui a cr une nouvelle compagnie des Indes `}{`[`}{`46 note dorigine,  regarder si on garde les citations`}{`]`}{`, et de celui pour ladmission des trangers dans les isles de France et de Bourbon. `}</p>\n    <p>{`Il faut observer que la participation rocheloise  la navigation au-del du cap de Bonne-Esprance est modeste: ltat des exportations de 1789, nindique que 38060 livres tournois exports vers lInde, et rien vers les Mascareignes (ANOM, COl F 2B 14, tableau 28`}{`]`}{`. Ces donnes sont toutefois incompatibles avec lenvoi du Henri IV  lle de France et  lle Bourbon, le 9 mai 1789 `}{`[`}{`vrifi chez Toussaint, p. 291: il y arrive en fvrier 1790 et ce nest pas un ngrier`}{`]`}{`. En 1787, ce sont trois armements vers les Mascareignes qui partent de La Rochelle: une certaine diversification des armements coloniaux apparat donc, ici comme  Bordeaux, dans les annes 1780, lorsque les profits du commerce antillais incitent  chercher des investissements plus rentables.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`vrifier si cahiers de dolances en parlent. `}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"22---le-commerce-de-leau-de-vie\"\n    }}>{`2.2 - le commerce de leau-de-vie`}</h2>\n    <Caller id=\"viz-principale-partie-2\" step={3} mdxType=\"Caller\" />\n    <p>{`total exportations eau-de-vie depuis la France et destinations pour mesurer part direction de la Rochelle (en prcisant le bureau des Fermes concerns)`}</p>\n    <p>{`Les congs de navigation ne sont malheureusement pas de beaucoup de secours pour identifier les flux deau-de-vie. En effet, le greffier du port de Tonnay-Charente ne prend pas le soin dannoter les cargaisons (il le fait 12 fois sur un total de 601 dparts): nous avons donc un aperu global de la navigation, sans pouvoir distinguer la nature des produits. `}{`[`}{`extrait de louvrage sur Tonnay-Charente, paru en 2012:`}{`]`}{` Si on se base sur les seules sorties de lanne 1787, 67 navires de tonnage moyen proche de 100 tx quittent alors Tonnay Charente : 42 se rendent  ltranger (en Angleterre pour les deux tiers, le reste vers les les anglo-normandes, Ostende et la Baltique) ; les 25 gros caboteurs restants se rendent  Dunkerque. On identifie ici la flotte europenne de leau-de-vie, qui reprsente 22 % du tonnage sortant en 1787. Un cran en dessous, on identifie un second groupe, compos dune poussire de petits caboteurs (tonnage moyen 35 tx) et qui reprsente tout de mme 30 % du tonnage sortant. Ces navires sont aligns sur une destination unique : la Rochelle. Ils sont pour partie occups  lapprovisionnement de la ville mais une part est certainement relie avec lactivit dentrept des eaux-de-vie que pratiquent les ngociants rochelais. Enfin, des units plus modestes (25 tx en moyenne) voluent au sein de la mer des Pertuis (depuis la Seudre sud jusquaux Sables dOlonne) : elles reprsentent 23 % du tonnage  la sortie du port de Tonnay-Charente. Il faut remarquer que 479 de 743 congs dlivrs en 1787 dans ce port concernent les navires avalant et attachs  des ports fluviaux. Venus porter les eaux-de-vie mais aussi les pierres de carrire et les produits manufacturs de larrire-pays  Tonnay-Charente, leurs matres quittent ce port soit  vide, soit avec une cargaison destine  Rochefort, La Rochelle ou bien aux ports de la mer des pertuis, Qui leur fournissent fret de retour pour leur navigation vers lamont du fleuve Charente. `}{`[`}{`Cette structure du commerce de Tonnay Charente - Rvlateur du commerce deau de vie - pourrait tre montre  laide des diagrammes de Louvain ?`}{`]`}</p>\n    <p>{`Vrifier avec toflit si donnes navigation 1789 sont conjoncturelles : la crise cralire qui empche de distiller les crales en Angleterre joue-t-elle la-dedans ? -`}{`>`}{` voir valeur export eau-de-vie de la direction de La Rochelle dans le temps), `}</p>\n    <p>{`En effet, les exportations dEaux-de-vie de 1789 semblent anormalement leves :`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"http://toflit18.medialab.sciences-po.fr/%5C#/exploration/indicators?lines=%5B%7B%22color%22%3A%22%23504342%22%2C%22productClassification%22%3A%22product%5C_revolutionempire%22%2C%22product%22%3A%5B%7B%22id%22%3A%22Eaux-de-vie%5C_et%5C_liqueurs%7Eproduct%5C_revolutionempire%22%2C%22name%22%3A%22Eaux-de-vie%20et%20liqueurs%22%7D%5D%2C%22region%22%3A%22La%5C_Rochelle%22%2C%22kind%22%3A%22export%22%2C%22sourceType%22%3A%22Best%20Guess%20customs%20region%20product%20x%20partner%22%7D%5D\"\n      }}>{`http://toflit18.medialab.sciences-po.fr/\\\\#/exploration/indicators?lines=%5B%7B%22color%22%3A%22%23504342%22%2C%22productClassification%22%3A%22product\\\\_revolutionempire%22%2C%22product%22%3A%5B%7B%22id%22%3A%22Eaux-de-vie\\\\_et\\\\_liqueurs%7Eproduct\\\\_revolutionempire%22%2C%22name%22%3A%22Eaux-de-vie%20et%20liqueurs%22%7D%5D%2C%22region%22%3A%22La\\\\_Rochelle%22%2C%22kind%22%3A%22export%22%2C%22sourceType%22%3A%22Best%20Guess%20customs%20region%20product%20x%20partner%22%7D%5D`}</a></p>\n    <p>{`Il faudrait avoir un graphique sur les exportations totales deau de vie sur la France entire et en particulier sur les gnralits de Bordeaux, Bayonne et Nantes. Il y aussi  partir du milieu des annes 20 une augmentation des exportations  partir des ports mridionaux, en particulier Ste. On pourrait avoir des coupes en 1750, une autre anne (?) et 1789. `}</p>\n    <p>{`Autre ide de visualisation: en 1789, regarder les origines des exports. Il est possible quune partie des exports de la rgion de Cognac passe par Bordeaux, lArmagnac a priori passe par Bayonne (selon Cullen 1998 qui est LA rfrence sur ce thme). Il y aussi des choses intressantes dans larticle de Thierry (2013) sur Tonneau-Charente et Rochefort. Il faut distinguer aussi entre eau de vie simple et eau de vie double dans TOFLIT18, la 2e catgorie correspond je pense  la meilleure qualit (elle est plus chre et on la trouve moins souvent), donc le Cognac (et Armagnac).`}</p>\n    <p>{`Par ailleurs, daprs Cullen le commerce dexportation des eaux de vie connat une croissance forte aprs la fin de guerre dindpendance amricaine, mais il na pas de stat trs dtaill pour 1789.`}</p>\n    <h2 {...{\n      \"id\": \"23---marennes-et-le-commerce-du-sel\"\n    }}>{`2.3 - Marennes et le commerce du sel`}</h2>\n    <Caller id=\"viz-principale-partie-2\" step={4} mdxType=\"Caller\" />\n    <p>{`Denre pondreuse de faible valeur, le sel voyage ds que cela est possible par voie maritime. `}</p>\n    <p>{`Tous les flux sont l : `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=http://toflit18.medialab.sciences-po.fr/%23/exploration/flows?sourceType%3DBest%2520Guess%2520customs%2520region%2520product%2520x%2520partner%26productClassification%3Dproduct_revolutionempire%26product%3D%255B%2522Sel%257Eproduct_revolutionempire%2522%255D%26page%3D0%26region%3D%2524all%2524%26kind%3Dtotal%26dateMin%3D1789%26dateMax%3D1789%26columns%3D%255B%2522product%2522%252C%2522region%2522%252C%2522year%2522%252C%2522partner%2522%252C%2522import%2522%252C%2522value%2522%252C%2522unitPrice%2522%252C%2522source%2522%252C%2522rawUnit%2522%255D%26orders%3D%255B%257B%2522key%2522%253A%2522unitPrice%2522%252C%2522order%2522%253A%2522DESC%2522%257D%255D&sa=D&source=editors&ust=1623357316854000&usg=AOvVaw3p5_ZVFqm_WutqZ3Ob4cRe\"\n      }}>{`http://toflit18.medialab.sciences-po.fr/`}{`#`}{`/exploration/flows?sourceType=Best%20Guess%20customs%20region%20product%20x%20partner`}{`&`}{`productClassification=product`}{`_`}{`revolutionempire`}{`&`}{`product=%5B%22Sel%7Eproduct`}{`_`}{`revolutionempire%22%5D`}{`&`}{`page=0`}{`&`}{`region=%24all%24`}{`&`}{`kind=total`}{`&`}{`dateMin=1789`}{`&`}{`dateMax=1789`}{`&`}{`columns=%5B%22product%22%2C%22region%22%2C%22year%22%2C%22partner%22%2C%22import%22%2C%22value%22%2C%22unitPrice%22%2C%22source%22%2C%22rawUnit%22%5D`}{`&`}{`orders=%5B%7B%22key%22%3A%22unitPrice%22%2C%22order%22%3A%22DESC%22%7D%5D`}</a></p>\n    <p>{`(mais pas par bureau).`}</p>\n    <p>{`Grosses variations de prix. Pas mal de prix absurdes. Dun peu moins de 36 livres  10 sous le quintal (!) `}</p>\n    <p>{`Exports par bureau (y compris vers la France): `}</p>\n    <p>{`Exports par bureau hors la France : `}</p>\n    <p>{`Marchs pour les exports :`}</p>\n    <p>{`Marchs pour les exports de Marennes:`}</p>\n    <p>{`Les ctes de la rgion tudie sont, avec celles du sud de la Bretagne, de trs grands producteurs de sel. Les marchs sont aussi bien nationaux - avec une demande soutenue notamment dans les ports de la Manche qui arment  la grande pche - que vers les pays de lEurope du Nord, qui sapprovisionnent galement au Portugal (Setubal). `}</p>\n    <p>{`Les donnes sur la navigation ne prcisent pas les quantits exportes, mais dans la mesure o les navires qui le transportent sortent souvent chargs entirement de sel, on peut de manire approximative additionner le total des tonnages des navires chargs de sel pour avoir un ordre de grandeur des trafics.  compter du rgne de Louis XIV, la lgislation relative aux gabelles fait dailleurs obligation au chargeur de naviguer avec une cargaison complte. Parmi les ports exportateurs, la primaut revient incontestablement  Marennes: en 1787: le tonnage additionn de navires sortis de ports franais avec du sel y est de plus du double qu Ars-en-R. Mme en prenant en compte la survaluation des tonnages de navires par lamiraut de Marennes que nous avons constate en comparant le tonnage dun mme navire relev en plusieurs ports, Marennes demeure le principal fournisseur de sel en France. La carte indique le tonnage total des navires sortis chargs du sel dans les ports de la France atlantique et leurs destinations.`}</p>\n    <p>{`Lexportation de sel est en outre une activit quasi exclusive : sur 1174 dparts en 1787, 990 ont charg du sel. En 1789, ce sont 1301 sur 1481. `}</p>\n    <p>{`Les destinations des navires chargs de sel partis de Marennes montrent que le march national est nettement plus important que les marchs trangers additionns. Marennes simpose donc comme un fournisseur privilgi pour les greniers  sel des gabelles, ainsi que le montre la gographie des destinations franaises qui sont toutes des ports de rupture de charge sur des estuaires : Honfleur, Nantes, Bordeaux et Libourne (sur la Dordogne), Bayonne. Cette situation est peut-tre  lorigine de la surestimation des tonnages constate dans ce seul port de Marennes, qui travaille vraisemblablement sous le regard serr des agents de la Ferme. Les bureaux des fermes associs aux autres grandes zones de production de sel - Le Croisic et Saint-Martin-de-R - montrent une plus grande internationalisation du trafic.`}</p>\n    <p>{`Pistes possibles:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`dvp texte sur marchs extrieurs avec valeur et quantits (Toflit) et faire calcul valeur/tx`}</li>\n      <li parentName=\"ul\">{`regarder si Chambre de commerce et cahiers de dolances parlent du commerce du sel`}</li>\n      <li parentName=\"ul\">{`Piste: vrifier qui, parmi les ports exportateurs du sel, ont de liens forts avec ltranger et mettre cela en relation, ventuellement, aux tirants deau - tonnage moyen des navires exportateurs par destination et par port de dpart. En clair: est-ce que Marennes exporte plus vers ltranger que vers le march national compar aux autres ports qui vendent du sel? ici on a besoin de lexpertise de Thierry`}</li>\n      <li parentName=\"ul\">{`Il y a un ouvrage rcent publi aux PUR (et lisible sur openedition) avec 2 articles sur le sujet. Je (Loc) nai pas eu le temps de les lire.`}</li>\n    </ul>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  {\n    id: \"introduction\",\n    level: 2,\n    title: \"Introduction\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"21---la-rochelle-et-le-commerce-triangulaire\",\n    level: 2,\n    title: \"2.1 - La Rochelle et le commerce triangulaire\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"22---le-commerce-de-leau-de-vie\",\n    level: 2,\n    title: \"2.2 - le commerce de leau-de-vie\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"23---marennes-et-le-commerce-du-sel\",\n    level: 2,\n    title: \"2.3 - Marennes et le commerce du sel\",\n    children: [\n        \n      ]\n  }\n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.015,\"time\":900,\"words\":3}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`Part 2 TODO`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"7 min read\",\"minutes\":6.62,\"time\":397200,\"words\":1324}\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport Caller from '../../components/Caller'\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"partie-3---la-rochelle-port-dominant-mais-pas-structurant\"\n    }}>{`Partie 3 - La Rochelle, port dominant mais pas structurant`}</h1>\n    <Caller id=\"viz-principale-partie-3\" mdxType=\"Caller\" />\n    <p>{`Jusqu la perte des colonies nord-amricaines, le port de La Rochelle a cultiv une certaine spcificit gographique. Quoiquil pratiquait, comme la presque totalit des ports atlantiques, le commerce antillais et ngrier, une part importante et qui a progressivement augment jusqu reprsenter plus de la moiti de ses armements pour les colonies dans les annes 1750 tait constitu par le commerce nord-amricain - Canada, Louisiane et pcheries de Terre-Neuve. Cette spcificit gographique a galement influ sur sa spcialisation par produits. Le commerce des fourrures est ainsi une spcialit rochelaise jusquau dbut des annes 1760. Les fourrures taient importes non seulement du Canada, mais aussi de la Louisiane, porte de sortie des peaux de lOhio. Ces fourrures qui taient pour partie r-exportes en France et en Europe (principalement en Allemagne et en Suisse). Une part importante, les peaux de castors en particulier, ntaient pas r-exportes, mais alimentaient lindustrie de chamoiserie niortaise et dautres localits franaises. En retour, les Rochelais approvisionnaient les Canadiens et la Louisiane en vivres, matires premires et en produits manufacturs. LAmrique du Nord tait donc un dbouch important et facile pour les crales de la rgion, les toffes locales de basse qualit et, dans une moindre mesure, le sel ncessaire aux pcheries de Terre-Neuve. Ainsi, ce commerce quoique modeste avant les annes 1740 fournissait des volumes importants demploi dans les trois secteurs de lconomie  la rgion. `}</p>\n    <p>{`Avant 1748, le commerce des Antilles en droiture et la traite ngrire continuaient nanmoins  dominer le commerce de la Direction de la Rochelle en valeur, tant donn le dynamisme limit de la demande manant de lAmrique du Nord. Mais, ds la fin de la guerre de Succession dAutriche, souvre une priode de croissance exceptionnelle pour le commerce avec lAmrique du Nord. Sur la priode 17481758, La Rochelle reoit annuellement plus de 1 million 300 mille livres de peaux dAmrique du Nord, soit presque autant que de sucre des Antilles (1 million 450 mille livres). Le nombre darmements  destination du Canada est multipli par deux alors que ceux pour la Louisiane augmente de moiti. Par rapport aux annes prcdant la guerre, le trafic li au commerce triangulaire baisse en moyenne dun quart pour les Antilles et de plus de moiti pour la traite, destinations pour lesquelles les envois rochelais sont directement en concurrence avec des ports comme Bordeaux, Nantes, Rouen et mme Dunkerque et Marseille. A linverse, les rochelais ont un monopole de fait pour la Louisiane qui nintresse gure les ports plus importants et seul Bordeaux les concurrence pour lapprovisionnement du Canada. Par ailleurs, ces deux destinations offraient des possibilits complmentaires. Dun ct, le commerce  destination du Canada pouvait se transformer en commerce triangulaire invers - La Rochelle-Canada-Antilles - lorsque les capitaines rochelais trouvaient au Canada de quoi ravitailler les les  sucre en morue sale et, plus rarement, en crales. La Louisiane permettait galement de raliser des oprations de contrebande avec les colons espagnols, offrant la possibilit de riches retours sous forme de piastres (Augeron : 2004; Mathieu : 1986).`}</p>\n    <p>{`Ce commerce de niche, limit en volume, mais crateur demplois locaux et, au milieu du sicle, facteur dun dynamisme certain va scrouler avec la perte des colonies franaises nord-amricaines la fin de la Guerre de Sept ans. Cette perte va dstructurer durablement le commerce rochelais qui va perdre ses marchs privilgis et sa position dominante au sein du rseau portuaire rgional. En 1789, le commerce du port de la Rochelle est quasi-exclusivement colonial - prs de 90% de ses exportations en valeur sont destins  la Traite africaine et aux Antilles.`}</p>\n    <p>{`Cette volution est la consquence de plusieurs contraintes qui se renforcent: la baisse de la capitalisation des ngociants rochelais, consquence directe de la vague de faillites qui secouent le milieu  la fin de la Guerre de Sept Ans; la fermeture des marchs nord-amricains subventionns qui auraient permis un rebond rapide; la forte concurrence des autres ports sur la destination antillaise. Il ne restait donc que la traite ngrire. Pour lanimer, les ngociants rochelais se procurent les marchandises ncessaires  ce commerce dans toute la France et lEurope et ne se fournissent que trs peu dans larrire-pays rochelais. Le port nest donc plus rellement connect  larrire-pays et ce, dautant plus, que la faiblesse capitalistique de la place loigne les maisons de commerce spcialises dans le Cognac; ainsi Martell qui rapatrie leurs bureaux principaux  Tonnay-Charente ou  Paris. Ce dclin est visible sur le graphique suivant o linfrastructure de la province de lAunis apparat originale par le faible poid relatif de son port principal - La Rochelle - incapable de freiner le dveloppement des ports quil maintenait dans sa dpendance avant 1763: Tonnay-Charente, Marennes, Rochefort et Ars-en r. Dans la priode pr-rvolutionnaire (17871789), les flux de navire comme de marchandises tmoignent de la recomposition de lconomie de la faade maritime. Dsormais, la valeur des flux de marchandises au dpart de Tonnay-Charente et  larrive de Rochefort qui entretient directement les productions locales se rapprochent de ceux de La Rochelle.`}</p>\n    <p>{`Il y a aussi lautorisation accorde en 1775  Rochefort de faire le commerce colonial, qui signale la perte de pouvoir de La Rochelle.`}</p>\n    <p>{`Argument du paragraphe final: `}</p>\n    <p>{`Spcialisations des ports, mais sans complmentarit: Marennes (Sel), La Rochelle (colonial), Rochefort (commerce dimportation), Tonnay-Charente (eau de vie dont eau de vie double) et ports de lIle de R (sel + eau-de-vie).`}</p>\n    <p>{`Tonnage au dpart des ports des diffrentes provinces en 1787, agrg suivant que la destination est au sein de la mme province (local  droite) ou en dehors (externe  gauche)`}</p>\n    <p>{`Valeur des exports du bureau de La Rochelle  destination des colonies:`}</p>\n    <p>{`1 865 652 livres tournois`}</p>\n    <p>{`Valeur des exports du bureau de La Rochelle  destination du reste du monde (y compris local): 240 500`}</p>\n    <p>{`Les exportations du bureau de La Rochelle pour les colonies et les traite reprsente 88,58% du total des exportations`}</p>\n    <p>{`Pour montrer que La Rochelle ne structure pas rgion, faire voir faible impact sur rgion:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`ce qui rentre des colonies en ressort (visu reexport/pas reexport)`}</li>\n      <li parentName=\"ul\">{`tudier et visualiser origines des produits exports pour traite et commerce colonial`}</li>\n    </ul>\n    <p>{`Guillaume D.: Remarque : Jai fait pour 1789. Plus calmement :`}</p>\n    <p>{`!`}{`[`}{`]`}{`(cid:`}<a parentName=\"p\" {...{\n        \"href\": \"mailto:4B3595B0-62E8-43D9-A20A-482ECAB697D4@mac.com\"\n      }}>{`4B3595B062E843D9-A20A-482ECAB697D4@mac.com`}</a>{` \"PastedImage.png\")`}</p>\n    <p>{` Monde  cest hors colonies (probablement les rexports coloniales)`}</p>\n    <p>{`Donc hors r-exports, je pense que les chiffres de Loc sont bons.`}</p>\n    <p>{`use \"/Users/guillaumedaudin/Documents/Recherche/Commerce International Franais XVIIIe.xls/Balance du commerce/Retranscriptions`}{`_`}{`Commerce`}{`_`}{`France/Donnes Stata/bdd courante.dta\", clear`}</p>\n    <p>{`keep if year==1789`}</p>\n    <p>{`keep if customs`}{`_`}{`office==\"La Rochelle\"`}</p>\n    <p>{`tab partner`}{`_`}{`simplification if partner`}{`_`}{`grouping==\"Monde `}</p>\n    <p>{`collapse (sum) value, by (partner`}{`_`}{`grouping)`}</p>\n    <p>{`egen total = total(value)`}</p>\n    <p>{`gen pcrt = value/total`}</p>\n    <p>{`br`}</p>\n    <hr></hr>\n    <p>{` Graphique extrait de slavevoyages: nb expditions ngrires parties de La Rochelle + Rochefort: La Rochelle ne retrouve pas les niveaux des annes 1740`}</p>\n    <p>{`et pour comparaison, voici Bordeaux`}</p>\n    <p>{`Aux importations, en revanche, le lien principal qui dmarque la rgion tudie des autres est celui avec les colonies.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=https://drive.google.com/file/d/1Kl74rSkLlZWD-4alhbpl43ODHP8_A0Q2/view?usp%3Dsharing&sa=D&source=editors&ust=1623357316862000&usg=AOvVaw3qm8P2SOW0VNWkzhb45Vv-\"\n      }}>{`https://drive.google.com/file/d/1Kl74rSkLlZWD-4alhbpl43ODHP8`}{`_`}{`A0Q2/view?usp=sharing`}</a></p>\n    <hr></hr>\n    <p>{`Lien vers limage: `}<a parentName=\"p\" {...{\n        \"href\": \"https://drive.google.com/drive/folders/174lIWV3MSVtzXPGUFFUr0e8VSv3ekZ3D\"\n      }}>{`https://drive.google.com/drive/folders/174lIWV3MSVtzXPGUFFUr0e8VSv3ekZ3D`}</a></p>\n    <p>{`Code: `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=https://github.com/medialab/portic-datasprint-2021/blob/main/productions/equipe_1/origines/origines.ipynb&sa=D&source=editors&ust=1623357316863000&usg=AOvVaw0cWHa36haDDhjKKePnZKOW\"\n      }}>{`https://github.com/medialab/portic-datasprint-2021/blob/main/productions/equipe`}{`_`}{`1/origines/origines.ipynb`}</a></p>\n    <hr></hr>\n    <p>{`Si pour une majeure partie des produits dorigine APAS sont exports par la direction de La Rochelle des exceptions existent. La premire (en valeur) direction exportatrice des produits APAS aprs La Rochelle est Bordeaux. `}</p>\n    <p>{`lien vers limage: `}<a parentName=\"p\" {...{\n        \"href\": \"https://drive.google.com/drive/folders/174lIWV3MSVtzXPGUFFUr0e8VSv3ekZ3D\"\n      }}>{`https://drive.google.com/drive/folders/174lIWV3MSVtzXPGUFFUr0e8VSv3ekZ3D`}</a></p>\n    <p>{`La direction des fermes de Bordeaux exporte en 1789, 12% des valeurs des produits dorigine APAS. Autrement dit, la direction de La Rochelle garde la main sur 80% des valeurs dexportation des produits de son arrire-pays. Le papier, produit en Angoumois, est export par Bordeaux vers des marchs coloniaux et europen: lexplication est probablement lie au fait que le papier voyage par voie de terre, et que le port exportateur le plus proche est Bordeaux.`}</p>\n    <p>{`A propos des exports de Papier en 1789 (a donne  voir les connections de Bordeaux et Marseille):`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://www.google.com/url?q=http://toflit18.medialab.sciences-po.fr/%23/exploration/network?classification%3Dpartner_grouping%26sourceType%3DBest%2520Guess%2520customs%2520region%2520product%2520x%2520partner%26productClassification%3Dproduct_revolutionempire%26product%3D%255B%2522Papier%257Eproduct_revolutionempire%2522%255D%26kind%3Dexport%26dateMin%3D1789%26dateMax%3D1789%26nodeSize%3Dflows%26edgeSize%3Dflows%26labelThreshold%3D5%26labelSizeRatio%3D2&sa=D&source=editors&ust=1623357316865000&usg=AOvVaw0_jnrkdza_1LhC1sxE8AmK\"\n      }}>{`http://toflit18.medialab.sciences-po.fr/`}{`#`}{`/exploration/network?classification=partner`}{`_`}{`grouping`}{`&`}{`sourceType=Best%20Guess%20customs%20region%20product%20x%20partner`}{`&`}{`productClassification=product`}{`_`}{`revolutionempire`}{`&`}{`product=%5B%22Papier%7Eproduct`}{`_`}{`revolutionempire%22%5D`}{`&`}{`kind=export`}{`&`}{`dateMin=1789`}{`&`}{`dateMax=1789`}{`&`}{`nodeSize=flows`}{`&`}{`edgeSize=flows`}{`&`}{`labelThreshold=5`}{`&`}{`labelSizeRatio=2 `}</a></p>\n    <p>{`sous/ surevaluation des tonnages`}</p>\n    <p>{`avec script de Christine en R`}</p>\n    <p>{`Publi par `}<a href=\"//docs.google.com/\" rel=\"noopener\" target=\"_blank\" title=\"Learn more about Google Drive\">{`Google Drive`}</a>{``}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.google.com/abuse?id=AKkXjoz5ZgzryKHhjOSbRyGBxSZQAs0q8tBTfc8Fc8rsV-AAPzb_9yikidt2cdxnQBDd50TOViiHnbs-nbGDRBk:0\"\n      }}>{`Signaler un cas dutilisation abusive `}</a></p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.015,\"time\":900,\"words\":3}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`Part 3 TODO`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.02,\"time\":1200,\"words\":4}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{` propos - TODO`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.01,\"time\":600,\"words\":2}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`About TODO`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"24 min read\",\"minutes\":23.895,\"time\":1433700,\"words\":4779}\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport Caller from '../../components/Caller'\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <p>{`Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec sit amet lectus eget sapien tempus accumsan. Curabitur ultricies quis enim eu sodales. Praesent a arcu in mauris vehicula tempor non ut lacus. Suspendisse ultricies metus tellus, nec placerat purus bibendum sit amet. In efficitur risus erat, vitae mollis orci pulvinar in. Proin aliquam tellus tortor, sed finibus erat bibendum a. Donec at nisi eget nibh condimentum sollicitudin. Suspendisse sit amet velit sit amet ex interdum varius aliquam nec ex. Nulla dignissim cursus augue vitae commodo. Maecenas in magna justo.`}</p>\n    <p>{`Integer sollicitudin sodales lectus sed tempus. Sed vitae semper orci. Praesent tempor iaculis dui, in varius turpis aliquam nec. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Vestibulum porta sem vitae dictum gravida. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam id elit fermentum, dictum tortor ac, interdum justo. Suspendisse potenti. Etiam urna diam, eleifend ut malesuada eget, volutpat quis leo. Nulla eget nulla porta, consequat ex eget, porttitor felis. Curabitur porta vehicula turpis et lacinia. Vivamus commodo laoreet risus, eu suscipit libero rutrum vitae. Morbi porta, magna ac gravida eleifend, risus arcu vestibulum mauris, id interdum ante risus nec tellus. Donec vitae lacinia risus. Sed condimentum accumsan enim, sit amet consequat arcu volutpat ut.`}</p>\n    <p>{`Ut nec fringilla odio, eget porta nibh. Pellentesque nec ultricies ipsum. Phasellus eu tempus sapien. Praesent sit amet urna dolor. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Pellentesque sollicitudin est ut pretium vestibulum. Aenean ut arcu non ligula blandit bibendum porta ut mi. Quisque elementum mattis nibh eget vulputate. Maecenas facilisis vehicula nibh vitae tincidunt.`}</p>\n    <p>{`Praesent id vulputate lorem. Curabitur laoreet venenatis libero at varius. Quisque semper feugiat lorem nec consectetur. Nam risus lorem, gravida sed lacinia eu, placerat et orci. Quisque vitae dictum justo, vitae dapibus libero. Nulla tempor, erat nec aliquam sollicitudin, mi erat efficitur elit, eu pretium enim ligula ut nunc. Mauris tempus erat in magna mollis iaculis. Praesent at maximus enim, a rutrum ipsum. Nunc quis hendrerit ex. Ut laoreet volutpat lobortis. Aenean malesuada semper enim ut imperdiet. Quisque sagittis eros vehicula, iaculis elit ac, viverra sem. Sed ac pretium urna. Suspendisse lorem magna, rutrum a diam nec, elementum tempus nulla.`}</p>\n    <p>{`Integer feugiat, ligula at eleifend tincidunt, ipsum elit vulputate tortor, sed interdum sem orci non ante. Nulla ac aliquam ipsum. Vivamus euismod tortor dui, pulvinar mattis velit pretium quis. Vivamus ullamcorper nisi vel lectus dictum, sed porttitor neque porttitor. Vivamus commodo massa id nibh ultrices euismod ac sit amet velit. In id arcu aliquet, condimentum elit eu, euismod justo. Quisque vestibulum nibh id vestibulum dapibus. Phasellus congue vel nibh eu aliquet. In lectus magna, imperdiet in massa ut, ornare egestas leo. Proin turpis sem, facilisis ac pretium et, dapibus vitae arcu.`}</p>\n    <p>{`Integer tristique maximus nunc. Sed iaculis euismod quam, vitae congue est vestibulum nec. Curabitur semper dolor libero, eget euismod est luctus id. Integer eleifend purus at convallis pretium. Mauris molestie enim vel ullamcorper cursus. Phasellus nec ornare massa, quis gravida augue. Sed semper nulla ac tellus eleifend elementum. Mauris metus tellus, posuere eu tortor in, mollis eleifend arcu. Phasellus quis elementum risus, ac facilisis dui. Aliquam dapibus ipsum mattis ligula luctus, id venenatis nunc viverra. Quisque sit amet interdum est. Praesent at leo sit amet erat pulvinar tincidunt. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae;`}</p>\n    <p>{`Duis eget mauris dui. Donec lacinia, risus in efficitur accumsan, ipsum neque consectetur nulla, pretium pharetra mauris mauris nec magna. Sed risus nisi, lobortis at lectus non, sollicitudin sodales ligula. Pellentesque a elit purus. Sed et tristique ligula, iaculis elementum nisl. Nulla facilisi. Maecenas erat ligula, finibus id felis sit amet, bibendum efficitur magna. Praesent bibendum, mauris id cursus auctor, nibh enim tristique ante, ac iaculis ex urna non massa. Donec ultrices non nisl et euismod. Quisque eget urna dolor. Nulla rhoncus tincidunt consequat. Aenean sit amet risus tempus, pellentesque dui sed, vestibulum nulla. Sed libero tellus, posuere porttitor mi quis, porta facilisis enim.`}</p>\n    <Caller id=\"test\" mdxType=\"Caller\" />\n    <p>{`Sed eget est id elit mattis luctus. Morbi fermentum, turpis vitae gravida luctus, mi diam tempor ex, sed imperdiet nisi ligula ut ipsum. Proin tempus, nulla a pretium volutpat, ipsum velit pulvinar magna, cursus euismod mi augue quis augue. Cras ultricies vel tortor nec iaculis. Pellentesque placerat, orci vel consectetur varius, orci est ultrices sapien, in ullamcorper massa augue id dolor. Sed vel tellus a nisl sollicitudin rhoncus ac sagittis odio. Duis molestie tempus turpis. Praesent consequat sed ligula et ullamcorper. Aliquam erat volutpat. Pellentesque quis urna quis sem fringilla tempus. Proin nec turpis eget turpis rhoncus lacinia ut et magna. Suspendisse vehicula id elit vitae luctus. Maecenas non posuere lacus. In fermentum molestie posuere. Sed tempor, ipsum vitae euismod aliquam, elit enim semper velit, iaculis ullamcorper nisi ligula vitae metus.`}</p>\n    <p>{`Quisque rutrum mattis mauris in molestie. Nullam tincidunt mauris vitae mattis bibendum. Nulla a nunc tortor. Duis non varius purus. Aenean lobortis feugiat dapibus. Proin posuere ullamcorper risus vel dictum. Nullam semper est a elit luctus eleifend. Aliquam hendrerit feugiat turpis eu imperdiet. Vestibulum et dictum enim. Aliquam eget venenatis nisi, sit amet mollis ex.`}</p>\n    <p>{`Sed leo metus, consectetur non turpis a, semper consequat nunc. Proin nunc eros, tempus id purus in, fringilla tristique dui. Mauris non mattis tellus, et finibus orci. Suspendisse in metus id nisl egestas vulputate. Nulla euismod pellentesque tempor. Duis maximus lectus sed arcu tempus, in efficitur erat sagittis. Aenean auctor dolor odio, vitae condimentum enim pretium nec. Sed sit amet mattis turpis. Cras aliquet sem quis consectetur vehicula. Nam tincidunt dapibus felis, sit amet vehicula lorem bibendum quis. Vivamus a erat ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. `}</p>\n    <Caller id=\"test\" testParam={{\n      coucou: 'coucou'\n    }} mdxType=\"Caller\" />\n    <p>{`Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec sit amet lectus eget sapien tempus accumsan. Curabitur ultricies quis enim eu sodales. Praesent a arcu in mauris vehicula tempor non ut lacus. Suspendisse ultricies metus tellus, nec placerat purus bibendum sit amet. In efficitur risus erat, vitae mollis orci pulvinar in. Proin aliquam tellus tortor, sed finibus erat bibendum a. Donec at nisi eget nibh condimentum sollicitudin. Suspendisse sit amet velit sit amet ex interdum varius aliquam nec ex. Nulla dignissim cursus augue vitae commodo. Maecenas in magna justo.`}</p>\n    <p>{`Integer sollicitudin sodales lectus sed tempus. Sed vitae semper orci. Praesent tempor iaculis dui, in varius turpis aliquam nec. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Vestibulum porta sem vitae dictum gravida. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam id elit fermentum, dictum tortor ac, interdum justo. Suspendisse potenti. Etiam urna diam, eleifend ut malesuada eget, volutpat quis leo. Nulla eget nulla porta, consequat ex eget, porttitor felis. Curabitur porta vehicula turpis et lacinia. Vivamus commodo laoreet risus, eu suscipit libero rutrum vitae. Morbi porta, magna ac gravida eleifend, risus arcu vestibulum mauris, id interdum ante risus nec tellus. Donec vitae lacinia risus. Sed condimentum accumsan enim, sit amet consequat arcu volutpat ut.`}</p>\n    <p>{`Ut nec fringilla odio, eget porta nibh. Pellentesque nec ultricies ipsum. Phasellus eu tempus sapien. Praesent sit amet urna dolor. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Pellentesque sollicitudin est ut pretium vestibulum. Aenean ut arcu non ligula blandit bibendum porta ut mi. Quisque elementum mattis nibh eget vulputate. Maecenas facilisis vehicula nibh vitae tincidunt.`}</p>\n    <Caller mdxType=\"Caller\" />\n    <p>{`Praesent id vulputate lorem. Curabitur laoreet venenatis libero at varius. Quisque semper feugiat lorem nec consectetur. Nam risus lorem, gravida sed lacinia eu, placerat et orci. Quisque vitae dictum justo, vitae dapibus libero. Nulla tempor, erat nec aliquam sollicitudin, mi erat efficitur elit, eu pretium enim ligula ut nunc. Mauris tempus erat in magna mollis iaculis. Praesent at maximus enim, a rutrum ipsum. Nunc quis hendrerit ex. Ut laoreet volutpat lobortis. Aenean malesuada semper enim ut imperdiet. Quisque sagittis eros vehicula, iaculis elit ac, viverra sem. Sed ac pretium urna. Suspendisse lorem magna, rutrum a diam nec, elementum tempus nulla.`}</p>\n    <p>{`Integer feugiat, ligula at eleifend tincidunt, ipsum elit vulputate tortor, sed interdum sem orci non ante. Nulla ac aliquam ipsum. Vivamus euismod tortor dui, pulvinar mattis velit pretium quis. Vivamus ullamcorper nisi vel lectus dictum, sed porttitor neque porttitor. Vivamus commodo massa id nibh ultrices euismod ac sit amet velit. In id arcu aliquet, condimentum elit eu, euismod justo. Quisque vestibulum nibh id vestibulum dapibus. Phasellus congue vel nibh eu aliquet. In lectus magna, imperdiet in massa ut, ornare egestas leo. Proin turpis sem, facilisis ac pretium et, dapibus vitae arcu.`}</p>\n    <p>{`Integer tristique maximus nunc. Sed iaculis euismod quam, vitae congue est vestibulum nec. Curabitur semper dolor libero, eget euismod est luctus id. Integer eleifend purus at convallis pretium. Mauris molestie enim vel ullamcorper cursus. Phasellus nec ornare massa, quis gravida augue. Sed semper nulla ac tellus eleifend elementum. Mauris metus tellus, posuere eu tortor in, mollis eleifend arcu. Phasellus quis elementum risus, ac facilisis dui. Aliquam dapibus ipsum mattis ligula luctus, id venenatis nunc viverra. Quisque sit amet interdum est. Praesent at leo sit amet erat pulvinar tincidunt. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae;`}</p>\n    <p>{`Duis eget mauris dui. Donec lacinia, risus in efficitur accumsan, ipsum neque consectetur nulla, pretium pharetra mauris mauris nec magna. Sed risus nisi, lobortis at lectus non, sollicitudin sodales ligula. Pellentesque a elit purus. Sed et tristique ligula, iaculis elementum nisl. Nulla facilisi. Maecenas erat ligula, finibus id felis sit amet, bibendum efficitur magna. Praesent bibendum, mauris id cursus auctor, nibh enim tristique ante, ac iaculis ex urna non massa. Donec ultrices non nisl et euismod. Quisque eget urna dolor. Nulla rhoncus tincidunt consequat. Aenean sit amet risus tempus, pellentesque dui sed, vestibulum nulla. Sed libero tellus, posuere porttitor mi quis, porta facilisis enim.`}</p>\n    <p>{`Sed eget est id elit mattis luctus. Morbi fermentum, turpis vitae gravida luctus, mi diam tempor ex, sed imperdiet nisi ligula ut ipsum. Proin tempus, nulla a pretium volutpat, ipsum velit pulvinar magna, cursus euismod mi augue quis augue. Cras ultricies vel tortor nec iaculis. Pellentesque placerat, orci vel consectetur varius, orci est ultrices sapien, in ullamcorper massa augue id dolor. Sed vel tellus a nisl sollicitudin rhoncus ac sagittis odio. Duis molestie tempus turpis. Praesent consequat sed ligula et ullamcorper. Aliquam erat volutpat. Pellentesque quis urna quis sem fringilla tempus. Proin nec turpis eget turpis rhoncus lacinia ut et magna. Suspendisse vehicula id elit vitae luctus. Maecenas non posuere lacus. In fermentum molestie posuere. Sed tempor, ipsum vitae euismod aliquam, elit enim semper velit, iaculis ullamcorper nisi ligula vitae metus.`}</p>\n    <p>{`Quisque rutrum mattis mauris in molestie. Nullam tincidunt mauris vitae mattis bibendum. Nulla a nunc tortor. Duis non varius purus. Aenean lobortis feugiat dapibus. Proin posuere ullamcorper risus vel dictum. Nullam semper est a elit luctus eleifend. Aliquam hendrerit feugiat turpis eu imperdiet. Vestibulum et dictum enim. Aliquam eget venenatis nisi, sit amet mollis ex.`}</p>\n    <p>{`Sed leo metus, consectetur non turpis a, semper consequat nunc. Proin nunc eros, tempus id purus in, fringilla tristique dui. Mauris non mattis tellus, et finibus orci. Suspendisse in metus id nisl egestas vulputate. Nulla euismod pellentesque tempor. Duis maximus lectus sed arcu tempus, in efficitur erat sagittis. Aenean auctor dolor odio, vitae condimentum enim pretium nec. Sed sit amet mattis turpis. Cras aliquet sem quis consectetur vehicula. Nam tincidunt dapibus felis, sit amet vehicula lorem bibendum quis. Vivamus a erat ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. `}</p>\n    <p>{`Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec sit amet lectus eget sapien tempus accumsan. Curabitur ultricies quis enim eu sodales. Praesent a arcu in mauris vehicula tempor non ut lacus. Suspendisse ultricies metus tellus, nec placerat purus bibendum sit amet. In efficitur risus erat, vitae mollis orci pulvinar in. Proin aliquam tellus tortor, sed finibus erat bibendum a. Donec at nisi eget nibh condimentum sollicitudin. Suspendisse sit amet velit sit amet ex interdum varius aliquam nec ex. Nulla dignissim cursus augue vitae commodo. Maecenas in magna justo.`}</p>\n    <p>{`Integer sollicitudin sodales lectus sed tempus. Sed vitae semper orci. Praesent tempor iaculis dui, in varius turpis aliquam nec. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Vestibulum porta sem vitae dictum gravida. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam id elit fermentum, dictum tortor ac, interdum justo. Suspendisse potenti. Etiam urna diam, eleifend ut malesuada eget, volutpat quis leo. Nulla eget nulla porta, consequat ex eget, porttitor felis. Curabitur porta vehicula turpis et lacinia. Vivamus commodo laoreet risus, eu suscipit libero rutrum vitae. Morbi porta, magna ac gravida eleifend, risus arcu vestibulum mauris, id interdum ante risus nec tellus. Donec vitae lacinia risus. Sed condimentum accumsan enim, sit amet consequat arcu volutpat ut.`}</p>\n    <p>{`Ut nec fringilla odio, eget porta nibh. Pellentesque nec ultricies ipsum. Phasellus eu tempus sapien. Praesent sit amet urna dolor. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Pellentesque sollicitudin est ut pretium vestibulum. Aenean ut arcu non ligula blandit bibendum porta ut mi. Quisque elementum mattis nibh eget vulputate. Maecenas facilisis vehicula nibh vitae tincidunt.`}</p>\n    <p>{`Praesent id vulputate lorem. Curabitur laoreet venenatis libero at varius. Quisque semper feugiat lorem nec consectetur. Nam risus lorem, gravida sed lacinia eu, placerat et orci. Quisque vitae dictum justo, vitae dapibus libero. Nulla tempor, erat nec aliquam sollicitudin, mi erat efficitur elit, eu pretium enim ligula ut nunc. Mauris tempus erat in magna mollis iaculis. Praesent at maximus enim, a rutrum ipsum. Nunc quis hendrerit ex. Ut laoreet volutpat lobortis. Aenean malesuada semper enim ut imperdiet. Quisque sagittis eros vehicula, iaculis elit ac, viverra sem. Sed ac pretium urna. Suspendisse lorem magna, rutrum a diam nec, elementum tempus nulla.`}</p>\n    <p>{`Integer feugiat, ligula at eleifend tincidunt, ipsum elit vulputate tortor, sed interdum sem orci non ante. Nulla ac aliquam ipsum. Vivamus euismod tortor dui, pulvinar mattis velit pretium quis. Vivamus ullamcorper nisi vel lectus dictum, sed porttitor neque porttitor. Vivamus commodo massa id nibh ultrices euismod ac sit amet velit. In id arcu aliquet, condimentum elit eu, euismod justo. Quisque vestibulum nibh id vestibulum dapibus. Phasellus congue vel nibh eu aliquet. In lectus magna, imperdiet in massa ut, ornare egestas leo. Proin turpis sem, facilisis ac pretium et, dapibus vitae arcu.`}</p>\n    <p>{`Integer tristique maximus nunc. Sed iaculis euismod quam, vitae congue est vestibulum nec. Curabitur semper dolor libero, eget euismod est luctus id. Integer eleifend purus at convallis pretium. Mauris molestie enim vel ullamcorper cursus. Phasellus nec ornare massa, quis gravida augue. Sed semper nulla ac tellus eleifend elementum. Mauris metus tellus, posuere eu tortor in, mollis eleifend arcu. Phasellus quis elementum risus, ac facilisis dui. Aliquam dapibus ipsum mattis ligula luctus, id venenatis nunc viverra. Quisque sit amet interdum est. Praesent at leo sit amet erat pulvinar tincidunt. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae;`}</p>\n    <p>{`Duis eget mauris dui. Donec lacinia, risus in efficitur accumsan, ipsum neque consectetur nulla, pretium pharetra mauris mauris nec magna. Sed risus nisi, lobortis at lectus non, sollicitudin sodales ligula. Pellentesque a elit purus. Sed et tristique ligula, iaculis elementum nisl. Nulla facilisi. Maecenas erat ligula, finibus id felis sit amet, bibendum efficitur magna. Praesent bibendum, mauris id cursus auctor, nibh enim tristique ante, ac iaculis ex urna non massa. Donec ultrices non nisl et euismod. Quisque eget urna dolor. Nulla rhoncus tincidunt consequat. Aenean sit amet risus tempus, pellentesque dui sed, vestibulum nulla. Sed libero tellus, posuere porttitor mi quis, porta facilisis enim.`}</p>\n    <p>{`Sed eget est id elit mattis luctus. Morbi fermentum, turpis vitae gravida luctus, mi diam tempor ex, sed imperdiet nisi ligula ut ipsum. Proin tempus, nulla a pretium volutpat, ipsum velit pulvinar magna, cursus euismod mi augue quis augue. Cras ultricies vel tortor nec iaculis. Pellentesque placerat, orci vel consectetur varius, orci est ultrices sapien, in ullamcorper massa augue id dolor. Sed vel tellus a nisl sollicitudin rhoncus ac sagittis odio. Duis molestie tempus turpis. Praesent consequat sed ligula et ullamcorper. Aliquam erat volutpat. Pellentesque quis urna quis sem fringilla tempus. Proin nec turpis eget turpis rhoncus lacinia ut et magna. Suspendisse vehicula id elit vitae luctus. Maecenas non posuere lacus. In fermentum molestie posuere. Sed tempor, ipsum vitae euismod aliquam, elit enim semper velit, iaculis ullamcorper nisi ligula vitae metus.`}</p>\n    <p>{`Quisque rutrum mattis mauris in molestie. Nullam tincidunt mauris vitae mattis bibendum. Nulla a nunc tortor. Duis non varius purus. Aenean lobortis feugiat dapibus. Proin posuere ullamcorper risus vel dictum. Nullam semper est a elit luctus eleifend. Aliquam hendrerit feugiat turpis eu imperdiet. Vestibulum et dictum enim. Aliquam eget venenatis nisi, sit amet mollis ex.`}</p>\n    <p>{`Sed leo metus, consectetur non turpis a, semper consequat nunc. Proin nunc eros, tempus id purus in, fringilla tristique dui. Mauris non mattis tellus, et finibus orci. Suspendisse in metus id nisl egestas vulputate. Nulla euismod pellentesque tempor. Duis maximus lectus sed arcu tempus, in efficitur erat sagittis. Aenean auctor dolor odio, vitae condimentum enim pretium nec. Sed sit amet mattis turpis. Cras aliquet sem quis consectetur vehicula. Nam tincidunt dapibus felis, sit amet vehicula lorem bibendum quis. Vivamus a erat ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. `}</p>\n    <p>{`Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec sit amet lectus eget sapien tempus accumsan. Curabitur ultricies quis enim eu sodales. Praesent a arcu in mauris vehicula tempor non ut lacus. Suspendisse ultricies metus tellus, nec placerat purus bibendum sit amet. In efficitur risus erat, vitae mollis orci pulvinar in. Proin aliquam tellus tortor, sed finibus erat bibendum a. Donec at nisi eget nibh condimentum sollicitudin. Suspendisse sit amet velit sit amet ex interdum varius aliquam nec ex. Nulla dignissim cursus augue vitae commodo. Maecenas in magna justo.`}</p>\n    <p>{`Integer sollicitudin sodales lectus sed tempus. Sed vitae semper orci. Praesent tempor iaculis dui, in varius turpis aliquam nec. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Vestibulum porta sem vitae dictum gravida. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam id elit fermentum, dictum tortor ac, interdum justo. Suspendisse potenti. Etiam urna diam, eleifend ut malesuada eget, volutpat quis leo. Nulla eget nulla porta, consequat ex eget, porttitor felis. Curabitur porta vehicula turpis et lacinia. Vivamus commodo laoreet risus, eu suscipit libero rutrum vitae. Morbi porta, magna ac gravida eleifend, risus arcu vestibulum mauris, id interdum ante risus nec tellus. Donec vitae lacinia risus. Sed condimentum accumsan enim, sit amet consequat arcu volutpat ut.`}</p>\n    <p>{`Ut nec fringilla odio, eget porta nibh. Pellentesque nec ultricies ipsum. Phasellus eu tempus sapien. Praesent sit amet urna dolor. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Pellentesque sollicitudin est ut pretium vestibulum. Aenean ut arcu non ligula blandit bibendum porta ut mi. Quisque elementum mattis nibh eget vulputate. Maecenas facilisis vehicula nibh vitae tincidunt.`}</p>\n    <p>{`Praesent id vulputate lorem. Curabitur laoreet venenatis libero at varius. Quisque semper feugiat lorem nec consectetur. Nam risus lorem, gravida sed lacinia eu, placerat et orci. Quisque vitae dictum justo, vitae dapibus libero. Nulla tempor, erat nec aliquam sollicitudin, mi erat efficitur elit, eu pretium enim ligula ut nunc. Mauris tempus erat in magna mollis iaculis. Praesent at maximus enim, a rutrum ipsum. Nunc quis hendrerit ex. Ut laoreet volutpat lobortis. Aenean malesuada semper enim ut imperdiet. Quisque sagittis eros vehicula, iaculis elit ac, viverra sem. Sed ac pretium urna. Suspendisse lorem magna, rutrum a diam nec, elementum tempus nulla.`}</p>\n    <p>{`Integer feugiat, ligula at eleifend tincidunt, ipsum elit vulputate tortor, sed interdum sem orci non ante. Nulla ac aliquam ipsum. Vivamus euismod tortor dui, pulvinar mattis velit pretium quis. Vivamus ullamcorper nisi vel lectus dictum, sed porttitor neque porttitor. Vivamus commodo massa id nibh ultrices euismod ac sit amet velit. In id arcu aliquet, condimentum elit eu, euismod justo. Quisque vestibulum nibh id vestibulum dapibus. Phasellus congue vel nibh eu aliquet. In lectus magna, imperdiet in massa ut, ornare egestas leo. Proin turpis sem, facilisis ac pretium et, dapibus vitae arcu.`}</p>\n    <p>{`Integer tristique maximus nunc. Sed iaculis euismod quam, vitae congue est vestibulum nec. Curabitur semper dolor libero, eget euismod est luctus id. Integer eleifend purus at convallis pretium. Mauris molestie enim vel ullamcorper cursus. Phasellus nec ornare massa, quis gravida augue. Sed semper nulla ac tellus eleifend elementum. Mauris metus tellus, posuere eu tortor in, mollis eleifend arcu. Phasellus quis elementum risus, ac facilisis dui. Aliquam dapibus ipsum mattis ligula luctus, id venenatis nunc viverra. Quisque sit amet interdum est. Praesent at leo sit amet erat pulvinar tincidunt. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae;`}</p>\n    <p>{`Duis eget mauris dui. Donec lacinia, risus in efficitur accumsan, ipsum neque consectetur nulla, pretium pharetra mauris mauris nec magna. Sed risus nisi, lobortis at lectus non, sollicitudin sodales ligula. Pellentesque a elit purus. Sed et tristique ligula, iaculis elementum nisl. Nulla facilisi. Maecenas erat ligula, finibus id felis sit amet, bibendum efficitur magna. Praesent bibendum, mauris id cursus auctor, nibh enim tristique ante, ac iaculis ex urna non massa. Donec ultrices non nisl et euismod. Quisque eget urna dolor. Nulla rhoncus tincidunt consequat. Aenean sit amet risus tempus, pellentesque dui sed, vestibulum nulla. Sed libero tellus, posuere porttitor mi quis, porta facilisis enim.`}</p>\n    <p>{`Sed eget est id elit mattis luctus. Morbi fermentum, turpis vitae gravida luctus, mi diam tempor ex, sed imperdiet nisi ligula ut ipsum. Proin tempus, nulla a pretium volutpat, ipsum velit pulvinar magna, cursus euismod mi augue quis augue. Cras ultricies vel tortor nec iaculis. Pellentesque placerat, orci vel consectetur varius, orci est ultrices sapien, in ullamcorper massa augue id dolor. Sed vel tellus a nisl sollicitudin rhoncus ac sagittis odio. Duis molestie tempus turpis. Praesent consequat sed ligula et ullamcorper. Aliquam erat volutpat. Pellentesque quis urna quis sem fringilla tempus. Proin nec turpis eget turpis rhoncus lacinia ut et magna. Suspendisse vehicula id elit vitae luctus. Maecenas non posuere lacus. In fermentum molestie posuere. Sed tempor, ipsum vitae euismod aliquam, elit enim semper velit, iaculis ullamcorper nisi ligula vitae metus.`}</p>\n    <p>{`Quisque rutrum mattis mauris in molestie. Nullam tincidunt mauris vitae mattis bibendum. Nulla a nunc tortor. Duis non varius purus. Aenean lobortis feugiat dapibus. Proin posuere ullamcorper risus vel dictum. Nullam semper est a elit luctus eleifend. Aliquam hendrerit feugiat turpis eu imperdiet. Vestibulum et dictum enim. Aliquam eget venenatis nisi, sit amet mollis ex.`}</p>\n    <p>{`Sed leo metus, consectetur non turpis a, semper consequat nunc. Proin nunc eros, tempus id purus in, fringilla tristique dui. Mauris non mattis tellus, et finibus orci. Suspendisse in metus id nisl egestas vulputate. Nulla euismod pellentesque tempor. Duis maximus lectus sed arcu tempus, in efficitur erat sagittis. Aenean auctor dolor odio, vitae condimentum enim pretium nec. Sed sit amet mattis turpis. Cras aliquet sem quis consectetur vehicula. Nam tincidunt dapibus felis, sit amet vehicula lorem bibendum quis. Vivamus a erat ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. `}</p>\n    <p>{`Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec sit amet lectus eget sapien tempus accumsan. Curabitur ultricies quis enim eu sodales. Praesent a arcu in mauris vehicula tempor non ut lacus. Suspendisse ultricies metus tellus, nec placerat purus bibendum sit amet. In efficitur risus erat, vitae mollis orci pulvinar in. Proin aliquam tellus tortor, sed finibus erat bibendum a. Donec at nisi eget nibh condimentum sollicitudin. Suspendisse sit amet velit sit amet ex interdum varius aliquam nec ex. Nulla dignissim cursus augue vitae commodo. Maecenas in magna justo.`}</p>\n    <p>{`Integer sollicitudin sodales lectus sed tempus. Sed vitae semper orci. Praesent tempor iaculis dui, in varius turpis aliquam nec. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Vestibulum porta sem vitae dictum gravida. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam id elit fermentum, dictum tortor ac, interdum justo. Suspendisse potenti. Etiam urna diam, eleifend ut malesuada eget, volutpat quis leo. Nulla eget nulla porta, consequat ex eget, porttitor felis. Curabitur porta vehicula turpis et lacinia. Vivamus commodo laoreet risus, eu suscipit libero rutrum vitae. Morbi porta, magna ac gravida eleifend, risus arcu vestibulum mauris, id interdum ante risus nec tellus. Donec vitae lacinia risus. Sed condimentum accumsan enim, sit amet consequat arcu volutpat ut.`}</p>\n    <p>{`Ut nec fringilla odio, eget porta nibh. Pellentesque nec ultricies ipsum. Phasellus eu tempus sapien. Praesent sit amet urna dolor. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Pellentesque sollicitudin est ut pretium vestibulum. Aenean ut arcu non ligula blandit bibendum porta ut mi. Quisque elementum mattis nibh eget vulputate. Maecenas facilisis vehicula nibh vitae tincidunt.`}</p>\n    <p>{`Praesent id vulputate lorem. Curabitur laoreet venenatis libero at varius. Quisque semper feugiat lorem nec consectetur. Nam risus lorem, gravida sed lacinia eu, placerat et orci. Quisque vitae dictum justo, vitae dapibus libero. Nulla tempor, erat nec aliquam sollicitudin, mi erat efficitur elit, eu pretium enim ligula ut nunc. Mauris tempus erat in magna mollis iaculis. Praesent at maximus enim, a rutrum ipsum. Nunc quis hendrerit ex. Ut laoreet volutpat lobortis. Aenean malesuada semper enim ut imperdiet. Quisque sagittis eros vehicula, iaculis elit ac, viverra sem. Sed ac pretium urna. Suspendisse lorem magna, rutrum a diam nec, elementum tempus nulla.`}</p>\n    <p>{`Integer feugiat, ligula at eleifend tincidunt, ipsum elit vulputate tortor, sed interdum sem orci non ante. Nulla ac aliquam ipsum. Vivamus euismod tortor dui, pulvinar mattis velit pretium quis. Vivamus ullamcorper nisi vel lectus dictum, sed porttitor neque porttitor. Vivamus commodo massa id nibh ultrices euismod ac sit amet velit. In id arcu aliquet, condimentum elit eu, euismod justo. Quisque vestibulum nibh id vestibulum dapibus. Phasellus congue vel nibh eu aliquet. In lectus magna, imperdiet in massa ut, ornare egestas leo. Proin turpis sem, facilisis ac pretium et, dapibus vitae arcu.`}</p>\n    <p>{`Integer tristique maximus nunc. Sed iaculis euismod quam, vitae congue est vestibulum nec. Curabitur semper dolor libero, eget euismod est luctus id. Integer eleifend purus at convallis pretium. Mauris molestie enim vel ullamcorper cursus. Phasellus nec ornare massa, quis gravida augue. Sed semper nulla ac tellus eleifend elementum. Mauris metus tellus, posuere eu tortor in, mollis eleifend arcu. Phasellus quis elementum risus, ac facilisis dui. Aliquam dapibus ipsum mattis ligula luctus, id venenatis nunc viverra. Quisque sit amet interdum est. Praesent at leo sit amet erat pulvinar tincidunt. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae;`}</p>\n    <p>{`Duis eget mauris dui. Donec lacinia, risus in efficitur accumsan, ipsum neque consectetur nulla, pretium pharetra mauris mauris nec magna. Sed risus nisi, lobortis at lectus non, sollicitudin sodales ligula. Pellentesque a elit purus. Sed et tristique ligula, iaculis elementum nisl. Nulla facilisi. Maecenas erat ligula, finibus id felis sit amet, bibendum efficitur magna. Praesent bibendum, mauris id cursus auctor, nibh enim tristique ante, ac iaculis ex urna non massa. Donec ultrices non nisl et euismod. Quisque eget urna dolor. Nulla rhoncus tincidunt consequat. Aenean sit amet risus tempus, pellentesque dui sed, vestibulum nulla. Sed libero tellus, posuere porttitor mi quis, porta facilisis enim.`}</p>\n    <p>{`Sed eget est id elit mattis luctus. Morbi fermentum, turpis vitae gravida luctus, mi diam tempor ex, sed imperdiet nisi ligula ut ipsum. Proin tempus, nulla a pretium volutpat, ipsum velit pulvinar magna, cursus euismod mi augue quis augue. Cras ultricies vel tortor nec iaculis. Pellentesque placerat, orci vel consectetur varius, orci est ultrices sapien, in ullamcorper massa augue id dolor. Sed vel tellus a nisl sollicitudin rhoncus ac sagittis odio. Duis molestie tempus turpis. Praesent consequat sed ligula et ullamcorper. Aliquam erat volutpat. Pellentesque quis urna quis sem fringilla tempus. Proin nec turpis eget turpis rhoncus lacinia ut et magna. Suspendisse vehicula id elit vitae luctus. Maecenas non posuere lacus. In fermentum molestie posuere. Sed tempor, ipsum vitae euismod aliquam, elit enim semper velit, iaculis ullamcorper nisi ligula vitae metus.`}</p>\n    <p>{`Quisque rutrum mattis mauris in molestie. Nullam tincidunt mauris vitae mattis bibendum. Nulla a nunc tortor. Duis non varius purus. Aenean lobortis feugiat dapibus. Proin posuere ullamcorper risus vel dictum. Nullam semper est a elit luctus eleifend. Aliquam hendrerit feugiat turpis eu imperdiet. Vestibulum et dictum enim. Aliquam eget venenatis nisi, sit amet mollis ex.`}</p>\n    <p>{`Sed leo metus, consectetur non turpis a, semper consequat nunc. Proin nunc eros, tempus id purus in, fringilla tristique dui. Mauris non mattis tellus, et finibus orci. Suspendisse in metus id nisl egestas vulputate. Nulla euismod pellentesque tempor. Duis maximus lectus sed arcu tempus, in efficitur erat sagittis. Aenean auctor dolor odio, vitae condimentum enim pretium nec. Sed sit amet mattis turpis. Cras aliquet sem quis consectetur vehicula. Nam tincidunt dapibus felis, sit amet vehicula lorem bibendum quis. Vivamus a erat ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. `}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.005,\"time\":300,\"words\":1}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`henlow`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  \n]\n\nexport const frontMatter = {}\n\n","\nimport {useContext, useEffect, useRef, useState} from 'react';\nimport cx from 'classnames';\nimport {v4 as genId} from 'uuid';\n\nimport {VisualizationControlContext} from '../../helpers/contexts';\n\nconst Caller = ({id: visualizationId, ...props}) => {\n  const ref = useRef(null);\n  const [id] = useState(genId());\n  const {\n    activeVisualization,\n    onBlockClick,\n    onRegisterVisualization,\n    onUnregisterVisualization,\n  } = useContext(VisualizationControlContext);\n\n  useEffect(() => {\n    // on wrappe dans un setTimeout pour avoir une ref non-nulle vers le composant\n    setTimeout(() => {\n      let payload = {...props};\n      payload = {\n        ...payload,\n        ref,\n        visualizationId,\n        id\n      }\n      onRegisterVisualization(payload)\n    })\n    return onUnregisterVisualization(id);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id])\n\n  const onClick = e => {\n    if (typeof onBlockClick === 'function') {\n      onBlockClick(id, ref);\n    }\n  }\n  return (\n    <div\n      ref={ref}\n      onClick={onClick} \n      className={cx(\"Caller\", {'is-active': activeVisualization && id === activeVisualization.id})}\n    >\n      {\n        visualizationId ?\n        <>caller pour la visualisation <code>{visualizationId}</code> </>\n        :\n        <>caller sans id (agit comme un clearfix)</>\n      }{\n        Object.keys(props).length ? \n          <span>avec les paramtres {JSON.stringify(props)}</span>\n        : null\n      }\n    </div>\n  );\n}\n\nexport default Caller;","import Caller from './Caller';\n\nexport default Caller;","var map = {\n\t\"./en/about.mdx\": [\n\t\t209\n\t],\n\t\"./en/part-1.mdx\": [\n\t\t203\n\t],\n\t\"./en/part-2-1.mdx\": [\n\t\t646,\n\t\t3\n\t],\n\t\"./en/part-2-2.mdx\": [\n\t\t647,\n\t\t4\n\t],\n\t\"./en/part-2-3.mdx\": [\n\t\t648,\n\t\t5\n\t],\n\t\"./en/part-2-intro.mdx\": [\n\t\t205\n\t],\n\t\"./en/part-3.mdx\": [\n\t\t207\n\t],\n\t\"./en/test-scrolly.mdx\": [\n\t\t299\n\t],\n\t\"./fr/a-propos.mdx\": [\n\t\t208\n\t],\n\t\"./fr/partie-1.mdx\": [\n\t\t202\n\t],\n\t\"./fr/partie-2.mdx\": [\n\t\t204\n\t],\n\t\"./fr/partie-3.mdx\": [\n\t\t206\n\t],\n\t\"./fr/test-scrolly.mdx\": [\n\t\t296\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 641;\nmodule.exports = webpackAsyncContext;","\n\nfunction SvgComponent ({path}) {\n    return <img alt={path} src={`${process.env.PUBLIC_URL}${path}`} />\n} \n\nexport default SvgComponent;","import SvgComponent from './SvgComponent';\n\nexport default SvgComponent;","import VegaComponent from './VegaComponent';\n\nexport default VegaComponent;","import React, {useState, useEffect} from 'react';\nimport {VegaLite} from 'react-vega';\nimport {csvParse} from 'd3-dsv';\nimport get from 'axios';\n\nconst VegaComponent = ({\n  data: filename,\n  spec\n}) => {\n    // useState renvoie un state et un seter qui permet de le modifier\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const URL = `${process.env.PUBLIC_URL}/data/${filename}`;\n\n  useEffect(() => {\n    // aller chercher les donnes (get : lancement de la promesse se lance de suite : synchrone, then et catch plus tard)\n    get(URL)\n    .then(({data: csvString}) => {\n      // les convertir en js (avec d3-dsv)\n      const newData = csvParse(csvString);\n      // vega prend qqch comme a : [{prop1: 'val', pro2: 'val2'}]\n      setData(newData);\n      setLoading(false);\n    })\n    .catch((err) => {\n      setLoading(false);\n    })\n  }, [URL])\n  \n  if (!spec) {\n    return <div>Vous devez spcifier une spec pour le composant vega.</div>\n  }\n\n  if (loading) {\n    return (\n      <div>Chargement des donnes ({URL}) ...</div>\n    )\n  } else if (!data) {\n    return (\n    <div>Erreur ...</div>\n    )\n  }\n  return (\n      <div>\n        <VegaLite\n          spec={{\n            ...spec,\n            \"$schema\": \"https://vega.github.io/schema/vega-lite/v5.json\",\n            \"data\": {\n              \"values\": data\n            }\n          }}\n        />\n      </div>\n  )\n}\n\nexport default VegaComponent;\n","import Color from 'color';\nimport {scaleLinear} from 'd3-scale';\n// import {evalIfNodeMatches} from '../../helpers/misc';\n\n\n// Defaults\nconst DEFAULT_NODE_COLOR = '#999';\nconst DEFAULT_NODE_SIZE_RANGE = [2, 15];\n\nexport function createNodeReducer({\n  nodeColor,\n  nodeSize,\n  nodeLabel,\n  nodeSizeFactor = 1,\n  extents,\n  // filters = [],\n  // filtersModeAnd\n}) {\n  \n  let nodeSizeScale = null;\n\n  // Creating scales\n  if (!nodeSize) {\n    nodeSizeScale = scaleLinear()\n      .domain([extents.nodeSize.min, extents.nodeSize.max])\n      .range(DEFAULT_NODE_SIZE_RANGE);\n  } else {\n    nodeSizeScale = scaleLinear()\n      .domain([nodeSize.min, nodeSize.max])\n      .range(DEFAULT_NODE_SIZE_RANGE);\n  }\n  \n  // Creating actual reducer\n  const nodeReducer = function (key, attr) {\n    const renderedNode = {\n      ...attr,\n      x: isNaN(attr.x) || attr.x === undefined ? 0 : attr.x,\n      y: isNaN(attr.y) || attr.y === undefined ? 0 : attr.y\n    };\n\n\n\n    // Color\n    if (!nodeColor) {\n      renderedNode.color = attr.color || DEFAULT_NODE_COLOR;\n    } else {\n      renderedNode.color =\n        nodeColor.palette[attr[nodeColor.name]] || DEFAULT_NODE_COLOR;\n    }\n    // Size\n    if (!nodeSize) {\n      let v = attr.size || 1;\n      renderedNode.size = nodeSizeScale(v);\n    } else {\n      let v = attr[nodeSize.name];\n      v = typeof v === 'number' ? v : 1;\n      renderedNode.size = nodeSizeScale(v);\n    }\n\n    renderedNode.size *= nodeSizeFactor;\n\n    return renderedNode;\n  };\n\n\n  return nodeReducer;\n}\n\n\nexport function createEdgeReducer({\n  nodeColor,\n  nodeSize,\n  nodeLabel,\n  nodeSizeFactor = 1,\n  extents,\n  dontColorEdges,\n  edgesMap\n}) {\n\n  \n  // Creating actual reducer\n  const edgeReducer = function (key, attr, el1, el2) {\n    const {\n      sourceNode, \n      targetNode\n    } = edgesMap.get(key);\n    const renderedEdge = {};\n    // color with biggest node\n    const sourceNodeSize = nodeSize ? sourceNode[nodeSize.name] : sourceNode.size;\n    const targetNodeSize = nodeSize ? targetNode[nodeSize.name] : targetNode.size;\n    const biggerNode = sourceNodeSize > targetNodeSize ? sourceNode : targetNode;\n\n    // Color\n    if (biggerNode) {\n      if (!nodeColor) {\n        renderedEdge.color = biggerNode.color || DEFAULT_NODE_COLOR;\n      } else {\n        renderedEdge.color =\n          nodeColor.palette[biggerNode[nodeColor.name]] || DEFAULT_NODE_COLOR;\n      }\n      renderedEdge.color = Color(renderedEdge.color).lighten(0.4).rgb().string();\n    }\n    return renderedEdge;\n  };\n\n  return edgeReducer;\n}","import { csvParse } from 'd3-dsv';\nimport get from 'axios';\nimport iwanthue from 'iwanthue';\nimport {useRef, useEffect} from 'react';\n// import Graph from 'graphology-types';\n\nconst DEFAULT_COLOR_SPACE = {\n  cmin: 25.59,\n  cmax: 55.59,\n  lmin: 60.94,\n  lmax: 90.94\n};\n\nconst SINGLE_COLOR_PALETTE = ['#999'];\n\nexport function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport function generatePalette(name, count) {\n  if (count === 1 || !count) return SINGLE_COLOR_PALETTE;\n  else if (count === 2) {\n    return ['#D77186', '#61A2DA']\n  }\n\n  return iwanthue(count, {\n    colorSpace: DEFAULT_COLOR_SPACE,\n    seed: name,\n    clustering: 'force-vector'\n  });\n}\n\n\nconst _filterData = (data, { startYear, endYear, year, params, ...rest }) => {\n  console.group('filters');\n  console.time('filters time');\n  console.log('input', data);\n  /* dans data on a un dict de type : \n  [   {year: \"1789\", customs_region: \"La Rochelle\", partner_simplification: \"Iles\", export_import: Import\", product_revolutionempire: \"...\", ...},\n      {year: \"1782\", customs_region: \"Bordeaux\", ...},\n      {...},\n      columns: [\"year\", \"customs_region\", ...]\n\n  ]\n  */\n  let filteredData = data.filter(row => {\n    let rowYear = row.year ? +row.year.split(\".\")[0] : undefined;\n    if (startYear && endYear) {\n      return rowYear >= +startYear && rowYear <= +endYear;\n      // @todo : quand on aura rajout startYear et endYear pour\n      // la rcupration de portic il s'agira de dduire ce year des donnes\n    } else if (year && rowYear) {\n      return year === +rowYear;\n    } else return true;\n  })\n  // console.log('1', filteredData);\n\n  filteredData = filteredData.filter(row => {\n    // pour chaque filtre (sauf filtre timespan et filtrage des colomnes) :\n    let isValid = true;\n    // key --> 'year', filter_value --> 1789\n    // kwargs obtenu sous forme de dict : --> { year: 1789, customs_region: 'La Rochelle' }\n\n    // kwargs semble tre indiable mais pas sur qu'on doive pas le mettre dans un format spcial pas comme python\n    // sinon suggestion : function.apply(obj, [args])\n\n    // ligne originale : je ne sais pas pourquoi on ne veut prendre en compte les filtres que pour les colonnes qui ne sont pas  garder dans le rsultats (colonne donnes dans l'argument 'params' sous forme de liste)\n    // for (let key,filter_value in [param for param in kwargs.items() if param[0] not in ['params']]): \n    // console.log('rest', rest);\n    Object.entries(rest)\n      .some(([key, inputFilterValue]) => {\n        const rowValue = row[key];\n        let filterValue = inputFilterValue;\n        // console.log('filter value 1', filterValue);\n        // si la valeur est une liste : on caste en string ses membres\n        if (Array.isArray(filterValue)) {\n          filterValue = filterValue.map(x => x + ''); // caster en string\n        }\n        // sinon c'est un tableau  une valeur qu'on caste en string\n        else {\n          filterValue = [filterValue + ''];\n        }\n        // console.log('filter value final', filterValue);\n        //  partir de l, filter_value est une liste de strings\n\n        // si la ligne a un attribut qui fait partie des valeurs acceptes par le filtre => on examine les autres filtres \n        if (filterValue.length > 0 && !(rowValue.includes(filterValue))) {\n          isValid = false;\n          return true;\n        }\n        return false;\n      })\n\n    return isValid;\n  })\n\n  // console.log('2', filteredData);\n\n\n  const transformedData = filteredData.map(row => {\n    let rowFormated = {};\n\n    // on ne garde que les colonnes qui nous intressent dans le rsultat => \n    // console.log(\"params : \", params);\n    // console.log(\"typeof(params) !== 'undefined' : \", (typeof params !== 'undefined'));\n    // console.log(\"row : \", row);\n    // on ne passe jamais ni dans le if ni dans le else, je ne sais pas pourquoi \n    // if (typeof params !== 'undefined') {\n\n    // if (params &&\n    // ci-dessous : tester si objet vide\n    if (!!params && Object.keys(params).length) {\n      // console.log(\"we are selecting only those columns : \", params);\n      for (let [column, value] of Object.entries(row)) {\n        if (params.includes(column)) {\n          rowFormated[column] = value;\n        }\n      }\n    }\n    // de base c'tait else { ... } et on passait jamais dedans apparemment du coup l c'est bizarre\n    // else if (typeof params !== 'undefined') {\n    else {\n      // rowFormated = {...row}; // diffrencier rowFormated et row (nouvelle ref en unpackant et copiant key / params de row) => en JS differencier input d'output\n      // console.log(\"rowFormated = \", row);\n    }\n    // console.log(\"aprs le if / else\");\n    return rowFormated;\n  })\n  // console.log('3', transformedData);\n  console.timeEnd('filters time');\n  console.groupEnd('filters');\n  return transformedData;\n}\n\n\nexport const getToflitFlowsByCsv = ({\n  startYear = null,\n  endYear = null,\n  year = null,\n  params = null,\n  ...rest // https://www.peterbe.com/plog/javascript-destructuring-like-python-kwargs-with-defaults ; \n  // \"standard\" JavaScript array : https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters\n}) => {\n  // mthode de gestion avec callback\n  // let result;\n  // trucAsynchrone\n  // .then(data => {\n  //     callback(null, data);\n  // })\n  // .catch(error => {\n  //     callback(error);\n  // })\n\n  // mthode de gestion avec promesse\n  // return new Promise((resolve, reject) => {\n  //     trucAsynchrone\n  //     .then(data => {\n  //         // faire des trucs avec data\n  //         resolve(data);\n  //     })\n  //     .catch(error => {\n  //         // faire des choses avec l'erreur\n  //         reject(error);\n  //     })\n  // })\n\n  // mthode async/await\n  // const result = await trucAsynchrone();\n  // return result;\n\n  /*\n  Synopsis : rcupre les flux toflit18\n  --- \n  Paramtres :\n  * startYear : <int> # anne de dbut\n  * endYear : <int> # anne de fin\n  * params : <arr> # proprits  renvoyer\n  * [tous les noms de colonne des flux] : <arr/string> valeurs  filtrer dans les flux (peut tre une ou plusieurs valeurs)\n  */\n\n  return new Promise((resolve, reject) => {\n\n    // let results = []; // a sert  quelque chose ?? pour moi c'est pas utilis, sinon je ne devrais pas avoir l'erreur \"t.map is not a function\" \n    // => voir https://www.pluralsight.com/guides/typeerror-handling-in-react.js-for-map-function\n\n    let finalStartYear = startYear; // on ne modif pas params en JS\n    let finalEndYear = endYear;\n\n\n\n    // 1. Test de la validit des paramtres\n    if (startYear !== null && endYear === null) {\n      return reject(\"You must put an end year\");\n    } // pas sure pour les accolades\n    else if (endYear !== null && startYear === null) {\n      return reject(\"You must put a start year\");\n    }\n\n    if ((startYear !== null || endYear !== null) && year !== null) {\n      finalStartYear = null;\n      finalEndYear = null;\n    }\n\n    /* en l'tat a ne fonctionne pas */\n    const URL = `${process.env.PUBLIC_URL || 'localhost:3001'}/data/toflit18_flows_sprint.csv`;\n    // console.log(\"URL '${process.env.PUBLIC_URL}/data/toflit18_flows_sprint.csv' : \", URL)\n    get(URL) // get de axios\n      .then(({ data: csvString }) => {\n        // conversion en js (avec d3-dsv)\n        const newData = csvParse(csvString);\n        // faire des choses avec les rsultats (filtres, ...)\n        const finalData = _filterData(newData, { startYear: finalStartYear, endYear: finalEndYear, year, params, ...rest });\n        // console.log(\"finalData : \", finalData);\n        resolve(finalData);\n      })\n      .catch((err) => {\n        reject(err);\n      })\n\n  })\n\n}\n\nexport const getToflitFlowsByApi = ({\n  startYear = null,\n  endYear = null,\n  year = null,\n  params = null,\n  ...rest\n}) => {\n\n  return new Promise((resolve, reject) => {\n\n    let finalStartYear = startYear; // on ne modif pas params en JS\n    let finalEndYear = endYear;\n\n    // 1. Test de la validit des paramtres\n    if (startYear !== null && endYear === null) {\n      return reject(\"You must put an end year\");\n    } // pas sure pour les accolades\n    else if (endYear !== null && startYear === null) {\n      return reject(\"You must put a start year\");\n    }\n\n    if ((startYear !== null || endYear !== null) && year !== null) {\n      finalStartYear = null;\n      finalEndYear = null;\n    }\n\n    const URL = `http://data.portic.fr/api/flows/?date=${year}`;\n    console.log({ URL })\n    // quivalent  : const URL = 'http://data.portic.fr/api/flows/?date=' + year;\n    get(URL) // get de axios\n      // mixed content issue => comme l'API ne fournit pas d'accs HTTPS je me sentais un peu bloque\n      .then(({ data: str }) => {\n        // conversion en js (avec d3-dsv)\n        // const newData = csvParse(csvString);\n        try {\n          const newData = JSON.parse(str);\n          // contraire : JSON.stringify()\n          // faire des choses avec les rsultats (filtres, ...)\n          const finalData = _filterData(newData, { startYear: finalStartYear, endYear: finalEndYear, year, params, ...rest })\n          resolve(finalData);\n        } catch (e) {\n          reject(e);\n        }\n\n      })\n      .catch((err) => {\n        reject(err);\n      })\n\n  })\n\n}\n\n\n\n\n\nexport const getPorticPointcallsByApi = ({\n  filename,\n  spec\n}) => {\n\n}\n\n","import React from 'react';\nimport cx from 'classnames';\n\n\nexport default function GraphControls({\n  rescale, \n  zoomIn, \n  zoomOut, \n}) {\n  return (\n    <ul className={cx(\"VisControls GraphControls\")}>\n      <li className=\"vis-controls-item camera\">\n      \n      <button onClick={zoomOut}>\n        -\n      </button>\n      <button onClick={zoomIn}>\n        +\n      </button>\n      <button onClick={rescale}>\n        Recentrer\n      </button>\n      </li>\n    </ul>\n  );\n}","import React, {useCallback, useRef, useState, useEffect, useMemo} from 'react';\nimport gexf from 'graphology-gexf';\nimport Graph from 'graphology';\nimport {WebGLRenderer as Renderer} from 'sigma';\nimport {scaleLinear} from 'd3-scale';\nimport {min, max, extent} from 'd3-array';\nimport {uniq} from 'lodash';\nimport get from 'axios';\n\nimport {createNodeReducer, createEdgeReducer} from './reducers';\nimport {generatePalette, usePrevious} from '../../helpers/misc';\n\nimport GraphControls from './GraphControls';\n\nimport './GraphContainer.css';\n\n// Defaults\nconst CELL_HEIGHT_RANGE = [200, 10];\nconst CELL_WIDTH_RANGE = [300, 30];\nconst CELL_HEIGHT_SCALE = scaleLinear().domain([0, 1]).range(CELL_HEIGHT_RANGE);\nconst CELL_WIDTH_SCALE = scaleLinear().domain([0, 1]).range(CELL_WIDTH_RANGE);\n\n// Camera controls\nfunction rescale(renderer) {\n  const camera = renderer.getCamera();\n  camera.animatedReset(renderer);\n}\n\nfunction zoomIn(renderer) {\n  const camera = renderer.getCamera();\n  camera.animatedZoom(renderer);\n}\n\nfunction zoomOut(renderer) {\n  const camera = renderer.getCamera();\n  camera.animatedUnzoom(renderer);\n}\n\nfunction GraphContainer({\n  graph,\n  nodeColor: nodeColorVariable,\n  nodeSize: nodeSizeVariable,\n  labelDensity,\n  nodeLabel,\n  onCameraUpdate,\n  cameraPosition,\n  updateTimestamp,\n}) {\n  let sizes = useMemo(() => {\n    const res = [];\n    graph.forEachNode((_node, attributes) => {\n      res.push(+(nodeSizeVariable ? attributes[nodeSizeVariable] : attributes.size));\n    })\n    return res;\n  }, [nodeSizeVariable, graph]);\n  \n  const sizeExtent = extent(sizes);\n  const extents = {\n    nodeSize: {\n      min: sizeExtent[0],\n      max: sizeExtent[1]\n    }\n  }\n\n  const nodeSize = useMemo(() => {\n    if (nodeSizeVariable) {\n\n      return {\n        min: min(sizeExtent),\n        max: max(sizeExtent),\n        name: nodeSizeVariable\n      }\n    } else return undefined;\n  }, [nodeSizeVariable, graph])\n\n  const nodeColor = useMemo(() => {\n    if (nodeColorVariable) {\n      let values = [];\n      graph.forEachNode((_node, attr) => {\n        values.push(attr[nodeColorVariable])\n      })\n      values = uniq(values);\n      const colors = generatePalette(nodeColorVariable, values.length);\n      let palette = {};\n      let i = 0;\n      values.forEach(option => {\n        palette[option] = colors[i];\n        i++;\n      });\n      return {\n        palette,\n        name: nodeColorVariable\n      }\n    } else return undefined;\n  }, [nodeColorVariable, graph])\n\n  const edgesMap = useMemo(() => {\n    const m = new Map()\n    graph.forEach(\n      (_source, _target, sourceAttributes, targetAttributes, edge, _edgeAttributes) => {\n      m.set(edge, {sourceNode: sourceAttributes, targetNode: targetAttributes})\n    });\n    return m;\n  }, [graph])\n\n  const previousNodeColor = usePrevious(nodeColor);\n  const previousNodeSize = usePrevious(nodeSize);\n  const previousNodeLabel = usePrevious(nodeLabel);\n  const previousLabelDensity = usePrevious(labelDensity);\n  // const previousSearchString = usePrevious(searchString);\n  // const previousDontColorEdges = usePrevious(dontColorEdges);\n  // const previousFilters = usePrevious(filters);\n\n  const nodeReducer = createNodeReducer({\n    nodeColor,\n    nodeSize,\n    nodeLabel,\n    extents,\n  });\n  \n  const edgeReducer = createEdgeReducer({\n    nodeColor,\n    nodeSize,\n    nodeLabel,\n    extents,\n    edgesMap\n  });\n  \n\n  const container = useRef(null);\n  const [renderer, setRenderer] = useState(null);\n\n  useEffect(() => {\n    if (cameraPosition && renderer) {\n        const camera = renderer.getCamera();\n        // console.log('animate camera', camera);\n        camera.animate(cameraPosition);     \n    }  \n  }, [updateTimestamp]) /* eslint react-hooks/exhaustive-deps : 0 */\n\n  // Should we refresh?\n  if (renderer) {\n    let needToRefresh = false;\n    \n\n    if (\n      previousNodeColor !== nodeColor ||\n      previousNodeSize !== nodeSize ||\n      // previousDontColorEdges !== dontColorEdges ||\n      previousNodeLabel !== nodeLabel\n      // previousSearchString !== searchString ||\n      // previousFilters !== filters\n    ) {\n      // console.log('Refreshing sigma');\n\n      // TODO: use upcoming #.setNodeReducer\n      renderer.settings.nodeReducer = nodeReducer;\n      renderer.settings.edgeReducer = edgeReducer;\n      needToRefresh = true;\n    }\n\n    if (previousLabelDensity !== labelDensity) {\n      renderer.settings.labelGrid.cell = {\n        width: CELL_WIDTH_SCALE(labelDensity),\n        height: CELL_HEIGHT_SCALE(labelDensity)\n      };\n\n      // TODO: we can improve sigma to handle this\n      renderer.displayedLabels = new Set();\n      needToRefresh = true;\n    }\n\n    if (needToRefresh) {\n      renderer.refresh();\n    }\n  }\n\n  const setContainer = useCallback(\n    node => {\n      if (renderer && renderer.graph !== graph) {\n        renderer.kill();\n        setRenderer(null);\n      }\n\n      if (node && graph) {\n        const newRenderer = new Renderer(graph, node, {nodeReducer, edgeReducer});\n        setRenderer(newRenderer);\n        const camera = newRenderer.getCamera();\n        onCameraUpdate(camera.getState())\n        camera.on('updated', state => {\n          onCameraUpdate(state);\n        })\n      }\n\n      container.current = node;\n    },\n    [graph]\n  );\n\n  return (\n    <div className=\"VisContainer GraphContainer\" >\n\n      <div ref={setContainer} style={{width: '100%', height: '50vh'}}></div>\n      {renderer && (\n        <GraphControls\n          rescale={rescale.bind(null, renderer)}\n          zoomIn={zoomIn.bind(null, renderer)}\n          zoomOut={zoomOut.bind(null, renderer)}\n        />\n      )}\n    </div>\n  );\n}\n\n\nexport default function SigmaComponent({\n  data: filename,\n  nodeColor,\n  nodeLabel,\n  nodeSize,\n  labelDensity = 0.5,\n  cameraPosition: inputCameraPosition = { x: 0.5, y: 0.5, angle: 0, ratio: 1 }\n}) {\n    // useState renvoie un state et un seter qui permet de le modifier\n    const [graph, setGraph] = useState(null);\n    const [cameraPosition, setCameraPosition] = useState(inputCameraPosition);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n      if (['x', 'y', 'angle', 'ratio'].find(prop => inputCameraPosition[prop] !== cameraPosition[prop])) {\n        setCameraPosition(inputCameraPosition);\n      }\n    }, [inputCameraPosition])\n\n    const onCameraUpdate = cam => {\n      setCameraPosition(cam);\n    }\n  \n    const URL = `${process.env.PUBLIC_URL}/data/${filename}`;\n  \n    useEffect(() => {\n      // aller chercher les donnes (get : lancement de la promesse se lance de suite : synchrone, then et catch plus tard)\n      get(URL)\n      .then(({data: gexfString}) => {\n        const graph = gexf.parse(Graph, gexfString);\n        graph.forEachNode((node) => {\n          graph.updateNode(node, attr => {\n            return {\n              ...attr,\n              x: attr.x ? attr.x : 0,\n              y: attr.y ? attr.y : 0\n            }\n          })\n        })\n        setGraph(graph);\n        setLoading(false);\n      })\n      .catch((_err) => {\n        setLoading(false);\n      })\n    }, [URL])\n  \n    if (loading) {\n      return (\n        <div>Chargement des donnes ({URL}) ...</div>\n      )\n    } else if (!graph) {\n      return (\n      <div>Erreur ...</div>\n      )\n    }\n    return (\n        <div className=\"SigmaComponent\">\n          <GraphContainer\n            {\n              ...{\n                graph,\n                cameraPosition,\n                nodeColor,\n                nodeSize,\n                labelDensity,\n                nodeLabel,\n                onCameraUpdate\n              }\n            }\n          />\n        </div>\n    )\n}","import GraphContainer from './GraphContainer';\n\nexport default GraphContainer;","import GeoComponent from './GeoComponent';\n\nexport default GeoComponent;","import React, { useState, useEffect, useMemo } from 'react';\nimport { csvParse } from 'd3-dsv';\nimport get from 'axios';\nimport { geoEqualEarth, geoPath } from \"d3-geo\";\nimport { uniq } from 'lodash';\nimport { scaleLinear } from 'd3-scale';\nimport { extent } from 'd3-array';\n\nimport { generatePalette } from '../../helpers/misc';\n\n\nconst GeoComponent = ({\n  dataFilename,\n  backgroundFilename,\n  width = 1800,\n  height = 1500,\n  label,\n  markerSize,\n  markerColor,\n  showLabels,\n  centerOnRegion\n}) => {\n  // raw marker data\n  const [data, setData] = useState(null);\n  // map background data\n  const [backgroundData, setBackgroundData] = useState(null);\n  const [colorsMap, setColorsMap] = useState(null);\n\n  const [loadingData, setLoadingData] = useState(true);\n  const [loadingBackground, setLoadingBackground] = useState(true);\n\n\n  /**\n   * Marker data loading\n   */\n  useEffect(() => {\n    if (dataFilename) {\n      const dataURL = `${process.env.PUBLIC_URL}/data/${dataFilename}`;\n      get(dataURL)\n        .then(({ data: csvString }) => {\n          const newData = csvParse(csvString);\n\n          setData(newData);\n          setLoadingData(false);\n        })\n        .catch((err) => {\n          setLoadingData(false);\n        })\n    }\n\n  }, [dataFilename])\n\n  /**\n   * Data aggregation for viz (note : could be personalized if we visualize other things than points)\n   */\n  const markerData = useMemo(() => {\n    if (data) {\n      // regroup data by coordinates\n      const coordsMap = {};\n      data.forEach(datum => {\n        const mark = datum.latitude + ',' + datum.longitude;\n        if (!coordsMap[mark]) {\n          coordsMap[mark] = {\n            label: showLabels && label ? datum[label] : undefined,\n            latitude: datum.latitude,\n            longitude: datum.longitude,\n            color: datum[markerColor],\n            size: isNaN(+datum[markerSize]) ? 0 : +datum[markerSize]\n          }\n        } else {\n          coordsMap[mark].size += (isNaN(+datum[markerSize]) ? 0 : +datum[markerSize])\n        }\n      })\n      let grouped = Object.entries(coordsMap).map(([_mark, datum]) => datum);\n      const colorValues = uniq(grouped.map(g => g.color));\n      const palette = generatePalette('map', colorValues.length);\n      const thatColorsMap = colorValues.reduce((res, key, index) => ({\n        ...res,\n        [key]: palette[index]\n      }), {});\n      setColorsMap(thatColorsMap);\n\n      const sizeExtent = extent(grouped.map(g => g.size));\n      const sizeScale = scaleLinear().domain(sizeExtent).range([1, width / 100])\n      grouped = grouped.map(datum => ({\n        ...datum,\n        color: thatColorsMap[datum.color],\n        size: sizeScale(datum.size)\n      }))\n      return grouped;\n    }\n  }, [data, markerColor, markerSize, width])\n\n  /**\n   * Map background data loading\n   */\n  useEffect(() => {\n    if (backgroundFilename) {\n      const backgroundURL = `${process.env.PUBLIC_URL}/data/${backgroundFilename}`;\n      get(backgroundURL)\n        .then(({ data: bgData }) => {\n          setBackgroundData(bgData);\n          setLoadingBackground(false);\n        })\n        .catch((err) => {\n          setLoadingBackground(false);\n        })\n    }\n\n  }, [backgroundFilename])\n\n  /**\n   * d3 projection making\n   */\n  const projection = useMemo(() => {\n    if (backgroundData) {\n      if (centerOnRegion) {\n        return geoEqualEarth()\n        .scale(50000)\n        .center([-1.7475027, 46.573642])\n      }\n      // if bg data is available fit on whole geometry\n      return geoEqualEarth()\n      .fitSize([width, height], backgroundData)\n    }\n    return geoEqualEarth()\n      .scale(200)\n      .translate([width / 2, height / 2])\n  }, [backgroundData, width, height])\n\n\n\n  if (loadingBackground || loadingData) {\n    return (\n      <div>Chargement des donnes ...</div>\n    )\n  } else if (!backgroundData || !data) {\n    return (\n      <div>Erreur ...</div>\n    )\n  }\n\n  return (\n    <div>\n      <svg width={width} height={height} viewBox={`0 0 ${width} ${height}`} style={{ border: '1px solid lightgrey' }}>\n        <g className=\"background\">\n          {\n            backgroundData.features.map((d, i) => {\n              return (\n                <path\n                  key={`path-${i}`}\n                  d={geoPath().projection(projection)(d)}\n                  className=\"geopart\"\n                  fill={`rgba(38,50,56,${1 / backgroundData.features.length * i})`}\n                  stroke=\"#FFFFFF\"\n                  strokeWidth={0.5}\n                />\n              )\n            })\n          }\n        </g>\n        <g className=\"markers\">\n          {\n            markerData\n              .filter(({ latitude, longitude }) => latitude && longitude && !isNaN(latitude) && !isNaN(longitude))\n              .map((datum, index) => {\n                const { latitude, longitude, size, color, label } = datum;\n                const [x, y] = projection([+longitude, +latitude]);\n                return (\n                  <g transform={`translate(${x},${y})`}>\n                    <circle\n                      key={index}\n                      cx={0}\n                      cy={0}\n                      r={size}\n                      fill={color}\n                      className=\"marker\"\n                    />\n                    {\n                      label ? \n                      <text\n                        x={size + 5}\n                        y= {size/2}\n                      >\n                        {label}\n                      </text>\n                      : null\n                    }\n                  </g>\n                );\n              })\n          }\n        </g>\n        {\n          colorsMap ?\n          <g className=\"legend\" transform={`translate(${width * .85}, ${height - (Object.keys(colorsMap).length + 1) * 20})`}>\n            <g>\n              <text style={{fontWeight: 800}}>\n                {markerColor}\n              </text>\n            </g>\n            {\n              Object.entries(colorsMap)\n              .map(([label, color], index) => {\n                return (\n                  <g transform={`translate(0, ${(index + 1) * 20})`}>\n                    <rect\n                      x={0}\n                      y={-8}\n                      width={10}\n                      height={10}\n                      fill={color}\n                    />\n                    <text x={15} y={0}>\n                      {label || 'Indtermin'}\n                    </text>\n                  </g>\n                )\n              })\n            }\n          </g>\n          : null\n        }\n      </svg>\n    </div>\n  )\n}\n\nexport default GeoComponent;\n","import TriangleComponent from './TriangleComponent';\n\nexport default TriangleComponent;","import React, { useState, useEffect, useMemo } from 'react';\nimport { csvParse } from 'd3-dsv';\nimport get from 'axios';\nimport { geoEqualEarth, geoPath } from \"d3-geo\";\nimport { uniq } from 'lodash';\nimport { scaleLinear } from 'd3-scale';\nimport { extent } from 'd3-array';\n\nimport { generatePalette } from '../../helpers/misc';\n\nconst TriangleComponent = ({\n  dataFilename,\n  width = 1200,\n  height = 600\n}) => {\n\n  // raw marker data\n  const [data, setData] = useState(null);\n\n  const [loadingData, setLoadingData] = useState(true);\n\n\n\n  /**\n   * Marker data loading\n   */\n  useEffect(() => {\n    if (dataFilename) {\n      const dataURL = `${process.env.PUBLIC_URL}/data/${dataFilename}`;\n      get(dataURL)\n        .then(({ data: csvString }) => {\n          const newData = csvParse(csvString);\n\n          setData(newData);\n          setLoadingData(false);\n        })\n        .catch((err) => {\n          setLoadingData(false);\n        })\n    }\n\n  }, [dataFilename])\n\n  if (loadingData) {\n    return (\n      <div>Chargement des donnes ...</div>\n    )\n  } else if (!data) {\n    return (\n      <div>Erreur ...</div>\n    )\n  }\n\n  return (\n    <div>\n\n      <svg width={width} height={height} viewBox={`0 0 ${width} ${height}`} style={{ border: '1px solid lightgrey' }}>\n          {\n            data.map((port, index) => {\n              return (\n                <g \n                  transform={`translate(${(index) * (width/data.length)}, ${height * .33 + (index%3)*(height/5)})`}\n                >\n                    <rect\n                        x = {0}\n                        y = {0}\n                    />\n\n                    \n                        \n                {/* <path\n                  key={`path-${i}`}\n                  d={geoPath().projection(projection)(d)}\n                  className=\"geopart\"\n                  fill={`rgba(38,50,56,${1 / backgroundData.features.length * i})`}\n                  stroke=\"#FFFFFF\"\n                  strokeWidth={0.5}\n                /> */}\n                <text> {port.port} </text>\n                    \n                </g>\n              )\n            })\n\n          }\n        \n      </svg>\n\n    </div>\n  )\n\n}\n\nexport default TriangleComponent;","export default __webpack_public_path__ + \"static/media/ports-region-1789.3778ed29.svg\";","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport SvgComponent from '../../components/SvgComponent';\nimport VegaComponent from '../../components/VegaComponent';\nimport SigmaComponent from '../../components/SigmaComponent';\nimport GeoComponent from '../../components/GeoComponent';\nimport TriangleComponent from '../../components/TriangleComponent';\nimport test from './ports-region-1789.svg'\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1>{`Test triangle`}</h1>\n    <TriangleComponent dataFilename=\"part_3-tonnages_per_ports.csv\" mdxType=\"TriangleComponent\" />\n    <h1>{`Commerce multi-chelle dans la rgion de La Rochelle`}</h1>\n    <p>{`Ce site a vocation  monter progressivement les \"storymaps\" issues du datasprint PORTIC 2021.`}</p>\n    <p>{`Voici un tour d'horizon des modules react prpars pour faciliter le dveloppement :`}</p>\n    <h2>{`Image SVG (avec webpack)`}</h2>\n    <p>{`On intgre une image  SVG depuis le local (elle sera donc packe par webpack) :`}</p>\n    <img src={test} />\n    <h2>{`Image SVG (sans webpack)`}</h2>\n    <p>{`On intgre ici directement une image  partir de son URL en ligne (depuis le dossier `}<inlineCode parentName=\"p\">{`public`}</inlineCode>{`)`}</p>\n    <SvgComponent path=\"/svg/ports-region-1789.svg\" mdxType=\"SvgComponent\" />\n    <h2>{`Visualisation vega`}</h2>\n    <p>{`Les visualisations vega ont besoin d'un fichier csv stock dans le dossier `}<inlineCode parentName=\"p\">{`public/data`}</inlineCode>{` et d'une spec vega.`}</p>\n    <VegaComponent data=\"sorties_navires_vers_colonies.csv\" spec={{\n      \"mark\": \"rect\",\n      \"encoding\": {\n        \"x\": {\n          \"field\": \"port_depart\",\n          \"type\": \"nominal\"\n        },\n        \"y\": {\n          \"field\": \"port_destination\",\n          \"type\": \"nominal\"\n        },\n        \"color\": {\n          \"type\": \"quantitative\",\n          \"field\": \"tonnage\",\n          \"aggregate\": \"sum\"\n        }\n      }\n    }} mdxType=\"VegaComponent\" />\n    <h2>{`Rseau avec sigma`}</h2>\n    <p>{`Les visualisations sigma ont besoin d'un fichier gexf stock dans le dossier `}<inlineCode parentName=\"p\">{`public/data`}</inlineCode>{`.`}</p>\n    <p>{`Paramtres :`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`nodeColor`}</inlineCode>{` : attribut pour couleur`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`nodeSize`}</inlineCode>{` : attribut pour taille`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`labelDensity`}</inlineCode>{` : densit des labels (float dans `}{`[0, 1]`}{`)`}</li>\n    </ul>\n    <SigmaComponent data=\"toflit_aggregate_1789_only_out.gexf\" nodeColor={`admiralty`} nodeSize={`inside_degree`} labelDensity={0.5} mdxType=\"SigmaComponent\" />\n    <h2>{`Carto en react+d3+SVG`}</h2>\n    <p>{`Ci-dessous un proto/boilerplate pour rendre du svg + donnes avec la galaxie d3 + du rendu direct en SVG via react.`}</p>\n    <p>{`Cartographie des destination des bateaux aillant un port d'attache dans la rgion, par tonnage cumul (couleur = amiraut) :`}</p>\n    <GeoComponent backgroundFilename=\"cartoweb_france_1789_geojson.geojson\" dataFilename=\"navigo-out-of-ships-from-region.csv\" markerColor=\"pointcall_admiralty\" markerSize=\"tonnage\" label=\"pointcall\" showLabels centerOnRegion mdxType=\"GeoComponent\" />\n    <GeoComponent backgroundFilename=\"cartoweb_france_1789_geojson.geojson\" dataFilename=\"navigo-out-of-ships-from-region.csv\" markerColor=\"pointcall_admiralty\" markerSize=\"tonnage\" mdxType=\"GeoComponent\" />\n    <GeoComponent backgroundFilename=\"cartoweb_france_1789_geojson.geojson\" dataFilename=\"navigo-out-of-ships-from-region.csv\" markerColor=\"pointcall_admiralty\" markerSize=\"tonnage\" label=\"pointcall\" showLabels mdxType=\"GeoComponent\" />\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","\nimport React from 'react';\nimport {Helmet} from 'react-helmet';\n/* eslint-disable import/no-webpack-loader-syntax */\nimport Content from '!babel-loader!@mdx-js/loader!./content.mdx';\n\nfunction Home({match: {\n  params: {lang}\n}}) {\n  return (\n    <div>\n      <Helmet>\n        <title>{lang === 'fr' ? 'Commerce multi-chelle dans la rgion de La Rochelle' : 'Multi-scale trade in La Rochelle region'}</title>\n      </Helmet>\n      <Content />\n    </div>\n  )\n}\n\n// <img src={'../../../public/svg/Ports de la rgion Poitou, Aunis, Saintonge en 1789.svg'} />\nexport default Home;","import Home from './Home';\nexport default Home;\n\n// import Carte from './Ports de la rgion Poitou, Aunis, Saintonge en 1789.svg'\n// export Carte;","\n\nconst Test = ({\n  datasets = {}\n}) => {\n  return(\n    <div className=\"Test\">\n      <div>Coucou, ceci est le composant de la visualisation avec l'id <code>test</code></div>\n      {\n        Object.keys(datasets).length ? \n        <div>\n          <h3>Datasets de la visualisation :</h3>\n          {\n            Object.entries(datasets)\n            .map(([datasetName, values]) => {\n              return (\n              <div key={datasetName}>\n                <h3>{datasetName}</h3>\n                <pre>\n                  <code>\n                    {\n                      JSON.stringify(values, null, 2)\n                    }\n                  </code>\n                </pre>\n              </div>\n              )\n            })\n          }\n        </div>\n        : null\n      }\n    </div>\n    )\n}\n\nexport default Test;","const Loader = ({ percentsLoaded = 0 }) => {\n  return (\n    <div className=\"loader-container\">\n      <div className=\"loader\">\n        <div className=\"loading-bar\" style={{ width: percentsLoaded + '%' }} />\n      </div>\n    </div>\n  )\n}\n\nexport default Loader;","import { max, sortBy, sum } from \"lodash\";\n\nconst MIN_LABEL_SIZE = 0.5;\nconst MAX_LABEL_SIZE = 2.5;\n\n// TODO:\n// - click on products highlight same product on all years ?\n// - click on products make label bigger for small ones ?\n\nexport const ProductsDistributionChart = ({\n  data,\n  field,\n  partTreshold,\n  height,\n  barWidth,\n  labelFirst,\n  color,\n}) => {\n  const totalValue = sum(data.map((d) => +d[field]));\n  let partAcc = 0;\n  // Sort by trade value and keep only the top products which totalizes partTreshold of share\n  const dataTillTreshold = sortBy(data, (d) => -d[field]).filter((d) => {\n    partAcc += +d[field];\n    return partAcc <= partTreshold * totalValue;\n  });\n  // group the long tail of low value (under the part Treshold) products as one aggregated misc\n  const aggregatedMiscProducts = {\n    [field]: totalValue - sum(dataTillTreshold.map((d) => +d[field])),\n    product: `${data.length - dataTillTreshold.length} autre produits`,\n  };\n  dataTillTreshold.push(aggregatedMiscProducts);\n  const maxValue = +dataTillTreshold[0][field];\n\n  const scaleValue = (value) => {\n    const v = (value / totalValue) * height;\n    return v;\n  };\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyItems: \"start\",\n      }}\n    >\n      {dataTillTreshold &&\n        dataTillTreshold.map((d, i) => (\n          <div\n            key={d.product}\n            style={{\n              paddingBottom: \"2px\",\n              boxSizing: \"border-box\",\n              height: `${scaleValue(d[field])}px`,\n              display: \"flex\",\n              alignItems: \"center\",\n              flexDirection: labelFirst ? \"row-reverse\" : \"row\",\n            }}\n          >\n            <div\n              style={{\n                height: \"100%\",\n                width: `${barWidth}px`,\n                backgroundColor: color,\n              }}\n            ></div>\n            <span\n              className=\"label\"\n              style={{\n                float: \"right\",\n                fontSize: `${max([\n                  MAX_LABEL_SIZE * (d[field] / maxValue),\n                  MIN_LABEL_SIZE,\n                ])}rem`,\n                margin: \"0 1rem\",\n              }}\n            >\n              {d.product}\n            </span>\n          </div>\n        ))}\n    </div>\n  );\n};\n","import * as d3 from \"d3\";\nimport { range } from \"lodash\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { ProductsDistributionChart } from \"./ProductsDistributionChart\";\n\n// TODO: refacto fields props to ease exports/Imports switch\n\nconst PRODUCT_TRADE_PART_TRESHOLD = 0.9;\n\nconst LongitudinalTradeChart = ({\n  data,\n  // possible extension\n  productsData,\n  // fields: if null, viz will not show the corresponding data\n  absoluteField,\n  shareField,\n  herfindhalField,\n  // for axes\n  absoluteLabel,\n  shareLabel,\n\n  width,\n  height,\n  productsHeight,\n\n  showProducts,\n}) => {\n  const margin = { top: 20, right: 50, bottom: 30, left: 50 };\n  const xBand = d3\n    .scaleBand()\n    .domain(range(...d3.extent(data.map((d) => +d.year))))\n    .range([margin.left, width - margin.right])\n    .padding(0.1);\n  const herfindhalScale = d3\n    .scaleLinear()\n    .domain(d3.extent(data, (d) => +d[herfindhalField]))\n    .range([0, 0.8]);\n  const svgNode = useRef();\n  useEffect(() => {\n    const svgPath = d3\n      .select(svgNode.current)\n      .attr(\"viewBox\", [0, 0, width, height])\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke-linejoin\", \"round\")\n      .attr(\"stroke-linecap\", \"round\");\n    // clean SVG\n    svgPath.selectAll(\"*\").remove();\n\n    // X AXIS\n\n    const yearDomain = xBand.domain().map((y) => +y);\n    const yearTicks = yearDomain\n      .filter((y) => y % 5 === 0 && y !== 1790)\n      .concat([1789]);\n    const xAxis = (g) =>\n      g\n        .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n        .call(d3.axisBottom(xBand).tickValues(yearTicks).tickSizeOuter(0));\n\n    svgPath.append(\"g\").call(xAxis);\n\n    if (data.length > 0) {\n      // LINE PATH FOR ABSOLUTE\n      // Y AXIS\n      const yAbsolute = d3\n        .scaleLinear()\n        .domain([0, d3.max(data, (d) => +d[absoluteField])])\n        .nice()\n        .range([height - margin.bottom, margin.top]);\n      const absoluteYAxis = (g) =>\n        g\n          .attr(\"transform\", `translate(${width - margin.right},0)`)\n          .call(d3.axisRight(yAbsolute))\n          .call((g) => g.select(\".domain\").remove())\n          .call((g) =>\n            g\n              .select(\".tick:last-of-type text\")\n              .clone()\n              .attr(\"x\", 3)\n              .attr(\"text-anchor\", \"start\")\n              .attr(\"font-weight\", \"bold\")\n              .text(absoluteLabel)\n          );\n      svgPath.append(\"g\").call(absoluteYAxis);\n      // RECT for share series\n      // Y AXIS\n      const yShare = d3\n        .scaleLinear()\n        .domain([0, d3.max(data, (d) => +d[shareField])])\n        .nice()\n        .range([height - margin.bottom, margin.top]);\n      const shareYAxis = (g) =>\n        g\n          .attr(\"transform\", `translate(${margin.left},0)`)\n          .call(d3.axisLeft(yShare))\n          .call((g) => g.select(\".domain\").remove())\n          .call((g) =>\n            g\n              .select(\".tick:last-of-type text\")\n              .clone()\n              .attr(\"x\", 3)\n              .attr(\"text-anchor\", \"start\")\n              .attr(\"font-weight\", \"bold\")\n              .text(shareLabel)\n          );\n      svgPath.append(\"g\").call(shareYAxis);\n      // BARS\n\n      svgPath\n        .append(\"g\")\n        .selectAll(\"rect\")\n        .data(data)\n        .join(\"rect\")\n        .attr(\"fill\", (d) =>\n          herfindhalField && d[herfindhalField]\n            ? d3.rgb(200, 50, 0, herfindhalScale(+d[herfindhalField]))\n            : \"lightgrey\"\n        )\n        .attr(\"x\", (d) => xBand(+d.year))\n        .attr(\"y\", (d) => yShare(d[shareField]))\n        .attr(\"height\", (d) => yShare(0) - yShare(d[shareField]))\n        .attr(\"width\", xBand.bandwidth());\n      // LINE\n      const line = d3\n        .line()\n        .defined((d) => d[absoluteField] !== \"\")\n        .x((d) => xBand(+d.year) + xBand.bandwidth() / 2)\n        .y((d) => yAbsolute(+d[absoluteField]));\n\n      svgPath\n        .append(\"path\")\n        .datum(data)\n        .attr(\"stroke\", \"steelblue\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"d\", line);\n    }\n  }, [data, svgNode]);\n\n  //TODO: make that a prop or a config\n  const productVizHeight = productsHeight || height;\n\n  // pass herfindhal for products chart color\n  const her1750 = (data.filter((d) => d.year === \"1750\")[0] || {})[\n    herfindhalField\n  ];\n  const her1789 = (data.filter((d) => d.year === \"1789\")[0] || {})[\n    herfindhalField\n  ];\n\n\n  return (\n    <>\n      <svg ref={svgNode} width={width} height={height}></svg>\n      {/* TODO: make year display generic peeking what's in the data ? */}\n      {productsData && showProducts && (\n        <div\n          style={{\n            position: \"relative\",\n            height: productVizHeight,\n            width: `${width}px`,\n            textAlign: \"center\",\n          }}\n        >\n          <div\n            style={{\n              position: \"absolute\",\n              right: width - xBand(1750) - xBand.bandwidth(),\n            }}\n          >\n            <ProductsDistributionChart\n              data={productsData.filter((d) => d.year === \"1750\")}\n              field=\"Exports\"\n              partTreshold={PRODUCT_TRADE_PART_TRESHOLD}\n              height={productVizHeight}\n              barWidth={xBand.bandwidth()}\n              color={\n                her1750\n                  ? d3.rgb(200, 50, 0, herfindhalScale(+her1750))\n                  : \"lightgrey\"\n              }\n              labelFirst={true}\n            />\n          </div>\n\n          <div style={{ position: \"absolute\", left: xBand(1789) }}>\n            <ProductsDistributionChart\n              data={productsData.filter((d) => d.year === \"1789\")}\n              field=\"Exports\"\n              partTreshold={PRODUCT_TRADE_PART_TRESHOLD}\n              height={productVizHeight}\n              barWidth={xBand.bandwidth()}\n              color={\n                her1789\n                  ? d3.rgb(200, 50, 0, herfindhalScale(+her1789))\n                  : \"lightgrey\"\n              }\n            />\n          </div>\n          <h4>\n            Noms des produits totalisant {PRODUCT_TRADE_PART_TRESHOLD * 100}% du\n            commerce{\" \"}\n          </h4>\n        </div>\n      )}\n    </>\n  );\n};\nexport default LongitudinalTradeChart;\n","import DeclineComponent from './DeclineComponent';\n\nexport default DeclineComponent;","import axios from \"axios\";\nimport { csvParse } from \"d3-dsv\";\nimport { useEffect, useState } from \"react\";\nimport cx from 'classnames';\nimport Loader from \"../Loader/Loader\";\nimport LongitudinalTradeChart from \"./LongitudinalTradeChart\";\n\nimport './DeclineComponent.scss';\nimport { ProductsDistributionChart } from \"./ProductsDistributionChart\";\n\nconst DeclineComponent = (props) => {\n  const {width, height, step = 1} = props;\n  const [longitudinalData, setLongitudinalData] = useState([]);\n  const [productsData, setProductsData] = useState([]);\n  const [loadingLR, setLoadingLR] = useState(true);\n  const [error, setError] = useState(null);\n\n  // @todo refactor by using the 'datasets' prop if avilable (finally we collect all datasets upstream)\n  useEffect(() => {\n    setLoadingLR(true);\n    axios\n      .get(`${process.env.PUBLIC_URL}/data/decline_longitudinal_data.csv`)\n      .then((response) => {\n        const data = csvParse(response.data);\n        setLongitudinalData(data);\n        setLoadingLR(false);\n      })\n      .catch((err) => {\n        setLoadingLR(false);\n        setError(err.toString());\n      });\n    axios\n      .get(`${process.env.PUBLIC_URL}/data/decline_LR_products.csv`)\n      .then((response) => {\n        const data = csvParse(response.data);\n        setProductsData(data);\n        setLoadingLR(false);\n      })\n      .catch((err) => {\n        setLoadingLR(false);\n        setError(err.toString());\n      });\n  }, []);\n\n  const thirdHeight = height/3 - 20;\n  const halfHeight = height/2 - 20;\n  return (\n    <>\n      {error ? (\n        <div>{error}</div>\n      ) : (\n        <div className=\"DeclineComponent\">\n          <div>\n            {loadingLR && (\n              <Loader message=\"Chargement des donnes de La Rochelle\" />\n            )}\n          </div>\n          <div className={cx(\"viz-1-step\", {'is-visible': step === 1})}>\n            <div>France</div>\n            <LongitudinalTradeChart\n              width={width}\n              height={step < 3 ? thirdHeight : halfHeight}\n              data={longitudinalData.filter((d) => d.region === \"France\")}\n              absoluteField=\"Exports\"\n            />\n          </div>\n\n          <div className={cx(\"viz-1-step\", {'is-visible': step < 3})}>\n            <div>Bordeaux</div>\n            <LongitudinalTradeChart\n              width={width}\n              height={step < 2 ? thirdHeight : halfHeight}\n              data={longitudinalData.filter((d) => d.region === \"Bordeaux\")}\n              absoluteField=\"Exports\"\n              shareField=\"Exports_share\"\n              herfindhalField=\"product_revolutionempire_exports_herfindahl\"\n            />\n          </div>\n          <div className={cx(\"viz-1-step\", {'is-visible': true})}>\n            <div>La Rochelle</div>\n            <LongitudinalTradeChart\n              width={width}\n              height={step < 2 ? thirdHeight : halfHeight}\n              productsHeight={halfHeight - 20}\n              data={longitudinalData.filter((d) => d.region === \"La Rochelle\")}\n              productsData={productsData}\n              absoluteField=\"Exports\"\n              shareField=\"Exports_share\"\n              herfindhalField=\"product_revolutionempire_exports_herfindahl\"\n              showProducts={step >= 3}\n            />\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default DeclineComponent;\n","import Decline from '../components/DeclineComponent';\n\nconst PrincipalVisualizationPart1 = ({width, height, ...props}) => {\n  return <Decline {...{width, height, ...props}} />\n}\n\nexport default PrincipalVisualizationPart1;","import {useMemo, useState} from 'react';\nimport {scaleLinear} from 'd3-scale';\nimport {\n  schemeAccent as colorScheme1,\n  schemeDark2 as colorScheme2,\n  schemePaired as colorScheme3\n} from 'd3-scale-chromatic';\nimport cx from 'classnames';\n\nimport {prepareAlluvialData} from './utils';\n\nimport './CircularAlluvialComponent.scss';\nimport { min } from 'd3-array';\nimport { uniq } from 'lodash-es';\n\nconst colorSchemes = [colorScheme1, colorScheme2, colorScheme3]\n\n\nconst CircularAlluvialComponent = ({\n  data : inputData = [],\n  sumBy,\n  steps,\n  width=1200,\n  height=800,\n  filters = []\n}) => {\n  const [highlightedFlow, setHighlightedFlow] = useState(undefined);\n  const [highlightedFilter, setHighlightedFilter] = useState(undefined);\n  const data = useMemo(() => {\n    const vizData = prepareAlluvialData(inputData, {sumBy, steps});\n    return vizData;\n  }, [inputData]);\n\n  const colorScales = useMemo(() => {\n    const modalitiesMap = data.reduce((cur, datum) => {\n      const ids = uniq(datum.nodes.map(node => node.id));\n      return {\n        ...cur, \n        [datum.field]: cur[datum.field] ? uniq([...cur[datum.field], ...ids]) : ids\n      }\n    }, {});\n    return Object.entries(modalitiesMap).reduce((cur, [field, values], fieldIndex) => {\n      let counter = 0;\n      return {\n        ...cur,\n        [field]: values.reduce((m, value) => {\n          /*if (counter > colorScheme.length - 2) {\n            counter = 0;\n          } else*/ counter ++;\n          return {...m, [value]: colorSchemes[fieldIndex][counter - 1]}\n        }, {})\n      }\n    }, {})\n  }, data);\n\n  const smallestDimension = useMemo(() => {\n    return min([width, height])\n  }, [width, height])\n\n  const BAR_SIZE = smallestDimension * .33;\n  const BAR_WIDTH = smallestDimension / 50;\n  // margin for double bars\n  const HORIZONTAL_MARGIN = smallestDimension * .15;\n  const textScale = scaleLinear().range([smallestDimension / 100, smallestDimension / 50]).domain([0, 1])\n  const handleMouseOut = () => {\n    setHighlightedFlow(undefined);\n    setHighlightedFilter(undefined);\n  }\n  const stepScales = {\n    0: {\n        orientation: 'horizontal',\n        direction: 'top',\n        displaceX: 0,\n        displaceY: smallestDimension / 2 - HORIZONTAL_MARGIN / 2,\n        displaceText: HORIZONTAL_MARGIN * .2\n    },\n    1: {\n      orientation: 'vertical',\n      displaceX: smallestDimension /2,\n      displaceY: 0,\n    },\n    2: {\n      orientation: 'horizontal',\n      displaceX: smallestDimension - BAR_SIZE,\n      displaceY: smallestDimension / 2 - HORIZONTAL_MARGIN / 2,\n      displaceText: HORIZONTAL_MARGIN * .2,\n      direction: 'top'\n    },\n    3: {\n      orientation: 'horizontal',\n      displaceX: smallestDimension - BAR_SIZE,\n      displaceY: smallestDimension / 2 + HORIZONTAL_MARGIN / 2,\n      displaceText: 0,\n      direction: 'bottom',\n    },\n    4: {\n      orientation: 'vertical',\n      displaceX: smallestDimension /2,\n      displaceY: smallestDimension - BAR_SIZE,\n    },\n    5: {\n      orientation: 'horizontal',\n      displaceY: smallestDimension / 2 + HORIZONTAL_MARGIN / 2,\n      displaceX: 0,\n      displaceText: 0,\n      direction: 'bottom'\n    }\n  }\n  return (\n    <>\n      <svg width={width} height={height} className={cx(\"CircularAlluvialComponent\", {'has-filters': filters.length, 'has-highlight': highlightedFlow ||highlightedFilter})}>\n        <g className=\"background-marks\">\n          <line x1={0} x2={width} y1={height/2} y2={height/2} />\n          <circle\n            cx={width /2}\n            cy={ height / 2}\n            r={smallestDimension * .5}\n          />\n          <text\n            x={HORIZONTAL_MARGIN}\n            y={height/2 - HORIZONTAL_MARGIN /2 + BAR_WIDTH}\n          >\n            EXPORTS\n          </text>\n          <text\n            x={HORIZONTAL_MARGIN}\n            y={height/2 + HORIZONTAL_MARGIN /2 + BAR_WIDTH}\n          >\n            IMPORTS\n          </text>\n        </g>\n        <g transform={`translate(${width / 2 - smallestDimension / 2}, 0)`} onMouseOut={handleMouseOut}>\n          {\n            data\n            .map((step, stepIndex) => {\n              const {orientation, direction, displaceX, displaceY, displaceText} = stepScales[stepIndex];\n              let nodesSizeScale = scaleLinear().domain([0, 1]).range([0,  BAR_SIZE]);\n              return (\n                <g \n                  className={cx(\"step-container\", 'is-oriented-' + orientation)}\n                  key={stepIndex}\n                >\n                  <rect\n                    x={displaceX}\n                    y={displaceY}\n                    width={orientation === 'vertical' ? BAR_WIDTH : BAR_SIZE}\n                    height={orientation === 'vertical' ? BAR_SIZE : BAR_WIDTH}\n                    fill=\"white\"\n                    className=\"step-bar-background\"\n                  />\n                  {\n                    /** for each node display links to next */\n\n                    step.nodes\n                    .map((node, nodeIndex) => {\n                      return (\n                        <g \n                          className={cx(\"links-group\")} \n                          key={nodeIndex}\n                        >\n                          {\n                            node.flows\n                            .filter(f => f.nextPosition)\n                            .map((flow, linkIndex) => {\n                              const handleMouseOver = () => {\n                                if (highlightedFilter) {\n                                  setHighlightedFilter(undefined);\n                                }\n                                setHighlightedFlow(flow);\n                              }\n                              const nextStepScales  = stepScales[stepIndex + 1];\n\n                              let x1 = displaceX + BAR_WIDTH;\n                              let y1 = displaceY + nodesSizeScale(flow.displacePart);\n                              \n                              let x2 = nextStepScales.displaceX //+ stepXScale(stepIndex + 1);\n                              let y2 = nextStepScales.displaceY + nodesSizeScale(flow.nextPosition.displacePart);\n                              \n                              let x3 = nextStepScales.displaceX // + stepXScale(stepIndex + 1);\n                              let y3 = nextStepScales.displaceY + nodesSizeScale(flow.nextPosition.displacePart) + nodesSizeScale(flow.valuePart);\n                              \n                              let y4 = displaceY + nodesSizeScale(flow.displacePart) + nodesSizeScale(flow.valuePart);\n                              let x4 = displaceX + BAR_WIDTH;\n                              \n                              if (orientation === 'horizontal') {\n                                x1 = displaceX + nodesSizeScale(flow.displacePart);;\n                                y1 = displaceY + (direction === 'bottom' ? BAR_WIDTH : 0);\n                                y4 = displaceY + (direction === 'bottom' ? BAR_WIDTH : 0);\n                                x4 = displaceX + nodesSizeScale(flow.displacePart) + nodesSizeScale(flow.valuePart);\n                              }\n                              if (nextStepScales.orientation === 'horizontal') {\n                                x3 = nextStepScales.displaceX + nodesSizeScale(flow.nextPosition.displacePart);\n                                y2 = nextStepScales.displaceY + (nextStepScales.direction === 'bottom' ? BAR_WIDTH : 0);\n                                y3 = nextStepScales.displaceY + (nextStepScales.direction === 'bottom' ? BAR_WIDTH : 0);\n                                x2 = nextStepScales.displaceX +  nodesSizeScale(flow.nextPosition.displacePart) +  nodesSizeScale(flow.valuePart)\n                              }\n                              // @todo do this cleaner\n                              if (stepIndex === 3) {\n                                x2 += BAR_WIDTH;\n                                x3 += BAR_WIDTH;\n                              }\n                              if (stepIndex === 4) {\n                                x1 -= BAR_WIDTH;\n                                x4 -= BAR_WIDTH;\n                              }\n                              let controlPoint1X = x1,\n                                controlPoint1Y = y2,\n                                controlPoint2X = x4,\n                                controlPoint2Y = y3;\n                              if (stepIndex === 1 || stepIndex === 4) {\n                                controlPoint1X = x2;\n                                controlPoint1Y = y1;\n                                controlPoint2X = x3;\n                                controlPoint2Y = y4;\n                              }\n                              return (\n                                <g \n                                  onMouseOver={handleMouseOver} \n                                  className={cx(\"flow-link\", {\n                                    'is-filtered-in': filters && filters.find(({key, value}) => flow[key] === value),\n                                    'is-highlighted': (highlightedFlow && highlightedFlow._id === flow._id) ||\n                                    (highlightedFilter && flow[highlightedFilter.key] === highlightedFilter.value)\n                                  })} \n                                  key={linkIndex}\n                                >\n                                  {/* <polygon \n                                    points={`\n                                    ${x1},${y1} \n                                    ${x2}, ${y2} \n                                    ${x3} ${y3}\n                                    ${x4},${y4} \n                                    `}\n                                    title={'Valeur : ' + flow.valueAbs}\n                                  /> */}\n                                  <path \n                                    d={`\n                                    M ${x1} ${y1} \n                                    Q ${controlPoint1X} ${controlPoint1Y}, ${x2} ${y2} \n                                    L ${x3} ${y3}\n                                    Q ${controlPoint2X} ${controlPoint2Y}, ${x4} ${y4} \n                                    Z\n                                    `.trim().replace(/\\n/g, ' ')}\n                                    title={'Valeur : ' + flow.valueAbs}\n                                    style={{fill: colorScales[step.field][node.id]}}\n                                  />\n                                </g>\n                              )\n                            })\n                          }\n                        </g>\n                      )\n                    })\n                  }\n                  {\n                    step.nodes.map((node, nodeIndex) => {\n                      const nodeHeight = nodesSizeScale(node.valuePart);\n                      const initialY = nodesSizeScale(node.displacePart);\n                      const initialWidth = BAR_WIDTH;\n                      const initialHeight = nodeHeight - 2;\n\n                      let y = displaceY + initialY;\n                      let x = displaceX;\n                      let nodeWidth = initialWidth;\n                      let actualHeight = initialHeight;\n                      if (orientation === 'horizontal') {\n                        nodeWidth = initialHeight;\n                        actualHeight = initialWidth;\n                        x = displaceX + initialY;\n                        y = displaceY;\n                      }\n                      const handleMouseOver = () => {\n                        if (highlightedFlow) {\n                          setHighlightedFlow(undefined);\n                        }\n                        setHighlightedFilter({key: step.field, value: node.id})\n                      }\n                      return (\n                        <g \n                          className={cx(\"step-node-container\", {\n                            'has-highlights': (highlightedFlow && node.flows.find(flow => flow._id === highlightedFlow._id)) || \n                            (highlightedFilter && step.id === highlightedFilter.key && node.id === highlightedFilter.value),\n                            'is-highlighted':  (highlightedFilter && step.field === highlightedFilter.key && node.id === highlightedFilter.value),\n                        })} \n                          key={node.id}\n                          onMouseOver={handleMouseOver}\n                        >\n                          <rect\n                            x={x}\n                            y={y}\n                            width={nodeWidth}\n                            height={actualHeight}\n                            className=\"node-level-node\"\n                          />\n                          <g\n                            transform={`\n                            translate(${orientation === 'vertical' ? x + BAR_WIDTH * 2 : x + nodeWidth / 2}, ${orientation === 'vertical' ? y + actualHeight / 2 : y + displaceText})\n                            rotate(${orientation === 'vertical' ? 0 : direction === 'bottom' ? -45 : 45})\n                          `}\n\n                            className={\n                              cx(\"node-level-label\", {\n                                'is-filtered-in': filters && filters.find(({key, value}) => node.flows.find(flow => flow[key] === value)),\n                                'is-highlighted':  (highlightedFilter && node.id === highlightedFilter.value)\n                              })\n                            }\n                          >\n                            <text\n                              style={{\n                                fontSize: textScale(node.valuePart)\n                              }}\n                            >\n                              {node.id.split('(')[0]}\n                            </text>\n                          </g>\n                          {\n                            node.flows.map((flow, flowIndex) => {\n                              let flowX = x;\n                              let flowY = displaceY + nodesSizeScale(flow.displacePart);\n                              let flowWidth = BAR_WIDTH;\n                              let flowHeight = nodesSizeScale(flow.valuePart);\n                              if (orientation === 'horizontal') {\n                                flowWidth = nodesSizeScale(flow.valuePart);\n                                flowHeight = BAR_WIDTH;\n                                flowX = displaceX + nodesSizeScale(flow.displacePart);\n                                flowY = displaceY;\n                              }\n                              return (\n                                <rect\n                                  key={flowIndex}\n                                  x={flowX}\n                                  y={flowY}\n                                  width={flowWidth}\n                                  height={flowHeight}\n                                  className={\n                                    cx(\"flow-level-node\", {\n                                      'is-filtered-in': filters && filters.find(({key, value}) => flow[key] === value),\n\n                                      'is-highlighted': (highlightedFlow && highlightedFlow._id === flow._id)\n                                      // || (highlightedFilter && flow[highlightedFilter.key] === highlightedFilter.value)\n                                    })\n                                  }\n                                  style={{fill: colorScales[step.field][node.id]}}\n                                  title={node.id}\n                                />\n                              )\n                            })\n                          }\n                        </g>\n                      )\n                    })\n                  }\n                  \n                </g>\n              )\n            })\n          }\n        </g>\n        \n      </svg>\n      {\n        highlightedFlow ?\n        <div style={{\n          position:'absolute',\n          left: smallestDimension/10,\n          top: 0,\n          maxWidth: smallestDimension / 4,\n          fontSize: '.8rem'\n        }}>\n            Flux affich : {highlightedFlow.flow_type} de {highlightedFlow.product} {highlightedFlow.flow_type === 'export' ? 'vers' : 'depuis'} {highlightedFlow.partner} (valeur : {highlightedFlow[sumBy]})\n        </div>\n        : null\n      }\n      </>\n  )\n}\n\nexport default CircularAlluvialComponent;","import groupBy from 'lodash/groupBy';\n\nexport const prepareAlluvialData = (inputData, spec) => {\n  const {sumBy, steps: stepsSpec} = spec;\n  // attribute an id to each flow\n  const data = inputData.map((d, index) => ({...d, _id: index}))\n  // compute nodes for each step\n  let steps = stepsSpec.map((step, stepIndex) => {\n    const {filters} = step;\n    let stepData = data;\n    if (filters && filters.length) {\n      // filter relevant flows\n      stepData = filters.reduce((current, {key, value}) => {\n        return current.filter(datum => {\n          return datum[key] === value;\n        })\n      }, stepData);\n    }\n    // count values for spec modalities\n    let groups = groupBy(stepData, d => d[step.field]);\n    groups = Object.entries(groups).map(([id, initialFlows]) => {\n      const flows = initialFlows.map(flow => {\n        let valueAbs;\n        // if a sumBy is define with sum with its value\n        if (sumBy) {\n          let actualValue = flow[sumBy];\n          actualValue = actualValue === '' ? 0 : actualValue;\n          valueAbs = +actualValue\n        } else valueAbs = 1;\n        return {\n          ...flow,\n          valueAbs\n        }\n      })\n      const valueAbs = flows.reduce((sum, flow) => {\n        return sum + flow.valueAbs\n      }, 0);\n      return {\n        id,\n        valueAbs,\n        flows\n      }\n    });\n    // compute relative part of each modality\n    const totalValue = groups.reduce((sum, g) => sum + g.valueAbs, 0);\n    groups = groups.map(g => ({\n      ...g,\n      valuePart: g.valueAbs / totalValue,\n      flows: g.flows.map(flow => ({\n        ...flow,\n        valuePart: flow.valueAbs / totalValue\n      }))\n      .sort((a, b) => {\n        // if (a.id > b.id) {\n        if (a.valuePart < b.valuePart) {\n          return 1;\n        }\n        return -1;\n      })\n    }));\n    return {\n      ...step,\n      totalValue,\n      nodes: groups.sort((a, b) => {\n        // if (a.id > b.id) {\n        if (a.valuePart < b.valuePart) {\n          return 1;\n        }\n        return -1;\n      })\n    }\n  })\n\n  // compute displacements for each step\n  steps = steps.map((step, index) => {\n    let displaceAbs = 0;\n    let displacePart = 0;\n    const newNodes = step.nodes.map(node => {\n      // computing flow-level displacement\n      let localDisplaceAbs = displaceAbs;\n      let localDisplacePart = displacePart;\n      const newNode = {\n        ...node,\n        displaceAbs,\n        displacePart,\n        flows: node.flows.map(flow => {\n          const newFlow = {\n            ...flow,\n            displaceAbs: localDisplaceAbs,\n            displacePart: localDisplacePart,\n            relativeDisplaceAbs: localDisplaceAbs - displaceAbs,\n            relativeDisplacePart: localDisplacePart - displacePart\n          }\n          localDisplaceAbs += flow.valueAbs;\n          localDisplacePart += flow.valuePart;\n          return newFlow;\n        })\n      };\n      displaceAbs += node.valueAbs;\n      displacePart += node.valuePart;\n      return newNode;\n    })\n    return {\n      ...step,\n      nodes: newNodes\n    }\n  })\n\n  // compute links\n  const stepsWithLinks = steps.map((step, index) => {\n    // for each step except last one\n    if (index < steps.length - 1) {\n      const nextStep = steps[index + 1];\n      const nextKey = nextStep.field;\n      const {nodes} = step;\n      // iterate over step's to add links\n      const newNodes = nodes.map((node, nodeIndex) => {\n        \n        const {flows} = node;\n        \n        const newFlows = flows.map((flow, flowIndex) => {\n          const nextVal = flow[nextKey];\n          const nextStepGroup = nextStep.nodes.find(({id}) => id === nextVal);\n          if (nextStepGroup) {\n            \n            const nextFlow = nextStepGroup.flows.find(flow2 => {\n              return (flow._id === flow2._id)\n            })\n            if (nextFlow) {\n              const {\n                displaceAbs,\n                displacePart,\n                relativeDisplaceAbs,\n                relativeDisplacePart\n              } = nextFlow;\n              const nextPosition = {\n                displaceAbs,\n                displacePart,\n                relativeDisplaceAbs,\n                relativeDisplacePart\n              }\n              return {\n                ...flow,\n                nextPosition\n              }\n            }\n          } else {\n          }\n          return flow;\n        })\n        return {\n          ...node,\n          flows: newFlows\n        }\n      });\n      return {\n        ...step,\n        nodes: newNodes\n      }\n    }\n    return step;\n  })\n\n  return stepsWithLinks;\n}","import PrincipalVisualizationPart2 from './PrincipalVisualizationPart2';\n\n\nexport default PrincipalVisualizationPart2;","import CircularAlluvialComponent from \"../../components/CircularAlluvialComponent/CircularAlluvialComponent\";\n\nimport './PrincipalVisualizationPart2.scss';\n\nconst PrincipalVisualizationPart2 = ({width, height, datasets, ...props}) => {\n  const {step} = props;\n  let alluvialFilters = [];\n  switch(step) {\n    case 2:\n      alluvialFilters = [\n        {\n          key: 'product',\n          value: `produit colonial ('Caf', 'Sucre', 'Indigo', 'Coton non transform')`\n        },\n        {\n          key: 'partner',\n          value: `Afrique`\n        },\n        {\n          key: 'partner',\n          value: `Colonies`\n        }\n      ];\n      break;\n    case 3:\n      alluvialFilters = [\n        {\n          key: 'product',\n          value: `eau-de-vie et vins divers`\n        }\n      \n      ];\n      break;\n    case 4:\n      alluvialFilters = [{\n        key: 'product',\n        value: `sel`\n      }];\n      break;\n    default:\n      break;\n  }\n  return (\n    <div className=\"PrincipalVisualizationPart2\">\n     <div>\n        <CircularAlluvialComponent\n          data={datasets['part_2_toflit_viz_data.csv']}\n          width={width}\n          height={height}\n          sumBy=\"value\"\n          filters={alluvialFilters}\n          steps={[\n            {\n              field: \"customs_office\",\n              labels: {\n                fr: 'bureau des fermes',\n                en: 'customs office'\n              },\n              filters: [{key: 'flow_type', value: 'export'}]\n            },\n            {\n              field: \"product\",\n              labels: {\n                fr: 'type de produit',\n                en: 'product type'\n              },\n              filters: [{key: 'flow_type', value: 'export'}]\n            },\n            {\n              field: \"partner\",\n              labels: {\n                fr: 'partenaire du commerce extrieur',\n                en: 'external trade partner'\n              },\n              filters: [{key: 'flow_type', value: 'export'}]\n            },\n            {\n              field: \"partner\",\n              labels: {\n                fr: 'partenaire du commerce extrieur',\n                en: 'external trade partner'\n              },\n              filters: [{key: 'flow_type', value: 'import'}]\n            },\n            {\n              field: \"product\",\n              labels: {\n                fr: 'type de produit',\n                en: 'product type'\n              },\n              filters: [{key: 'flow_type', value: 'import'}]\n            },\n            {\n              field: \"customs_office\",\n              labels: {\n                fr: 'bureau des fermes',\n                en: 'customs office'\n              },\n              filters: [{key: 'flow_type', value: 'import'}]\n            },\n          ]}\n        />\n     </div>\n     <div>\n       Radar  venir ici\n     </div>\n    </div>\n  )\n}\n\nexport default PrincipalVisualizationPart2;","\n\nconst PrincipalVisualizationPart3 = () => {\n  return (\n    <div>\n      Ceci est le composant de la visualisation principale n3\n    </div>\n  )\n}\n\nexport default PrincipalVisualizationPart3;","import {useContext, useMemo} from 'react';\n\nimport Test from './Test';\nimport PrincipalVisualizationPart1 from './PrincipalVisualizationPart1';\nimport PrincipalVisualizationPart2 from './PrincipalVisualizationPart2';\nimport PrincipalVisualizationPart3 from './PrincipalVisualizationPart3';\n\n\nimport {DatasetsContext} from '../helpers/contexts';\n\nimport visualizationsList from '../visualizationsList';\n\nconst VisualizationContainer = ({id, dimensions, ...props}) => {\n  const datasets = useContext(DatasetsContext);\n  const relevantDatasets = useMemo(() => {\n    const viz = visualizationsList.find(v => v.id === id);\n    if (viz) {\n      const datasetsIds = viz.datasets && viz.datasets.split(',').map(d => d.trim());\n      if (datasetsIds.length && datasets) {\n        return datasetsIds.reduce((cur, id) => ({\n          ...cur,\n          [id]: datasets[id]\n        }), {})\n      }\n    }\n  }, [id, datasets]);\n  switch(id) {\n    case 'viz-principale-partie-1':\n      return <PrincipalVisualizationPart1 {...props} datasets={relevantDatasets || {}} {...dimensions} />;\n    case 'viz-principale-partie-2':\n      return <PrincipalVisualizationPart2 {...props} datasets={relevantDatasets || {}} {...dimensions} />;\n    case 'viz-principale-partie-3':\n      return <PrincipalVisualizationPart3 {...props} datasets={relevantDatasets || {}} {...dimensions} />;\n    case 'test':\n    default:\n      return <Test {...props} datasets={relevantDatasets || {}} />;\n  }\n}\n\nexport default VisualizationContainer;","import React from 'react';\nimport {useHistory} from 'react-router-dom';\nimport cx from 'classnames';\n\nimport VisualizationContainer from '../../visualizations/index.js';\n// charger le json de la liste des visualisations de l'atlas\nimport visualizations from '../../visualizationsList';\n\nconst VisualizationFocus = ({visualization, lang}) => {\n  return (\n    <div className=\"VisualizationFocus\">\n      <h2>Visualisation en lightbox : {visualization[`titre_${lang}`]}</h2>\n      <VisualizationContainer id={visualization.id} />\n    </div>\n  )\n}\n\nconst visualizationsMap = visualizations.reduce((res, visualization) => ({\n  ...res,\n  [visualization.id]: visualization\n}), {})\n\nfunction Atlas({\n  match: {\n    params: {\n      visualizationId,\n      lang\n    }\n  }\n}) {\n  const history = useHistory();\n  const shownVisualization = visualizationId && visualizationsMap[visualizationId];\n  return (\n  <div>\n    <h1>Atlas</h1>\n    <ul>\n      {\n        visualizations.map((visualization, visualizationIndex) => {\n          const handleClick = () => {\n            history.push({\n              pathname: `/${lang}/atlas/${visualization.id}`\n            })\n          }\n          return (\n            <li \n              className={cx({'is-active': shownVisualization && shownVisualization.id === visualization.id})} \n              onClick={handleClick} \n              key={visualizationIndex}\n            >\n              {visualization[`titre_${lang}`]}\n            </li>\n          )\n        })\n      }\n    </ul>\n    {\n      shownVisualization ?\n        <VisualizationFocus visualization={shownVisualization} lang={lang} />\n      : null\n    }\n  </div>\n  );\n}\n\nexport default Atlas;","import Atlas from './Atlas';\n\nexport default Atlas;","import HeaderNav from './HeaderNav';\n\nexport default HeaderNav;","import React from 'react';\nimport {useLocation} from 'react-router-dom';\nimport {NavLink as Link} from 'react-router-dom'; \n\nconst HeaderNav = ({\n  routes,\n  onLangChange,\n}) => {\n  const location = useLocation();\n  const paramsLang = location && location.match && location.match.params && location.match.params.lang;\n  let lang = 'fr';\n  if (paramsLang) {\n    lang = paramsLang;\n  } else if (location.pathname.includes('/en/')) {\n    lang = 'en';\n  }\n  return (\n    <nav>\n      <ul>\n          <li className=\"navitem-container\">\n                  <Link to={'/'}>\n                    {lang === 'fr' ? 'Accueil': 'Home'}\n                  </Link>\n          </li>\n          {\n            routes.map(({titles, routes: inputRoute}, index) => {\n              const route = `/${lang}/page/${inputRoute[lang]}`\n              return (\n                <li key={index} className=\"navitem-container\">\n                  <Link to={route}>\n                    {titles[lang]}\n                  </Link>\n                </li>\n              )\n              })\n          }\n          <li className=\"navitem-container\">\n            <Link to={`/${lang}/atlas`}>\n              Atlas\n            </Link>\n          </li>\n          <li className=\"lang-toggle\">\n            <button \n              className={lang === 'fr' ? 'is-active': ''}\n              onClick={() => onLangChange('fr')}\n            >fr</button>\n            <button\n              className={lang === 'en' ? 'is-active': ''}\n              onClick={() => onLangChange('en')}\n            >en</button>\n          </li>\n        </ul>\n    </nav>\n  )\n}\n\nexport default HeaderNav;","import PlainPage from './PlainPage';\n\nexport default PlainPage;","import {Suspense} from 'react';\nimport {Helmet} from \"react-helmet\";\n\nconst PlainPage = ({\n  Content,\n  contentsURL,\n  title,\n}) => {\n  return (\n    <div className=\"PlainPage\">\n      <Helmet>\n        <title>{title}</title>\n      </Helmet>\n      <Suspense fallback={<div>Chargement</div>}>\n        <Content />\n      </Suspense>\n  </div>\n  )\n}\n\nexport default PlainPage;","import VisualizationController from './VisualizationController';\n\nexport default VisualizationController;","import {useState} from 'react';\nimport omit from 'lodash/omit';\nimport Measure from 'react-measure'\n\nimport VisualizationContainer from '../../visualizations/index.js';\n\nconst VisualizationController = ({\n  activeVisualization\n}) => {\n  const [dimensions, setDimensions] = useState({});\n  const visProps = activeVisualization && omit(activeVisualization, ['id', 'ref', 'visualizationId'])\n  return (\n    <Measure \n      bounds\n      onResize={contentRect => {\n        setDimensions(contentRect.bounds)\n      }}\n    >\n      {({ measureRef }) => (\n          <div ref={measureRef} className=\"VisualizationController\">\n          {/* <h2>Visualization controller</h2> */}\n          {\n            activeVisualization ?\n            <>\n              {/* <ul>\n                <li>Id de la visualisation active : <code>{activeVisualization.visualizationId}</code></li>\n                <li>Paramtres spcifiques au caller : <code>{JSON.stringify(visProps)}</code></li>\n              </ul> */}\n              <VisualizationContainer id={activeVisualization.visualizationId} {...visProps} dimensions={dimensions} />\n            </>\n            : <div>Pas de visualisation  afficher</div>\n          }\n        </div>\n      )}\n    </Measure>\n  );\n}\n\nexport default VisualizationController;","import ScrollyPage from './ScrollyPage';\n\nexport default ScrollyPage;","import {useState, useReducer, useEffect} from 'react';\nimport {Helmet} from \"react-helmet\";\nimport {useScrollYPosition } from 'react-use-scroll-position';\n\nimport VisualizationController from '../../components/VisualizationController';\nimport {VisualizationControlContext} from '../../helpers/contexts';\n\n\nconst CENTER_FRACTION = .6;\n\nconst ScrollyPage = ({\n  // Content,\n  ContentSync,\n  title,\n  lang,\n}) => {\n\n  const [activeVisualization, setActiveVisualization] = useState(undefined);\n  const [visualizations, setVisualizations] = useReducer(\n    (state, newState) => ({ ...state, ...newState }),\n    {}\n  )\n  const scrollY = useScrollYPosition();\n\n  const updateCurrentVisualization = () => {\n    // const bodyPos = document.body.getBoundingClientRect();\n      const DISPLACE_Y = window.innerHeight * CENTER_FRACTION;\n      const y = scrollY + DISPLACE_Y;\n      const visualizationEntries = Object.entries(visualizations);\n      let found;\n      // on parcourt la liste  l'envers pour rcuprer\n      // la visualisation la plus haute de la page qui est\n      // au-dessus du milieu de l'cran\n      for (let index = visualizationEntries.length - 1; index >= 0; index--) {\n        const [_id, visualization] = visualizationEntries[index];\n        const { ref } = visualization;\n        if (ref.current) {\n          const { y: initialVisY } = ref.current.getBoundingClientRect();\n          const visY = initialVisY + window.scrollY;\n          if (y > visY) {\n            found = true;\n            if (visualization.visualizationId) {\n              setActiveVisualization(visualization);\n            } else {\n              setActiveVisualization(undefined);\n            }\n            break;\n          }\n        }\n      }\n      if (!found && scrollY < DISPLACE_Y && visualizationEntries.length) {\n        setActiveVisualization(visualizationEntries[0][1])\n      }\n      else if (!found && activeVisualization) {\n        setActiveVisualization(undefined);\n      }\n  }\n\n  /**\n   * Scrollytelling management\n   */\n  useEffect(updateCurrentVisualization, [scrollY, visualizations])\n\n  const onRegisterVisualization = (params) => {\n    const finalParams = {\n      ...params,\n      // data\n    }\n    setVisualizations({ ...visualizations, [params.id]: finalParams });\n  }\n  const onUnregisterVisualization = id => {\n    const newVis = Object.entries(visualizations).reduce((res, [thatId, payload]) => {\n      if (thatId === id) {\n        return res;\n      }\n      return {\n        ...res,\n        [thatId]: payload\n      }\n    }, {})\n    setVisualizations(newVis)\n  }\n  const onBlockClick = (id, ref) => {\n    console.log('on block click', {id, ref})\n  }\n  return (\n    <VisualizationControlContext.Provider\n      value={{\n        activeVisualization,\n        onBlockClick,\n        onRegisterVisualization,\n        onUnregisterVisualization,\n      }}\n    >\n      <Helmet>\n        <title>{title}</title>\n      </Helmet>\n      <div className=\"ScrollyPage\">\n          <section>\n            <ContentSync />\n          </section>\n          <aside>\n            <VisualizationController activeVisualization={activeVisualization} />\n          </aside>\n      </div>\n    </VisualizationControlContext.Provider>\n  )\n}\n\nexport default ScrollyPage;","/* eslint import/no-webpack-loader-syntax : 0 */\nimport ScrollyPage from './pages/ScrollyPage';\n\nimport TestScrollyFr from '!babel-loader!mdx-loader!./contents/fr/test-scrolly.mdx';\nimport testScrollyEn from '!babel-loader!mdx-loader!./contents/en/test-scrolly.mdx';\n\nimport Part1Fr from '!babel-loader!mdx-loader!./contents/fr/partie-1.mdx';\nimport Part1En from '!babel-loader!mdx-loader!./contents/en/part-1.mdx';\n\n// import Part2IntroFr from '!babel-loader!mdx-loader!./contents/fr/partie-2-intro.mdx';\n// import Part2IntroEn from '!babel-loader!mdx-loader!./contents/en/part-2-intro.mdx';\n\nimport Part2IntroFr from '!babel-loader!mdx-loader!./contents/fr/partie-2.mdx';\nimport Part2IntroEn from '!babel-loader!mdx-loader!./contents/en/part-2-intro.mdx';\n\n// import Part21Fr from '!babel-loader!mdx-loader!./contents/fr/partie-2-1.mdx';\n// import Part21En from '!babel-loader!mdx-loader!./contents/en/part-2-1.mdx';\n\n// import Part22Fr from '!babel-loader!mdx-loader!./contents/fr/partie-2-2.mdx';\n// import Part22En from '!babel-loader!mdx-loader!./contents/en/part-2-2.mdx';\n\n// import Part23Fr from '!babel-loader!mdx-loader!./contents/fr/partie-2-3.mdx';\n// import Part23En from '!babel-loader!mdx-loader!./contents/en/part-2-3.mdx';\n\nimport Part3Fr from '!babel-loader!mdx-loader!./contents/fr/partie-3.mdx';\nimport Part3En from '!babel-loader!mdx-loader!./contents/en/part-3.mdx';\n\nimport AboutFr from '!babel-loader!mdx-loader!./contents/fr/a-propos.mdx';\nimport AboutEn from '!babel-loader!mdx-loader!./contents/en/about.mdx';\n\n\nconst summary = [\n  // {\n  //   routes: {\n  //     fr: 'scrolly',\n  //     en: 'scrolly'\n  //   },\n  //   titles: {\n  //     fr: 'Tests scrollytelling',\n  //     en: 'Scrollytelling test'\n  //   },\n  //   contents: {\n  //     fr: 'fr/test-scrolly.mdx',\n  //     en: 'en/test-scrolly.mdx'\n  //   },\n  //   contentsProcessed: {\n  //     fr: TestScrollyFr,\n  //     en: testScrollyEn,\n  //   },\n  //   Component: ScrollyPage\n  // },\n  {\n    routes: {\n      fr: 'partie-1',\n      en: 'part-1'\n    },\n    titles: {\n      fr: 'Partie 1 - Le dclin de la rgion de La Rochelle suite  la perte du Canada',\n      en: 'Partie 1 - The decline of La Rochelle region after Canada\\'s loss'\n    },\n    contents: {\n      fr: 'fr/partie-1.mdx',\n      en: 'en/part-1.mdx'\n    },\n    contentsProcessed: {\n      fr: Part1Fr,\n      en: Part1En,\n    },\n    Component: ScrollyPage\n  },\n  {\n    routes: {\n      fr: 'partie-2',\n      en: 'part-2'\n    },\n    titles: {\n      fr: 'Partie 2 - Une forte spcialisation portuaire: le cas de la traite ngrire, du commerce du sel et de l\\'eau-de-vie',\n      en: 'Partie 2 - A strong portual specialization'\n    },\n    contents: {\n      fr: 'fr/partie-2.mdx',\n      en: 'en/part-2.mdx'\n    },\n    contentsProcessed: {\n      fr: Part2IntroFr,\n      en: Part2IntroEn,\n    },\n    Component: ScrollyPage\n  },\n  // {\n  //   routes: {\n  //     fr: 'partie-2',\n  //     en: 'part-2'\n  //   },\n  //   titles: {\n  //     fr: 'Partie 2 - Une forte spcialisation portuaire: le cas de la traite ngrire, du commerce du sel et de l\\'eau-de-vie',\n  //     en: 'Partie 2 - A strong portual specialization'\n  //   },\n  //   contents: {\n  //     fr: 'fr/partie-2-intro.mdx',\n  //     en: 'en/part-2-intro.mdx'\n  //   },\n  //   contentsProcessed: {\n  //     fr: Part2IntroFr,\n  //     en: Part2IntroEn,\n  //   },\n  // },\n  // {\n  //   routes: {\n  //     fr: 'partie-2-1',\n  //     en: 'part-2-1'\n  //   },\n  //   titles: {\n  //     fr: 'Partie 2.1 - La Rochelle et le commerce triangulaire',\n  //     en: 'Partie 2.1 - La Rochelle and triangular trade'\n  //   },\n  //   contents: {\n  //     fr: 'fr/partie-2-1.mdx',\n  //     en: 'en/part-2-1.mdx'\n  //   },\n  //   contentsProcessed: {\n  //     fr: Part21Fr,\n  //     en: Part21En,\n  //   },\n  // },\n  // {\n  //   routes: {\n  //     fr: 'partie-2-2',\n  //     en: 'part-2-2'\n  //   },\n  //   titles: {\n  //     fr: 'Partie 2.2 - Le commerce de leau-de-vie',\n  //     en: 'Partie 2.2 - Eau-de-vie trade'\n  //   },\n  //   contents: {\n  //     fr: 'fr/partie-2-2.mdx',\n  //     en: 'en/part-2-2.mdx'\n  //   },\n  //   contentsProcessed: {\n  //     fr: Part22Fr,\n  //     en: Part22En,\n  //   },\n  // },\n  // {\n  //   routes: {\n  //     fr: 'partie-2-3',\n  //     en: 'part-2-3'\n  //   },\n  //   titles: {\n  //     fr: 'Partie 2.3 - Marennes et le commerce du sel',\n  //     en: 'Partie 2.3 - Marennes and salt trade'\n  //   },\n  //   contents: {\n  //     fr: 'fr/partie-2-3.mdx',\n  //     en: 'en/part-2-3.mdx'\n  //   },\n  //   contentsProcessed: {\n  //     fr: Part23Fr,\n  //     en: Part23En,\n  //   },\n  // },\n  {\n    routes: {\n      fr: 'partie-3',\n      en: 'part-3'\n    },\n    titles: {\n      fr: 'Partie 3 - La Rochelle, port dominant mais pas structurant',\n      en: 'Part 3 - La Rochelle port, dominating but not structuring'\n    },\n    contents: {\n      fr: 'fr/partie-3.mdx',\n      en: 'en/part-3.mdx'\n    },\n    contentsProcessed: {\n      fr: Part3Fr,\n      en: Part3En,\n    },\n    Component: ScrollyPage\n  },\n  {\n    routes: {\n      fr: 'a-propos',\n      en: 'about'\n    },\n    titles: {\n      fr: ' propos',\n      en: 'About'\n    },\n    contents: {\n      fr: 'fr/a-propos.mdx',\n      en: 'en/about.mdx'\n    },\n    contentsProcessed: {\n      fr: AboutFr,\n      en: AboutEn,\n    },\n  },\n]\n\n\nexport default summary;","\n/* import external libraries */\nimport React, { useState, useEffect } from \"react\";\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n  useHistory,\n  useLocation,\n} from \"react-router-dom\";\n\nimport uniq from 'lodash/uniq';\nimport {csvParse, tsvParse} from 'd3-dsv';\n\n\nimport axios from 'axios';\nimport visualizationsList from './visualizationsList';\n\n/* import pages */\nimport Home from './pages/Home';\nimport Atlas from \"./pages/Atlas\";\n\n/* import components */\nimport HeaderNav from './components/HeaderNav';\nimport Loader from './components/Loader/Loader';\n\nimport PlainPage from './pages/PlainPage';\n\nimport {DatasetsContext} from './helpers/contexts';\n\n/* import other assets */\nimport './App.scss';\n\nimport routes from './summary'\n\nconst LANGUAGES = ['fr', 'en'];\n\nfunction App() {\n\n  const history = useHistory();\n  const location = useLocation();\n  const [datasets, setDatasets] = useState({})\n  const [loadingFraction, setLoadingFraction] = useState(0);\n\n  /**\n   * loading all datasets\n   */\n   useEffect(() => {\n    // loading all datasets from the atlas\n    // @todo do this on a page-to-page basis if datasets happens to be to big/numerous\n    const datasetsNames = uniq(visualizationsList.filter(d => d.datasets).reduce((res, d) => [...res, ...d.datasets.split(',').map(d => d.trim())], []));\n    datasetsNames.reduce((cur, datasetName, datasetIndex) => {\n      return cur.then((res) => new Promise((resolve, reject) => {\n\n        const url = datasetName ? `${process.env.PUBLIC_URL}/data/${datasetName}` : undefined;\n        if (url) {\n          axios.get(url, {\n            onDownloadProgress: progressEvent => {\n              const status = progressEvent.loaded / progressEvent.total;\n              const globalFraction = datasetIndex / datasetsNames.length;\n              setLoadingFraction(globalFraction + status / routes.length);\n            }\n          })\n            .then(({ data: inputData }) => {\n              setTimeout(() => {\n                let loadedData = inputData;\n                if (url.split('.').pop() === 'csv') {\n                  loadedData = csvParse(inputData);\n                } else if (url.split('.').pop() === 'tsv') {\n                  loadedData = tsvParse(inputData);\n                }\n                resolve({...res, [datasetName]: loadedData})\n              })\n            })\n            .catch(reject)\n        } else return resolve(res);\n\n      }))\n    }, Promise.resolve({}))\n    .then(newDatasets => {\n      setLoadingFraction(1);\n      setDatasets(newDatasets)\n    })\n    .catch(console.log)\n  }, [])\n\n  const onLangChange = (ln) => {\n    const otherLang = ln === 'fr' ? 'en' : 'fr';\n\n    const { pathname } = location;\n    if (pathname.includes('atlas')) {\n      const visualizationId = pathname.split('/atlas/').pop();\n      history.push(`/${ln}/atlas/${visualizationId || ''}`);\n    } else {\n      const pathOtherLang = history.location.pathname.split('/').pop();\n      const routeItem = routes.find(route => {\n        return route.routes[otherLang] === pathOtherLang;\n      });\n      if (routeItem) {\n        history.push(`/${ln}/page/${routeItem.routes[ln]}`);\n      } else {\n        history.push(`/${ln}/`);\n      }\n    }\n  }\n  const renderRoute = ({\n    Content,\n    ContentSync,\n    ThatComponent = PlainPage,\n    title,\n  }) => (\n    <>\n      <ThatComponent\n        {\n        ...{\n          Content,\n          ContentSync,\n          title\n        }\n        }\n      />\n    </>\n\n  );\n  return (\n    <DatasetsContext.Provider value={datasets}>\n      <div id=\"wrapper\">\n        <header>\n          <HeaderNav {...{ onLangChange, routes }} />\n        </header>\n        <main>\n          <Switch>\n            {\n              LANGUAGES.map(lang => {\n                return routes.map(({\n                  titles,\n                  routes: inputRoute,\n                  contents,\n                  Component: ThatComponent,\n                  contentsProcessed\n                }, index) => {\n                  const route = `/${lang}/page/${inputRoute[lang]}`\n                  const title = titles[lang];\n                  const Content = React.lazy(() => import(`!babel-loader!mdx-loader!./contents/${contents[lang]}`));\n                  const ContentSync = contentsProcessed[lang]\n                  return (\n                    <Route key={index} path={route} exact>\n                      {renderRoute({ Content, ThatComponent, title, ContentSync })}\n                    </Route>\n                  )\n                })\n              })\n            }\n            <Route path=\"/:lang/atlas/:visualizationId?\" component={Atlas} />\n            <Route path=\"/:lang\" exact component={Home} />\n            <Redirect to={`/fr/`} />\n          </Switch>\n          {\n            datasets ?\n            null :\n            <Loader percentsLoaded={loadingFraction * 100} />\n          }\n        </main>\n        <footer></footer>\n        \n        \n      </div>\n    </DatasetsContext.Provider>\n  );\n}\n\n\nexport default function Wrapper() {\n  return (\n    <Router>\n      <App />\n    </Router>\n  )\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\nimport React from 'react';\n\nexport const VisualizationControlContext = React.createContext({\n\n})\n\nexport const DatasetsContext = React.createContext({\n\n})\n"],"sourceRoot":""}